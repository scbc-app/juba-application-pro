(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Sh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ku={exports:{}},Mo={},Yu={exports:{}},X={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var is=Symbol.for("react.element"),bh=Symbol.for("react.portal"),Ch=Symbol.for("react.fragment"),Eh=Symbol.for("react.strict_mode"),kh=Symbol.for("react.profiler"),_h=Symbol.for("react.provider"),Th=Symbol.for("react.context"),Ih=Symbol.for("react.forward_ref"),Ah=Symbol.for("react.suspense"),Rh=Symbol.for("react.memo"),Mh=Symbol.for("react.lazy"),Za=Symbol.iterator;function Ph(e){return e===null||typeof e!="object"?null:(e=Za&&e[Za]||e["@@iterator"],typeof e=="function"?e:null)}var Qu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Xu=Object.assign,Zu={};function fr(e,t,n){this.props=e,this.context=t,this.refs=Zu,this.updater=n||Qu}fr.prototype.isReactComponent={};fr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};fr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ef(){}ef.prototype=fr.prototype;function zl(e,t,n){this.props=e,this.context=t,this.refs=Zu,this.updater=n||Qu}var ql=zl.prototype=new ef;ql.constructor=zl;Xu(ql,fr.prototype);ql.isPureReactComponent=!0;var ec=Array.isArray,tf=Object.prototype.hasOwnProperty,$l={current:null},nf={key:!0,ref:!0,__self:!0,__source:!0};function rf(e,t,n){var r,s={},i=null,l=null;if(t!=null)for(r in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)tf.call(t,r)&&!nf.hasOwnProperty(r)&&(s[r]=t[r]);var d=arguments.length-2;if(d===1)s.children=n;else if(1<d){for(var u=Array(d),f=0;f<d;f++)u[f]=arguments[f+2];s.children=u}if(e&&e.defaultProps)for(r in d=e.defaultProps,d)s[r]===void 0&&(s[r]=d[r]);return{$$typeof:is,type:e,key:i,ref:l,props:s,_owner:$l.current}}function jh(e,t){return{$$typeof:is,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Wl(e){return typeof e=="object"&&e!==null&&e.$$typeof===is}function Lh(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var tc=/\/+/g;function di(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Lh(""+e.key):t.toString(36)}function Vs(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case is:case bh:l=!0}}if(l)return l=e,s=s(l),e=r===""?"."+di(l,0):r,ec(s)?(n="",e!=null&&(n=e.replace(tc,"$&/")+"/"),Vs(s,t,n,"",function(f){return f})):s!=null&&(Wl(s)&&(s=jh(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(tc,"$&/")+"/")+e)),t.push(s)),1;if(l=0,r=r===""?".":r+":",ec(e))for(var d=0;d<e.length;d++){i=e[d];var u=r+di(i,d);l+=Vs(i,t,n,u,s)}else if(u=Ph(e),typeof u=="function")for(e=u.call(e),d=0;!(i=e.next()).done;)i=i.value,u=r+di(i,d++),l+=Vs(i,t,n,u,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function fs(e,t,n){if(e==null)return e;var r=[],s=0;return Vs(e,r,"","",function(i){return t.call(n,i,s++)}),r}function Dh(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ge={current:null},Hs={transition:null},Fh={ReactCurrentDispatcher:Ge,ReactCurrentBatchConfig:Hs,ReactCurrentOwner:$l};function sf(){throw Error("act(...) is not supported in production builds of React.")}X.Children={map:fs,forEach:function(e,t,n){fs(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return fs(e,function(){t++}),t},toArray:function(e){return fs(e,function(t){return t})||[]},only:function(e){if(!Wl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};X.Component=fr;X.Fragment=Ch;X.Profiler=kh;X.PureComponent=zl;X.StrictMode=Eh;X.Suspense=Ah;X.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fh;X.act=sf;X.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Xu({},e.props),s=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=$l.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var d=e.type.defaultProps;for(u in t)tf.call(t,u)&&!nf.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&d!==void 0?d[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){d=Array(u);for(var f=0;f<u;f++)d[f]=arguments[f+2];r.children=d}return{$$typeof:is,type:e.type,key:s,ref:i,props:r,_owner:l}};X.createContext=function(e){return e={$$typeof:Th,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:_h,_context:e},e.Consumer=e};X.createElement=rf;X.createFactory=function(e){var t=rf.bind(null,e);return t.type=e,t};X.createRef=function(){return{current:null}};X.forwardRef=function(e){return{$$typeof:Ih,render:e}};X.isValidElement=Wl;X.lazy=function(e){return{$$typeof:Mh,_payload:{_status:-1,_result:e},_init:Dh}};X.memo=function(e,t){return{$$typeof:Rh,type:e,compare:t===void 0?null:t}};X.startTransition=function(e){var t=Hs.transition;Hs.transition={};try{e()}finally{Hs.transition=t}};X.unstable_act=sf;X.useCallback=function(e,t){return Ge.current.useCallback(e,t)};X.useContext=function(e){return Ge.current.useContext(e)};X.useDebugValue=function(){};X.useDeferredValue=function(e){return Ge.current.useDeferredValue(e)};X.useEffect=function(e,t){return Ge.current.useEffect(e,t)};X.useId=function(){return Ge.current.useId()};X.useImperativeHandle=function(e,t,n){return Ge.current.useImperativeHandle(e,t,n)};X.useInsertionEffect=function(e,t){return Ge.current.useInsertionEffect(e,t)};X.useLayoutEffect=function(e,t){return Ge.current.useLayoutEffect(e,t)};X.useMemo=function(e,t){return Ge.current.useMemo(e,t)};X.useReducer=function(e,t,n){return Ge.current.useReducer(e,t,n)};X.useRef=function(e){return Ge.current.useRef(e)};X.useState=function(e){return Ge.current.useState(e)};X.useSyncExternalStore=function(e,t,n){return Ge.current.useSyncExternalStore(e,t,n)};X.useTransition=function(){return Ge.current.useTransition()};X.version="18.3.1";Yu.exports=X;var k=Yu.exports;const eo=Sh(k);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uh=k,Vh=Symbol.for("react.element"),Hh=Symbol.for("react.fragment"),Bh=Object.prototype.hasOwnProperty,Gh=Uh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Oh={key:!0,ref:!0,__self:!0,__source:!0};function of(e,t,n){var r,s={},i=null,l=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)Bh.call(t,r)&&!Oh.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Vh,type:e,key:i,ref:l,props:s,_owner:Gh.current}}Mo.Fragment=Hh;Mo.jsx=of;Mo.jsxs=of;Ku.exports=Mo;var o=Ku.exports,lf={exports:{}},nt={},af={exports:{}},cf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(j,H){var W=j.length;j.push(H);e:for(;0<W;){var Z=W-1>>>1,B=j[Z];if(0<s(B,H))j[Z]=H,j[W]=B,W=Z;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var H=j[0],W=j.pop();if(W!==H){j[0]=W;e:for(var Z=0,B=j.length,re=B>>>1;Z<re;){var ae=2*(Z+1)-1,oe=j[ae],ne=ae+1,z=j[ne];if(0>s(oe,W))ne<B&&0>s(z,oe)?(j[Z]=z,j[ne]=W,Z=ne):(j[Z]=oe,j[ae]=W,Z=ae);else if(ne<B&&0>s(z,W))j[Z]=z,j[ne]=W,Z=ne;else break e}}return H}function s(j,H){var W=j.sortIndex-H.sortIndex;return W!==0?W:j.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,d=l.now();e.unstable_now=function(){return l.now()-d}}var u=[],f=[],p=1,m=null,h=3,g=!1,w=!1,N=!1,S=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(j){for(var H=n(f);H!==null;){if(H.callback===null)r(f);else if(H.startTime<=j)r(f),H.sortIndex=H.expirationTime,t(u,H);else break;H=n(f)}}function C(j){if(N=!1,y(j),!w)if(n(u)!==null)w=!0,q(b);else{var H=n(f);H!==null&&J(C,H.startTime-j)}}function b(j,H){w=!1,N&&(N=!1,x(I),I=-1),g=!0;var W=h;try{for(y(H),m=n(u);m!==null&&(!(m.expirationTime>H)||j&&!L());){var Z=m.callback;if(typeof Z=="function"){m.callback=null,h=m.priorityLevel;var B=Z(m.expirationTime<=H);H=e.unstable_now(),typeof B=="function"?m.callback=B:m===n(u)&&r(u),y(H)}else r(u);m=n(u)}if(m!==null)var re=!0;else{var ae=n(f);ae!==null&&J(C,ae.startTime-H),re=!1}return re}finally{m=null,h=W,g=!1}}var E=!1,T=null,I=-1,_=5,A=-1;function L(){return!(e.unstable_now()-A<_)}function M(){if(T!==null){var j=e.unstable_now();A=j;var H=!0;try{H=T(!0,j)}finally{H?P():(E=!1,T=null)}}else E=!1}var P;if(typeof v=="function")P=function(){v(M)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,F=R.port2;R.port1.onmessage=M,P=function(){F.postMessage(null)}}else P=function(){S(M,0)};function q(j){T=j,E||(E=!0,P())}function J(j,H){I=S(function(){j(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_continueExecution=function(){w||g||(w=!0,q(b))},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(j){switch(h){case 1:case 2:case 3:var H=3;break;default:H=h}var W=h;h=H;try{return j()}finally{h=W}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(j,H){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var W=h;h=j;try{return H()}finally{h=W}},e.unstable_scheduleCallback=function(j,H,W){var Z=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?Z+W:Z):W=Z,j){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=W+B,j={id:p++,callback:H,priorityLevel:j,startTime:W,expirationTime:B,sortIndex:-1},W>Z?(j.sortIndex=W,t(f,j),n(u)===null&&j===n(f)&&(N?(x(I),I=-1):N=!0,J(C,W-Z))):(j.sortIndex=B,t(u,j),w||g||(w=!0,q(b))),j},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(j){var H=h;return function(){var W=h;h=H;try{return j.apply(this,arguments)}finally{h=W}}}})(cf);af.exports=cf;var zh=af.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qh=k,tt=zh;function D(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var df=new Set,Or={};function Tn(e,t){sr(e,t),sr(e+"Capture",t)}function sr(e,t){for(Or[e]=t,e=0;e<t.length;e++)df.add(t[e])}var Pt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ui=Object.prototype.hasOwnProperty,$h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nc={},rc={};function Wh(e){return Ui.call(rc,e)?!0:Ui.call(nc,e)?!1:$h.test(e)?rc[e]=!0:(nc[e]=!0,!1)}function Jh(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Kh(e,t,n,r){if(t===null||typeof t>"u"||Jh(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Oe(e,t,n,r,s,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var Me={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Me[e]=new Oe(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Me[t]=new Oe(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Me[e]=new Oe(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Me[e]=new Oe(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Me[e]=new Oe(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Me[e]=new Oe(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Me[e]=new Oe(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Me[e]=new Oe(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Me[e]=new Oe(e,5,!1,e.toLowerCase(),null,!1,!1)});var Jl=/[\-:]([a-z])/g;function Kl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Jl,Kl);Me[t]=new Oe(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Jl,Kl);Me[t]=new Oe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Jl,Kl);Me[t]=new Oe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Me[e]=new Oe(e,1,!1,e.toLowerCase(),null,!1,!1)});Me.xlinkHref=new Oe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Me[e]=new Oe(e,1,!1,e.toLowerCase(),null,!0,!0)});function Yl(e,t,n,r){var s=Me.hasOwnProperty(t)?Me[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Kh(t,n,s,r)&&(n=null),r||s===null?Wh(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Ut=qh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ps=Symbol.for("react.element"),Dn=Symbol.for("react.portal"),Fn=Symbol.for("react.fragment"),Ql=Symbol.for("react.strict_mode"),Vi=Symbol.for("react.profiler"),uf=Symbol.for("react.provider"),ff=Symbol.for("react.context"),Xl=Symbol.for("react.forward_ref"),Hi=Symbol.for("react.suspense"),Bi=Symbol.for("react.suspense_list"),Zl=Symbol.for("react.memo"),Ot=Symbol.for("react.lazy"),pf=Symbol.for("react.offscreen"),sc=Symbol.iterator;function yr(e){return e===null||typeof e!="object"?null:(e=sc&&e[sc]||e["@@iterator"],typeof e=="function"?e:null)}var ge=Object.assign,ui;function Ir(e){if(ui===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ui=t&&t[1]||""}return`
`+ui+e}var fi=!1;function pi(e,t){if(!e||fi)return"";fi=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var r=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){r=f}e.call(t.prototype)}else{try{throw Error()}catch(f){r=f}e()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var s=f.stack.split(`
`),i=r.stack.split(`
`),l=s.length-1,d=i.length-1;1<=l&&0<=d&&s[l]!==i[d];)d--;for(;1<=l&&0<=d;l--,d--)if(s[l]!==i[d]){if(l!==1||d!==1)do if(l--,d--,0>d||s[l]!==i[d]){var u=`
`+s[l].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=l&&0<=d);break}}}finally{fi=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ir(e):""}function Yh(e){switch(e.tag){case 5:return Ir(e.type);case 16:return Ir("Lazy");case 13:return Ir("Suspense");case 19:return Ir("SuspenseList");case 0:case 2:case 15:return e=pi(e.type,!1),e;case 11:return e=pi(e.type.render,!1),e;case 1:return e=pi(e.type,!0),e;default:return""}}function Gi(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Fn:return"Fragment";case Dn:return"Portal";case Vi:return"Profiler";case Ql:return"StrictMode";case Hi:return"Suspense";case Bi:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ff:return(e.displayName||"Context")+".Consumer";case uf:return(e._context.displayName||"Context")+".Provider";case Xl:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Zl:return t=e.displayName||null,t!==null?t:Gi(e.type)||"Memo";case Ot:t=e._payload,e=e._init;try{return Gi(e(t))}catch{}}return null}function Qh(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gi(t);case 8:return t===Ql?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function sn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function mf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Xh(e){var t=mf(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(l){r=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ms(e){e._valueTracker||(e._valueTracker=Xh(e))}function hf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=mf(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function to(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Oi(e,t){var n=t.checked;return ge({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function oc(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=sn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function gf(e,t){t=t.checked,t!=null&&Yl(e,"checked",t,!1)}function zi(e,t){gf(e,t);var n=sn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?qi(e,t.type,n):t.hasOwnProperty("defaultValue")&&qi(e,t.type,sn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ic(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function qi(e,t,n){(t!=="number"||to(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ar=Array.isArray;function Yn(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+sn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function $i(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(D(91));return ge({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function lc(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(D(92));if(Ar(n)){if(1<n.length)throw Error(D(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:sn(n)}}function xf(e,t){var n=sn(t.value),r=sn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function ac(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function vf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wi(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?vf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var hs,yf=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(hs=hs||document.createElement("div"),hs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=hs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function zr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var jr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zh=["Webkit","ms","Moz","O"];Object.keys(jr).forEach(function(e){Zh.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),jr[t]=jr[e]})});function wf(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||jr.hasOwnProperty(e)&&jr[e]?(""+t).trim():t+"px"}function Nf(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=wf(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var e0=ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ji(e,t){if(t){if(e0[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(D(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(D(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(D(61))}if(t.style!=null&&typeof t.style!="object")throw Error(D(62))}}function Ki(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yi=null;function ea(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Qi=null,Qn=null,Xn=null;function cc(e){if(e=cs(e)){if(typeof Qi!="function")throw Error(D(280));var t=e.stateNode;t&&(t=Fo(t),Qi(e.stateNode,e.type,t))}}function Sf(e){Qn?Xn?Xn.push(e):Xn=[e]:Qn=e}function bf(){if(Qn){var e=Qn,t=Xn;if(Xn=Qn=null,cc(e),t)for(e=0;e<t.length;e++)cc(t[e])}}function Cf(e,t){return e(t)}function Ef(){}var mi=!1;function kf(e,t,n){if(mi)return e(t,n);mi=!0;try{return Cf(e,t,n)}finally{mi=!1,(Qn!==null||Xn!==null)&&(Ef(),bf())}}function qr(e,t){var n=e.stateNode;if(n===null)return null;var r=Fo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(D(231,t,typeof n));return n}var Xi=!1;if(Pt)try{var wr={};Object.defineProperty(wr,"passive",{get:function(){Xi=!0}}),window.addEventListener("test",wr,wr),window.removeEventListener("test",wr,wr)}catch{Xi=!1}function t0(e,t,n,r,s,i,l,d,u){var f=Array.prototype.slice.call(arguments,3);try{t.apply(n,f)}catch(p){this.onError(p)}}var Lr=!1,no=null,ro=!1,Zi=null,n0={onError:function(e){Lr=!0,no=e}};function r0(e,t,n,r,s,i,l,d,u){Lr=!1,no=null,t0.apply(n0,arguments)}function s0(e,t,n,r,s,i,l,d,u){if(r0.apply(this,arguments),Lr){if(Lr){var f=no;Lr=!1,no=null}else throw Error(D(198));ro||(ro=!0,Zi=f)}}function In(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function _f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function dc(e){if(In(e)!==e)throw Error(D(188))}function o0(e){var t=e.alternate;if(!t){if(t=In(e),t===null)throw Error(D(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return dc(s),e;if(i===r)return dc(s),t;i=i.sibling}throw Error(D(188))}if(n.return!==r.return)n=s,r=i;else{for(var l=!1,d=s.child;d;){if(d===n){l=!0,n=s,r=i;break}if(d===r){l=!0,r=s,n=i;break}d=d.sibling}if(!l){for(d=i.child;d;){if(d===n){l=!0,n=i,r=s;break}if(d===r){l=!0,r=i,n=s;break}d=d.sibling}if(!l)throw Error(D(189))}}if(n.alternate!==r)throw Error(D(190))}if(n.tag!==3)throw Error(D(188));return n.stateNode.current===n?e:t}function Tf(e){return e=o0(e),e!==null?If(e):null}function If(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=If(e);if(t!==null)return t;e=e.sibling}return null}var Af=tt.unstable_scheduleCallback,uc=tt.unstable_cancelCallback,i0=tt.unstable_shouldYield,l0=tt.unstable_requestPaint,ve=tt.unstable_now,a0=tt.unstable_getCurrentPriorityLevel,ta=tt.unstable_ImmediatePriority,Rf=tt.unstable_UserBlockingPriority,so=tt.unstable_NormalPriority,c0=tt.unstable_LowPriority,Mf=tt.unstable_IdlePriority,Po=null,kt=null;function d0(e){if(kt&&typeof kt.onCommitFiberRoot=="function")try{kt.onCommitFiberRoot(Po,e,void 0,(e.current.flags&128)===128)}catch{}}var xt=Math.clz32?Math.clz32:p0,u0=Math.log,f0=Math.LN2;function p0(e){return e>>>=0,e===0?32:31-(u0(e)/f0|0)|0}var gs=64,xs=4194304;function Rr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function oo(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,l=n&268435455;if(l!==0){var d=l&~s;d!==0?r=Rr(d):(i&=l,i!==0&&(r=Rr(i)))}else l=n&~s,l!==0?r=Rr(l):i!==0&&(r=Rr(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-xt(t),s=1<<n,r|=e[n],t&=~s;return r}function m0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function h0(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-xt(i),d=1<<l,u=s[l];u===-1?(!(d&n)||d&r)&&(s[l]=m0(d,t)):u<=t&&(e.expiredLanes|=d),i&=~d}}function el(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Pf(){var e=gs;return gs<<=1,!(gs&4194240)&&(gs=64),e}function hi(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ls(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-xt(t),e[t]=n}function g0(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-xt(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function na(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-xt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var se=0;function jf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Lf,ra,Df,Ff,Uf,tl=!1,vs=[],Yt=null,Qt=null,Xt=null,$r=new Map,Wr=new Map,qt=[],x0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fc(e,t){switch(e){case"focusin":case"focusout":Yt=null;break;case"dragenter":case"dragleave":Qt=null;break;case"mouseover":case"mouseout":Xt=null;break;case"pointerover":case"pointerout":$r.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wr.delete(t.pointerId)}}function Nr(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=cs(t),t!==null&&ra(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function v0(e,t,n,r,s){switch(t){case"focusin":return Yt=Nr(Yt,e,t,n,r,s),!0;case"dragenter":return Qt=Nr(Qt,e,t,n,r,s),!0;case"mouseover":return Xt=Nr(Xt,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return $r.set(i,Nr($r.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Wr.set(i,Nr(Wr.get(i)||null,e,t,n,r,s)),!0}return!1}function Vf(e){var t=xn(e.target);if(t!==null){var n=In(t);if(n!==null){if(t=n.tag,t===13){if(t=_f(n),t!==null){e.blockedOn=t,Uf(e.priority,function(){Df(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Bs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=nl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Yi=r,n.target.dispatchEvent(r),Yi=null}else return t=cs(n),t!==null&&ra(t),e.blockedOn=n,!1;t.shift()}return!0}function pc(e,t,n){Bs(e)&&n.delete(t)}function y0(){tl=!1,Yt!==null&&Bs(Yt)&&(Yt=null),Qt!==null&&Bs(Qt)&&(Qt=null),Xt!==null&&Bs(Xt)&&(Xt=null),$r.forEach(pc),Wr.forEach(pc)}function Sr(e,t){e.blockedOn===t&&(e.blockedOn=null,tl||(tl=!0,tt.unstable_scheduleCallback(tt.unstable_NormalPriority,y0)))}function Jr(e){function t(s){return Sr(s,e)}if(0<vs.length){Sr(vs[0],e);for(var n=1;n<vs.length;n++){var r=vs[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Yt!==null&&Sr(Yt,e),Qt!==null&&Sr(Qt,e),Xt!==null&&Sr(Xt,e),$r.forEach(t),Wr.forEach(t),n=0;n<qt.length;n++)r=qt[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<qt.length&&(n=qt[0],n.blockedOn===null);)Vf(n),n.blockedOn===null&&qt.shift()}var Zn=Ut.ReactCurrentBatchConfig,io=!0;function w0(e,t,n,r){var s=se,i=Zn.transition;Zn.transition=null;try{se=1,sa(e,t,n,r)}finally{se=s,Zn.transition=i}}function N0(e,t,n,r){var s=se,i=Zn.transition;Zn.transition=null;try{se=4,sa(e,t,n,r)}finally{se=s,Zn.transition=i}}function sa(e,t,n,r){if(io){var s=nl(e,t,n,r);if(s===null)Ei(e,t,r,lo,n),fc(e,r);else if(v0(s,e,t,n,r))r.stopPropagation();else if(fc(e,r),t&4&&-1<x0.indexOf(e)){for(;s!==null;){var i=cs(s);if(i!==null&&Lf(i),i=nl(e,t,n,r),i===null&&Ei(e,t,r,lo,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Ei(e,t,r,null,n)}}var lo=null;function nl(e,t,n,r){if(lo=null,e=ea(r),e=xn(e),e!==null)if(t=In(e),t===null)e=null;else if(n=t.tag,n===13){if(e=_f(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return lo=e,null}function Hf(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(a0()){case ta:return 1;case Rf:return 4;case so:case c0:return 16;case Mf:return 536870912;default:return 16}default:return 16}}var Wt=null,oa=null,Gs=null;function Bf(){if(Gs)return Gs;var e,t=oa,n=t.length,r,s="value"in Wt?Wt.value:Wt.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var l=n-e;for(r=1;r<=l&&t[n-r]===s[i-r];r++);return Gs=s.slice(e,1<r?1-r:void 0)}function Os(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ys(){return!0}function mc(){return!1}function rt(e){function t(n,r,s,i,l){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var d in e)e.hasOwnProperty(d)&&(n=e[d],this[d]=n?n(i):i[d]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ys:mc,this.isPropagationStopped=mc,this}return ge(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ys)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ys)},persist:function(){},isPersistent:ys}),t}var pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ia=rt(pr),as=ge({},pr,{view:0,detail:0}),S0=rt(as),gi,xi,br,jo=ge({},as,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:la,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==br&&(br&&e.type==="mousemove"?(gi=e.screenX-br.screenX,xi=e.screenY-br.screenY):xi=gi=0,br=e),gi)},movementY:function(e){return"movementY"in e?e.movementY:xi}}),hc=rt(jo),b0=ge({},jo,{dataTransfer:0}),C0=rt(b0),E0=ge({},as,{relatedTarget:0}),vi=rt(E0),k0=ge({},pr,{animationName:0,elapsedTime:0,pseudoElement:0}),_0=rt(k0),T0=ge({},pr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),I0=rt(T0),A0=ge({},pr,{data:0}),gc=rt(A0),R0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},M0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},P0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function j0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=P0[e])?!!t[e]:!1}function la(){return j0}var L0=ge({},as,{key:function(e){if(e.key){var t=R0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Os(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?M0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:la,charCode:function(e){return e.type==="keypress"?Os(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Os(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),D0=rt(L0),F0=ge({},jo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xc=rt(F0),U0=ge({},as,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:la}),V0=rt(U0),H0=ge({},pr,{propertyName:0,elapsedTime:0,pseudoElement:0}),B0=rt(H0),G0=ge({},jo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),O0=rt(G0),z0=[9,13,27,32],aa=Pt&&"CompositionEvent"in window,Dr=null;Pt&&"documentMode"in document&&(Dr=document.documentMode);var q0=Pt&&"TextEvent"in window&&!Dr,Gf=Pt&&(!aa||Dr&&8<Dr&&11>=Dr),vc=" ",yc=!1;function Of(e,t){switch(e){case"keyup":return z0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Un=!1;function $0(e,t){switch(e){case"compositionend":return zf(t);case"keypress":return t.which!==32?null:(yc=!0,vc);case"textInput":return e=t.data,e===vc&&yc?null:e;default:return null}}function W0(e,t){if(Un)return e==="compositionend"||!aa&&Of(e,t)?(e=Bf(),Gs=oa=Wt=null,Un=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Gf&&t.locale!=="ko"?null:t.data;default:return null}}var J0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!J0[e.type]:t==="textarea"}function qf(e,t,n,r){Sf(r),t=ao(t,"onChange"),0<t.length&&(n=new ia("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Fr=null,Kr=null;function K0(e){np(e,0)}function Lo(e){var t=Bn(e);if(hf(t))return e}function Y0(e,t){if(e==="change")return t}var $f=!1;if(Pt){var yi;if(Pt){var wi="oninput"in document;if(!wi){var Nc=document.createElement("div");Nc.setAttribute("oninput","return;"),wi=typeof Nc.oninput=="function"}yi=wi}else yi=!1;$f=yi&&(!document.documentMode||9<document.documentMode)}function Sc(){Fr&&(Fr.detachEvent("onpropertychange",Wf),Kr=Fr=null)}function Wf(e){if(e.propertyName==="value"&&Lo(Kr)){var t=[];qf(t,Kr,e,ea(e)),kf(K0,t)}}function Q0(e,t,n){e==="focusin"?(Sc(),Fr=t,Kr=n,Fr.attachEvent("onpropertychange",Wf)):e==="focusout"&&Sc()}function X0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Lo(Kr)}function Z0(e,t){if(e==="click")return Lo(t)}function eg(e,t){if(e==="input"||e==="change")return Lo(t)}function tg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Nt=typeof Object.is=="function"?Object.is:tg;function Yr(e,t){if(Nt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ui.call(t,s)||!Nt(e[s],t[s]))return!1}return!0}function bc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Cc(e,t){var n=bc(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=bc(n)}}function Jf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Jf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Kf(){for(var e=window,t=to();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=to(e.document)}return t}function ca(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function ng(e){var t=Kf(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Jf(n.ownerDocument.documentElement,n)){if(r!==null&&ca(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=Cc(n,i);var l=Cc(n,r);s&&l&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var rg=Pt&&"documentMode"in document&&11>=document.documentMode,Vn=null,rl=null,Ur=null,sl=!1;function Ec(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;sl||Vn==null||Vn!==to(r)||(r=Vn,"selectionStart"in r&&ca(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ur&&Yr(Ur,r)||(Ur=r,r=ao(rl,"onSelect"),0<r.length&&(t=new ia("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Vn)))}function ws(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Hn={animationend:ws("Animation","AnimationEnd"),animationiteration:ws("Animation","AnimationIteration"),animationstart:ws("Animation","AnimationStart"),transitionend:ws("Transition","TransitionEnd")},Ni={},Yf={};Pt&&(Yf=document.createElement("div").style,"AnimationEvent"in window||(delete Hn.animationend.animation,delete Hn.animationiteration.animation,delete Hn.animationstart.animation),"TransitionEvent"in window||delete Hn.transitionend.transition);function Do(e){if(Ni[e])return Ni[e];if(!Hn[e])return e;var t=Hn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Yf)return Ni[e]=t[n];return e}var Qf=Do("animationend"),Xf=Do("animationiteration"),Zf=Do("animationstart"),ep=Do("transitionend"),tp=new Map,kc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ln(e,t){tp.set(e,t),Tn(t,[e])}for(var Si=0;Si<kc.length;Si++){var bi=kc[Si],sg=bi.toLowerCase(),og=bi[0].toUpperCase()+bi.slice(1);ln(sg,"on"+og)}ln(Qf,"onAnimationEnd");ln(Xf,"onAnimationIteration");ln(Zf,"onAnimationStart");ln("dblclick","onDoubleClick");ln("focusin","onFocus");ln("focusout","onBlur");ln(ep,"onTransitionEnd");sr("onMouseEnter",["mouseout","mouseover"]);sr("onMouseLeave",["mouseout","mouseover"]);sr("onPointerEnter",["pointerout","pointerover"]);sr("onPointerLeave",["pointerout","pointerover"]);Tn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Tn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Tn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Tn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Tn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Tn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ig=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function _c(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,s0(r,t,void 0,e),e.currentTarget=null}function np(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var l=r.length-1;0<=l;l--){var d=r[l],u=d.instance,f=d.currentTarget;if(d=d.listener,u!==i&&s.isPropagationStopped())break e;_c(s,d,f),i=u}else for(l=0;l<r.length;l++){if(d=r[l],u=d.instance,f=d.currentTarget,d=d.listener,u!==i&&s.isPropagationStopped())break e;_c(s,d,f),i=u}}}if(ro)throw e=Zi,ro=!1,Zi=null,e}function ce(e,t){var n=t[cl];n===void 0&&(n=t[cl]=new Set);var r=e+"__bubble";n.has(r)||(rp(t,e,2,!1),n.add(r))}function Ci(e,t,n){var r=0;t&&(r|=4),rp(n,e,r,t)}var Ns="_reactListening"+Math.random().toString(36).slice(2);function Qr(e){if(!e[Ns]){e[Ns]=!0,df.forEach(function(n){n!=="selectionchange"&&(ig.has(n)||Ci(n,!1,e),Ci(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ns]||(t[Ns]=!0,Ci("selectionchange",!1,t))}}function rp(e,t,n,r){switch(Hf(t)){case 1:var s=w0;break;case 4:s=N0;break;default:s=sa}n=s.bind(null,t,n,e),s=void 0,!Xi||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Ei(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var d=r.stateNode.containerInfo;if(d===s||d.nodeType===8&&d.parentNode===s)break;if(l===4)for(l=r.return;l!==null;){var u=l.tag;if((u===3||u===4)&&(u=l.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;l=l.return}for(;d!==null;){if(l=xn(d),l===null)return;if(u=l.tag,u===5||u===6){r=i=l;continue e}d=d.parentNode}}r=r.return}kf(function(){var f=i,p=ea(n),m=[];e:{var h=tp.get(e);if(h!==void 0){var g=ia,w=e;switch(e){case"keypress":if(Os(n)===0)break e;case"keydown":case"keyup":g=D0;break;case"focusin":w="focus",g=vi;break;case"focusout":w="blur",g=vi;break;case"beforeblur":case"afterblur":g=vi;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=hc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=C0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=V0;break;case Qf:case Xf:case Zf:g=_0;break;case ep:g=B0;break;case"scroll":g=S0;break;case"wheel":g=O0;break;case"copy":case"cut":case"paste":g=I0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=xc}var N=(t&4)!==0,S=!N&&e==="scroll",x=N?h!==null?h+"Capture":null:h;N=[];for(var v=f,y;v!==null;){y=v;var C=y.stateNode;if(y.tag===5&&C!==null&&(y=C,x!==null&&(C=qr(v,x),C!=null&&N.push(Xr(v,C,y)))),S)break;v=v.return}0<N.length&&(h=new g(h,w,null,n,p),m.push({event:h,listeners:N}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",h&&n!==Yi&&(w=n.relatedTarget||n.fromElement)&&(xn(w)||w[jt]))break e;if((g||h)&&(h=p.window===p?p:(h=p.ownerDocument)?h.defaultView||h.parentWindow:window,g?(w=n.relatedTarget||n.toElement,g=f,w=w?xn(w):null,w!==null&&(S=In(w),w!==S||w.tag!==5&&w.tag!==6)&&(w=null)):(g=null,w=f),g!==w)){if(N=hc,C="onMouseLeave",x="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(N=xc,C="onPointerLeave",x="onPointerEnter",v="pointer"),S=g==null?h:Bn(g),y=w==null?h:Bn(w),h=new N(C,v+"leave",g,n,p),h.target=S,h.relatedTarget=y,C=null,xn(p)===f&&(N=new N(x,v+"enter",w,n,p),N.target=y,N.relatedTarget=S,C=N),S=C,g&&w)t:{for(N=g,x=w,v=0,y=N;y;y=Pn(y))v++;for(y=0,C=x;C;C=Pn(C))y++;for(;0<v-y;)N=Pn(N),v--;for(;0<y-v;)x=Pn(x),y--;for(;v--;){if(N===x||x!==null&&N===x.alternate)break t;N=Pn(N),x=Pn(x)}N=null}else N=null;g!==null&&Tc(m,h,g,N,!1),w!==null&&S!==null&&Tc(m,S,w,N,!0)}}e:{if(h=f?Bn(f):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var b=Y0;else if(wc(h))if($f)b=eg;else{b=X0;var E=Q0}else(g=h.nodeName)&&g.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(b=Z0);if(b&&(b=b(e,f))){qf(m,b,n,p);break e}E&&E(e,h,f),e==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&qi(h,"number",h.value)}switch(E=f?Bn(f):window,e){case"focusin":(wc(E)||E.contentEditable==="true")&&(Vn=E,rl=f,Ur=null);break;case"focusout":Ur=rl=Vn=null;break;case"mousedown":sl=!0;break;case"contextmenu":case"mouseup":case"dragend":sl=!1,Ec(m,n,p);break;case"selectionchange":if(rg)break;case"keydown":case"keyup":Ec(m,n,p)}var T;if(aa)e:{switch(e){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Un?Of(e,n)&&(I="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(Gf&&n.locale!=="ko"&&(Un||I!=="onCompositionStart"?I==="onCompositionEnd"&&Un&&(T=Bf()):(Wt=p,oa="value"in Wt?Wt.value:Wt.textContent,Un=!0)),E=ao(f,I),0<E.length&&(I=new gc(I,e,null,n,p),m.push({event:I,listeners:E}),T?I.data=T:(T=zf(n),T!==null&&(I.data=T)))),(T=q0?$0(e,n):W0(e,n))&&(f=ao(f,"onBeforeInput"),0<f.length&&(p=new gc("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:f}),p.data=T))}np(m,t)})}function Xr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ao(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=qr(e,n),i!=null&&r.unshift(Xr(e,i,s)),i=qr(e,t),i!=null&&r.push(Xr(e,i,s))),e=e.return}return r}function Pn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Tc(e,t,n,r,s){for(var i=t._reactName,l=[];n!==null&&n!==r;){var d=n,u=d.alternate,f=d.stateNode;if(u!==null&&u===r)break;d.tag===5&&f!==null&&(d=f,s?(u=qr(n,i),u!=null&&l.unshift(Xr(n,u,d))):s||(u=qr(n,i),u!=null&&l.push(Xr(n,u,d)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var lg=/\r\n?/g,ag=/\u0000|\uFFFD/g;function Ic(e){return(typeof e=="string"?e:""+e).replace(lg,`
`).replace(ag,"")}function Ss(e,t,n){if(t=Ic(t),Ic(e)!==t&&n)throw Error(D(425))}function co(){}var ol=null,il=null;function ll(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var al=typeof setTimeout=="function"?setTimeout:void 0,cg=typeof clearTimeout=="function"?clearTimeout:void 0,Ac=typeof Promise=="function"?Promise:void 0,dg=typeof queueMicrotask=="function"?queueMicrotask:typeof Ac<"u"?function(e){return Ac.resolve(null).then(e).catch(ug)}:al;function ug(e){setTimeout(function(){throw e})}function ki(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Jr(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Jr(t)}function Zt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Rc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var mr=Math.random().toString(36).slice(2),Et="__reactFiber$"+mr,Zr="__reactProps$"+mr,jt="__reactContainer$"+mr,cl="__reactEvents$"+mr,fg="__reactListeners$"+mr,pg="__reactHandles$"+mr;function xn(e){var t=e[Et];if(t)return t;for(var n=e.parentNode;n;){if(t=n[jt]||n[Et]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Rc(e);e!==null;){if(n=e[Et])return n;e=Rc(e)}return t}e=n,n=e.parentNode}return null}function cs(e){return e=e[Et]||e[jt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Bn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(D(33))}function Fo(e){return e[Zr]||null}var dl=[],Gn=-1;function an(e){return{current:e}}function ue(e){0>Gn||(e.current=dl[Gn],dl[Gn]=null,Gn--)}function le(e,t){Gn++,dl[Gn]=e.current,e.current=t}var on={},Fe=an(on),We=an(!1),bn=on;function or(e,t){var n=e.type.contextTypes;if(!n)return on;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Je(e){return e=e.childContextTypes,e!=null}function uo(){ue(We),ue(Fe)}function Mc(e,t,n){if(Fe.current!==on)throw Error(D(168));le(Fe,t),le(We,n)}function sp(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(D(108,Qh(e)||"Unknown",s));return ge({},n,r)}function fo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||on,bn=Fe.current,le(Fe,e),le(We,We.current),!0}function Pc(e,t,n){var r=e.stateNode;if(!r)throw Error(D(169));n?(e=sp(e,t,bn),r.__reactInternalMemoizedMergedChildContext=e,ue(We),ue(Fe),le(Fe,e)):ue(We),le(We,n)}var It=null,Uo=!1,_i=!1;function op(e){It===null?It=[e]:It.push(e)}function mg(e){Uo=!0,op(e)}function cn(){if(!_i&&It!==null){_i=!0;var e=0,t=se;try{var n=It;for(se=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}It=null,Uo=!1}catch(s){throw It!==null&&(It=It.slice(e+1)),Af(ta,cn),s}finally{se=t,_i=!1}}return null}var On=[],zn=0,po=null,mo=0,st=[],ot=0,Cn=null,At=1,Rt="";function pn(e,t){On[zn++]=mo,On[zn++]=po,po=e,mo=t}function ip(e,t,n){st[ot++]=At,st[ot++]=Rt,st[ot++]=Cn,Cn=e;var r=At;e=Rt;var s=32-xt(r)-1;r&=~(1<<s),n+=1;var i=32-xt(t)+s;if(30<i){var l=s-s%5;i=(r&(1<<l)-1).toString(32),r>>=l,s-=l,At=1<<32-xt(t)+s|n<<s|r,Rt=i+e}else At=1<<i|n<<s|r,Rt=e}function da(e){e.return!==null&&(pn(e,1),ip(e,1,0))}function ua(e){for(;e===po;)po=On[--zn],On[zn]=null,mo=On[--zn],On[zn]=null;for(;e===Cn;)Cn=st[--ot],st[ot]=null,Rt=st[--ot],st[ot]=null,At=st[--ot],st[ot]=null}var et=null,Ze=null,pe=!1,gt=null;function lp(e,t){var n=it(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function jc(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,et=e,Ze=Zt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,et=e,Ze=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Cn!==null?{id:At,overflow:Rt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=it(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,et=e,Ze=null,!0):!1;default:return!1}}function ul(e){return(e.mode&1)!==0&&(e.flags&128)===0}function fl(e){if(pe){var t=Ze;if(t){var n=t;if(!jc(e,t)){if(ul(e))throw Error(D(418));t=Zt(n.nextSibling);var r=et;t&&jc(e,t)?lp(r,n):(e.flags=e.flags&-4097|2,pe=!1,et=e)}}else{if(ul(e))throw Error(D(418));e.flags=e.flags&-4097|2,pe=!1,et=e}}}function Lc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;et=e}function bs(e){if(e!==et)return!1;if(!pe)return Lc(e),pe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ll(e.type,e.memoizedProps)),t&&(t=Ze)){if(ul(e))throw ap(),Error(D(418));for(;t;)lp(e,t),t=Zt(t.nextSibling)}if(Lc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(D(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ze=Zt(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ze=null}}else Ze=et?Zt(e.stateNode.nextSibling):null;return!0}function ap(){for(var e=Ze;e;)e=Zt(e.nextSibling)}function ir(){Ze=et=null,pe=!1}function fa(e){gt===null?gt=[e]:gt.push(e)}var hg=Ut.ReactCurrentBatchConfig;function Cr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(D(309));var r=n.stateNode}if(!r)throw Error(D(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var d=s.refs;l===null?delete d[i]:d[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(D(284));if(!n._owner)throw Error(D(290,e))}return e}function Cs(e,t){throw e=Object.prototype.toString.call(t),Error(D(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Dc(e){var t=e._init;return t(e._payload)}function cp(e){function t(x,v){if(e){var y=x.deletions;y===null?(x.deletions=[v],x.flags|=16):y.push(v)}}function n(x,v){if(!e)return null;for(;v!==null;)t(x,v),v=v.sibling;return null}function r(x,v){for(x=new Map;v!==null;)v.key!==null?x.set(v.key,v):x.set(v.index,v),v=v.sibling;return x}function s(x,v){return x=rn(x,v),x.index=0,x.sibling=null,x}function i(x,v,y){return x.index=y,e?(y=x.alternate,y!==null?(y=y.index,y<v?(x.flags|=2,v):y):(x.flags|=2,v)):(x.flags|=1048576,v)}function l(x){return e&&x.alternate===null&&(x.flags|=2),x}function d(x,v,y,C){return v===null||v.tag!==6?(v=ji(y,x.mode,C),v.return=x,v):(v=s(v,y),v.return=x,v)}function u(x,v,y,C){var b=y.type;return b===Fn?p(x,v,y.props.children,C,y.key):v!==null&&(v.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Ot&&Dc(b)===v.type)?(C=s(v,y.props),C.ref=Cr(x,v,y),C.return=x,C):(C=Ys(y.type,y.key,y.props,null,x.mode,C),C.ref=Cr(x,v,y),C.return=x,C)}function f(x,v,y,C){return v===null||v.tag!==4||v.stateNode.containerInfo!==y.containerInfo||v.stateNode.implementation!==y.implementation?(v=Li(y,x.mode,C),v.return=x,v):(v=s(v,y.children||[]),v.return=x,v)}function p(x,v,y,C,b){return v===null||v.tag!==7?(v=Sn(y,x.mode,C,b),v.return=x,v):(v=s(v,y),v.return=x,v)}function m(x,v,y){if(typeof v=="string"&&v!==""||typeof v=="number")return v=ji(""+v,x.mode,y),v.return=x,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ps:return y=Ys(v.type,v.key,v.props,null,x.mode,y),y.ref=Cr(x,null,v),y.return=x,y;case Dn:return v=Li(v,x.mode,y),v.return=x,v;case Ot:var C=v._init;return m(x,C(v._payload),y)}if(Ar(v)||yr(v))return v=Sn(v,x.mode,y,null),v.return=x,v;Cs(x,v)}return null}function h(x,v,y,C){var b=v!==null?v.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return b!==null?null:d(x,v,""+y,C);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case ps:return y.key===b?u(x,v,y,C):null;case Dn:return y.key===b?f(x,v,y,C):null;case Ot:return b=y._init,h(x,v,b(y._payload),C)}if(Ar(y)||yr(y))return b!==null?null:p(x,v,y,C,null);Cs(x,y)}return null}function g(x,v,y,C,b){if(typeof C=="string"&&C!==""||typeof C=="number")return x=x.get(y)||null,d(v,x,""+C,b);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case ps:return x=x.get(C.key===null?y:C.key)||null,u(v,x,C,b);case Dn:return x=x.get(C.key===null?y:C.key)||null,f(v,x,C,b);case Ot:var E=C._init;return g(x,v,y,E(C._payload),b)}if(Ar(C)||yr(C))return x=x.get(y)||null,p(v,x,C,b,null);Cs(v,C)}return null}function w(x,v,y,C){for(var b=null,E=null,T=v,I=v=0,_=null;T!==null&&I<y.length;I++){T.index>I?(_=T,T=null):_=T.sibling;var A=h(x,T,y[I],C);if(A===null){T===null&&(T=_);break}e&&T&&A.alternate===null&&t(x,T),v=i(A,v,I),E===null?b=A:E.sibling=A,E=A,T=_}if(I===y.length)return n(x,T),pe&&pn(x,I),b;if(T===null){for(;I<y.length;I++)T=m(x,y[I],C),T!==null&&(v=i(T,v,I),E===null?b=T:E.sibling=T,E=T);return pe&&pn(x,I),b}for(T=r(x,T);I<y.length;I++)_=g(T,x,I,y[I],C),_!==null&&(e&&_.alternate!==null&&T.delete(_.key===null?I:_.key),v=i(_,v,I),E===null?b=_:E.sibling=_,E=_);return e&&T.forEach(function(L){return t(x,L)}),pe&&pn(x,I),b}function N(x,v,y,C){var b=yr(y);if(typeof b!="function")throw Error(D(150));if(y=b.call(y),y==null)throw Error(D(151));for(var E=b=null,T=v,I=v=0,_=null,A=y.next();T!==null&&!A.done;I++,A=y.next()){T.index>I?(_=T,T=null):_=T.sibling;var L=h(x,T,A.value,C);if(L===null){T===null&&(T=_);break}e&&T&&L.alternate===null&&t(x,T),v=i(L,v,I),E===null?b=L:E.sibling=L,E=L,T=_}if(A.done)return n(x,T),pe&&pn(x,I),b;if(T===null){for(;!A.done;I++,A=y.next())A=m(x,A.value,C),A!==null&&(v=i(A,v,I),E===null?b=A:E.sibling=A,E=A);return pe&&pn(x,I),b}for(T=r(x,T);!A.done;I++,A=y.next())A=g(T,x,I,A.value,C),A!==null&&(e&&A.alternate!==null&&T.delete(A.key===null?I:A.key),v=i(A,v,I),E===null?b=A:E.sibling=A,E=A);return e&&T.forEach(function(M){return t(x,M)}),pe&&pn(x,I),b}function S(x,v,y,C){if(typeof y=="object"&&y!==null&&y.type===Fn&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case ps:e:{for(var b=y.key,E=v;E!==null;){if(E.key===b){if(b=y.type,b===Fn){if(E.tag===7){n(x,E.sibling),v=s(E,y.props.children),v.return=x,x=v;break e}}else if(E.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Ot&&Dc(b)===E.type){n(x,E.sibling),v=s(E,y.props),v.ref=Cr(x,E,y),v.return=x,x=v;break e}n(x,E);break}else t(x,E);E=E.sibling}y.type===Fn?(v=Sn(y.props.children,x.mode,C,y.key),v.return=x,x=v):(C=Ys(y.type,y.key,y.props,null,x.mode,C),C.ref=Cr(x,v,y),C.return=x,x=C)}return l(x);case Dn:e:{for(E=y.key;v!==null;){if(v.key===E)if(v.tag===4&&v.stateNode.containerInfo===y.containerInfo&&v.stateNode.implementation===y.implementation){n(x,v.sibling),v=s(v,y.children||[]),v.return=x,x=v;break e}else{n(x,v);break}else t(x,v);v=v.sibling}v=Li(y,x.mode,C),v.return=x,x=v}return l(x);case Ot:return E=y._init,S(x,v,E(y._payload),C)}if(Ar(y))return w(x,v,y,C);if(yr(y))return N(x,v,y,C);Cs(x,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,v!==null&&v.tag===6?(n(x,v.sibling),v=s(v,y),v.return=x,x=v):(n(x,v),v=ji(y,x.mode,C),v.return=x,x=v),l(x)):n(x,v)}return S}var lr=cp(!0),dp=cp(!1),ho=an(null),go=null,qn=null,pa=null;function ma(){pa=qn=go=null}function ha(e){var t=ho.current;ue(ho),e._currentValue=t}function pl(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function er(e,t){go=e,pa=qn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&($e=!0),e.firstContext=null)}function ct(e){var t=e._currentValue;if(pa!==e)if(e={context:e,memoizedValue:t,next:null},qn===null){if(go===null)throw Error(D(308));qn=e,go.dependencies={lanes:0,firstContext:e}}else qn=qn.next=e;return t}var vn=null;function ga(e){vn===null?vn=[e]:vn.push(e)}function up(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,ga(t)):(n.next=s.next,s.next=n),t.interleaved=n,Lt(e,r)}function Lt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var zt=!1;function xa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Mt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function en(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ee&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Lt(e,n)}return s=r.interleaved,s===null?(t.next=t,ga(r)):(t.next=s.next,s.next=t),r.interleaved=t,Lt(e,n)}function zs(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,na(e,n)}}function Fc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=l:i=i.next=l,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function xo(e,t,n,r){var s=e.updateQueue;zt=!1;var i=s.firstBaseUpdate,l=s.lastBaseUpdate,d=s.shared.pending;if(d!==null){s.shared.pending=null;var u=d,f=u.next;u.next=null,l===null?i=f:l.next=f,l=u;var p=e.alternate;p!==null&&(p=p.updateQueue,d=p.lastBaseUpdate,d!==l&&(d===null?p.firstBaseUpdate=f:d.next=f,p.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;l=0,p=f=u=null,d=i;do{var h=d.lane,g=d.eventTime;if((r&h)===h){p!==null&&(p=p.next={eventTime:g,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var w=e,N=d;switch(h=t,g=n,N.tag){case 1:if(w=N.payload,typeof w=="function"){m=w.call(g,m,h);break e}m=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=N.payload,h=typeof w=="function"?w.call(g,m,h):w,h==null)break e;m=ge({},m,h);break e;case 2:zt=!0}}d.callback!==null&&d.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[d]:h.push(d))}else g={eventTime:g,lane:h,tag:d.tag,payload:d.payload,callback:d.callback,next:null},p===null?(f=p=g,u=m):p=p.next=g,l|=h;if(d=d.next,d===null){if(d=s.shared.pending,d===null)break;h=d,d=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(p===null&&(u=m),s.baseState=u,s.firstBaseUpdate=f,s.lastBaseUpdate=p,t=s.shared.interleaved,t!==null){s=t;do l|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);kn|=l,e.lanes=l,e.memoizedState=m}}function Uc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(D(191,s));s.call(r)}}}var ds={},_t=an(ds),es=an(ds),ts=an(ds);function yn(e){if(e===ds)throw Error(D(174));return e}function va(e,t){switch(le(ts,t),le(es,e),le(_t,ds),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Wi(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Wi(t,e)}ue(_t),le(_t,t)}function ar(){ue(_t),ue(es),ue(ts)}function pp(e){yn(ts.current);var t=yn(_t.current),n=Wi(t,e.type);t!==n&&(le(es,e),le(_t,n))}function ya(e){es.current===e&&(ue(_t),ue(es))}var me=an(0);function vo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ti=[];function wa(){for(var e=0;e<Ti.length;e++)Ti[e]._workInProgressVersionPrimary=null;Ti.length=0}var qs=Ut.ReactCurrentDispatcher,Ii=Ut.ReactCurrentBatchConfig,En=0,he=null,we=null,Ce=null,yo=!1,Vr=!1,ns=0,gg=0;function Pe(){throw Error(D(321))}function Na(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Nt(e[n],t[n]))return!1;return!0}function Sa(e,t,n,r,s,i){if(En=i,he=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,qs.current=e===null||e.memoizedState===null?wg:Ng,e=n(r,s),Vr){i=0;do{if(Vr=!1,ns=0,25<=i)throw Error(D(301));i+=1,Ce=we=null,t.updateQueue=null,qs.current=Sg,e=n(r,s)}while(Vr)}if(qs.current=wo,t=we!==null&&we.next!==null,En=0,Ce=we=he=null,yo=!1,t)throw Error(D(300));return e}function ba(){var e=ns!==0;return ns=0,e}function Ct(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ce===null?he.memoizedState=Ce=e:Ce=Ce.next=e,Ce}function dt(){if(we===null){var e=he.alternate;e=e!==null?e.memoizedState:null}else e=we.next;var t=Ce===null?he.memoizedState:Ce.next;if(t!==null)Ce=t,we=e;else{if(e===null)throw Error(D(310));we=e,e={memoizedState:we.memoizedState,baseState:we.baseState,baseQueue:we.baseQueue,queue:we.queue,next:null},Ce===null?he.memoizedState=Ce=e:Ce=Ce.next=e}return Ce}function rs(e,t){return typeof t=="function"?t(e):t}function Ai(e){var t=dt(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var r=we,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var l=s.next;s.next=i.next,i.next=l}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var d=l=null,u=null,f=i;do{var p=f.lane;if((En&p)===p)u!==null&&(u=u.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:e(r,f.action);else{var m={lane:p,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};u===null?(d=u=m,l=r):u=u.next=m,he.lanes|=p,kn|=p}f=f.next}while(f!==null&&f!==i);u===null?l=r:u.next=d,Nt(r,t.memoizedState)||($e=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,he.lanes|=i,kn|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ri(e){var t=dt(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do i=e(i,l.action),l=l.next;while(l!==s);Nt(i,t.memoizedState)||($e=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function mp(){}function hp(e,t){var n=he,r=dt(),s=t(),i=!Nt(r.memoizedState,s);if(i&&(r.memoizedState=s,$e=!0),r=r.queue,Ca(vp.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Ce!==null&&Ce.memoizedState.tag&1){if(n.flags|=2048,ss(9,xp.bind(null,n,r,s,t),void 0,null),Ee===null)throw Error(D(349));En&30||gp(n,t,s)}return s}function gp(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=he.updateQueue,t===null?(t={lastEffect:null,stores:null},he.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function xp(e,t,n,r){t.value=n,t.getSnapshot=r,yp(t)&&wp(e)}function vp(e,t,n){return n(function(){yp(t)&&wp(e)})}function yp(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Nt(e,n)}catch{return!0}}function wp(e){var t=Lt(e,1);t!==null&&vt(t,e,1,-1)}function Vc(e){var t=Ct();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:e},t.queue=e,e=e.dispatch=yg.bind(null,he,e),[t.memoizedState,e]}function ss(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=he.updateQueue,t===null?(t={lastEffect:null,stores:null},he.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Np(){return dt().memoizedState}function $s(e,t,n,r){var s=Ct();he.flags|=e,s.memoizedState=ss(1|t,n,void 0,r===void 0?null:r)}function Vo(e,t,n,r){var s=dt();r=r===void 0?null:r;var i=void 0;if(we!==null){var l=we.memoizedState;if(i=l.destroy,r!==null&&Na(r,l.deps)){s.memoizedState=ss(t,n,i,r);return}}he.flags|=e,s.memoizedState=ss(1|t,n,i,r)}function Hc(e,t){return $s(8390656,8,e,t)}function Ca(e,t){return Vo(2048,8,e,t)}function Sp(e,t){return Vo(4,2,e,t)}function bp(e,t){return Vo(4,4,e,t)}function Cp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ep(e,t,n){return n=n!=null?n.concat([e]):null,Vo(4,4,Cp.bind(null,t,e),n)}function Ea(){}function kp(e,t){var n=dt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Na(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function _p(e,t){var n=dt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Na(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Tp(e,t,n){return En&21?(Nt(n,t)||(n=Pf(),he.lanes|=n,kn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,$e=!0),e.memoizedState=n)}function xg(e,t){var n=se;se=n!==0&&4>n?n:4,e(!0);var r=Ii.transition;Ii.transition={};try{e(!1),t()}finally{se=n,Ii.transition=r}}function Ip(){return dt().memoizedState}function vg(e,t,n){var r=nn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ap(e))Rp(t,n);else if(n=up(e,t,n,r),n!==null){var s=He();vt(n,e,r,s),Mp(n,t,r)}}function yg(e,t,n){var r=nn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ap(e))Rp(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,d=i(l,n);if(s.hasEagerState=!0,s.eagerState=d,Nt(d,l)){var u=t.interleaved;u===null?(s.next=s,ga(t)):(s.next=u.next,u.next=s),t.interleaved=s;return}}catch{}finally{}n=up(e,t,s,r),n!==null&&(s=He(),vt(n,e,r,s),Mp(n,t,r))}}function Ap(e){var t=e.alternate;return e===he||t!==null&&t===he}function Rp(e,t){Vr=yo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Mp(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,na(e,n)}}var wo={readContext:ct,useCallback:Pe,useContext:Pe,useEffect:Pe,useImperativeHandle:Pe,useInsertionEffect:Pe,useLayoutEffect:Pe,useMemo:Pe,useReducer:Pe,useRef:Pe,useState:Pe,useDebugValue:Pe,useDeferredValue:Pe,useTransition:Pe,useMutableSource:Pe,useSyncExternalStore:Pe,useId:Pe,unstable_isNewReconciler:!1},wg={readContext:ct,useCallback:function(e,t){return Ct().memoizedState=[e,t===void 0?null:t],e},useContext:ct,useEffect:Hc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,$s(4194308,4,Cp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return $s(4194308,4,e,t)},useInsertionEffect:function(e,t){return $s(4,2,e,t)},useMemo:function(e,t){var n=Ct();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ct();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=vg.bind(null,he,e),[r.memoizedState,e]},useRef:function(e){var t=Ct();return e={current:e},t.memoizedState=e},useState:Vc,useDebugValue:Ea,useDeferredValue:function(e){return Ct().memoizedState=e},useTransition:function(){var e=Vc(!1),t=e[0];return e=xg.bind(null,e[1]),Ct().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=he,s=Ct();if(pe){if(n===void 0)throw Error(D(407));n=n()}else{if(n=t(),Ee===null)throw Error(D(349));En&30||gp(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Hc(vp.bind(null,r,i,e),[e]),r.flags|=2048,ss(9,xp.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Ct(),t=Ee.identifierPrefix;if(pe){var n=Rt,r=At;n=(r&~(1<<32-xt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ns++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=gg++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Ng={readContext:ct,useCallback:kp,useContext:ct,useEffect:Ca,useImperativeHandle:Ep,useInsertionEffect:Sp,useLayoutEffect:bp,useMemo:_p,useReducer:Ai,useRef:Np,useState:function(){return Ai(rs)},useDebugValue:Ea,useDeferredValue:function(e){var t=dt();return Tp(t,we.memoizedState,e)},useTransition:function(){var e=Ai(rs)[0],t=dt().memoizedState;return[e,t]},useMutableSource:mp,useSyncExternalStore:hp,useId:Ip,unstable_isNewReconciler:!1},Sg={readContext:ct,useCallback:kp,useContext:ct,useEffect:Ca,useImperativeHandle:Ep,useInsertionEffect:Sp,useLayoutEffect:bp,useMemo:_p,useReducer:Ri,useRef:Np,useState:function(){return Ri(rs)},useDebugValue:Ea,useDeferredValue:function(e){var t=dt();return we===null?t.memoizedState=e:Tp(t,we.memoizedState,e)},useTransition:function(){var e=Ri(rs)[0],t=dt().memoizedState;return[e,t]},useMutableSource:mp,useSyncExternalStore:hp,useId:Ip,unstable_isNewReconciler:!1};function mt(e,t){if(e&&e.defaultProps){t=ge({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ml(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ge({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ho={isMounted:function(e){return(e=e._reactInternals)?In(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=He(),s=nn(e),i=Mt(r,s);i.payload=t,n!=null&&(i.callback=n),t=en(e,i,s),t!==null&&(vt(t,e,s,r),zs(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=He(),s=nn(e),i=Mt(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=en(e,i,s),t!==null&&(vt(t,e,s,r),zs(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=He(),r=nn(e),s=Mt(n,r);s.tag=2,t!=null&&(s.callback=t),t=en(e,s,r),t!==null&&(vt(t,e,r,n),zs(t,e,r))}};function Bc(e,t,n,r,s,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,l):t.prototype&&t.prototype.isPureReactComponent?!Yr(n,r)||!Yr(s,i):!0}function Pp(e,t,n){var r=!1,s=on,i=t.contextType;return typeof i=="object"&&i!==null?i=ct(i):(s=Je(t)?bn:Fe.current,r=t.contextTypes,i=(r=r!=null)?or(e,s):on),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ho,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Gc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ho.enqueueReplaceState(t,t.state,null)}function hl(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},xa(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=ct(i):(i=Je(t)?bn:Fe.current,s.context=or(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(ml(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Ho.enqueueReplaceState(s,s.state,null),xo(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function cr(e,t){try{var n="",r=t;do n+=Yh(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Mi(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function gl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var bg=typeof WeakMap=="function"?WeakMap:Map;function jp(e,t,n){n=Mt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){So||(So=!0,kl=r),gl(e,t)},n}function Lp(e,t,n){n=Mt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){gl(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){gl(e,t),typeof r!="function"&&(tn===null?tn=new Set([this]):tn.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function Oc(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new bg;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Fg.bind(null,e,t,n),t.then(e,e))}function zc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function qc(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Mt(-1,1),t.tag=2,en(n,t,1))),n.lanes|=1),e)}var Cg=Ut.ReactCurrentOwner,$e=!1;function Ve(e,t,n,r){t.child=e===null?dp(t,null,n,r):lr(t,e.child,n,r)}function $c(e,t,n,r,s){n=n.render;var i=t.ref;return er(t,s),r=Sa(e,t,n,r,i,s),n=ba(),e!==null&&!$e?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Dt(e,t,s)):(pe&&n&&da(t),t.flags|=1,Ve(e,t,r,s),t.child)}function Wc(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!Pa(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Dp(e,t,i,r,s)):(e=Ys(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var l=i.memoizedProps;if(n=n.compare,n=n!==null?n:Yr,n(l,r)&&e.ref===t.ref)return Dt(e,t,s)}return t.flags|=1,e=rn(i,r),e.ref=t.ref,e.return=t,t.child=e}function Dp(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Yr(i,r)&&e.ref===t.ref)if($e=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&($e=!0);else return t.lanes=e.lanes,Dt(e,t,s)}return xl(e,t,n,r,s)}function Fp(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},le(Wn,Xe),Xe|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,le(Wn,Xe),Xe|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,le(Wn,Xe),Xe|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,le(Wn,Xe),Xe|=r;return Ve(e,t,s,n),t.child}function Up(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function xl(e,t,n,r,s){var i=Je(n)?bn:Fe.current;return i=or(t,i),er(t,s),n=Sa(e,t,n,r,i,s),r=ba(),e!==null&&!$e?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Dt(e,t,s)):(pe&&r&&da(t),t.flags|=1,Ve(e,t,n,s),t.child)}function Jc(e,t,n,r,s){if(Je(n)){var i=!0;fo(t)}else i=!1;if(er(t,s),t.stateNode===null)Ws(e,t),Pp(t,n,r),hl(t,n,r,s),r=!0;else if(e===null){var l=t.stateNode,d=t.memoizedProps;l.props=d;var u=l.context,f=n.contextType;typeof f=="object"&&f!==null?f=ct(f):(f=Je(n)?bn:Fe.current,f=or(t,f));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof l.getSnapshotBeforeUpdate=="function";m||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(d!==r||u!==f)&&Gc(t,l,r,f),zt=!1;var h=t.memoizedState;l.state=h,xo(t,r,l,s),u=t.memoizedState,d!==r||h!==u||We.current||zt?(typeof p=="function"&&(ml(t,n,p,r),u=t.memoizedState),(d=zt||Bc(t,n,d,r,h,u,f))?(m||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),l.props=r,l.state=u,l.context=f,r=d):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,fp(e,t),d=t.memoizedProps,f=t.type===t.elementType?d:mt(t.type,d),l.props=f,m=t.pendingProps,h=l.context,u=n.contextType,typeof u=="object"&&u!==null?u=ct(u):(u=Je(n)?bn:Fe.current,u=or(t,u));var g=n.getDerivedStateFromProps;(p=typeof g=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(d!==m||h!==u)&&Gc(t,l,r,u),zt=!1,h=t.memoizedState,l.state=h,xo(t,r,l,s);var w=t.memoizedState;d!==m||h!==w||We.current||zt?(typeof g=="function"&&(ml(t,n,g,r),w=t.memoizedState),(f=zt||Bc(t,n,f,r,h,w,u)||!1)?(p||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,w,u),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,w,u)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||d===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),l.props=r,l.state=w,l.context=u,r=f):(typeof l.componentDidUpdate!="function"||d===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return vl(e,t,n,r,i,s)}function vl(e,t,n,r,s,i){Up(e,t);var l=(t.flags&128)!==0;if(!r&&!l)return s&&Pc(t,n,!1),Dt(e,t,i);r=t.stateNode,Cg.current=t;var d=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&l?(t.child=lr(t,e.child,null,i),t.child=lr(t,null,d,i)):Ve(e,t,d,i),t.memoizedState=r.state,s&&Pc(t,n,!0),t.child}function Vp(e){var t=e.stateNode;t.pendingContext?Mc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Mc(e,t.context,!1),va(e,t.containerInfo)}function Kc(e,t,n,r,s){return ir(),fa(s),t.flags|=256,Ve(e,t,n,r),t.child}var yl={dehydrated:null,treeContext:null,retryLane:0};function wl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Hp(e,t,n){var r=t.pendingProps,s=me.current,i=!1,l=(t.flags&128)!==0,d;if((d=l)||(d=e!==null&&e.memoizedState===null?!1:(s&2)!==0),d?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),le(me,s&1),e===null)return fl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=r.children,e=r.fallback,i?(r=t.mode,i=t.child,l={mode:"hidden",children:l},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=Oo(l,r,0,null),e=Sn(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=wl(n),t.memoizedState=yl,e):ka(t,l));if(s=e.memoizedState,s!==null&&(d=s.dehydrated,d!==null))return Eg(e,t,l,r,d,s,n);if(i){i=r.fallback,l=t.mode,s=e.child,d=s.sibling;var u={mode:"hidden",children:r.children};return!(l&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=rn(s,u),r.subtreeFlags=s.subtreeFlags&14680064),d!==null?i=rn(d,i):(i=Sn(i,l,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,l=e.child.memoizedState,l=l===null?wl(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~n,t.memoizedState=yl,r}return i=e.child,e=i.sibling,r=rn(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ka(e,t){return t=Oo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Es(e,t,n,r){return r!==null&&fa(r),lr(t,e.child,null,n),e=ka(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Eg(e,t,n,r,s,i,l){if(n)return t.flags&256?(t.flags&=-257,r=Mi(Error(D(422))),Es(e,t,l,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Oo({mode:"visible",children:r.children},s,0,null),i=Sn(i,s,l,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&lr(t,e.child,null,l),t.child.memoizedState=wl(l),t.memoizedState=yl,i);if(!(t.mode&1))return Es(e,t,l,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var d=r.dgst;return r=d,i=Error(D(419)),r=Mi(i,r,void 0),Es(e,t,l,r)}if(d=(l&e.childLanes)!==0,$e||d){if(r=Ee,r!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|l)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Lt(e,s),vt(r,e,s,-1))}return Ma(),r=Mi(Error(D(421))),Es(e,t,l,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Ug.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Ze=Zt(s.nextSibling),et=t,pe=!0,gt=null,e!==null&&(st[ot++]=At,st[ot++]=Rt,st[ot++]=Cn,At=e.id,Rt=e.overflow,Cn=t),t=ka(t,r.children),t.flags|=4096,t)}function Yc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),pl(e.return,t,n)}function Pi(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Bp(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Ve(e,t,r.children,n),r=me.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Yc(e,n,t);else if(e.tag===19)Yc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(le(me,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&vo(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Pi(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&vo(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Pi(t,!0,n,null,i);break;case"together":Pi(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ws(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Dt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),kn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(D(153));if(t.child!==null){for(e=t.child,n=rn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=rn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function kg(e,t,n){switch(t.tag){case 3:Vp(t),ir();break;case 5:pp(t);break;case 1:Je(t.type)&&fo(t);break;case 4:va(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;le(ho,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(le(me,me.current&1),t.flags|=128,null):n&t.child.childLanes?Hp(e,t,n):(le(me,me.current&1),e=Dt(e,t,n),e!==null?e.sibling:null);le(me,me.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Bp(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),le(me,me.current),r)break;return null;case 22:case 23:return t.lanes=0,Fp(e,t,n)}return Dt(e,t,n)}var Gp,Nl,Op,zp;Gp=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Nl=function(){};Op=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,yn(_t.current);var i=null;switch(n){case"input":s=Oi(e,s),r=Oi(e,r),i=[];break;case"select":s=ge({},s,{value:void 0}),r=ge({},r,{value:void 0}),i=[];break;case"textarea":s=$i(e,s),r=$i(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=co)}Ji(n,r);var l;n=null;for(f in s)if(!r.hasOwnProperty(f)&&s.hasOwnProperty(f)&&s[f]!=null)if(f==="style"){var d=s[f];for(l in d)d.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Or.hasOwnProperty(f)?i||(i=[]):(i=i||[]).push(f,null));for(f in r){var u=r[f];if(d=s!=null?s[f]:void 0,r.hasOwnProperty(f)&&u!==d&&(u!=null||d!=null))if(f==="style")if(d){for(l in d)!d.hasOwnProperty(l)||u&&u.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in u)u.hasOwnProperty(l)&&d[l]!==u[l]&&(n||(n={}),n[l]=u[l])}else n||(i||(i=[]),i.push(f,n)),n=u;else f==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,d=d?d.__html:void 0,u!=null&&d!==u&&(i=i||[]).push(f,u)):f==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(f,""+u):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Or.hasOwnProperty(f)?(u!=null&&f==="onScroll"&&ce("scroll",e),i||d===u||(i=[])):(i=i||[]).push(f,u))}n&&(i=i||[]).push("style",n);var f=i;(t.updateQueue=f)&&(t.flags|=4)}};zp=function(e,t,n,r){n!==r&&(t.flags|=4)};function Er(e,t){if(!pe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function je(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function _g(e,t,n){var r=t.pendingProps;switch(ua(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return je(t),null;case 1:return Je(t.type)&&uo(),je(t),null;case 3:return r=t.stateNode,ar(),ue(We),ue(Fe),wa(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(bs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,gt!==null&&(Il(gt),gt=null))),Nl(e,t),je(t),null;case 5:ya(t);var s=yn(ts.current);if(n=t.type,e!==null&&t.stateNode!=null)Op(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(D(166));return je(t),null}if(e=yn(_t.current),bs(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Et]=t,r[Zr]=i,e=(t.mode&1)!==0,n){case"dialog":ce("cancel",r),ce("close",r);break;case"iframe":case"object":case"embed":ce("load",r);break;case"video":case"audio":for(s=0;s<Mr.length;s++)ce(Mr[s],r);break;case"source":ce("error",r);break;case"img":case"image":case"link":ce("error",r),ce("load",r);break;case"details":ce("toggle",r);break;case"input":oc(r,i),ce("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ce("invalid",r);break;case"textarea":lc(r,i),ce("invalid",r)}Ji(n,i),s=null;for(var l in i)if(i.hasOwnProperty(l)){var d=i[l];l==="children"?typeof d=="string"?r.textContent!==d&&(i.suppressHydrationWarning!==!0&&Ss(r.textContent,d,e),s=["children",d]):typeof d=="number"&&r.textContent!==""+d&&(i.suppressHydrationWarning!==!0&&Ss(r.textContent,d,e),s=["children",""+d]):Or.hasOwnProperty(l)&&d!=null&&l==="onScroll"&&ce("scroll",r)}switch(n){case"input":ms(r),ic(r,i,!0);break;case"textarea":ms(r),ac(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=co)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=vf(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),n==="select"&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[Et]=t,e[Zr]=r,Gp(e,t,!1,!1),t.stateNode=e;e:{switch(l=Ki(n,r),n){case"dialog":ce("cancel",e),ce("close",e),s=r;break;case"iframe":case"object":case"embed":ce("load",e),s=r;break;case"video":case"audio":for(s=0;s<Mr.length;s++)ce(Mr[s],e);s=r;break;case"source":ce("error",e),s=r;break;case"img":case"image":case"link":ce("error",e),ce("load",e),s=r;break;case"details":ce("toggle",e),s=r;break;case"input":oc(e,r),s=Oi(e,r),ce("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=ge({},r,{value:void 0}),ce("invalid",e);break;case"textarea":lc(e,r),s=$i(e,r),ce("invalid",e);break;default:s=r}Ji(n,s),d=s;for(i in d)if(d.hasOwnProperty(i)){var u=d[i];i==="style"?Nf(e,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&yf(e,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&zr(e,u):typeof u=="number"&&zr(e,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Or.hasOwnProperty(i)?u!=null&&i==="onScroll"&&ce("scroll",e):u!=null&&Yl(e,i,u,l))}switch(n){case"input":ms(e),ic(e,r,!1);break;case"textarea":ms(e),ac(e);break;case"option":r.value!=null&&e.setAttribute("value",""+sn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Yn(e,!!r.multiple,i,!1):r.defaultValue!=null&&Yn(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=co)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return je(t),null;case 6:if(e&&t.stateNode!=null)zp(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(D(166));if(n=yn(ts.current),yn(_t.current),bs(t)){if(r=t.stateNode,n=t.memoizedProps,r[Et]=t,(i=r.nodeValue!==n)&&(e=et,e!==null))switch(e.tag){case 3:Ss(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ss(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Et]=t,t.stateNode=r}return je(t),null;case 13:if(ue(me),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(pe&&Ze!==null&&t.mode&1&&!(t.flags&128))ap(),ir(),t.flags|=98560,i=!1;else if(i=bs(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(D(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(D(317));i[Et]=t}else ir(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;je(t),i=!1}else gt!==null&&(Il(gt),gt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||me.current&1?Ne===0&&(Ne=3):Ma())),t.updateQueue!==null&&(t.flags|=4),je(t),null);case 4:return ar(),Nl(e,t),e===null&&Qr(t.stateNode.containerInfo),je(t),null;case 10:return ha(t.type._context),je(t),null;case 17:return Je(t.type)&&uo(),je(t),null;case 19:if(ue(me),i=t.memoizedState,i===null)return je(t),null;if(r=(t.flags&128)!==0,l=i.rendering,l===null)if(r)Er(i,!1);else{if(Ne!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=vo(e),l!==null){for(t.flags|=128,Er(i,!1),r=l.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return le(me,me.current&1|2),t.child}e=e.sibling}i.tail!==null&&ve()>dr&&(t.flags|=128,r=!0,Er(i,!1),t.lanes=4194304)}else{if(!r)if(e=vo(l),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Er(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!pe)return je(t),null}else 2*ve()-i.renderingStartTime>dr&&n!==1073741824&&(t.flags|=128,r=!0,Er(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(n=i.last,n!==null?n.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ve(),t.sibling=null,n=me.current,le(me,r?n&1|2:n&1),t):(je(t),null);case 22:case 23:return Ra(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Xe&1073741824&&(je(t),t.subtreeFlags&6&&(t.flags|=8192)):je(t),null;case 24:return null;case 25:return null}throw Error(D(156,t.tag))}function Tg(e,t){switch(ua(t),t.tag){case 1:return Je(t.type)&&uo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ar(),ue(We),ue(Fe),wa(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ya(t),null;case 13:if(ue(me),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(D(340));ir()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ue(me),null;case 4:return ar(),null;case 10:return ha(t.type._context),null;case 22:case 23:return Ra(),null;case 24:return null;default:return null}}var ks=!1,Le=!1,Ig=typeof WeakSet=="function"?WeakSet:Set,V=null;function $n(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){xe(e,t,r)}else n.current=null}function Sl(e,t,n){try{n()}catch(r){xe(e,t,r)}}var Qc=!1;function Ag(e,t){if(ol=io,e=Kf(),ca(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var l=0,d=-1,u=-1,f=0,p=0,m=e,h=null;t:for(;;){for(var g;m!==n||s!==0&&m.nodeType!==3||(d=l+s),m!==i||r!==0&&m.nodeType!==3||(u=l+r),m.nodeType===3&&(l+=m.nodeValue.length),(g=m.firstChild)!==null;)h=m,m=g;for(;;){if(m===e)break t;if(h===n&&++f===s&&(d=l),h===i&&++p===r&&(u=l),(g=m.nextSibling)!==null)break;m=h,h=m.parentNode}m=g}n=d===-1||u===-1?null:{start:d,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(il={focusedElem:e,selectionRange:n},io=!1,V=t;V!==null;)if(t=V,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,V=e;else for(;V!==null;){t=V;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var N=w.memoizedProps,S=w.memoizedState,x=t.stateNode,v=x.getSnapshotBeforeUpdate(t.elementType===t.type?N:mt(t.type,N),S);x.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(C){xe(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,V=e;break}V=t.return}return w=Qc,Qc=!1,w}function Hr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Sl(t,n,i)}s=s.next}while(s!==r)}}function Bo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function bl(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function qp(e){var t=e.alternate;t!==null&&(e.alternate=null,qp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Et],delete t[Zr],delete t[cl],delete t[fg],delete t[pg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function $p(e){return e.tag===5||e.tag===3||e.tag===4}function Xc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||$p(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Cl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=co));else if(r!==4&&(e=e.child,e!==null))for(Cl(e,t,n),e=e.sibling;e!==null;)Cl(e,t,n),e=e.sibling}function El(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(El(e,t,n),e=e.sibling;e!==null;)El(e,t,n),e=e.sibling}var Ae=null,ht=!1;function Gt(e,t,n){for(n=n.child;n!==null;)Wp(e,t,n),n=n.sibling}function Wp(e,t,n){if(kt&&typeof kt.onCommitFiberUnmount=="function")try{kt.onCommitFiberUnmount(Po,n)}catch{}switch(n.tag){case 5:Le||$n(n,t);case 6:var r=Ae,s=ht;Ae=null,Gt(e,t,n),Ae=r,ht=s,Ae!==null&&(ht?(e=Ae,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ae.removeChild(n.stateNode));break;case 18:Ae!==null&&(ht?(e=Ae,n=n.stateNode,e.nodeType===8?ki(e.parentNode,n):e.nodeType===1&&ki(e,n),Jr(e)):ki(Ae,n.stateNode));break;case 4:r=Ae,s=ht,Ae=n.stateNode.containerInfo,ht=!0,Gt(e,t,n),Ae=r,ht=s;break;case 0:case 11:case 14:case 15:if(!Le&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&Sl(n,t,l),s=s.next}while(s!==r)}Gt(e,t,n);break;case 1:if(!Le&&($n(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(d){xe(n,t,d)}Gt(e,t,n);break;case 21:Gt(e,t,n);break;case 22:n.mode&1?(Le=(r=Le)||n.memoizedState!==null,Gt(e,t,n),Le=r):Gt(e,t,n);break;default:Gt(e,t,n)}}function Zc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Ig),t.forEach(function(r){var s=Vg.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function pt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,l=t,d=l;e:for(;d!==null;){switch(d.tag){case 5:Ae=d.stateNode,ht=!1;break e;case 3:Ae=d.stateNode.containerInfo,ht=!0;break e;case 4:Ae=d.stateNode.containerInfo,ht=!0;break e}d=d.return}if(Ae===null)throw Error(D(160));Wp(i,l,s),Ae=null,ht=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(f){xe(s,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Jp(t,e),t=t.sibling}function Jp(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pt(t,e),bt(e),r&4){try{Hr(3,e,e.return),Bo(3,e)}catch(N){xe(e,e.return,N)}try{Hr(5,e,e.return)}catch(N){xe(e,e.return,N)}}break;case 1:pt(t,e),bt(e),r&512&&n!==null&&$n(n,n.return);break;case 5:if(pt(t,e),bt(e),r&512&&n!==null&&$n(n,n.return),e.flags&32){var s=e.stateNode;try{zr(s,"")}catch(N){xe(e,e.return,N)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,l=n!==null?n.memoizedProps:i,d=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{d==="input"&&i.type==="radio"&&i.name!=null&&gf(s,i),Ki(d,l);var f=Ki(d,i);for(l=0;l<u.length;l+=2){var p=u[l],m=u[l+1];p==="style"?Nf(s,m):p==="dangerouslySetInnerHTML"?yf(s,m):p==="children"?zr(s,m):Yl(s,p,m,f)}switch(d){case"input":zi(s,i);break;case"textarea":xf(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Yn(s,!!i.multiple,g,!1):h!==!!i.multiple&&(i.defaultValue!=null?Yn(s,!!i.multiple,i.defaultValue,!0):Yn(s,!!i.multiple,i.multiple?[]:"",!1))}s[Zr]=i}catch(N){xe(e,e.return,N)}}break;case 6:if(pt(t,e),bt(e),r&4){if(e.stateNode===null)throw Error(D(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(N){xe(e,e.return,N)}}break;case 3:if(pt(t,e),bt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Jr(t.containerInfo)}catch(N){xe(e,e.return,N)}break;case 4:pt(t,e),bt(e);break;case 13:pt(t,e),bt(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Ia=ve())),r&4&&Zc(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(Le=(f=Le)||p,pt(t,e),Le=f):pt(t,e),bt(e),r&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!p&&e.mode&1)for(V=e,p=e.child;p!==null;){for(m=V=p;V!==null;){switch(h=V,g=h.child,h.tag){case 0:case 11:case 14:case 15:Hr(4,h,h.return);break;case 1:$n(h,h.return);var w=h.stateNode;if(typeof w.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(N){xe(r,n,N)}}break;case 5:$n(h,h.return);break;case 22:if(h.memoizedState!==null){td(m);continue}}g!==null?(g.return=h,V=g):td(m)}p=p.sibling}e:for(p=null,m=e;;){if(m.tag===5){if(p===null){p=m;try{s=m.stateNode,f?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(d=m.stateNode,u=m.memoizedProps.style,l=u!=null&&u.hasOwnProperty("display")?u.display:null,d.style.display=wf("display",l))}catch(N){xe(e,e.return,N)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=f?"":m.memoizedProps}catch(N){xe(e,e.return,N)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:pt(t,e),bt(e),r&4&&Zc(e);break;case 21:break;default:pt(t,e),bt(e)}}function bt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if($p(n)){var r=n;break e}n=n.return}throw Error(D(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(zr(s,""),r.flags&=-33);var i=Xc(e);El(e,i,s);break;case 3:case 4:var l=r.stateNode.containerInfo,d=Xc(e);Cl(e,d,l);break;default:throw Error(D(161))}}catch(u){xe(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Rg(e,t,n){V=e,Kp(e)}function Kp(e,t,n){for(var r=(e.mode&1)!==0;V!==null;){var s=V,i=s.child;if(s.tag===22&&r){var l=s.memoizedState!==null||ks;if(!l){var d=s.alternate,u=d!==null&&d.memoizedState!==null||Le;d=ks;var f=Le;if(ks=l,(Le=u)&&!f)for(V=s;V!==null;)l=V,u=l.child,l.tag===22&&l.memoizedState!==null?nd(s):u!==null?(u.return=l,V=u):nd(s);for(;i!==null;)V=i,Kp(i),i=i.sibling;V=s,ks=d,Le=f}ed(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,V=i):ed(e)}}function ed(e){for(;V!==null;){var t=V;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Le||Bo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Le)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:mt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Uc(t,i,r);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Uc(t,l,n)}break;case 5:var d=t.stateNode;if(n===null&&t.flags&4){n=d;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var p=f.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&Jr(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}Le||t.flags&512&&bl(t)}catch(h){xe(t,t.return,h)}}if(t===e){V=null;break}if(n=t.sibling,n!==null){n.return=t.return,V=n;break}V=t.return}}function td(e){for(;V!==null;){var t=V;if(t===e){V=null;break}var n=t.sibling;if(n!==null){n.return=t.return,V=n;break}V=t.return}}function nd(e){for(;V!==null;){var t=V;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Bo(4,t)}catch(u){xe(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(u){xe(t,s,u)}}var i=t.return;try{bl(t)}catch(u){xe(t,i,u)}break;case 5:var l=t.return;try{bl(t)}catch(u){xe(t,l,u)}}}catch(u){xe(t,t.return,u)}if(t===e){V=null;break}var d=t.sibling;if(d!==null){d.return=t.return,V=d;break}V=t.return}}var Mg=Math.ceil,No=Ut.ReactCurrentDispatcher,_a=Ut.ReactCurrentOwner,lt=Ut.ReactCurrentBatchConfig,ee=0,Ee=null,ye=null,Re=0,Xe=0,Wn=an(0),Ne=0,os=null,kn=0,Go=0,Ta=0,Br=null,qe=null,Ia=0,dr=1/0,Tt=null,So=!1,kl=null,tn=null,_s=!1,Jt=null,bo=0,Gr=0,_l=null,Js=-1,Ks=0;function He(){return ee&6?ve():Js!==-1?Js:Js=ve()}function nn(e){return e.mode&1?ee&2&&Re!==0?Re&-Re:hg.transition!==null?(Ks===0&&(Ks=Pf()),Ks):(e=se,e!==0||(e=window.event,e=e===void 0?16:Hf(e.type)),e):1}function vt(e,t,n,r){if(50<Gr)throw Gr=0,_l=null,Error(D(185));ls(e,n,r),(!(ee&2)||e!==Ee)&&(e===Ee&&(!(ee&2)&&(Go|=n),Ne===4&&$t(e,Re)),Ke(e,r),n===1&&ee===0&&!(t.mode&1)&&(dr=ve()+500,Uo&&cn()))}function Ke(e,t){var n=e.callbackNode;h0(e,t);var r=oo(e,e===Ee?Re:0);if(r===0)n!==null&&uc(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&uc(n),t===1)e.tag===0?mg(rd.bind(null,e)):op(rd.bind(null,e)),dg(function(){!(ee&6)&&cn()}),n=null;else{switch(jf(r)){case 1:n=ta;break;case 4:n=Rf;break;case 16:n=so;break;case 536870912:n=Mf;break;default:n=so}n=rm(n,Yp.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Yp(e,t){if(Js=-1,Ks=0,ee&6)throw Error(D(327));var n=e.callbackNode;if(tr()&&e.callbackNode!==n)return null;var r=oo(e,e===Ee?Re:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Co(e,r);else{t=r;var s=ee;ee|=2;var i=Xp();(Ee!==e||Re!==t)&&(Tt=null,dr=ve()+500,Nn(e,t));do try{Lg();break}catch(d){Qp(e,d)}while(!0);ma(),No.current=i,ee=s,ye!==null?t=0:(Ee=null,Re=0,t=Ne)}if(t!==0){if(t===2&&(s=el(e),s!==0&&(r=s,t=Tl(e,s))),t===1)throw n=os,Nn(e,0),$t(e,r),Ke(e,ve()),n;if(t===6)$t(e,r);else{if(s=e.current.alternate,!(r&30)&&!Pg(s)&&(t=Co(e,r),t===2&&(i=el(e),i!==0&&(r=i,t=Tl(e,i))),t===1))throw n=os,Nn(e,0),$t(e,r),Ke(e,ve()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(D(345));case 2:mn(e,qe,Tt);break;case 3:if($t(e,r),(r&130023424)===r&&(t=Ia+500-ve(),10<t)){if(oo(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){He(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=al(mn.bind(null,e,qe,Tt),t);break}mn(e,qe,Tt);break;case 4:if($t(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var l=31-xt(r);i=1<<l,l=t[l],l>s&&(s=l),r&=~i}if(r=s,r=ve()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Mg(r/1960))-r,10<r){e.timeoutHandle=al(mn.bind(null,e,qe,Tt),r);break}mn(e,qe,Tt);break;case 5:mn(e,qe,Tt);break;default:throw Error(D(329))}}}return Ke(e,ve()),e.callbackNode===n?Yp.bind(null,e):null}function Tl(e,t){var n=Br;return e.current.memoizedState.isDehydrated&&(Nn(e,t).flags|=256),e=Co(e,t),e!==2&&(t=qe,qe=n,t!==null&&Il(t)),e}function Il(e){qe===null?qe=e:qe.push.apply(qe,e)}function Pg(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Nt(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function $t(e,t){for(t&=~Ta,t&=~Go,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-xt(t),r=1<<n;e[n]=-1,t&=~r}}function rd(e){if(ee&6)throw Error(D(327));tr();var t=oo(e,0);if(!(t&1))return Ke(e,ve()),null;var n=Co(e,t);if(e.tag!==0&&n===2){var r=el(e);r!==0&&(t=r,n=Tl(e,r))}if(n===1)throw n=os,Nn(e,0),$t(e,t),Ke(e,ve()),n;if(n===6)throw Error(D(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,mn(e,qe,Tt),Ke(e,ve()),null}function Aa(e,t){var n=ee;ee|=1;try{return e(t)}finally{ee=n,ee===0&&(dr=ve()+500,Uo&&cn())}}function _n(e){Jt!==null&&Jt.tag===0&&!(ee&6)&&tr();var t=ee;ee|=1;var n=lt.transition,r=se;try{if(lt.transition=null,se=1,e)return e()}finally{se=r,lt.transition=n,ee=t,!(ee&6)&&cn()}}function Ra(){Xe=Wn.current,ue(Wn)}function Nn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,cg(n)),ye!==null)for(n=ye.return;n!==null;){var r=n;switch(ua(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&uo();break;case 3:ar(),ue(We),ue(Fe),wa();break;case 5:ya(r);break;case 4:ar();break;case 13:ue(me);break;case 19:ue(me);break;case 10:ha(r.type._context);break;case 22:case 23:Ra()}n=n.return}if(Ee=e,ye=e=rn(e.current,null),Re=Xe=t,Ne=0,os=null,Ta=Go=kn=0,qe=Br=null,vn!==null){for(t=0;t<vn.length;t++)if(n=vn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var l=i.next;i.next=s,r.next=l}n.pending=r}vn=null}return e}function Qp(e,t){do{var n=ye;try{if(ma(),qs.current=wo,yo){for(var r=he.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}yo=!1}if(En=0,Ce=we=he=null,Vr=!1,ns=0,_a.current=null,n===null||n.return===null){Ne=1,os=t,ye=null;break}e:{var i=e,l=n.return,d=n,u=t;if(t=Re,d.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var f=u,p=d,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var h=p.alternate;h?(p.updateQueue=h.updateQueue,p.memoizedState=h.memoizedState,p.lanes=h.lanes):(p.updateQueue=null,p.memoizedState=null)}var g=zc(l);if(g!==null){g.flags&=-257,qc(g,l,d,i,t),g.mode&1&&Oc(i,f,t),t=g,u=f;var w=t.updateQueue;if(w===null){var N=new Set;N.add(u),t.updateQueue=N}else w.add(u);break e}else{if(!(t&1)){Oc(i,f,t),Ma();break e}u=Error(D(426))}}else if(pe&&d.mode&1){var S=zc(l);if(S!==null){!(S.flags&65536)&&(S.flags|=256),qc(S,l,d,i,t),fa(cr(u,d));break e}}i=u=cr(u,d),Ne!==4&&(Ne=2),Br===null?Br=[i]:Br.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var x=jp(i,u,t);Fc(i,x);break e;case 1:d=u;var v=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(tn===null||!tn.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t;var C=Lp(i,d,t);Fc(i,C);break e}}i=i.return}while(i!==null)}em(n)}catch(b){t=b,ye===n&&n!==null&&(ye=n=n.return);continue}break}while(!0)}function Xp(){var e=No.current;return No.current=wo,e===null?wo:e}function Ma(){(Ne===0||Ne===3||Ne===2)&&(Ne=4),Ee===null||!(kn&268435455)&&!(Go&268435455)||$t(Ee,Re)}function Co(e,t){var n=ee;ee|=2;var r=Xp();(Ee!==e||Re!==t)&&(Tt=null,Nn(e,t));do try{jg();break}catch(s){Qp(e,s)}while(!0);if(ma(),ee=n,No.current=r,ye!==null)throw Error(D(261));return Ee=null,Re=0,Ne}function jg(){for(;ye!==null;)Zp(ye)}function Lg(){for(;ye!==null&&!i0();)Zp(ye)}function Zp(e){var t=nm(e.alternate,e,Xe);e.memoizedProps=e.pendingProps,t===null?em(e):ye=t,_a.current=null}function em(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Tg(n,t),n!==null){n.flags&=32767,ye=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ne=6,ye=null;return}}else if(n=_g(n,t,Xe),n!==null){ye=n;return}if(t=t.sibling,t!==null){ye=t;return}ye=t=e}while(t!==null);Ne===0&&(Ne=5)}function mn(e,t,n){var r=se,s=lt.transition;try{lt.transition=null,se=1,Dg(e,t,n,r)}finally{lt.transition=s,se=r}return null}function Dg(e,t,n,r){do tr();while(Jt!==null);if(ee&6)throw Error(D(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(D(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(g0(e,i),e===Ee&&(ye=Ee=null,Re=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||_s||(_s=!0,rm(so,function(){return tr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=lt.transition,lt.transition=null;var l=se;se=1;var d=ee;ee|=4,_a.current=null,Ag(e,n),Jp(n,e),ng(il),io=!!ol,il=ol=null,e.current=n,Rg(n),l0(),ee=d,se=l,lt.transition=i}else e.current=n;if(_s&&(_s=!1,Jt=e,bo=s),i=e.pendingLanes,i===0&&(tn=null),d0(n.stateNode),Ke(e,ve()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(So)throw So=!1,e=kl,kl=null,e;return bo&1&&e.tag!==0&&tr(),i=e.pendingLanes,i&1?e===_l?Gr++:(Gr=0,_l=e):Gr=0,cn(),null}function tr(){if(Jt!==null){var e=jf(bo),t=lt.transition,n=se;try{if(lt.transition=null,se=16>e?16:e,Jt===null)var r=!1;else{if(e=Jt,Jt=null,bo=0,ee&6)throw Error(D(331));var s=ee;for(ee|=4,V=e.current;V!==null;){var i=V,l=i.child;if(V.flags&16){var d=i.deletions;if(d!==null){for(var u=0;u<d.length;u++){var f=d[u];for(V=f;V!==null;){var p=V;switch(p.tag){case 0:case 11:case 15:Hr(8,p,i)}var m=p.child;if(m!==null)m.return=p,V=m;else for(;V!==null;){p=V;var h=p.sibling,g=p.return;if(qp(p),p===f){V=null;break}if(h!==null){h.return=g,V=h;break}V=g}}}var w=i.alternate;if(w!==null){var N=w.child;if(N!==null){w.child=null;do{var S=N.sibling;N.sibling=null,N=S}while(N!==null)}}V=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,V=l;else e:for(;V!==null;){if(i=V,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Hr(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,V=x;break e}V=i.return}}var v=e.current;for(V=v;V!==null;){l=V;var y=l.child;if(l.subtreeFlags&2064&&y!==null)y.return=l,V=y;else e:for(l=v;V!==null;){if(d=V,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:Bo(9,d)}}catch(b){xe(d,d.return,b)}if(d===l){V=null;break e}var C=d.sibling;if(C!==null){C.return=d.return,V=C;break e}V=d.return}}if(ee=s,cn(),kt&&typeof kt.onPostCommitFiberRoot=="function")try{kt.onPostCommitFiberRoot(Po,e)}catch{}r=!0}return r}finally{se=n,lt.transition=t}}return!1}function sd(e,t,n){t=cr(n,t),t=jp(e,t,1),e=en(e,t,1),t=He(),e!==null&&(ls(e,1,t),Ke(e,t))}function xe(e,t,n){if(e.tag===3)sd(e,e,n);else for(;t!==null;){if(t.tag===3){sd(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(tn===null||!tn.has(r))){e=cr(n,e),e=Lp(t,e,1),t=en(t,e,1),e=He(),t!==null&&(ls(t,1,e),Ke(t,e));break}}t=t.return}}function Fg(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=He(),e.pingedLanes|=e.suspendedLanes&n,Ee===e&&(Re&n)===n&&(Ne===4||Ne===3&&(Re&130023424)===Re&&500>ve()-Ia?Nn(e,0):Ta|=n),Ke(e,t)}function tm(e,t){t===0&&(e.mode&1?(t=xs,xs<<=1,!(xs&130023424)&&(xs=4194304)):t=1);var n=He();e=Lt(e,t),e!==null&&(ls(e,t,n),Ke(e,n))}function Ug(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),tm(e,n)}function Vg(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(D(314))}r!==null&&r.delete(t),tm(e,n)}var nm;nm=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||We.current)$e=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return $e=!1,kg(e,t,n);$e=!!(e.flags&131072)}else $e=!1,pe&&t.flags&1048576&&ip(t,mo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ws(e,t),e=t.pendingProps;var s=or(t,Fe.current);er(t,n),s=Sa(null,t,r,e,s,n);var i=ba();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Je(r)?(i=!0,fo(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,xa(t),s.updater=Ho,t.stateNode=s,s._reactInternals=t,hl(t,r,e,n),t=vl(null,t,r,!0,i,n)):(t.tag=0,pe&&i&&da(t),Ve(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ws(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Bg(r),e=mt(r,e),s){case 0:t=xl(null,t,r,e,n);break e;case 1:t=Jc(null,t,r,e,n);break e;case 11:t=$c(null,t,r,e,n);break e;case 14:t=Wc(null,t,r,mt(r.type,e),n);break e}throw Error(D(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:mt(r,s),xl(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:mt(r,s),Jc(e,t,r,s,n);case 3:e:{if(Vp(t),e===null)throw Error(D(387));r=t.pendingProps,i=t.memoizedState,s=i.element,fp(e,t),xo(t,r,null,n);var l=t.memoizedState;if(r=l.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=cr(Error(D(423)),t),t=Kc(e,t,r,n,s);break e}else if(r!==s){s=cr(Error(D(424)),t),t=Kc(e,t,r,n,s);break e}else for(Ze=Zt(t.stateNode.containerInfo.firstChild),et=t,pe=!0,gt=null,n=dp(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ir(),r===s){t=Dt(e,t,n);break e}Ve(e,t,r,n)}t=t.child}return t;case 5:return pp(t),e===null&&fl(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,l=s.children,ll(r,s)?l=null:i!==null&&ll(r,i)&&(t.flags|=32),Up(e,t),Ve(e,t,l,n),t.child;case 6:return e===null&&fl(t),null;case 13:return Hp(e,t,n);case 4:return va(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=lr(t,null,r,n):Ve(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:mt(r,s),$c(e,t,r,s,n);case 7:return Ve(e,t,t.pendingProps,n),t.child;case 8:return Ve(e,t,t.pendingProps.children,n),t.child;case 12:return Ve(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,l=s.value,le(ho,r._currentValue),r._currentValue=l,i!==null)if(Nt(i.value,l)){if(i.children===s.children&&!We.current){t=Dt(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var d=i.dependencies;if(d!==null){l=i.child;for(var u=d.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Mt(-1,n&-n),u.tag=2;var f=i.updateQueue;if(f!==null){f=f.shared;var p=f.pending;p===null?u.next=u:(u.next=p.next,p.next=u),f.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),pl(i.return,n,t),d.lanes|=n;break}u=u.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(D(341));l.lanes|=n,d=l.alternate,d!==null&&(d.lanes|=n),pl(l,n,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}Ve(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,er(t,n),s=ct(s),r=r(s),t.flags|=1,Ve(e,t,r,n),t.child;case 14:return r=t.type,s=mt(r,t.pendingProps),s=mt(r.type,s),Wc(e,t,r,s,n);case 15:return Dp(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:mt(r,s),Ws(e,t),t.tag=1,Je(r)?(e=!0,fo(t)):e=!1,er(t,n),Pp(t,r,s),hl(t,r,s,n),vl(null,t,r,!0,e,n);case 19:return Bp(e,t,n);case 22:return Fp(e,t,n)}throw Error(D(156,t.tag))};function rm(e,t){return Af(e,t)}function Hg(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function it(e,t,n,r){return new Hg(e,t,n,r)}function Pa(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Bg(e){if(typeof e=="function")return Pa(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Xl)return 11;if(e===Zl)return 14}return 2}function rn(e,t){var n=e.alternate;return n===null?(n=it(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ys(e,t,n,r,s,i){var l=2;if(r=e,typeof e=="function")Pa(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Fn:return Sn(n.children,s,i,t);case Ql:l=8,s|=8;break;case Vi:return e=it(12,n,t,s|2),e.elementType=Vi,e.lanes=i,e;case Hi:return e=it(13,n,t,s),e.elementType=Hi,e.lanes=i,e;case Bi:return e=it(19,n,t,s),e.elementType=Bi,e.lanes=i,e;case pf:return Oo(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case uf:l=10;break e;case ff:l=9;break e;case Xl:l=11;break e;case Zl:l=14;break e;case Ot:l=16,r=null;break e}throw Error(D(130,e==null?e:typeof e,""))}return t=it(l,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function Sn(e,t,n,r){return e=it(7,e,r,t),e.lanes=n,e}function Oo(e,t,n,r){return e=it(22,e,r,t),e.elementType=pf,e.lanes=n,e.stateNode={isHidden:!1},e}function ji(e,t,n){return e=it(6,e,null,t),e.lanes=n,e}function Li(e,t,n){return t=it(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Gg(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hi(0),this.expirationTimes=hi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hi(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ja(e,t,n,r,s,i,l,d,u){return e=new Gg(e,t,n,d,u),t===1?(t=1,i===!0&&(t|=8)):t=0,i=it(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},xa(i),e}function Og(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Dn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function sm(e){if(!e)return on;e=e._reactInternals;e:{if(In(e)!==e||e.tag!==1)throw Error(D(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Je(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(D(171))}if(e.tag===1){var n=e.type;if(Je(n))return sp(e,n,t)}return t}function om(e,t,n,r,s,i,l,d,u){return e=ja(n,r,!0,e,s,i,l,d,u),e.context=sm(null),n=e.current,r=He(),s=nn(n),i=Mt(r,s),i.callback=t??null,en(n,i,s),e.current.lanes=s,ls(e,s,r),Ke(e,r),e}function zo(e,t,n,r){var s=t.current,i=He(),l=nn(s);return n=sm(n),t.context===null?t.context=n:t.pendingContext=n,t=Mt(i,l),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=en(s,t,l),e!==null&&(vt(e,s,l,i),zs(e,s,l)),l}function Eo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function od(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function La(e,t){od(e,t),(e=e.alternate)&&od(e,t)}function zg(){return null}var im=typeof reportError=="function"?reportError:function(e){console.error(e)};function Da(e){this._internalRoot=e}qo.prototype.render=Da.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(D(409));zo(e,t,null,null)};qo.prototype.unmount=Da.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;_n(function(){zo(null,e,null,null)}),t[jt]=null}};function qo(e){this._internalRoot=e}qo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ff();e={blockedOn:null,target:e,priority:t};for(var n=0;n<qt.length&&t!==0&&t<qt[n].priority;n++);qt.splice(n,0,e),n===0&&Vf(e)}};function Fa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function $o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function id(){}function qg(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var f=Eo(l);i.call(f)}}var l=om(t,r,e,0,null,!1,!1,"",id);return e._reactRootContainer=l,e[jt]=l.current,Qr(e.nodeType===8?e.parentNode:e),_n(),l}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var d=r;r=function(){var f=Eo(u);d.call(f)}}var u=ja(e,0,!1,null,null,!1,!1,"",id);return e._reactRootContainer=u,e[jt]=u.current,Qr(e.nodeType===8?e.parentNode:e),_n(function(){zo(t,u,n,r)}),u}function Wo(e,t,n,r,s){var i=n._reactRootContainer;if(i){var l=i;if(typeof s=="function"){var d=s;s=function(){var u=Eo(l);d.call(u)}}zo(t,l,e,s)}else l=qg(n,t,e,s,r);return Eo(l)}Lf=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Rr(t.pendingLanes);n!==0&&(na(t,n|1),Ke(t,ve()),!(ee&6)&&(dr=ve()+500,cn()))}break;case 13:_n(function(){var r=Lt(e,1);if(r!==null){var s=He();vt(r,e,1,s)}}),La(e,1)}};ra=function(e){if(e.tag===13){var t=Lt(e,134217728);if(t!==null){var n=He();vt(t,e,134217728,n)}La(e,134217728)}};Df=function(e){if(e.tag===13){var t=nn(e),n=Lt(e,t);if(n!==null){var r=He();vt(n,e,t,r)}La(e,t)}};Ff=function(){return se};Uf=function(e,t){var n=se;try{return se=e,t()}finally{se=n}};Qi=function(e,t,n){switch(t){case"input":if(zi(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Fo(r);if(!s)throw Error(D(90));hf(r),zi(r,s)}}}break;case"textarea":xf(e,n);break;case"select":t=n.value,t!=null&&Yn(e,!!n.multiple,t,!1)}};Cf=Aa;Ef=_n;var $g={usingClientEntryPoint:!1,Events:[cs,Bn,Fo,Sf,bf,Aa]},kr={findFiberByHostInstance:xn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Wg={bundleType:kr.bundleType,version:kr.version,rendererPackageName:kr.rendererPackageName,rendererConfig:kr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ut.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Tf(e),e===null?null:e.stateNode},findFiberByHostInstance:kr.findFiberByHostInstance||zg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ts=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ts.isDisabled&&Ts.supportsFiber)try{Po=Ts.inject(Wg),kt=Ts}catch{}}nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$g;nt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fa(t))throw Error(D(200));return Og(e,t,null,n)};nt.createRoot=function(e,t){if(!Fa(e))throw Error(D(299));var n=!1,r="",s=im;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=ja(e,1,!1,null,null,n,!1,r,s),e[jt]=t.current,Qr(e.nodeType===8?e.parentNode:e),new Da(t)};nt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(D(188)):(e=Object.keys(e).join(","),Error(D(268,e)));return e=Tf(t),e=e===null?null:e.stateNode,e};nt.flushSync=function(e){return _n(e)};nt.hydrate=function(e,t,n){if(!$o(t))throw Error(D(200));return Wo(null,e,t,!0,n)};nt.hydrateRoot=function(e,t,n){if(!Fa(e))throw Error(D(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",l=im;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=om(t,null,e,1,n??null,s,!1,i,l),e[jt]=t.current,Qr(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new qo(t)};nt.render=function(e,t,n){if(!$o(t))throw Error(D(200));return Wo(null,e,t,!1,n)};nt.unmountComponentAtNode=function(e){if(!$o(e))throw Error(D(40));return e._reactRootContainer?(_n(function(){Wo(null,null,e,!1,function(){e._reactRootContainer=null,e[jt]=null})}),!0):!1};nt.unstable_batchedUpdates=Aa;nt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$o(n))throw Error(D(200));if(e==null||e._reactInternals===void 0)throw Error(D(38));return Wo(e,t,n,!1,r)};nt.version="18.3.1-next-f1338f8080-20240426";function lm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lm)}catch(e){console.error(e)}}lm(),lf.exports=nt;var Jg=lf.exports,am,ld=Jg;am=ld.createRoot,ld.hydrateRoot;var de=(e=>(e.GOOD="Good",e.BAD="Bad",e.ATTENTION="Needs Attention",e.NIL="Nil",e))(de||{});const ad={truckNo:"",trailerNo:"",inspectedBy:"",driverName:"",location:"",odometer:"",jobCard:"",timestamp:"",rate:0,remarks:"",inspectorSignature:"",driverSignature:"",photoFront:"",photoLS:"",photoRS:"",photoBack:"",photoDamage:""},Is=[{id:"details",title:"Details",label:"Details"},{id:"photos",title:"Photos",label:"Photos"},{id:"checklist_1",title:"Checklist 1",label:"Part 1"},{id:"checklist_2",title:"Checklist 2",label:"Part 2"},{id:"checklist_3",title:"Checklist 3",label:"Part 3"},{id:"signatures",title:"Signatures",label:"Signatures"},{id:"summary",title:"Summary",label:"Summary"}],Q={PPE:"PPE & Safety Gear",DOCUMENTATION:"Documentation & Legal",VEHICLE_EXTERIOR:"Vehicle Exterior & Cab",LIGHTS_ELECTRICAL:"Lights & Electrical",MECHANICAL:"Mechanical & Safety Equipment",TRAILER:"Trailer Specifics"},ur=[{id:"reflectiveWorkSuit",label:"Reflective Work Suit",category:Q.PPE},{id:"safetyGear",label:"Safety Goggles, Boots, Gloves, Hard Hat",category:Q.PPE},{id:"dustMask",label:"Dust Mask (Task Application)",category:Q.PPE},{id:"roadFitness",label:"Valid Road Fitness / Road Tax / Insurance",category:Q.DOCUMENTATION},{id:"validDriverDocs",label:"Valid Drivers License, DDT Certificate, Driver ID",category:Q.DOCUMENTATION},{id:"driverManual",label:"Driver Manual",category:Q.DOCUMENTATION},{id:"routeRisk",label:"Route Risk Assessment",category:Q.DOCUMENTATION},{id:"windscreen",label:"Windscreen Condition",category:Q.VEHICLE_EXTERIOR},{id:"mirrors",label:"Mirrors Condition",category:Q.VEHICLE_EXTERIOR},{id:"chevrons",label:"Chevrons, Plate/Reflective Tape",category:Q.VEHICLE_EXTERIOR},{id:"generalCondition",label:"General Condition (Interior Cab, Body: Signs of Tear & Wear, Dents)",category:Q.VEHICLE_EXTERIOR},{id:"seatBelt",label:"Three-Point Retractable Seat Belt",category:Q.VEHICLE_EXTERIOR},{id:"headLamps",label:"Head Lamps Condition",category:Q.LIGHTS_ELECTRICAL},{id:"indicators",label:"Indicators Condition",category:Q.LIGHTS_ELECTRICAL},{id:"parkingLights",label:"Parking Lights Condition",category:Q.LIGHTS_ELECTRICAL},{id:"reverseAlarm",label:"Reverse Alarm, Reverse Lights Condition",category:Q.LIGHTS_ELECTRICAL},{id:"hornIgnition",label:"Horn, Ignition & Electrical (Doors/Windows)",category:Q.LIGHTS_ELECTRICAL},{id:"brakes",label:"Brakes, Brake Lights, Trailer Lights, Brake Air Pipes",category:Q.MECHANICAL},{id:"tyres",label:"Tyres Condition (Not Worn Out, Pressure, Spare)",category:Q.MECHANICAL},{id:"wheelNuts",label:"Wheel Nuts, Wheel Pointers",category:Q.MECHANICAL},{id:"fluidLeaks",label:"No Leaks of Lubricants/Fluids (Oil, Coolant, etc.)",category:Q.MECHANICAL},{id:"fireExtinguisher",label:"Recommended Fire Extinguisher (9Kg & 2.5Kg)",category:Q.MECHANICAL},{id:"warningTriangles",label:"Warning Triangles, Two Approved Wheel Chocks",category:Q.MECHANICAL},{id:"firstAid",label:"First Aid Kit",category:Q.MECHANICAL},{id:"trailerCondition",label:"Trailer Condition",category:Q.TRAILER},{id:"fifthWheel",label:"Fifth Wheel Condition",category:Q.TRAILER},{id:"landingLegs",label:"Position and Condition of Landing Legs",category:Q.TRAILER},{id:"tarpaulins",label:"Tarpaulins, Ropes, Belts or Straps",category:Q.TRAILER}],G={TRUCK_EQUIPMENT:"Truck/Tractor and Equipment",TYRES:"Tyres and Horses",PPE_ID:"Drivers Protective Gear & ID",DOCUMENTS:"Documents",ONBOARD:"On Board Equipment"},Jo=[{id:"petro_1",label:"1. OBC functionality: live",category:G.TRUCK_EQUIPMENT},{id:"petro_2",label:"2. Large exterior mirror for all around vision (incl. parabolic on passenger side)",category:G.TRUCK_EQUIPMENT},{id:"petro_3",label:"3. Single pane laminated windshields (no cracks)",category:G.TRUCK_EQUIPMENT},{id:"petro_4",label:"4. Ergonomically designed seats and head restraints",category:G.TRUCK_EQUIPMENT},{id:"petro_5",label:"5. 3 point seat belts on both seats",category:G.TRUCK_EQUIPMENT},{id:"petro_6",label:"6. Brake Testing required",category:G.TRUCK_EQUIPMENT},{id:"petro_7",label:"7. Functioning, master battery switch & engine cut  off switch on side of cab",category:G.TRUCK_EQUIPMENT},{id:"petro_8",label:"8. Stop Tail, Backing and Turn lights",category:G.TRUCK_EQUIPMENT},{id:"petro_9",label:"9. Cab mounted grab handle for ease of entry exit",category:G.TRUCK_EQUIPMENT},{id:"petro_10",label:"10. Jack, Mats, Wheel Spanner",category:G.TRUCK_EQUIPMENT},{id:"petro_11",label:"11. Cabin Jack",category:G.TRUCK_EQUIPMENT},{id:"petro_12",label:"12. P. window switches",category:G.TRUCK_EQUIPMENT},{id:"petro_13",label:"13. Condition of the fifth wheel (Lock/Lubricants)",category:G.TRUCK_EQUIPMENT},{id:"petro_14",label:"14. Each component outlets (faucet) numbered and marked with fill capacity",category:G.TRUCK_EQUIPMENT},{id:"petro_15",label:"15. 2 bronze grounding bolts compatible with loading rack (permissive) system",category:G.TRUCK_EQUIPMENT},{id:"petro_16",label:"16. Anti  slip walkway along the whole length of the tank",category:G.TRUCK_EQUIPMENT},{id:"petro_17",label:"17. Tank hatch and roll  over protection (coatings)",category:G.TRUCK_EQUIPMENT},{id:"petro_18",label:"18. Double latching lockable man lids, installed with hinges facing forward",category:G.TRUCK_EQUIPMENT},{id:"petro_19",label:"19. Trailer fitted with fall protection harness of handrails",category:G.TRUCK_EQUIPMENT},{id:"petro_20",label:"20. Ullage marks in correct places & sealed, also Doom Cover",category:G.TRUCK_EQUIPMENT},{id:"petro_21",label:"21. Presence of emergency/foot valves",category:G.TRUCK_EQUIPMENT},{id:"petro_22",label:"22. Emergence valves for all components",category:G.TRUCK_EQUIPMENT},{id:"petro_23",label:"23. Condition of landing legs",category:G.TRUCK_EQUIPMENT},{id:"petro_24",label:"24. Minimum tread depth set at the center for all wheel (incl. Spare tyre)",category:G.TYRES},{id:"petro_25",label:"25. Wheel nut indicators",category:G.TYRES},{id:"petro_26",label:"26. Mudguards for all wheels",category:G.TYRES},{id:"petro_27",label:"27. Choke blocks",category:G.TYRES},{id:"petro_28",label:"28. Hoses damaged/fittings? Continuity Test done?",category:G.TYRES},{id:"petro_29",label:"29. Delivery hose(s) for gravity drops",category:G.TYRES},{id:"petro_30",label:"30. Truck/trailer loaded within legal limits (axle weight)?",category:G.TYRES},{id:"petro_31",label:"31. Signs of lubrication loss on wheel",category:G.TYRES},{id:"petro_32",label:"32. Anti-static clothes/Work suite?",category:G.PPE_ID},{id:"petro_33",label:"33. Gloves for hydrocarbon handing Present?",category:G.PPE_ID},{id:"petro_34",label:"34. Safety shoes - hydrocarbon proof Present?",category:G.PPE_ID},{id:"petro_35",label:"35. Hard hat Present?",category:G.PPE_ID},{id:"petro_36",label:"36. Drivers ID Present?",category:G.PPE_ID},{id:"petro_37",label:"37. Road worthiness approval by authorities",category:G.DOCUMENTS},{id:"petro_38",label:"38. Valid drivers DDT certificate",category:G.DOCUMENTS},{id:"petro_39",label:"39. Valid drivers License",category:G.DOCUMENTS},{id:"petro_40",label:"40. Electric certificate",category:G.DOCUMENTS},{id:"petro_41",label:"41. Drivers Manual",category:G.DOCUMENTS},{id:"petro_42",label:"42. Route Risk Assessment",category:G.DOCUMENTS},{id:"petro_43",label:"43. ZCSA certificate",category:G.DOCUMENTS},{id:"petro_44",label:"44. Assize Certificate",category:G.DOCUMENTS},{id:"petro_45",label:"45. TREM Card",category:G.DOCUMENTS},{id:"petro_46",label:"46. Fire extinguisher (2kg dry chemical) fixed & valid X 1",category:G.ONBOARD},{id:"petro_47",label:"47. Fire extinguisher (9kg dry chemical) within inspection X 2",category:G.ONBOARD},{id:"petro_48",label:"48. Barricading tape",category:G.ONBOARD},{id:"petro_49",label:"49. Charge Line",category:G.ONBOARD},{id:"petro_50",label:"50. Torch",category:G.ONBOARD},{id:"petro_51",label:"51. Spill Kit",category:G.ONBOARD},{id:"petro_52",label:"52. First aid kit 4 warning triangles and 3 cones",category:G.ONBOARD},{id:"petro_53",label:"53. On Board camera",category:G.ONBOARD},{id:"petro_54",label:"54. Safe Loading Pass/ Safe to operate/ Tech inspection",category:G.ONBOARD}],Y={PPE:"A. Personal Protective Equipment",VEHICLE:"B. Vehicle (Horse & Trailer)",SPILL_KIT:"C. Spill Kit",DOCUMENTATION:"D. Documentation"},wn=[{id:"acid_1",label:"1. Reflective Work Suit (Acid Proof), Gumboots Safety Goggles",category:Y.PPE},{id:"acid_2",label:"2. Hard Hat, PVC Gloves, Respirator (Double side), Face shield",category:Y.PPE},{id:"acid_3",label:"3. Valid road fitness/road tax/Insurance/permit",category:Y.VEHICLE},{id:"acid_4",label:"4. Wind screen condition",category:Y.VEHICLE},{id:"acid_5",label:"5. Mirrors in good condition",category:Y.VEHICLE},{id:"acid_6",label:"6. Three-point retractable seat belt",category:Y.VEHICLE},{id:"acid_7",label:"7. Horn working, ignition switch, electrical (doors/windows)",category:Y.VEHICLE},{id:"acid_8",label:"8. Valid Fire extinguisher (9kg=2, 2kg=1)",category:Y.VEHICLE},{id:"acid_9",label:"9. Warning triangles, Cones, two approved wheel chokes",category:Y.VEHICLE},{id:"acid_10",label:"10. Headlamps working",category:Y.VEHICLE},{id:"acid_11",label:"11. Amber beacon",category:Y.VEHICLE},{id:"acid_12",label:"12. Brake lights, trailer lights, indicators working",category:Y.VEHICLE},{id:"acid_13",label:"13. Brakes, air pipes, air bags OK",category:Y.VEHICLE},{id:"acid_14",label:"14. Tyres not worn  out, visual Tyre Pressure, Spare wheel",category:Y.VEHICLE},{id:"acid_15",label:"15. Wheel nuts, wheel pointers, bolts, Flanges OK",category:Y.VEHICLE},{id:"acid_16",label:"16. Revers alarm, reverse lights working",category:Y.VEHICLE},{id:"acid_17",label:"17. Chevrons plate/reflective tape",category:Y.VEHICLE},{id:"acid_18",label:"18. Hazchem diamond symbols correct & display on both 2 sides",category:Y.VEHICLE},{id:"acid_19",label:"19. Anti-slip protection, Ladder, Hand rails",category:Y.VEHICLE},{id:"acid_20",label:"20. Over spill hose connected to containment container",category:Y.VEHICLE},{id:"acid_21",label:"21. Hatch, Valves, Vents",category:Y.VEHICLE},{id:"acid_22",label:"22. No leaks of chemicals/lubricants (oil, coolants, acid etc.)",category:Y.VEHICLE},{id:"acid_23",label:"23. General condition (interior cab, body: signs of Corrosion, Cracks, leaks)",category:Y.VEHICLE},{id:"acid_25",label:"25. Lime box filled with lime",category:Y.SPILL_KIT},{id:"acid_26",label:"26. First Aid Kit, Diphotrine",category:Y.SPILL_KIT},{id:"acid_27",label:"27. Pick and Shovel",category:Y.SPILL_KIT},{id:"acid_28",label:"28. Barricading tape",category:Y.SPILL_KIT},{id:"acid_29",label:"29. Water (20 liters container)",category:Y.SPILL_KIT},{id:"acid_30",label:"30. Pressure/Thickness Test Certificate",category:Y.DOCUMENTATION},{id:"acid_31",label:"31. Electric System Certificate",category:Y.DOCUMENTATION},{id:"acid_32",label:"32. Tank Cleanliness Certificate",category:Y.DOCUMENTATION},{id:"acid_33",label:"33. Driver Manual, Route Risk Assessment/Journey plan",category:Y.DOCUMENTATION},{id:"acid_34",label:"34. Valid Driver licence, DDT certificate, ID",category:Y.DOCUMENTATION}],O={PRIME_MOVER:"Prime Mover",TRAILER_TANKS:"Trailer/Tanks",DRIVER:"Driver",SAFETY_SIGNS:"Safety & Warning Signs",DOCUMENTS:"Licence & Mandatory Documents"},Ko=[{id:"petro2_1",label:"1. General: Appearance, Paint, Leaks, Charge line",category:O.PRIME_MOVER},{id:"petro2_2",label:"2. Visibility: Windscreen, Windows, Wipers, Mirrors",category:O.PRIME_MOVER},{id:"petro2_3",label:"3. Lighting: Headlights, Beacon, Turning, Stop, Reverse Lights",category:O.PRIME_MOVER},{id:"petro2_4",label:"4. Provision for Orange Diamond",category:O.PRIME_MOVER},{id:"petro2_5",label:"5. Seat Belt: 3-point Contact, Retractable",category:O.PRIME_MOVER},{id:"petro2_6",label:"6. IVMS /Speed limiting device: installed, working",category:O.PRIME_MOVER},{id:"petro2_7",label:"7. Document Holder/Box : Position, Colour, Labeled",category:O.PRIME_MOVER},{id:"petro2_8",label:"8. Tools: Jack, Wheel Spanner, Cabin, Triangles (4), Cones (3)",category:O.PRIME_MOVER},{id:"petro2_9",label:"9. Equipment: Spill Kit, First Aid Kit, Barricading Tape, Fire Extinguisher (Cabin, Trailer x2)",category:O.PRIME_MOVER},{id:"petro2_10",label:"10. Electrical: Battery Master Switch, Battery Box, Terminals, Wiring",category:O.PRIME_MOVER},{id:"petro2_11",label:"11. Tyres: No Retread, Combination, Spray Suppression, Wheels",category:O.PRIME_MOVER},{id:"petro2_12",label:"12. Brake System: ABS, Wheel Pointers, Brake Testing Required?",category:O.PRIME_MOVER},{id:"petro2_13",label:"13. Shielding of Engine, Rear Window Non-opening",category:O.PRIME_MOVER},{id:"petro2_14",label:"14. Exhaust: Discharge on Right Side, Tank outlet 100mm Clearance",category:O.PRIME_MOVER},{id:"petro2_15",label:"15. Condition of the Fifth Wheel (Lock/Lubrication)",category:O.PRIME_MOVER},{id:"petro2_16",label:"16. Compartment Capacities: labeled, < 7000L per compartment",category:O.TRAILER_TANKS},{id:"petro2_17",label:"17. Under Run Protection: Sides, Rear End",category:O.TRAILER_TANKS},{id:"petro2_18",label:"18. Overturn Damage Protection",category:O.TRAILER_TANKS},{id:"petro2_19",label:"19. Valves: Discharge, Actuator, Dust Cups, Colour Coding",category:O.TRAILER_TANKS},{id:"petro2_20",label:"20. Emergency Shut Off: Main, Side(s)/ Brake Interlock System",category:O.TRAILER_TANKS},{id:"petro2_21",label:"21. Electrical Bonding: Cable, Bronze Earthing Studs",category:O.TRAILER_TANKS},{id:"petro2_22",label:"22. Spill Tray, Hose Storage Rack, Fire Extinguisher Holders",category:O.TRAILER_TANKS},{id:"petro2_23",label:"23. Tyres: Tread Depth, Spare Tyre, Non-retread, Combination",category:O.TRAILER_TANKS},{id:"petro2_24",label:"24. Mudguards for all Wheels, Spray Suppressors",category:O.TRAILER_TANKS},{id:"petro2_25",label:"25. Landing Legs",category:O.TRAILER_TANKS},{id:"petro2_26",label:"26. Reversing Alarm",category:O.TRAILER_TANKS},{id:"petro2_27",label:"27. Delivery Hose(s): State, Continuity, Colour Coded, Dust Cups",category:O.TRAILER_TANKS},{id:"petro2_28",label:"28. Lighting: Brakes, Reverse, Warning, Emergency Lighting",category:O.TRAILER_TANKS},{id:"petro2_29",label:"29. Rear Bumper: > 300mm Beyond Tank",category:O.TRAILER_TANKS},{id:"petro2_30",label:"30. Fall Protection: Access Ladder, Anti-slip Walkway, Handrail",category:O.TRAILER_TANKS},{id:"petro2_31",label:"31. Manholes: Dia, Center, Secured, Standard (EN 13317)",category:O.TRAILER_TANKS},{id:"petro2_32",label:"32. Fittings: Ullage Marks, Overfill Protection, Pressure Release",category:O.TRAILER_TANKS},{id:"petro2_33",label:"33. Work Suit: Anti-static, Reflective",category:O.DRIVER},{id:"petro2_34",label:"34. Safety Gloves: For Hydrocarbon Handing",category:O.DRIVER},{id:"petro2_35",label:"35. Safety Boot: With Toe Cap, Oil Resistant",category:O.DRIVER},{id:"petro2_36",label:"36. Safety Helmet: 2- 4-Point Chin Strap",category:O.DRIVER},{id:"petro2_37",label:"37. Drivers ID: Identity Card, Driver Blue Tag",category:O.DRIVER},{id:"petro2_38",label:"38. Hazchem: Both Sides, Rear",category:O.SAFETY_SIGNS},{id:"petro2_39",label:"39. No Smocking, Naked Flame, Cell Phone",category:O.SAFETY_SIGNS},{id:"petro2_40",label:"40. Orange Reflectors: Continuous",category:O.SAFETY_SIGNS},{id:"petro2_41",label:"41. Chevron, Red Reflectors at Rear",category:O.SAFETY_SIGNS},{id:"petro2_42",label:"42. Number Plate: ZABS Approved, Lighting",category:O.SAFETY_SIGNS},{id:"petro2_43",label:"43. Speed Limit Sign: 80 km/h",category:O.SAFETY_SIGNS},{id:"petro2_44",label:"44. Data Plate: Pressure Test",category:O.SAFETY_SIGNS},{id:"petro2_45",label:"45. Road Tax, Certificate of Fitness, Insurance, Identity",category:O.DOCUMENTS},{id:"petro2_46",label:"46. Defensive Driver Training (DDT): Dangerous Goods Certificate",category:O.DOCUMENTS},{id:"petro2_47",label:"47. Drivers License: Validity of Dangerous Goods, CE",category:O.DOCUMENTS},{id:"petro2_48",label:"48. Electric Certificate",category:O.DOCUMENTS},{id:"petro2_49",label:"49. Drivers Manual",category:O.DOCUMENTS},{id:"petro2_50",label:"50. Route Risk Assessment Guide",category:O.DOCUMENTS},{id:"petro2_51",label:"51. ZCSA Certificate",category:O.DOCUMENTS},{id:"petro2_52",label:"52. Assize Certificate",category:O.DOCUMENTS},{id:"petro2_53",label:"53. TREM Card",category:O.DOCUMENTS}],Yo=["id","timestamp","truckNo","trailerNo","inspectedBy","driverName","location","odometer","rate","remarks","inspectorSignature","driverSignature","photoFront","photoLS","photoRS","photoBack","photoDamage","jobCard"],cm=[...Yo,...ur.map(e=>e.id)],dm=[...Yo,...Jo.map(e=>e.id)],um=[...Yo,...Ko.map(e=>e.id)],fm=[...Yo,...wn.map(e=>e.id)],Kg=`
function doPost(e) {
  const lock = LockService.getScriptLock();
  lock.tryLock(30000); 
  try {
    const ss = SpreadsheetApp.getActiveSpreadsheet();
    const body = e.postData ? JSON.parse(e.postData.contents) : {};
    return routeRequest(ss, body);
  } catch (err) {
    return ResponseBuilder.error(err.toString());
  } finally {
    lock.releaseLock();
  }
}

function doGet(e) {
  const ss = SpreadsheetApp.getActiveSpreadsheet();
  return DataHandlers.handleGetRequest(ss);
}

function routeRequest(ss, body) {
  const action = body.action;
  const routes = {
    'login': () => AuthHandlers.handleLogin(ss, body),
    'register_user': () => AuthHandlers.handleRegisterUser(ss, body),
    'get_users': () => AuthHandlers.handleGetUsers(ss),
    'delete_user': () => AuthHandlers.handleDeleteUser(ss, body),
    'update_user': () => AuthHandlers.handleUpdateUser(ss, body),
    'manage_fleet': () => SystemHandlers.handleManageFleet(ss, body),
    'bulk_manage_fleet': () => SystemHandlers.handleBulkManageFleet(ss, body),
    'update_settings': () => SystemHandlers.handleUpdateSettings(ss, body)
  };
  if (!action || action === 'create' || !routes[action]) return DataHandlers.handleDataSubmission(ss, body);
  return routes[action]();
}`,Yg=`
const AuthHandlers = {
  handleLogin: function(ss, body) {
    let userSheet = ss.getSheetByName('Users');
    if (!userSheet) return ResponseBuilder.error("No users found.");
    const data = userSheet.getDataRange().getValues();
    const username = body.username.toLowerCase();
    for (let i = 1; i < data.length; i++) {
        if (data[i][0].toLowerCase() === username && data[i][1] === body.password) {
            return ResponseBuilder.success({ user: { username: data[i][0], name: data[i][2], role: data[i][3] } });
        }
    }
    return ResponseBuilder.error("Invalid credentials.");
  },
  handleRegisterUser: function(ss, body) {
    let sheet = ss.getSheetByName('Users') || ss.insertSheet('Users');
    sheet.appendRow([body.username.toLowerCase(), body.password, body.name, body.role, body.position, new Date().toISOString(), "{}", "TRUE"]);
    return ResponseBuilder.success();
  }
};`,Qg=`
const DataHandlers = {
  handleDataSubmission: function(ss, body) {
    let sheet = ss.getSheetByName(body.sheet) || ss.insertSheet(body.sheet);
    if (sheet.getLastRow() === 0 && body.headers) sheet.appendRow(body.headers);
    sheet.appendRow(body.row);
    return ResponseBuilder.success();
  },
  handleGetRequest: function(ss) {
    const data = {};
    ss.getSheets().forEach(sheet => {
      const name = sheet.getName();
      const lastRow = sheet.getLastRow();
      if (lastRow === 0) { data[name] = []; return; }
      if (name === 'Validation_Data') {
         const values = sheet.getDataRange().getValues();
         const columns = {};
         if (values.length > 0) {
             const headers = values[0];
             headers.forEach((h, idx) => {
                 columns[h] = values.slice(1).map(r => r[idx]).filter(v => v !== "");
             });
         }
         data[name] = columns;
      } else {
         data[name] = sheet.getDataRange().getValues();
      }
    });
    return ContentService.createTextOutput(JSON.stringify(data)).setMimeType(ContentService.MimeType.JSON);
  }
};

const SystemHandlers = {
  handleManageFleet: function(ss, body) {
    let sheet = ss.getSheetByName('Validation_Data') || ss.insertSheet('Validation_Data');
    const lastRow = sheet.getLastRow();
    // Ensure standard headers exist
    if (lastRow === 0) {
      sheet.appendRow(["Driver_Name","Inspector_Name","Location","Position","Misc1","Misc2","Misc3","Truck_Reg_No","Trailer_Reg_No"]);
      sheet.setFrozenRows(1);
    }
    
    const colIdx = body.type === 'truck' ? 8 : 9; // Col H is 8, Col I is 9
    const range = sheet.getRange(1, colIdx, Math.max(1, sheet.getLastRow()), 1);
    const colValues = range.getValues().flat();
    const firstEmpty = colValues.indexOf("");
    const targetRow = firstEmpty === -1 ? sheet.getLastRow() + 1 : firstEmpty + 1;
    
    sheet.getRange(targetRow, colIdx).setValue(body.value);
    return ResponseBuilder.success({ message: "Asset added to Col " + (colIdx === 8 ? "H" : "I") });
  },

  handleBulkManageFleet: function(ss, body) {
    let sheet = ss.getSheetByName('Validation_Data') || ss.insertSheet('Validation_Data');
    const lastRow = sheet.getLastRow();
    if (lastRow === 0) {
      sheet.appendRow(["Driver_Name","Inspector_Name","Location","Position","Misc1","Misc2","Misc3","Truck_Reg_No","Trailer_Reg_No"]);
      sheet.setFrozenRows(1);
    }
    
    const trucks = body.trucks || [];
    const trailers = body.trailers || [];

    const getFirstEmptyInCol = (col) => {
        const vals = sheet.getRange(1, col, Math.max(1, sheet.getLastRow()), 1).getValues().flat();
        const idx = vals.indexOf("");
        return idx === -1 ? sheet.getLastRow() + 1 : idx + 1;
    };

    if (trucks.length > 0) {
        const startRow = getFirstEmptyInCol(8);
        sheet.getRange(startRow, 8, trucks.length, 1).setValues(trucks.map(t => [t]));
    }
    
    if (trailers.length > 0) {
        const startRow = getFirstEmptyInCol(9);
        sheet.getRange(startRow, 9, trailers.length, 1).setValues(trailers.map(t => [t]));
    }

    return ResponseBuilder.success({ message: "Bulk import complete" });
  },

  handleUpdateSettings: function(ss, body) {
    let sheet = ss.getSheetByName('System_Settings') || ss.insertSheet('System_Settings');
    const row = [body.companyName, body.managerEmail, new Date(), "Admin", body.companyLogo, "", "", body.maintenanceMode ? "TRUE" : "FALSE", body.maintenanceMessage];
    if (sheet.getLastRow() < 2) sheet.appendRow(["A","B","C","D","E","F","G","H","I"]);
    sheet.getRange(2, 1, 1, row.length).setValues([row]);
    return ResponseBuilder.success();
  }
};`,Xg=`const ResponseBuilder = {
  success: function(data = {}) { return this.build({ status: "success", ...data }); },
  error: function(message) { return this.build({ status: "error", message: message }); },
  build: function(data) { return ContentService.createTextOutput(JSON.stringify(data)).setMimeType(ContentService.MimeType.JSON); }
};`,Qs={"1_Controller.gs":Kg,"2_Auth.gs":Yg,"3_Core.gs":Qg,"5_Utils.gs":Xg};Object.values(Qs).join(`

`);const Zg="https://script.google.com/macros/s/AKfycbwZRcAVA4eauiexlSe81T-iHhq8tzrvbP7k11D7FT7Z-_Pg3eVCVBK3DXyTBAfGCe9-NQ/exec",ex=3e5,tx=30*60*1e3,cd=12*60*60*1e3,nx=()=>{const[e,t]=k.useState(null),[n,r]=k.useState(null),s=k.useRef(Date.now()),i=k.useRef(Date.now()),l=k.useRef(null);k.useEffect(()=>{const g=localStorage.getItem("safetyCheck_user"),w=localStorage.getItem("safetyCheck_session_start");if(g)try{if(w){if(Date.now()-parseInt(w)>cd){h("max_duration");return}i.current=parseInt(w)}else localStorage.setItem("safetyCheck_session_start",Date.now().toString());const N=JSON.parse(g),S=N.role?String(N.role).trim().toLowerCase():"";S==="admin"?N.role="Admin":S==="operations"?N.role="Operations":S==="maintenance"?N.role="Maintenance":S==="secretary"?N.role="Secretary":S==="other"?N.role="Other":S==="superadmin"?N.role="SuperAdmin":N.role="Inspector",N.needsSetup=!N.name||N.needsSetup===!0,t(N),u()}catch{h()}},[]);const d=k.useCallback(()=>{if(!e)return;const g=Date.now();g-s.current>1e3&&(s.current=g,localStorage.setItem("safetyCheck_last_activity",g.toString()))},[e]),u=()=>{window.addEventListener("mousemove",d),window.addEventListener("keydown",d),window.addEventListener("touchstart",d),window.addEventListener("click",d),l.current&&window.clearInterval(l.current),l.current=window.setInterval(p,6e4)},f=()=>{window.removeEventListener("mousemove",d),window.removeEventListener("keydown",d),window.removeEventListener("touchstart",d),window.removeEventListener("click",d),l.current&&(window.clearInterval(l.current),l.current=null)},p=()=>{const g=Date.now();if(g-s.current>tx){h("idle");return}if(g-i.current>cd){h("max_duration");return}},m=g=>{const w=Date.now(),N={...g,needsSetup:!g.name||g.needsSetup===!0};t(N),localStorage.setItem("safetyCheck_user",JSON.stringify(N)),localStorage.setItem("safetyCheck_session_start",w.toString()),localStorage.setItem("safetyCheck_last_activity",w.toString()),i.current=w,s.current=w,r(null),u()},h=g=>{f(),t(null),g&&r(g),["safetyCheck_user","safetyCheck_session_start","safetyCheck_last_activity","sc_validation_lists"].forEach(N=>localStorage.removeItem(N))};return{currentUser:e,setCurrentUser:t,handleLogin:m,handleLogout:h,sessionExpired:n,setSessionExpired:r}},rx=()=>{const[e,t]=k.useState(()=>{const p=Zg;return p.length>0?p:typeof window<"u"&&localStorage.getItem("safetyCheck_scriptUrl")||""}),[n,r]=k.useState(()=>{if(typeof window<"u"){const p=localStorage.getItem("safetyCheck_settings");if(p)try{return JSON.parse(p)}catch(m){console.error("Failed to parse local settings",m)}}return{companyName:"SafetyCheck Pro",managerEmail:""}}),[s,i]=k.useState(!1),l=k.useRef(!1),d=k.useRef(!1);k.useEffect(()=>{if(e&&e.startsWith("https://script.google.com")){u(e);const p=setInterval(()=>{d.current||u(e)},3e4);return()=>clearInterval(p)}},[e]);const u=async(p,m=!1)=>{if(!(!p||!p.startsWith("https://script.google.com"))&&!(!navigator.onLine||l.current&&!m)){l.current=!0;try{const h=`t=${new Date().getTime()}`,g=`${p}${p.includes("?")?"&":"?"}${h}`,w=await fetch(g,{method:"GET",mode:"cors",cache:"no-store"});if(!w.ok)return;const S=(await w.json()).System_Settings;if(S&&Array.isArray(S)&&S.length>1){const x=S[1];if(x&&x.length>=8){const y=String(x[7]).toUpperCase().trim()==="TRUE",C={companyName:x[0]||"SafetyCheck Pro",managerEmail:x[1]||"",companyLogo:x[4]&&String(x[4]).length>100?x[4]:void 0,mobileApkLink:x[5]||"",webAppUrl:x[6]||"",maintenanceMode:y,maintenanceMessage:x[8]||"System under scheduled maintenance."};r(b=>JSON.stringify(b)!==JSON.stringify(C)?(localStorage.setItem("safetyCheck_settings",JSON.stringify(C)),C):b)}}}catch{}finally{l.current=!1}}};return{settings:n,setSettings:r,appScriptUrl:e,setAppScriptUrl:t,isSavingSettings:s,handleSaveSettings:async()=>{i(!0),d.current=!0;try{localStorage.setItem("safetyCheck_settings",JSON.stringify(n)),localStorage.setItem("safetyCheck_scriptUrl",e),e&&e.startsWith("https")&&navigator.onLine&&await fetch(e,{method:"POST",body:JSON.stringify({action:"update_settings",...n}),mode:"no-cors"})}catch(p){console.error("Save Settings Failed",p)}finally{setTimeout(()=>{i(!1),d.current=!1},800)}},fetchSystemSettings:u}},dd=50,ud=12e4,fd=48*60*60*1e3,sx=(e,t,n)=>{const[r,s]=k.useState([]),[i,l]=k.useState([]),[d,u]=k.useState([]),[f,p]=k.useState([]),[m,h]=k.useState(!1),g=k.useRef([]),w=k.useRef([]),N=k.useRef(null);k.useEffect(()=>{g.current=d.map(I=>String(I))},[d]),k.useEffect(()=>{w.current=i.map(I=>String(I))},[i]),k.useEffect(()=>{if(!t){N.current&&window.clearInterval(N.current);return}const I=t.username.replace(/[^a-z0-9]/gi,"_")+"_",_=localStorage.getItem(`sc_read_notifications_${I}`),A=localStorage.getItem(`sc_dismissed_notifications_${I}`),L=(_?JSON.parse(_):[]).map(R=>String(R)),M=(A?JSON.parse(A):[]).map(R=>String(R));l(L),u(M),w.current=L,g.current=M,"Notification"in window&&Notification.permission==="granted"&&h(!0),v();const P=()=>{document.visibilityState==="visible"?(v(),N.current||(N.current=window.setInterval(v,ud))):N.current&&(window.clearInterval(N.current),N.current=null)};return document.addEventListener("visibilitychange",P),N.current=window.setInterval(v,ud),()=>{N.current&&window.clearInterval(N.current),document.removeEventListener("visibilitychange",P)}},[t,e]);const S=I=>{if(!t)return;const _=t.username.replace(/[^a-z0-9]/gi,"_")+"_";localStorage.setItem(`sc_read_notifications_${_}`,JSON.stringify(I)),l(I)},x=I=>{if(!t)return;const _=t.username.replace(/[^a-z0-9]/gi,"_")+"_";localStorage.setItem(`sc_dismissed_notifications_${_}`,JSON.stringify(I)),u(I)},v=async()=>{if(!(!e||!navigator.onLine||!t))try{const I=await fetch(`${e}?t=${Date.now()}`);if(!I.ok)return;const _=await I.text();if(!_||_.trim().startsWith("<"))return;const A=JSON.parse(_),L=(A.Acknowledgements||[]).map(B=>String(B)),M=Date.now();let P=[];const R=B=>g.current.includes(String(B)),F=B=>w.current.includes(String(B)),q=(B,re)=>{if(!Array.isArray(B)||B.length<=1)return[];const ae=re==="General"?8:9,oe=2,ne=[];return B.slice(Math.max(1,B.length-100)).forEach(_e=>{const ft=Number(_e[ae]),ze=String(_e[oe]||"Unknown").trim(),Qe=String(_e[1]),Se=Date.parse(Qe);if(isNaN(Se)||M-Se>fd)return;const ie=`INS_${re}_${Se}_${ze.replace(/[^a-z0-9]/gi,"")}`;R(ie)||L.includes(ie)||(ft<=2||ft===3)&&ne.push({id:ie,title:ft<=2?`Critical: ${ze}`:`Warning: ${ze}`,message:`${re} check rated ${ft}/5.`,type:ft<=2?"critical":"warning",timestamp:Qe,read:F(ie),module:re})}),ne},J=A.SystemNotification||[],j=t.username.toLowerCase().trim(),H=t.role.toLowerCase().trim();Array.isArray(J)&&J.length>1&&J.forEach(B=>{const re=String(B[0]);if(R(re))return;const ae=String(B[1]).trim().toLowerCase();!(String(B[5]).toUpperCase()==="TRUE")&&(ae===j||(ae===H||H==="superadmin"&&ae==="admin")||ae==="all")&&P.push({id:re,title:"System Message",message:String(B[3]),type:String(B[2]).toLowerCase()||"info",timestamp:B[4],read:F(re),actionLink:B[6],isServerEvent:!0,module:"System"})});const W=A.Support_Tickets||[];Array.isArray(W)&&W.length>1&&W.slice(Math.max(1,W.length-30)).forEach(B=>{const re=String(B[0]),ae=B[9],oe=String(B[8]),ne=Date.parse(oe),z=`TKT_ALERT_${re}`;isNaN(ne)||M-ne>fd||R(z)||(H==="admin"||H==="superadmin")&&ae==="Open"&&P.push({id:z,title:"New Ticket",message:`#${re}: ${B[2]}`,type:"info",timestamp:oe,read:F(z),module:"Support",actionLink:"view:support"})}),A.General&&(P=[...P,...q(A.General,"General")]),A.Petroleum&&(P=[...P,...q(A.Petroleum,"Petroleum")]),A.Petroleum_V2&&(P=[...P,...q(A.Petroleum_V2,"Petroleum_V2")]),A.Acid&&(P=[...P,...q(A.Acid,"Acid")]),P.sort((B,re)=>new Date(re.timestamp).getTime()-new Date(B.timestamp).getTime()),P.length>dd&&(P=P.slice(0,dd));const Z=P.filter(B=>!f.includes(B.id)&&!B.read&&!R(B.id));if(Z.length>0){const B=Z[0];B.type==="critical"&&n(B.message,"error"),p(re=>[...new Set([...re,...Z.map(ae=>ae.id)])])}s(P)}catch{}};return{notifications:r,fetchNotifications:v,handleMarkNotificationRead:async(I,_)=>{s(M=>M.map(P=>P.id===I?{...P,read:!0}:P));const A=[...new Set([...w.current,String(I)])];S(A);const L=r.find(M=>M.id===I);if(L!=null&&L.isServerEvent&&e&&navigator.onLine)try{await fetch(e,{method:"POST",body:JSON.stringify({action:"mark_notification_read",id:I}),mode:"no-cors"})}catch{}L!=null&&L.actionLink&&_&&_(L.actionLink)},handleDismissNotification:I=>{s(A=>A.filter(L=>L.id!==I));const _=[...new Set([...g.current,String(I)])];x(_)},handleGlobalAcknowledge:async I=>{if(!e||!navigator.onLine)return;s(A=>A.filter(L=>L.id!==I));const _=[...new Set([...g.current,String(I)])];x(_);try{await fetch(e,{method:"POST",body:JSON.stringify({action:"acknowledge_issue",issueId:I,user:t==null?void 0:t.name,role:t==null?void 0:t.role}),mode:"no-cors"}),n("Acknowledge recorded.","success")}catch{}},handleClearAllNotifications:()=>{const I=r.map(A=>String(A.id)),_=[...new Set([...g.current,...I])];x(_),s([])},requestPushPermission:async()=>{if(!("Notification"in window))return;await Notification.requestPermission()==="granted"&&h(!0)},pushEnabled:m}},ox=15e3,ix=(e,t,n)=>{const[r,s]=k.useState([]),[i,l]=k.useState(!1),[d,u]=k.useState(!1),f=k.useRef(0),[p,m]=k.useState({trucks:[],trailers:[],drivers:[],inspectors:[],locations:[],positions:[]});k.useEffect(()=>{e&&n&&h(!1)},[t,e,n==null?void 0:n.username]);const h=async(w=!1)=>{if(!e||typeof e!="string"||!e.startsWith("http"))return;const N=w===!0,S=Date.now(),v=`sc_history_${n?`${n.username}_`:"anon_"}${t}`,y=localStorage.getItem(v);let C=!1;if(y&&!N)try{const b=JSON.parse(y);if(b.data&&Array.isArray(b.data)){s(b.data),C=!0;const E=localStorage.getItem("sc_validation_lists");if(E&&m(JSON.parse(E)),S-b.timestamp<ex){l(!1);return}}}catch(b){console.error("Cache parsing error",b)}if(N&&S-f.current<ox){console.debug("Fetch throttled to protect server.");return}if(C?u(!0):l(!0),!navigator.onLine){l(!1),u(!1);return}try{f.current=S;const b=await fetch(`${e}?t=${S}`);if(!b.ok)throw new Error("Network response was not ok");const E=await b.text();if(!E||E.trim().startsWith("<"))throw new Error("Invalid response format");const T=JSON.parse(E),I=T.Validation_Data;if(I){const P={trucks:I.Truck_Reg_No||[],trailers:I.Trailer_Reg_No||[],drivers:I.Driver_Name||[],inspectors:I.Inspector_Name||[],locations:I.Location||[],positions:I.Position||[]};m(P),localStorage.setItem("sc_validation_lists",JSON.stringify(P))}let _="General",A=cm;t==="petroleum"?(_="Petroleum",A=dm):t==="petroleum_v2"?(_="Petroleum_V2",A=um):t==="acid"&&(_="Acid",A=fm);const L=T[_];let M=[];L!==void 0&&Array.isArray(L)&&L.length>1&&(M=L.slice(1).map(P=>{const R={};return A.forEach((F,q)=>{R[F]=P[q]!==void 0?P[q]:null}),R}).reverse()),s(M),localStorage.setItem(v,JSON.stringify({timestamp:Date.now(),data:M}))}catch{}finally{l(!1),u(!1)}},g=k.useMemo(()=>{if(!r.length)return{total:0,avgRate:0,passRate:0};const w=r.length,S=(r.filter(x=>Number(x.rate)>=4).length/w*100).toFixed(0);return{total:w,avgRate:0,passRate:S}},[r]);return{historyList:r,isLoadingHistory:i,isBackgroundFetching:d,validationLists:p,stats:g,fetchHistory:h}},lx=(e,t,n)=>{const[r,s]=k.useState("idle"),[i,l]=k.useState([]),[d,u]=k.useState(!1),[f,p]=k.useState(!1);k.useEffect(()=>{const g=localStorage.getItem("safetycheck_offline_queue");if(g)try{l(JSON.parse(g))}catch{}const w=()=>{p(!1),t("Connection restored. Attempting background sync...","info"),m()},N=()=>{p(!1)};return window.addEventListener("online",w),window.addEventListener("offline",N),()=>{window.removeEventListener("online",w),window.removeEventListener("offline",N)}},[]);const m=async()=>{if(d)return;const g=JSON.parse(localStorage.getItem("safetycheck_offline_queue")||"[]");if(g.length===0)return;u(!0),p(!1);let w=0,N=[...g];N.length;try{for(;N.length>0;){const S=N[0];try{const x=new AbortController,v=setTimeout(()=>x.abort(),15e3),y=await fetch(e,{method:"POST",body:JSON.stringify(S),mode:"no-cors",headers:{"Content-Type":"text/plain"},signal:x.signal});clearTimeout(v),N.shift(),w++,l([...N]),localStorage.setItem("safetycheck_offline_queue",JSON.stringify(N)),await new Promise(C=>setTimeout(C,1e3))}catch(x){if(console.error("Sync failed for item",x),x.name==="AbortError"||x.message.includes("NetworkError")||x.message.includes("Failed to fetch")){p(!0);break}break}}}finally{u(!1),w>0?N.length===0?(t(`All ${w} offline records synced successfully!`,"success"),n()):t(`Synced ${w} items. ${N.length} remaining.`,"info"):f&&g.length>0}};return{submissionStatus:r,setSubmissionStatus:s,offlineQueue:i,isSyncing:d,isPoorConnection:f,syncOfflineQueue:m,addToQueue:g=>{const w=[...i,g];l(w),localStorage.setItem("safetycheck_offline_queue",JSON.stringify(w))}}},ax=(e,t)=>{const[n,r]=k.useState(null),[s,i]=k.useState([]),[l,d]=k.useState(!1),u=async()=>{if(!(!e||typeof e!="string"||!e.startsWith("http"))&&t){d(!0);try{const f=await fetch(`${e}?t=${new Date().getTime()}`);if(!f.ok)return;const p=await f.json();if(p.Subscription_Data){const m=p.Subscription_Data,h=m.current||m,g=m.history||[],w=String(h.expiryDate||"").trim();if(!w||w==="undefined"||w==="null"||w===""){r({status:"Expired",plan:"None",expiryDate:"",daysRemaining:0}),i(g);return}const N=w.split("T")[0],S=N.split("-");let x;if(S.length===3?x=new Date(parseInt(S[0]),parseInt(S[1])-1,parseInt(S[2]),23,59,59):(x=new Date(w),x.setHours(23,59,59,999)),isNaN(x.getTime())){r({status:"Expired",plan:"None",expiryDate:"",daysRemaining:0});return}const v=new Date,y=x.getTime()-v.getTime(),C=Math.ceil(y/(1e3*60*60*24)),b=C<=0;r({status:b?"Expired":h.status||"Active",plan:h.plan||"Standard",expiryDate:N,daysRemaining:Math.max(0,C)}),i(g)}else r({status:"Expired",plan:"None",expiryDate:"",daysRemaining:0})}catch(f){console.error("Subscription fetch error:",f)}finally{d(!1)}}};return k.useEffect(()=>{u()},[e,t]),{subscription:n,history:s,isLoading:l,refreshSubscription:u}};var cx={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let dx,ux;function fx(){return{geminiUrl:dx,vertexUrl:ux}}function px(e,t,n,r){var s,i;if(!(e!=null&&e.baseUrl)){const l=fx();return t?(s=l.vertexUrl)!==null&&s!==void 0?s:n:(i=l.geminiUrl)!==null&&i!==void 0?i:r}return e.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vt{}function U(e,t){const n=/\{([^}]+)\}/g;return e.replace(n,(r,s)=>{if(Object.prototype.hasOwnProperty.call(t,s)){const i=t[s];return i!=null?String(i):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function c(e,t,n){for(let i=0;i<t.length-1;i++){const l=t[i];if(l.endsWith("[]")){const d=l.slice(0,-2);if(!(d in e))if(Array.isArray(n))e[d]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(e[d])){const u=e[d];if(Array.isArray(n))for(let f=0;f<u.length;f++){const p=u[f];c(p,t.slice(i+1),n[f])}else for(const f of u)c(f,t.slice(i+1),n)}return}else if(l.endsWith("[0]")){const d=l.slice(0,-3);d in e||(e[d]=[{}]);const u=e[d];c(u[0],t.slice(i+1),n);return}(!e[l]||typeof e[l]!="object")&&(e[l]={}),e=e[l]}const r=t[t.length-1],s=e[r];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(e,n):e[r]=n}function a(e,t,n=void 0){try{if(t.length===1&&t[0]==="_self")return e;for(let r=0;r<t.length;r++){if(typeof e!="object"||e===null)return n;const s=t[r];if(s.endsWith("[]")){const i=s.slice(0,-2);if(i in e){const l=e[i];return Array.isArray(l)?l.map(d=>a(d,t.slice(r+1),n)):n}else return n}else e=e[s]}return e}catch(r){if(r instanceof TypeError)return n;throw r}}function mx(e,t){for(const[n,r]of Object.entries(t)){const s=n.split("."),i=r.split("."),l=new Set;let d=-1;for(let u=0;u<s.length;u++)if(s[u]==="*"){d=u;break}if(d!==-1&&i.length>d)for(let u=d;u<i.length;u++){const f=i[u];f!=="*"&&!f.endsWith("[]")&&!f.endsWith("[0]")&&l.add(f)}Al(e,s,i,0,l)}}function Al(e,t,n,r,s){if(r>=t.length||typeof e!="object"||e===null)return;const i=t[r];if(i.endsWith("[]")){const l=i.slice(0,-2),d=e;if(l in d&&Array.isArray(d[l]))for(const u of d[l])Al(u,t,n,r+1,s)}else if(i==="*"){if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const l=e,d=Object.keys(l).filter(f=>!f.startsWith("_")&&!s.has(f)),u={};for(const f of d)u[f]=l[f];for(const[f,p]of Object.entries(u)){const m=[];for(const h of n.slice(r))h==="*"?m.push(f):m.push(h);c(l,m,p)}for(const f of d)delete l[f]}}else{const l=e;i in l&&Al(l[i],t,n,r+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ua(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hx(e){const t={},n=a(e,["operationName"]);n!=null&&c(t,["operationName"],n);const r=a(e,["resourceName"]);return r!=null&&c(t,["_url","resourceName"],r),t}function gx(e){const t={},n=a(e,["name"]);n!=null&&c(t,["name"],n);const r=a(e,["metadata"]);r!=null&&c(t,["metadata"],r);const s=a(e,["done"]);s!=null&&c(t,["done"],s);const i=a(e,["error"]);i!=null&&c(t,["error"],i);const l=a(e,["response","generateVideoResponse"]);return l!=null&&c(t,["response"],vx(l)),t}function xx(e){const t={},n=a(e,["name"]);n!=null&&c(t,["name"],n);const r=a(e,["metadata"]);r!=null&&c(t,["metadata"],r);const s=a(e,["done"]);s!=null&&c(t,["done"],s);const i=a(e,["error"]);i!=null&&c(t,["error"],i);const l=a(e,["response"]);return l!=null&&c(t,["response"],yx(l)),t}function vx(e){const t={},n=a(e,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>wx(l))),c(t,["generatedVideos"],i)}const r=a(e,["raiMediaFilteredCount"]);r!=null&&c(t,["raiMediaFilteredCount"],r);const s=a(e,["raiMediaFilteredReasons"]);return s!=null&&c(t,["raiMediaFilteredReasons"],s),t}function yx(e){const t={},n=a(e,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>Nx(l))),c(t,["generatedVideos"],i)}const r=a(e,["raiMediaFilteredCount"]);r!=null&&c(t,["raiMediaFilteredCount"],r);const s=a(e,["raiMediaFilteredReasons"]);return s!=null&&c(t,["raiMediaFilteredReasons"],s),t}function wx(e){const t={},n=a(e,["video"]);return n!=null&&c(t,["video"],_x(n)),t}function Nx(e){const t={},n=a(e,["_self"]);return n!=null&&c(t,["video"],Tx(n)),t}function Sx(e){const t={},n=a(e,["operationName"]);return n!=null&&c(t,["_url","operationName"],n),t}function bx(e){const t={},n=a(e,["operationName"]);return n!=null&&c(t,["_url","operationName"],n),t}function Cx(e){const t={},n=a(e,["name"]);n!=null&&c(t,["name"],n);const r=a(e,["metadata"]);r!=null&&c(t,["metadata"],r);const s=a(e,["done"]);s!=null&&c(t,["done"],s);const i=a(e,["error"]);i!=null&&c(t,["error"],i);const l=a(e,["response"]);return l!=null&&c(t,["response"],Ex(l)),t}function Ex(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["parent"]);r!=null&&c(t,["parent"],r);const s=a(e,["documentName"]);return s!=null&&c(t,["documentName"],s),t}function pm(e){const t={},n=a(e,["name"]);n!=null&&c(t,["name"],n);const r=a(e,["metadata"]);r!=null&&c(t,["metadata"],r);const s=a(e,["done"]);s!=null&&c(t,["done"],s);const i=a(e,["error"]);i!=null&&c(t,["error"],i);const l=a(e,["response"]);return l!=null&&c(t,["response"],kx(l)),t}function kx(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["parent"]);r!=null&&c(t,["parent"],r);const s=a(e,["documentName"]);return s!=null&&c(t,["documentName"],s),t}function _x(e){const t={},n=a(e,["uri"]);n!=null&&c(t,["uri"],n);const r=a(e,["encodedVideo"]);r!=null&&c(t,["videoBytes"],Ua(r));const s=a(e,["encoding"]);return s!=null&&c(t,["mimeType"],s),t}function Tx(e){const t={},n=a(e,["gcsUri"]);n!=null&&c(t,["uri"],n);const r=a(e,["bytesBase64Encoded"]);r!=null&&c(t,["videoBytes"],Ua(r));const s=a(e,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var pd;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(pd||(pd={}));var md;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(md||(md={}));var hd;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(hd||(hd={}));var Kt;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(Kt||(Kt={}));var gd;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(gd||(gd={}));var xd;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(xd||(xd={}));var vd;(function(e){e.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",e.HTTP_IN_QUERY="HTTP_IN_QUERY",e.HTTP_IN_HEADER="HTTP_IN_HEADER",e.HTTP_IN_PATH="HTTP_IN_PATH",e.HTTP_IN_BODY="HTTP_IN_BODY",e.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(vd||(vd={}));var yd;(function(e){e.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",e.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",e.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",e.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(yd||(yd={}));var wd;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(wd||(wd={}));var Nd;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(Nd||(Nd={}));var Sd;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(Sd||(Sd={}));var bd;(function(e){e.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH",e.MINIMAL="MINIMAL"})(bd||(bd={}));var Cd;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Cd||(Cd={}));var Ed;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(Ed||(Ed={}));var kd;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(kd||(kd={}));var _d;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE",e.IMAGE_RECITATION="IMAGE_RECITATION",e.IMAGE_OTHER="IMAGE_OTHER"})(_d||(_d={}));var Td;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(Td||(Td={}));var Id;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Id||(Id={}));var Ad;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Ad||(Ad={}));var Rd;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY",e.MODEL_ARMOR="MODEL_ARMOR",e.JAILBREAK="JAILBREAK"})(Rd||(Rd={}));var Md;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Md||(Md={}));var ko;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(ko||(ko={}));var Pd;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Pd||(Pd={}));var jd;(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(jd||(jd={}));var Ld;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Ld||(Ld={}));var Rl;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Rl||(Rl={}));var Dd;(function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V",e.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Dd||(Dd={}));var Fd;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",e.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Fd||(Fd={}));var Ud;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(Ud||(Ud={}));var Vd;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Vd||(Vd={}));var Hd;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(Hd||(Hd={}));var Bd;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(Bd||(Bd={}));var Gd;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(Gd||(Gd={}));var Od;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Od||(Od={}));var zd;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(zd||(zd={}));var qd;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(qd||(qd={}));var $d;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})($d||($d={}));var Wd;(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})(Wd||(Wd={}));var Jd;(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})(Jd||(Jd={}));var Kd;(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(Kd||(Kd={}));var Yd;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(Yd||(Yd={}));var Qd;(function(e){e.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",e.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Qd||(Qd={}));var Xd;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.STATE_PENDING="STATE_PENDING",e.STATE_ACTIVE="STATE_ACTIVE",e.STATE_FAILED="STATE_FAILED"})(Xd||(Xd={}));var Zd;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(Zd||(Zd={}));var eu;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED",e.REGISTERED="REGISTERED"})(eu||(eu={}));var tu;(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(tu||(tu={}));var nu;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(nu||(nu={}));var ru;(function(e){e.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",e.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",e.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(ru||(ru={}));var su;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(su||(su={}));var ou;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(ou||(ou={}));var iu;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(iu||(iu={}));var lu;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(lu||(lu={}));var au;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(au||(au={}));var cu;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(cu||(cu={}));var Jn;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(Jn||(Jn={}));class Ml{constructor(t){const n={};for(const r of t.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}}class _r{get text(){var t,n,r,s,i,l,d,u;if(((s=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",p=!1;const m=[];for(const h of(u=(d=(l=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)!==null&&u!==void 0?u:[]){for(const[g,w]of Object.entries(h))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(w!==null||w!==void 0)&&m.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;p=!0,f+=h.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),p?f:void 0}get data(){var t,n,r,s,i,l,d,u;if(((s=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const p=[];for(const m of(u=(d=(l=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)!==null&&u!==void 0?u:[]){for(const[h,g]of Object.entries(m))h!=="inlineData"&&(g!==null||g!==void 0)&&p.push(h);m.inlineData&&typeof m.inlineData.data=="string"&&(f+=atob(m.inlineData.data))}return p.length>0&&console.warn(`there are non-data parts ${p} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var t,n,r,s,i,l,d,u;if(((s=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(u=(d=(l=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)===null||u===void 0?void 0:u.filter(p=>p.functionCall).map(p=>p.functionCall).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var t,n,r,s,i,l,d,u,f;if(((s=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const p=(u=(d=(l=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)===null||u===void 0?void 0:u.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((p==null?void 0:p.length)!==0)return(f=p==null?void 0:p[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var t,n,r,s,i,l,d,u,f;if(((s=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const p=(u=(d=(l=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)===null||u===void 0?void 0:u.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((p==null?void 0:p.length)!==0)return(f=p==null?void 0:p[0])===null||f===void 0?void 0:f.output}}class du{}class uu{}class Ix{}class Ax{}class Rx{}class Mx{}class fu{}class pu{}class mu{}class Px{}class _o{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const r=new _o;let s;const i=t;return n?s=xx(i):s=gx(i),Object.assign(r,s),r}}class hu{}class gu{}class xu{}class vu{}class jx{}class Lx{}class Dx{}class Va{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const r=new Va,i=Cx(t);return Object.assign(r,i),r}}class Fx{}class Ux{}class Vx{}class yu{}class Hx{get text(){var t,n,r;let s="",i=!1;const l=[];for(const d of(r=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[u,f]of Object.entries(d))u!=="text"&&u!=="thought"&&f!==null&&l.push(u);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;i=!0,s+=d.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?s:void 0}get data(){var t,n,r;let s="";const i=[];for(const l of(r=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[d,u]of Object.entries(l))d!=="inlineData"&&u!==null&&i.push(d);l.inlineData&&typeof l.inlineData.data=="string"&&(s+=atob(l.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class Bx{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Ha{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const r=new Ha,i=pm(t);return Object.assign(r,i),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function te(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function mm(e,t){const n=te(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function hm(e){return Array.isArray(e)?e.map(t=>To(t)):[To(e)]}function To(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function gm(e){const t=To(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function xm(e){const t=To(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function wu(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function vm(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>wu(t)):[wu(e)]}function Pl(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function Nu(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function Su(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function De(e){if(e==null)throw new Error("ContentUnion is required");return Pl(e)?e:{role:"user",parts:vm(e)}}function Ba(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{const r=De(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(e.isVertexAI()){const n=De(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>De(n)):[De(t)]}function at(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(Nu(e)||Su(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[De(e)]}const t=[],n=[],r=Pl(e[0]);for(const s of e){const i=Pl(s);if(i!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)t.push(s);else{if(Nu(s)||Su(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return r||t.push({role:"user",parts:vm(n)}),t}function Gx(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(r=>r!=="null");if(n.length===1)t.type=Object.values(Kt).includes(n[0].toUpperCase())?n[0].toUpperCase():Kt.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const r of n)t.anyOf.push({type:Object.values(Kt).includes(r.toUpperCase())?r.toUpperCase():Kt.TYPE_UNSPECIFIED})}}function nr(e){const t={},n=["items"],r=["anyOf"],s=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=e.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(t.nullable=!0,e=i[1]):i[1].type==="null"&&(t.nullable=!0,e=i[0])),e.type instanceof Array&&Gx(e.type,t);for(const[l,d]of Object.entries(e))if(d!=null)if(l=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;t.type=Object.values(Kt).includes(d.toUpperCase())?d.toUpperCase():Kt.TYPE_UNSPECIFIED}else if(n.includes(l))t[l]=nr(d);else if(r.includes(l)){const u=[];for(const f of d){if(f.type=="null"){t.nullable=!0;continue}u.push(nr(f))}t[l]=u}else if(s.includes(l)){const u={};for(const[f,p]of Object.entries(d))u[f]=nr(p);t[l]=u}else{if(l==="additionalProperties")continue;t[l]=d}return t}function Ga(e){return nr(e)}function Oa(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function za(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function hr(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=nr(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=nr(t.response));return e}function gr(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function Ox(e,t,n,r=1){const s=!t.startsWith(`${n}/`)&&t.split("/").length===r;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:s?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:s?`${n}/${t}`:t}function Ht(e,t){if(typeof t!="string")throw new Error("name must be a string");return Ox(e,t,"cachedContents")}function ym(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function dn(e){return Ua(e)}function zx(e){return e!=null&&typeof e=="object"&&"name"in e}function qx(e){return e!=null&&typeof e=="object"&&"video"in e}function $x(e){return e!=null&&typeof e=="object"&&"uri"in e}function wm(e){var t;let n;if(zx(e)&&(n=e.name),!($x(e)&&(n=e.uri,n===void 0))&&!(qx(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Nm(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function Sm(e){for(const t of["models","tunedModels","publisherModels"])if(Wx(e,t))return e[t];return[]}function Wx(e,t){return e!==null&&typeof e=="object"&&t in e}function Jx(e,t={}){const n=e,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),t.behavior&&(r.behavior=t.behavior),{functionDeclarations:[r]}}function Kx(e,t={}){const n=[],r=new Set;for(const s of e){const i=s.name;if(r.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);r.add(i);const l=Jx(s,t);l.functionDeclarations&&n.push(...l.functionDeclarations)}return{functionDeclarations:n}}function bm(e,t){let n;if(typeof t=="string")if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))n={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))n={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,s=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(s>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function Yx(e){if(typeof e!="string")return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function Cm(e){if(typeof e!="object"||e===null)return{};const t=e,n=t.inlinedResponses;if(typeof n!="object"||n===null)return e;const s=n.inlinedResponses;if(!Array.isArray(s)||s.length===0)return e;let i=!1;for(const l of s){if(typeof l!="object"||l===null)continue;const u=l.response;if(typeof u!="object"||u===null)continue;if(u.embedding!==void 0){i=!0;break}}return i&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function xr(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Em(e){const t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qx(e){const t={},n=a(e,["responsesFile"]);n!=null&&c(t,["fileName"],n);const r=a(e,["inlinedResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>Rv(l))),c(t,["inlinedResponses"],i)}const s=a(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(l=>l)),c(t,["inlinedEmbedContentResponses"],i)}return t}function Xx(e){const t={},n=a(e,["predictionsFormat"]);n!=null&&c(t,["format"],n);const r=a(e,["gcsDestination","outputUriPrefix"]);r!=null&&c(t,["gcsUri"],r);const s=a(e,["bigqueryDestination","outputUri"]);return s!=null&&c(t,["bigqueryUri"],s),t}function Zx(e){const t={},n=a(e,["format"]);n!=null&&c(t,["predictionsFormat"],n);const r=a(e,["gcsUri"]);r!=null&&c(t,["gcsDestination","outputUriPrefix"],r);const s=a(e,["bigqueryUri"]);if(s!=null&&c(t,["bigqueryDestination","outputUri"],s),a(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(a(e,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function Xs(e){const t={},n=a(e,["name"]);n!=null&&c(t,["name"],n);const r=a(e,["metadata","displayName"]);r!=null&&c(t,["displayName"],r);const s=a(e,["metadata","state"]);s!=null&&c(t,["state"],Em(s));const i=a(e,["metadata","createTime"]);i!=null&&c(t,["createTime"],i);const l=a(e,["metadata","endTime"]);l!=null&&c(t,["endTime"],l);const d=a(e,["metadata","updateTime"]);d!=null&&c(t,["updateTime"],d);const u=a(e,["metadata","model"]);u!=null&&c(t,["model"],u);const f=a(e,["metadata","output"]);return f!=null&&c(t,["dest"],Qx(Cm(f))),t}function jl(e){const t={},n=a(e,["name"]);n!=null&&c(t,["name"],n);const r=a(e,["displayName"]);r!=null&&c(t,["displayName"],r);const s=a(e,["state"]);s!=null&&c(t,["state"],Em(s));const i=a(e,["error"]);i!=null&&c(t,["error"],i);const l=a(e,["createTime"]);l!=null&&c(t,["createTime"],l);const d=a(e,["startTime"]);d!=null&&c(t,["startTime"],d);const u=a(e,["endTime"]);u!=null&&c(t,["endTime"],u);const f=a(e,["updateTime"]);f!=null&&c(t,["updateTime"],f);const p=a(e,["model"]);p!=null&&c(t,["model"],p);const m=a(e,["inputConfig"]);m!=null&&c(t,["src"],ev(m));const h=a(e,["outputConfig"]);h!=null&&c(t,["dest"],Xx(Cm(h)));const g=a(e,["completionStats"]);return g!=null&&c(t,["completionStats"],g),t}function ev(e){const t={},n=a(e,["instancesFormat"]);n!=null&&c(t,["format"],n);const r=a(e,["gcsSource","uris"]);r!=null&&c(t,["gcsUri"],r);const s=a(e,["bigquerySource","inputUri"]);return s!=null&&c(t,["bigqueryUri"],s),t}function tv(e,t){const n={};if(a(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=a(t,["fileName"]);r!=null&&c(n,["fileName"],r);const s=a(t,["inlinedRequests"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(l=>Av(e,l))),c(n,["requests","requests"],i)}return n}function nv(e){const t={},n=a(e,["format"]);n!=null&&c(t,["instancesFormat"],n);const r=a(e,["gcsUri"]);r!=null&&c(t,["gcsSource","uris"],r);const s=a(e,["bigqueryUri"]);if(s!=null&&c(t,["bigquerySource","inputUri"],s),a(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function rv(e){const t={},n=a(e,["data"]);if(n!=null&&c(t,["data"],n),a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(e,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}function sv(e,t){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],xr(e,r)),n}function ov(e,t){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],xr(e,r)),n}function iv(e){const t={},n=a(e,["content"]);n!=null&&c(t,["content"],n);const r=a(e,["citationMetadata"]);r!=null&&c(t,["citationMetadata"],lv(r));const s=a(e,["tokenCount"]);s!=null&&c(t,["tokenCount"],s);const i=a(e,["finishReason"]);i!=null&&c(t,["finishReason"],i);const l=a(e,["avgLogprobs"]);l!=null&&c(t,["avgLogprobs"],l);const d=a(e,["groundingMetadata"]);d!=null&&c(t,["groundingMetadata"],d);const u=a(e,["index"]);u!=null&&c(t,["index"],u);const f=a(e,["logprobsResult"]);f!=null&&c(t,["logprobsResult"],f);const p=a(e,["safetyRatings"]);if(p!=null){let h=p;Array.isArray(h)&&(h=h.map(g=>g)),c(t,["safetyRatings"],h)}const m=a(e,["urlContextMetadata"]);return m!=null&&c(t,["urlContextMetadata"],m),t}function lv(e){const t={},n=a(e,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),c(t,["citations"],r)}return t}function km(e){const t={},n=a(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>Uv(i))),c(t,["parts"],s)}const r=a(e,["role"]);return r!=null&&c(t,["role"],r),t}function av(e,t){const n={},r=a(e,["displayName"]);if(t!==void 0&&r!=null&&c(t,["batch","displayName"],r),a(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function cv(e,t){const n={},r=a(e,["displayName"]);t!==void 0&&r!=null&&c(t,["displayName"],r);const s=a(e,["dest"]);return t!==void 0&&s!=null&&c(t,["outputConfig"],Zx(Yx(s))),n}function bu(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["_url","model"],te(e,r));const s=a(t,["src"]);s!=null&&c(n,["batch","inputConfig"],tv(e,bm(e,s)));const i=a(t,["config"]);return i!=null&&av(i,n),n}function dv(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["model"],te(e,r));const s=a(t,["src"]);s!=null&&c(n,["inputConfig"],nv(bm(e,s)));const i=a(t,["config"]);return i!=null&&cv(i,n),n}function uv(e,t){const n={},r=a(e,["displayName"]);return t!==void 0&&r!=null&&c(t,["batch","displayName"],r),n}function fv(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["_url","model"],te(e,r));const s=a(t,["src"]);s!=null&&c(n,["batch","inputConfig"],yv(e,s));const i=a(t,["config"]);return i!=null&&uv(i,n),n}function pv(e,t){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],xr(e,r)),n}function mv(e,t){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],xr(e,r)),n}function hv(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["name"]);r!=null&&c(t,["name"],r);const s=a(e,["done"]);s!=null&&c(t,["done"],s);const i=a(e,["error"]);return i!=null&&c(t,["error"],i),t}function gv(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["name"]);r!=null&&c(t,["name"],r);const s=a(e,["done"]);s!=null&&c(t,["done"],s);const i=a(e,["error"]);return i!=null&&c(t,["error"],i),t}function xv(e,t){const n={},r=a(t,["contents"]);if(r!=null){let i=Ba(e,r);Array.isArray(i)&&(i=i.map(l=>l)),c(n,["requests[]","request","content"],i)}const s=a(t,["config"]);return s!=null&&(c(n,["_self"],vv(s,n)),mx(n,{"requests[].*":"requests[].request.*"})),n}function vv(e,t){const n={},r=a(e,["taskType"]);t!==void 0&&r!=null&&c(t,["requests[]","taskType"],r);const s=a(e,["title"]);t!==void 0&&s!=null&&c(t,["requests[]","title"],s);const i=a(e,["outputDimensionality"]);if(t!==void 0&&i!=null&&c(t,["requests[]","outputDimensionality"],i),a(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function yv(e,t){const n={},r=a(t,["fileName"]);r!=null&&c(n,["file_name"],r);const s=a(t,["inlinedRequests"]);return s!=null&&c(n,["requests"],xv(e,s)),n}function wv(e){const t={};if(a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(e,["fileUri"]);n!=null&&c(t,["fileUri"],n);const r=a(e,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}function Nv(e){const t={},n=a(e,["id"]);n!=null&&c(t,["id"],n);const r=a(e,["args"]);r!=null&&c(t,["args"],r);const s=a(e,["name"]);if(s!=null&&c(t,["name"],s),a(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function Sv(e){const t={},n=a(e,["allowedFunctionNames"]);n!=null&&c(t,["allowedFunctionNames"],n);const r=a(e,["mode"]);if(r!=null&&c(t,["mode"],r),a(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function bv(e,t,n){const r={},s=a(t,["systemInstruction"]);n!==void 0&&s!=null&&c(n,["systemInstruction"],km(De(s)));const i=a(t,["temperature"]);i!=null&&c(r,["temperature"],i);const l=a(t,["topP"]);l!=null&&c(r,["topP"],l);const d=a(t,["topK"]);d!=null&&c(r,["topK"],d);const u=a(t,["candidateCount"]);u!=null&&c(r,["candidateCount"],u);const f=a(t,["maxOutputTokens"]);f!=null&&c(r,["maxOutputTokens"],f);const p=a(t,["stopSequences"]);p!=null&&c(r,["stopSequences"],p);const m=a(t,["responseLogprobs"]);m!=null&&c(r,["responseLogprobs"],m);const h=a(t,["logprobs"]);h!=null&&c(r,["logprobs"],h);const g=a(t,["presencePenalty"]);g!=null&&c(r,["presencePenalty"],g);const w=a(t,["frequencyPenalty"]);w!=null&&c(r,["frequencyPenalty"],w);const N=a(t,["seed"]);N!=null&&c(r,["seed"],N);const S=a(t,["responseMimeType"]);S!=null&&c(r,["responseMimeType"],S);const x=a(t,["responseSchema"]);x!=null&&c(r,["responseSchema"],Ga(x));const v=a(t,["responseJsonSchema"]);if(v!=null&&c(r,["responseJsonSchema"],v),a(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const y=a(t,["safetySettings"]);if(n!==void 0&&y!=null){let P=y;Array.isArray(P)&&(P=P.map(R=>Vv(R))),c(n,["safetySettings"],P)}const C=a(t,["tools"]);if(n!==void 0&&C!=null){let P=gr(C);Array.isArray(P)&&(P=P.map(R=>Bv(hr(R)))),c(n,["tools"],P)}const b=a(t,["toolConfig"]);if(n!==void 0&&b!=null&&c(n,["toolConfig"],Hv(b)),a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const E=a(t,["cachedContent"]);n!==void 0&&E!=null&&c(n,["cachedContent"],Ht(e,E));const T=a(t,["responseModalities"]);T!=null&&c(r,["responseModalities"],T);const I=a(t,["mediaResolution"]);I!=null&&c(r,["mediaResolution"],I);const _=a(t,["speechConfig"]);if(_!=null&&c(r,["speechConfig"],Oa(_)),a(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const A=a(t,["thinkingConfig"]);A!=null&&c(r,["thinkingConfig"],A);const L=a(t,["imageConfig"]);L!=null&&c(r,["imageConfig"],Iv(L));const M=a(t,["enableEnhancedCivicAnswers"]);return M!=null&&c(r,["enableEnhancedCivicAnswers"],M),r}function Cv(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>iv(f))),c(t,["candidates"],u)}const s=a(e,["modelVersion"]);s!=null&&c(t,["modelVersion"],s);const i=a(e,["promptFeedback"]);i!=null&&c(t,["promptFeedback"],i);const l=a(e,["responseId"]);l!=null&&c(t,["responseId"],l);const d=a(e,["usageMetadata"]);return d!=null&&c(t,["usageMetadata"],d),t}function Ev(e,t){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],xr(e,r)),n}function kv(e,t){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],xr(e,r)),n}function _v(e){const t={};if(a(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(e,["enableWidget"]);return n!=null&&c(t,["enableWidget"],n),t}function Tv(e){const t={};if(a(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(e,["timeRangeFilter"]);return n!=null&&c(t,["timeRangeFilter"],n),t}function Iv(e){const t={},n=a(e,["aspectRatio"]);n!=null&&c(t,["aspectRatio"],n);const r=a(e,["imageSize"]);if(r!=null&&c(t,["imageSize"],r),a(e,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(a(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function Av(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["request","model"],te(e,r));const s=a(t,["contents"]);if(s!=null){let d=at(s);Array.isArray(d)&&(d=d.map(u=>km(u))),c(n,["request","contents"],d)}const i=a(t,["metadata"]);i!=null&&c(n,["metadata"],i);const l=a(t,["config"]);return l!=null&&c(n,["request","generationConfig"],bv(e,l,a(n,["request"],{}))),n}function Rv(e){const t={},n=a(e,["response"]);n!=null&&c(t,["response"],Cv(n));const r=a(e,["error"]);return r!=null&&c(t,["error"],r),t}function Mv(e,t){const n={},r=a(e,["pageSize"]);t!==void 0&&r!=null&&c(t,["_query","pageSize"],r);const s=a(e,["pageToken"]);if(t!==void 0&&s!=null&&c(t,["_query","pageToken"],s),a(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Pv(e,t){const n={},r=a(e,["pageSize"]);t!==void 0&&r!=null&&c(t,["_query","pageSize"],r);const s=a(e,["pageToken"]);t!==void 0&&s!=null&&c(t,["_query","pageToken"],s);const i=a(e,["filter"]);return t!==void 0&&i!=null&&c(t,["_query","filter"],i),n}function jv(e){const t={},n=a(e,["config"]);return n!=null&&Mv(n,t),t}function Lv(e){const t={},n=a(e,["config"]);return n!=null&&Pv(n,t),t}function Dv(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["nextPageToken"]);r!=null&&c(t,["nextPageToken"],r);const s=a(e,["operations"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(l=>Xs(l))),c(t,["batchJobs"],i)}return t}function Fv(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["nextPageToken"]);r!=null&&c(t,["nextPageToken"],r);const s=a(e,["batchPredictionJobs"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(l=>jl(l))),c(t,["batchJobs"],i)}return t}function Uv(e){const t={},n=a(e,["mediaResolution"]);n!=null&&c(t,["mediaResolution"],n);const r=a(e,["codeExecutionResult"]);r!=null&&c(t,["codeExecutionResult"],r);const s=a(e,["executableCode"]);s!=null&&c(t,["executableCode"],s);const i=a(e,["fileData"]);i!=null&&c(t,["fileData"],wv(i));const l=a(e,["functionCall"]);l!=null&&c(t,["functionCall"],Nv(l));const d=a(e,["functionResponse"]);d!=null&&c(t,["functionResponse"],d);const u=a(e,["inlineData"]);u!=null&&c(t,["inlineData"],rv(u));const f=a(e,["text"]);f!=null&&c(t,["text"],f);const p=a(e,["thought"]);p!=null&&c(t,["thought"],p);const m=a(e,["thoughtSignature"]);m!=null&&c(t,["thoughtSignature"],m);const h=a(e,["videoMetadata"]);return h!=null&&c(t,["videoMetadata"],h),t}function Vv(e){const t={},n=a(e,["category"]);if(n!=null&&c(t,["category"],n),a(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=a(e,["threshold"]);return r!=null&&c(t,["threshold"],r),t}function Hv(e){const t={},n=a(e,["retrievalConfig"]);n!=null&&c(t,["retrievalConfig"],n);const r=a(e,["functionCallingConfig"]);return r!=null&&c(t,["functionCallingConfig"],Sv(r)),t}function Bv(e){const t={};if(a(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=a(e,["computerUse"]);n!=null&&c(t,["computerUse"],n);const r=a(e,["fileSearch"]);r!=null&&c(t,["fileSearch"],r);const s=a(e,["codeExecution"]);if(s!=null&&c(t,["codeExecution"],s),a(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=a(e,["functionDeclarations"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(m=>m)),c(t,["functionDeclarations"],p)}const l=a(e,["googleMaps"]);l!=null&&c(t,["googleMaps"],_v(l));const d=a(e,["googleSearch"]);d!=null&&c(t,["googleSearch"],Tv(d));const u=a(e,["googleSearchRetrieval"]);u!=null&&c(t,["googleSearchRetrieval"],u);const f=a(e,["urlContext"]);return f!=null&&c(t,["urlContext"],f),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ft;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents",e.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",e.PAGED_ITEM_DOCUMENTS="documents"})(Ft||(Ft={}));class An{constructor(t,n,r,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,r,s)}init(t,n,r){var s,i;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!r||Object.keys(r).length===0?l={config:{}}:typeof r=="object"?l=Object.assign({},r):l=r,l.config&&(l.config.pageToken=n.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(i=(s=l.config)===null||s===void 0?void 0:s.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gv extends Vt{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new An(Ft.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(t){const n=bu(this.apiClient,t),r=n._url,s=U("{model}:batchGenerateContent",r),d=n.batch.inputConfig.requests,u=d.requests,f=[];for(const p of u){const m=Object.assign({},p);if(m.systemInstruction){const h=m.systemInstruction;delete m.systemInstruction;const g=m.request;g.systemInstruction=h,m.request=g}f.push(m)}return d.requests=f,delete n.config,delete n._url,delete n._query,{path:s,body:n}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,n){const r=n?Object.assign({},n):{},s=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${s}`),r.dest===void 0){const i=this.getGcsUri(t),l=this.getBigqueryUri(t);if(i)i.endsWith(".jsonl")?r.dest=`${i.slice(0,-6)}/dest`:r.dest=`${i}_dest_${s}`;else if(l)r.dest=`${l}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(t){var n,r,s,i;let l,d="",u={};if(this.apiClient.isVertexAI()){const f=dv(this.apiClient,t);return d=U("batchPredictionJobs",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),l.then(p=>jl(p))}else{const f=bu(this.apiClient,t);return d=U("{model}:batchGenerateContent",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>Xs(p))}}async createEmbeddingsInternal(t){var n,r;let s,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=fv(this.apiClient,t);return i=U("{model}:asyncBatchEmbedContent",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>Xs(u))}}async get(t){var n,r,s,i;let l,d="",u={};if(this.apiClient.isVertexAI()){const f=kv(this.apiClient,t);return d=U("batchPredictionJobs/{name}",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),l.then(p=>jl(p))}else{const f=Ev(this.apiClient,t);return d=U("batches/{name}",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>Xs(p))}}async cancel(t){var n,r,s,i;let l="",d={};if(this.apiClient.isVertexAI()){const u=ov(this.apiClient,t);l=U("batchPredictionJobs/{name}:cancel",u._url),d=u._query,delete u._url,delete u._query,await this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}else{const u=sv(this.apiClient,t);l=U("batches/{name}:cancel",u._url),d=u._query,delete u._url,delete u._query,await this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(t){var n,r,s,i;let l,d="",u={};if(this.apiClient.isVertexAI()){const f=Lv(t);return d=U("batchPredictionJobs",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=Fv(p),h=new yu;return Object.assign(h,m),h})}else{const f=jv(t);return d=U("batches",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=Dv(p),h=new yu;return Object.assign(h,m),h})}}async delete(t){var n,r,s,i;let l,d="",u={};if(this.apiClient.isVertexAI()){const f=mv(this.apiClient,t);return d=U("batchPredictionJobs/{name}",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>gv(p))}else{const f=pv(this.apiClient,t);return d=U("batches/{name}",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>hv(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ov(e){const t={},n=a(e,["data"]);if(n!=null&&c(t,["data"],n),a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(e,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}function Cu(e){const t={},n=a(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>fy(i))),c(t,["parts"],s)}const r=a(e,["role"]);return r!=null&&c(t,["role"],r),t}function zv(e,t){const n={},r=a(e,["ttl"]);t!==void 0&&r!=null&&c(t,["ttl"],r);const s=a(e,["expireTime"]);t!==void 0&&s!=null&&c(t,["expireTime"],s);const i=a(e,["displayName"]);t!==void 0&&i!=null&&c(t,["displayName"],i);const l=a(e,["contents"]);if(t!==void 0&&l!=null){let p=at(l);Array.isArray(p)&&(p=p.map(m=>Cu(m))),c(t,["contents"],p)}const d=a(e,["systemInstruction"]);t!==void 0&&d!=null&&c(t,["systemInstruction"],Cu(De(d)));const u=a(e,["tools"]);if(t!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(m=>my(m))),c(t,["tools"],p)}const f=a(e,["toolConfig"]);if(t!==void 0&&f!=null&&c(t,["toolConfig"],py(f)),a(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function qv(e,t){const n={},r=a(e,["ttl"]);t!==void 0&&r!=null&&c(t,["ttl"],r);const s=a(e,["expireTime"]);t!==void 0&&s!=null&&c(t,["expireTime"],s);const i=a(e,["displayName"]);t!==void 0&&i!=null&&c(t,["displayName"],i);const l=a(e,["contents"]);if(t!==void 0&&l!=null){let m=at(l);Array.isArray(m)&&(m=m.map(h=>h)),c(t,["contents"],m)}const d=a(e,["systemInstruction"]);t!==void 0&&d!=null&&c(t,["systemInstruction"],De(d));const u=a(e,["tools"]);if(t!==void 0&&u!=null){let m=u;Array.isArray(m)&&(m=m.map(h=>hy(h))),c(t,["tools"],m)}const f=a(e,["toolConfig"]);t!==void 0&&f!=null&&c(t,["toolConfig"],f);const p=a(e,["kmsKeyName"]);return t!==void 0&&p!=null&&c(t,["encryption_spec","kmsKeyName"],p),n}function $v(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["model"],mm(e,r));const s=a(t,["config"]);return s!=null&&zv(s,n),n}function Wv(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["model"],mm(e,r));const s=a(t,["config"]);return s!=null&&qv(s,n),n}function Jv(e,t){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],Ht(e,r)),n}function Kv(e,t){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],Ht(e,r)),n}function Yv(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&c(t,["sdkHttpResponse"],n),t}function Qv(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&c(t,["sdkHttpResponse"],n),t}function Xv(e){const t={};if(a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(e,["fileUri"]);n!=null&&c(t,["fileUri"],n);const r=a(e,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}function Zv(e){const t={},n=a(e,["id"]);n!=null&&c(t,["id"],n);const r=a(e,["args"]);r!=null&&c(t,["args"],r);const s=a(e,["name"]);if(s!=null&&c(t,["name"],s),a(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function ey(e){const t={},n=a(e,["allowedFunctionNames"]);n!=null&&c(t,["allowedFunctionNames"],n);const r=a(e,["mode"]);if(r!=null&&c(t,["mode"],r),a(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function ty(e){const t={},n=a(e,["description"]);n!=null&&c(t,["description"],n);const r=a(e,["name"]);r!=null&&c(t,["name"],r);const s=a(e,["parameters"]);s!=null&&c(t,["parameters"],s);const i=a(e,["parametersJsonSchema"]);i!=null&&c(t,["parametersJsonSchema"],i);const l=a(e,["response"]);l!=null&&c(t,["response"],l);const d=a(e,["responseJsonSchema"]);if(d!=null&&c(t,["responseJsonSchema"],d),a(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function ny(e,t){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],Ht(e,r)),n}function ry(e,t){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],Ht(e,r)),n}function sy(e){const t={};if(a(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(e,["enableWidget"]);return n!=null&&c(t,["enableWidget"],n),t}function oy(e){const t={};if(a(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(e,["timeRangeFilter"]);return n!=null&&c(t,["timeRangeFilter"],n),t}function iy(e,t){const n={},r=a(e,["pageSize"]);t!==void 0&&r!=null&&c(t,["_query","pageSize"],r);const s=a(e,["pageToken"]);return t!==void 0&&s!=null&&c(t,["_query","pageToken"],s),n}function ly(e,t){const n={},r=a(e,["pageSize"]);t!==void 0&&r!=null&&c(t,["_query","pageSize"],r);const s=a(e,["pageToken"]);return t!==void 0&&s!=null&&c(t,["_query","pageToken"],s),n}function ay(e){const t={},n=a(e,["config"]);return n!=null&&iy(n,t),t}function cy(e){const t={},n=a(e,["config"]);return n!=null&&ly(n,t),t}function dy(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["nextPageToken"]);r!=null&&c(t,["nextPageToken"],r);const s=a(e,["cachedContents"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(l=>l)),c(t,["cachedContents"],i)}return t}function uy(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["nextPageToken"]);r!=null&&c(t,["nextPageToken"],r);const s=a(e,["cachedContents"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(l=>l)),c(t,["cachedContents"],i)}return t}function fy(e){const t={},n=a(e,["mediaResolution"]);n!=null&&c(t,["mediaResolution"],n);const r=a(e,["codeExecutionResult"]);r!=null&&c(t,["codeExecutionResult"],r);const s=a(e,["executableCode"]);s!=null&&c(t,["executableCode"],s);const i=a(e,["fileData"]);i!=null&&c(t,["fileData"],Xv(i));const l=a(e,["functionCall"]);l!=null&&c(t,["functionCall"],Zv(l));const d=a(e,["functionResponse"]);d!=null&&c(t,["functionResponse"],d);const u=a(e,["inlineData"]);u!=null&&c(t,["inlineData"],Ov(u));const f=a(e,["text"]);f!=null&&c(t,["text"],f);const p=a(e,["thought"]);p!=null&&c(t,["thought"],p);const m=a(e,["thoughtSignature"]);m!=null&&c(t,["thoughtSignature"],m);const h=a(e,["videoMetadata"]);return h!=null&&c(t,["videoMetadata"],h),t}function py(e){const t={},n=a(e,["retrievalConfig"]);n!=null&&c(t,["retrievalConfig"],n);const r=a(e,["functionCallingConfig"]);return r!=null&&c(t,["functionCallingConfig"],ey(r)),t}function my(e){const t={};if(a(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=a(e,["computerUse"]);n!=null&&c(t,["computerUse"],n);const r=a(e,["fileSearch"]);r!=null&&c(t,["fileSearch"],r);const s=a(e,["codeExecution"]);if(s!=null&&c(t,["codeExecution"],s),a(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=a(e,["functionDeclarations"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(m=>m)),c(t,["functionDeclarations"],p)}const l=a(e,["googleMaps"]);l!=null&&c(t,["googleMaps"],sy(l));const d=a(e,["googleSearch"]);d!=null&&c(t,["googleSearch"],oy(d));const u=a(e,["googleSearchRetrieval"]);u!=null&&c(t,["googleSearchRetrieval"],u);const f=a(e,["urlContext"]);return f!=null&&c(t,["urlContext"],f),t}function hy(e){const t={},n=a(e,["retrieval"]);n!=null&&c(t,["retrieval"],n);const r=a(e,["computerUse"]);if(r!=null&&c(t,["computerUse"],r),a(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=a(e,["codeExecution"]);s!=null&&c(t,["codeExecution"],s);const i=a(e,["enterpriseWebSearch"]);i!=null&&c(t,["enterpriseWebSearch"],i);const l=a(e,["functionDeclarations"]);if(l!=null){let m=l;Array.isArray(m)&&(m=m.map(h=>ty(h))),c(t,["functionDeclarations"],m)}const d=a(e,["googleMaps"]);d!=null&&c(t,["googleMaps"],d);const u=a(e,["googleSearch"]);u!=null&&c(t,["googleSearch"],u);const f=a(e,["googleSearchRetrieval"]);f!=null&&c(t,["googleSearchRetrieval"],f);const p=a(e,["urlContext"]);return p!=null&&c(t,["urlContext"],p),t}function gy(e,t){const n={},r=a(e,["ttl"]);t!==void 0&&r!=null&&c(t,["ttl"],r);const s=a(e,["expireTime"]);return t!==void 0&&s!=null&&c(t,["expireTime"],s),n}function xy(e,t){const n={},r=a(e,["ttl"]);t!==void 0&&r!=null&&c(t,["ttl"],r);const s=a(e,["expireTime"]);return t!==void 0&&s!=null&&c(t,["expireTime"],s),n}function vy(e,t){const n={},r=a(t,["name"]);r!=null&&c(n,["_url","name"],Ht(e,r));const s=a(t,["config"]);return s!=null&&gy(s,n),n}function yy(e,t){const n={},r=a(t,["name"]);r!=null&&c(n,["_url","name"],Ht(e,r));const s=a(t,["config"]);return s!=null&&xy(s,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wy extends Vt{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new An(Ft.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(t){var n,r,s,i;let l,d="",u={};if(this.apiClient.isVertexAI()){const f=Wv(this.apiClient,t);return d=U("cachedContents",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const f=$v(this.apiClient,t);return d=U("cachedContents",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async get(t){var n,r,s,i;let l,d="",u={};if(this.apiClient.isVertexAI()){const f=ry(this.apiClient,t);return d=U("{name}",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const f=ny(this.apiClient,t);return d=U("{name}",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async delete(t){var n,r,s,i;let l,d="",u={};if(this.apiClient.isVertexAI()){const f=Kv(this.apiClient,t);return d=U("{name}",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=Qv(p),h=new xu;return Object.assign(h,m),h})}else{const f=Jv(this.apiClient,t);return d=U("{name}",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=Yv(p),h=new xu;return Object.assign(h,m),h})}}async update(t){var n,r,s,i;let l,d="",u={};if(this.apiClient.isVertexAI()){const f=yy(this.apiClient,t);return d=U("{name}",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const f=vy(this.apiClient,t);return d=U("{name}",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async listInternal(t){var n,r,s,i;let l,d="",u={};if(this.apiClient.isVertexAI()){const f=cy(t);return d=U("cachedContents",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=uy(p),h=new vu;return Object.assign(h,m),h})}else{const f=ay(t);return d=U("cachedContents",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=dy(p),h=new vu;return Object.assign(h,m),h})}}}function Io(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function Eu(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function K(e){return this instanceof K?(this.v=e,this):new K(e)}function yt(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",l),s[Symbol.asyncIterator]=function(){return this},s;function l(g){return function(w){return Promise.resolve(w).then(g,m)}}function d(g,w){r[g]&&(s[g]=function(N){return new Promise(function(S,x){i.push([g,N,S,x])>1||u(g,N)})},w&&(s[g]=w(s[g])))}function u(g,w){try{f(r[g](w))}catch(N){h(i[0][3],N)}}function f(g){g.value instanceof K?Promise.resolve(g.value.v).then(p,m):h(i[0][2],g)}function p(g){u("next",g)}function m(g){u("throw",g)}function h(g,w){g(w),i.shift(),i.length&&u(i[0][0],i[0][1])}}function wt(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Eu=="function"?Eu(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=e[i]&&function(l){return new Promise(function(d,u){l=e[i](l),s(d,u,l.done,l.value)})}}function s(i,l,d,u){Promise.resolve(u).then(function(f){i({value:f,done:d})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ny(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:_m(n)}function _m(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const t of e.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function Sy(e){if(e.length!==0){for(const t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function ku(e){if(e===void 0||e.length===0)return[];const t=[],n=e.length;let r=0;for(;r<n;)if(e[r].role==="user")t.push(e[r]),r++;else{const s=[];let i=!0;for(;r<n&&e[r].role==="model";)s.push(e[r]),i&&!_m(e[r])&&(i=!1),r++;i?t.push(...s):t.pop()}return t}class by{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new Cy(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class Cy{constructor(t,n,r,s={},i=[]){this.apiClient=t,this.modelsModule=n,this.model=r,this.config=s,this.history=i,this.sendPromise=Promise.resolve(),Sy(i)}async sendMessage(t){var n;await this.sendPromise;const r=De(t.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var i,l,d;const u=await s,f=(l=(i=u.candidates)===null||i===void 0?void 0:i[0])===null||l===void 0?void 0:l.content,p=u.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let h=[];p!=null&&(h=(d=p.slice(m))!==null&&d!==void 0?d:[]);const g=f?[f]:[];this.recordHistory(r,g,h)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(t){var n;await this.sendPromise;const r=De(t.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const i=await s;return this.processStreamResponse(i,r)}getHistory(t=!1){const n=t?ku(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){return yt(this,arguments,function*(){var s,i,l,d,u,f;const p=[];try{for(var m=!0,h=wt(t),g;g=yield K(h.next()),s=g.done,!s;m=!0){d=g.value,m=!1;const w=d;if(Ny(w)){const N=(f=(u=w.candidates)===null||u===void 0?void 0:u[0])===null||f===void 0?void 0:f.content;N!==void 0&&p.push(N)}yield yield K(w)}}catch(w){i={error:w}}finally{try{!m&&!s&&(l=h.return)&&(yield K(l.call(h)))}finally{if(i)throw i.error}}this.recordHistory(n,p)})}recordHistory(t,n,r){let s=[];n.length>0&&n.every(i=>i.role!==void 0)?s=n:s.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...ku(r)):this.history.push(t),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qo extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,Qo.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ey(e){const t={},n=a(e,["file"]);return n!=null&&c(t,["file"],n),t}function ky(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&c(t,["sdkHttpResponse"],n),t}function _y(e){const t={},n=a(e,["name"]);return n!=null&&c(t,["_url","file"],wm(n)),t}function Ty(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&c(t,["sdkHttpResponse"],n),t}function Iy(e){const t={},n=a(e,["name"]);return n!=null&&c(t,["_url","file"],wm(n)),t}function Ay(e,t){const n={},r=a(e,["pageSize"]);t!==void 0&&r!=null&&c(t,["_query","pageSize"],r);const s=a(e,["pageToken"]);return t!==void 0&&s!=null&&c(t,["_query","pageToken"],s),n}function Ry(e){const t={},n=a(e,["config"]);return n!=null&&Ay(n,t),t}function My(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["nextPageToken"]);r!=null&&c(t,["nextPageToken"],r);const s=a(e,["files"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(l=>l)),c(t,["files"],i)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Py extends Vt{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new An(Ft.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>n)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var n,r;let s,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Ry(t);return i=U("files",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:u.headers},p})),s.then(u=>{const f=My(u),p=new Fx;return Object.assign(p,f),p})}}async createInternal(t){var n,r;let s,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Ey(t);return i=U("upload/v1beta/files",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>{const f=ky(u),p=new Ux;return Object.assign(p,f),p})}}async get(t){var n,r;let s,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Iy(t);return i=U("files/{file}",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>u)}}async delete(t){var n,r;let s,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=_y(t);return i=U("files/{file}",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:u.headers},p})),s.then(u=>{const f=Ty(u),p=new Vx;return Object.assign(p,f),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zs(e){const t={},n=a(e,["data"]);if(n!=null&&c(t,["data"],n),a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(e,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}function jy(e){const t={},n=a(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>Yy(i))),c(t,["parts"],s)}const r=a(e,["role"]);return r!=null&&c(t,["role"],r),t}function Ly(e){const t={};if(a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(e,["fileUri"]);n!=null&&c(t,["fileUri"],n);const r=a(e,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}function Dy(e){const t={},n=a(e,["id"]);n!=null&&c(t,["id"],n);const r=a(e,["args"]);r!=null&&c(t,["args"],r);const s=a(e,["name"]);if(s!=null&&c(t,["name"],s),a(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function Fy(e){const t={},n=a(e,["description"]);n!=null&&c(t,["description"],n);const r=a(e,["name"]);r!=null&&c(t,["name"],r);const s=a(e,["parameters"]);s!=null&&c(t,["parameters"],s);const i=a(e,["parametersJsonSchema"]);i!=null&&c(t,["parametersJsonSchema"],i);const l=a(e,["response"]);l!=null&&c(t,["response"],l);const d=a(e,["responseJsonSchema"]);if(d!=null&&c(t,["responseJsonSchema"],d),a(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function Uy(e){const t={},n=a(e,["modelSelectionConfig"]);n!=null&&c(t,["modelConfig"],n);const r=a(e,["responseJsonSchema"]);r!=null&&c(t,["responseJsonSchema"],r);const s=a(e,["audioTimestamp"]);s!=null&&c(t,["audioTimestamp"],s);const i=a(e,["candidateCount"]);i!=null&&c(t,["candidateCount"],i);const l=a(e,["enableAffectiveDialog"]);l!=null&&c(t,["enableAffectiveDialog"],l);const d=a(e,["frequencyPenalty"]);d!=null&&c(t,["frequencyPenalty"],d);const u=a(e,["logprobs"]);u!=null&&c(t,["logprobs"],u);const f=a(e,["maxOutputTokens"]);f!=null&&c(t,["maxOutputTokens"],f);const p=a(e,["mediaResolution"]);p!=null&&c(t,["mediaResolution"],p);const m=a(e,["presencePenalty"]);m!=null&&c(t,["presencePenalty"],m);const h=a(e,["responseLogprobs"]);h!=null&&c(t,["responseLogprobs"],h);const g=a(e,["responseMimeType"]);g!=null&&c(t,["responseMimeType"],g);const w=a(e,["responseModalities"]);w!=null&&c(t,["responseModalities"],w);const N=a(e,["responseSchema"]);N!=null&&c(t,["responseSchema"],N);const S=a(e,["routingConfig"]);S!=null&&c(t,["routingConfig"],S);const x=a(e,["seed"]);x!=null&&c(t,["seed"],x);const v=a(e,["speechConfig"]);v!=null&&c(t,["speechConfig"],v);const y=a(e,["stopSequences"]);y!=null&&c(t,["stopSequences"],y);const C=a(e,["temperature"]);C!=null&&c(t,["temperature"],C);const b=a(e,["thinkingConfig"]);b!=null&&c(t,["thinkingConfig"],b);const E=a(e,["topK"]);E!=null&&c(t,["topK"],E);const T=a(e,["topP"]);if(T!=null&&c(t,["topP"],T),a(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function Vy(e){const t={};if(a(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(e,["enableWidget"]);return n!=null&&c(t,["enableWidget"],n),t}function Hy(e){const t={};if(a(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(e,["timeRangeFilter"]);return n!=null&&c(t,["timeRangeFilter"],n),t}function By(e,t){const n={},r=a(e,["generationConfig"]);t!==void 0&&r!=null&&c(t,["setup","generationConfig"],r);const s=a(e,["responseModalities"]);t!==void 0&&s!=null&&c(t,["setup","generationConfig","responseModalities"],s);const i=a(e,["temperature"]);t!==void 0&&i!=null&&c(t,["setup","generationConfig","temperature"],i);const l=a(e,["topP"]);t!==void 0&&l!=null&&c(t,["setup","generationConfig","topP"],l);const d=a(e,["topK"]);t!==void 0&&d!=null&&c(t,["setup","generationConfig","topK"],d);const u=a(e,["maxOutputTokens"]);t!==void 0&&u!=null&&c(t,["setup","generationConfig","maxOutputTokens"],u);const f=a(e,["mediaResolution"]);t!==void 0&&f!=null&&c(t,["setup","generationConfig","mediaResolution"],f);const p=a(e,["seed"]);t!==void 0&&p!=null&&c(t,["setup","generationConfig","seed"],p);const m=a(e,["speechConfig"]);t!==void 0&&m!=null&&c(t,["setup","generationConfig","speechConfig"],za(m));const h=a(e,["thinkingConfig"]);t!==void 0&&h!=null&&c(t,["setup","generationConfig","thinkingConfig"],h);const g=a(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&c(t,["setup","generationConfig","enableAffectiveDialog"],g);const w=a(e,["systemInstruction"]);t!==void 0&&w!=null&&c(t,["setup","systemInstruction"],jy(De(w)));const N=a(e,["tools"]);if(t!==void 0&&N!=null){let E=gr(N);Array.isArray(E)&&(E=E.map(T=>Xy(hr(T)))),c(t,["setup","tools"],E)}const S=a(e,["sessionResumption"]);t!==void 0&&S!=null&&c(t,["setup","sessionResumption"],Qy(S));const x=a(e,["inputAudioTranscription"]);t!==void 0&&x!=null&&c(t,["setup","inputAudioTranscription"],x);const v=a(e,["outputAudioTranscription"]);t!==void 0&&v!=null&&c(t,["setup","outputAudioTranscription"],v);const y=a(e,["realtimeInputConfig"]);t!==void 0&&y!=null&&c(t,["setup","realtimeInputConfig"],y);const C=a(e,["contextWindowCompression"]);t!==void 0&&C!=null&&c(t,["setup","contextWindowCompression"],C);const b=a(e,["proactivity"]);if(t!==void 0&&b!=null&&c(t,["setup","proactivity"],b),a(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function Gy(e,t){const n={},r=a(e,["generationConfig"]);t!==void 0&&r!=null&&c(t,["setup","generationConfig"],Uy(r));const s=a(e,["responseModalities"]);t!==void 0&&s!=null&&c(t,["setup","generationConfig","responseModalities"],s);const i=a(e,["temperature"]);t!==void 0&&i!=null&&c(t,["setup","generationConfig","temperature"],i);const l=a(e,["topP"]);t!==void 0&&l!=null&&c(t,["setup","generationConfig","topP"],l);const d=a(e,["topK"]);t!==void 0&&d!=null&&c(t,["setup","generationConfig","topK"],d);const u=a(e,["maxOutputTokens"]);t!==void 0&&u!=null&&c(t,["setup","generationConfig","maxOutputTokens"],u);const f=a(e,["mediaResolution"]);t!==void 0&&f!=null&&c(t,["setup","generationConfig","mediaResolution"],f);const p=a(e,["seed"]);t!==void 0&&p!=null&&c(t,["setup","generationConfig","seed"],p);const m=a(e,["speechConfig"]);t!==void 0&&m!=null&&c(t,["setup","generationConfig","speechConfig"],za(m));const h=a(e,["thinkingConfig"]);t!==void 0&&h!=null&&c(t,["setup","generationConfig","thinkingConfig"],h);const g=a(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&c(t,["setup","generationConfig","enableAffectiveDialog"],g);const w=a(e,["systemInstruction"]);t!==void 0&&w!=null&&c(t,["setup","systemInstruction"],De(w));const N=a(e,["tools"]);if(t!==void 0&&N!=null){let T=gr(N);Array.isArray(T)&&(T=T.map(I=>Zy(hr(I)))),c(t,["setup","tools"],T)}const S=a(e,["sessionResumption"]);t!==void 0&&S!=null&&c(t,["setup","sessionResumption"],S);const x=a(e,["inputAudioTranscription"]);t!==void 0&&x!=null&&c(t,["setup","inputAudioTranscription"],x);const v=a(e,["outputAudioTranscription"]);t!==void 0&&v!=null&&c(t,["setup","outputAudioTranscription"],v);const y=a(e,["realtimeInputConfig"]);t!==void 0&&y!=null&&c(t,["setup","realtimeInputConfig"],y);const C=a(e,["contextWindowCompression"]);t!==void 0&&C!=null&&c(t,["setup","contextWindowCompression"],C);const b=a(e,["proactivity"]);t!==void 0&&b!=null&&c(t,["setup","proactivity"],b);const E=a(e,["explicitVadSignal"]);return t!==void 0&&E!=null&&c(t,["setup","explicitVadSignal"],E),n}function Oy(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["setup","model"],te(e,r));const s=a(t,["config"]);return s!=null&&c(n,["config"],By(s,n)),n}function zy(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["setup","model"],te(e,r));const s=a(t,["config"]);return s!=null&&c(n,["config"],Gy(s,n)),n}function qy(e){const t={},n=a(e,["musicGenerationConfig"]);return n!=null&&c(t,["musicGenerationConfig"],n),t}function $y(e){const t={},n=a(e,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),c(t,["weightedPrompts"],r)}return t}function Wy(e){const t={},n=a(e,["media"]);if(n!=null){let f=hm(n);Array.isArray(f)&&(f=f.map(p=>Zs(p))),c(t,["mediaChunks"],f)}const r=a(e,["audio"]);r!=null&&c(t,["audio"],Zs(xm(r)));const s=a(e,["audioStreamEnd"]);s!=null&&c(t,["audioStreamEnd"],s);const i=a(e,["video"]);i!=null&&c(t,["video"],Zs(gm(i)));const l=a(e,["text"]);l!=null&&c(t,["text"],l);const d=a(e,["activityStart"]);d!=null&&c(t,["activityStart"],d);const u=a(e,["activityEnd"]);return u!=null&&c(t,["activityEnd"],u),t}function Jy(e){const t={},n=a(e,["media"]);if(n!=null){let f=hm(n);Array.isArray(f)&&(f=f.map(p=>p)),c(t,["mediaChunks"],f)}const r=a(e,["audio"]);r!=null&&c(t,["audio"],xm(r));const s=a(e,["audioStreamEnd"]);s!=null&&c(t,["audioStreamEnd"],s);const i=a(e,["video"]);i!=null&&c(t,["video"],gm(i));const l=a(e,["text"]);l!=null&&c(t,["text"],l);const d=a(e,["activityStart"]);d!=null&&c(t,["activityStart"],d);const u=a(e,["activityEnd"]);return u!=null&&c(t,["activityEnd"],u),t}function Ky(e){const t={},n=a(e,["setupComplete"]);n!=null&&c(t,["setupComplete"],n);const r=a(e,["serverContent"]);r!=null&&c(t,["serverContent"],r);const s=a(e,["toolCall"]);s!=null&&c(t,["toolCall"],s);const i=a(e,["toolCallCancellation"]);i!=null&&c(t,["toolCallCancellation"],i);const l=a(e,["usageMetadata"]);l!=null&&c(t,["usageMetadata"],e1(l));const d=a(e,["goAway"]);d!=null&&c(t,["goAway"],d);const u=a(e,["sessionResumptionUpdate"]);u!=null&&c(t,["sessionResumptionUpdate"],u);const f=a(e,["voiceActivityDetectionSignal"]);return f!=null&&c(t,["voiceActivityDetectionSignal"],f),t}function Yy(e){const t={},n=a(e,["mediaResolution"]);n!=null&&c(t,["mediaResolution"],n);const r=a(e,["codeExecutionResult"]);r!=null&&c(t,["codeExecutionResult"],r);const s=a(e,["executableCode"]);s!=null&&c(t,["executableCode"],s);const i=a(e,["fileData"]);i!=null&&c(t,["fileData"],Ly(i));const l=a(e,["functionCall"]);l!=null&&c(t,["functionCall"],Dy(l));const d=a(e,["functionResponse"]);d!=null&&c(t,["functionResponse"],d);const u=a(e,["inlineData"]);u!=null&&c(t,["inlineData"],Zs(u));const f=a(e,["text"]);f!=null&&c(t,["text"],f);const p=a(e,["thought"]);p!=null&&c(t,["thought"],p);const m=a(e,["thoughtSignature"]);m!=null&&c(t,["thoughtSignature"],m);const h=a(e,["videoMetadata"]);return h!=null&&c(t,["videoMetadata"],h),t}function Qy(e){const t={},n=a(e,["handle"]);if(n!=null&&c(t,["handle"],n),a(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function Xy(e){const t={};if(a(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=a(e,["computerUse"]);n!=null&&c(t,["computerUse"],n);const r=a(e,["fileSearch"]);r!=null&&c(t,["fileSearch"],r);const s=a(e,["codeExecution"]);if(s!=null&&c(t,["codeExecution"],s),a(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=a(e,["functionDeclarations"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(m=>m)),c(t,["functionDeclarations"],p)}const l=a(e,["googleMaps"]);l!=null&&c(t,["googleMaps"],Vy(l));const d=a(e,["googleSearch"]);d!=null&&c(t,["googleSearch"],Hy(d));const u=a(e,["googleSearchRetrieval"]);u!=null&&c(t,["googleSearchRetrieval"],u);const f=a(e,["urlContext"]);return f!=null&&c(t,["urlContext"],f),t}function Zy(e){const t={},n=a(e,["retrieval"]);n!=null&&c(t,["retrieval"],n);const r=a(e,["computerUse"]);if(r!=null&&c(t,["computerUse"],r),a(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=a(e,["codeExecution"]);s!=null&&c(t,["codeExecution"],s);const i=a(e,["enterpriseWebSearch"]);i!=null&&c(t,["enterpriseWebSearch"],i);const l=a(e,["functionDeclarations"]);if(l!=null){let m=l;Array.isArray(m)&&(m=m.map(h=>Fy(h))),c(t,["functionDeclarations"],m)}const d=a(e,["googleMaps"]);d!=null&&c(t,["googleMaps"],d);const u=a(e,["googleSearch"]);u!=null&&c(t,["googleSearch"],u);const f=a(e,["googleSearchRetrieval"]);f!=null&&c(t,["googleSearchRetrieval"],f);const p=a(e,["urlContext"]);return p!=null&&c(t,["urlContext"],p),t}function e1(e){const t={},n=a(e,["promptTokenCount"]);n!=null&&c(t,["promptTokenCount"],n);const r=a(e,["cachedContentTokenCount"]);r!=null&&c(t,["cachedContentTokenCount"],r);const s=a(e,["candidatesTokenCount"]);s!=null&&c(t,["responseTokenCount"],s);const i=a(e,["toolUsePromptTokenCount"]);i!=null&&c(t,["toolUsePromptTokenCount"],i);const l=a(e,["thoughtsTokenCount"]);l!=null&&c(t,["thoughtsTokenCount"],l);const d=a(e,["totalTokenCount"]);d!=null&&c(t,["totalTokenCount"],d);const u=a(e,["promptTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(w=>w)),c(t,["promptTokensDetails"],g)}const f=a(e,["cacheTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(w=>w)),c(t,["cacheTokensDetails"],g)}const p=a(e,["candidatesTokensDetails"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(w=>w)),c(t,["responseTokensDetails"],g)}const m=a(e,["toolUsePromptTokensDetails"]);if(m!=null){let g=m;Array.isArray(g)&&(g=g.map(w=>w)),c(t,["toolUsePromptTokensDetails"],g)}const h=a(e,["trafficType"]);return h!=null&&c(t,["trafficType"],h),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function t1(e){const t={},n=a(e,["data"]);if(n!=null&&c(t,["data"],n),a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(e,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}function n1(e){const t={},n=a(e,["content"]);n!=null&&c(t,["content"],n);const r=a(e,["citationMetadata"]);r!=null&&c(t,["citationMetadata"],r1(r));const s=a(e,["tokenCount"]);s!=null&&c(t,["tokenCount"],s);const i=a(e,["finishReason"]);i!=null&&c(t,["finishReason"],i);const l=a(e,["avgLogprobs"]);l!=null&&c(t,["avgLogprobs"],l);const d=a(e,["groundingMetadata"]);d!=null&&c(t,["groundingMetadata"],d);const u=a(e,["index"]);u!=null&&c(t,["index"],u);const f=a(e,["logprobsResult"]);f!=null&&c(t,["logprobsResult"],f);const p=a(e,["safetyRatings"]);if(p!=null){let h=p;Array.isArray(h)&&(h=h.map(g=>g)),c(t,["safetyRatings"],h)}const m=a(e,["urlContextMetadata"]);return m!=null&&c(t,["urlContextMetadata"],m),t}function r1(e){const t={},n=a(e,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),c(t,["citations"],r)}return t}function s1(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["_url","model"],te(e,r));const s=a(t,["contents"]);if(s!=null){let i=at(s);Array.isArray(i)&&(i=i.map(l=>l)),c(n,["contents"],i)}return n}function o1(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["tokensInfo"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>i)),c(t,["tokensInfo"],s)}return t}function i1(e){const t={},n=a(e,["values"]);n!=null&&c(t,["values"],n);const r=a(e,["statistics"]);return r!=null&&c(t,["statistics"],l1(r)),t}function l1(e){const t={},n=a(e,["truncated"]);n!=null&&c(t,["truncated"],n);const r=a(e,["token_count"]);return r!=null&&c(t,["tokenCount"],r),t}function Xo(e){const t={},n=a(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>gw(i))),c(t,["parts"],s)}const r=a(e,["role"]);return r!=null&&c(t,["role"],r),t}function a1(e){const t={},n=a(e,["controlType"]);n!=null&&c(t,["controlType"],n);const r=a(e,["enableControlImageComputation"]);return r!=null&&c(t,["computeControl"],r),t}function c1(e){const t={};if(a(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(a(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(a(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function d1(e,t){const n={},r=a(e,["systemInstruction"]);t!==void 0&&r!=null&&c(t,["systemInstruction"],De(r));const s=a(e,["tools"]);if(t!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>Rm(d))),c(t,["tools"],l)}const i=a(e,["generationConfig"]);return t!==void 0&&i!=null&&c(t,["generationConfig"],tw(i)),n}function u1(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["_url","model"],te(e,r));const s=a(t,["contents"]);if(s!=null){let l=at(s);Array.isArray(l)&&(l=l.map(d=>Xo(d))),c(n,["contents"],l)}const i=a(t,["config"]);return i!=null&&c1(i),n}function f1(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["_url","model"],te(e,r));const s=a(t,["contents"]);if(s!=null){let l=at(s);Array.isArray(l)&&(l=l.map(d=>d)),c(n,["contents"],l)}const i=a(t,["config"]);return i!=null&&d1(i,n),n}function p1(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["totalTokens"]);r!=null&&c(t,["totalTokens"],r);const s=a(e,["cachedContentTokenCount"]);return s!=null&&c(t,["cachedContentTokenCount"],s),t}function m1(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["totalTokens"]);return r!=null&&c(t,["totalTokens"],r),t}function h1(e,t){const n={},r=a(t,["model"]);return r!=null&&c(n,["_url","name"],te(e,r)),n}function g1(e,t){const n={},r=a(t,["model"]);return r!=null&&c(n,["_url","name"],te(e,r)),n}function x1(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&c(t,["sdkHttpResponse"],n),t}function v1(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&c(t,["sdkHttpResponse"],n),t}function y1(e,t){const n={},r=a(e,["outputGcsUri"]);t!==void 0&&r!=null&&c(t,["parameters","storageUri"],r);const s=a(e,["negativePrompt"]);t!==void 0&&s!=null&&c(t,["parameters","negativePrompt"],s);const i=a(e,["numberOfImages"]);t!==void 0&&i!=null&&c(t,["parameters","sampleCount"],i);const l=a(e,["aspectRatio"]);t!==void 0&&l!=null&&c(t,["parameters","aspectRatio"],l);const d=a(e,["guidanceScale"]);t!==void 0&&d!=null&&c(t,["parameters","guidanceScale"],d);const u=a(e,["seed"]);t!==void 0&&u!=null&&c(t,["parameters","seed"],u);const f=a(e,["safetyFilterLevel"]);t!==void 0&&f!=null&&c(t,["parameters","safetySetting"],f);const p=a(e,["personGeneration"]);t!==void 0&&p!=null&&c(t,["parameters","personGeneration"],p);const m=a(e,["includeSafetyAttributes"]);t!==void 0&&m!=null&&c(t,["parameters","includeSafetyAttributes"],m);const h=a(e,["includeRaiReason"]);t!==void 0&&h!=null&&c(t,["parameters","includeRaiReason"],h);const g=a(e,["language"]);t!==void 0&&g!=null&&c(t,["parameters","language"],g);const w=a(e,["outputMimeType"]);t!==void 0&&w!=null&&c(t,["parameters","outputOptions","mimeType"],w);const N=a(e,["outputCompressionQuality"]);t!==void 0&&N!=null&&c(t,["parameters","outputOptions","compressionQuality"],N);const S=a(e,["addWatermark"]);t!==void 0&&S!=null&&c(t,["parameters","addWatermark"],S);const x=a(e,["labels"]);t!==void 0&&x!=null&&c(t,["labels"],x);const v=a(e,["editMode"]);t!==void 0&&v!=null&&c(t,["parameters","editMode"],v);const y=a(e,["baseSteps"]);return t!==void 0&&y!=null&&c(t,["parameters","editConfig","baseSteps"],y),n}function w1(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["_url","model"],te(e,r));const s=a(t,["prompt"]);s!=null&&c(n,["instances[0]","prompt"],s);const i=a(t,["referenceImages"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(u=>Sw(u))),c(n,["instances[0]","referenceImages"],d)}const l=a(t,["config"]);return l!=null&&y1(l,n),n}function N1(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>Zo(i))),c(t,["generatedImages"],s)}return t}function S1(e,t){const n={},r=a(e,["taskType"]);t!==void 0&&r!=null&&c(t,["requests[]","taskType"],r);const s=a(e,["title"]);t!==void 0&&s!=null&&c(t,["requests[]","title"],s);const i=a(e,["outputDimensionality"]);if(t!==void 0&&i!=null&&c(t,["requests[]","outputDimensionality"],i),a(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function b1(e,t){const n={},r=a(e,["taskType"]);t!==void 0&&r!=null&&c(t,["instances[]","task_type"],r);const s=a(e,["title"]);t!==void 0&&s!=null&&c(t,["instances[]","title"],s);const i=a(e,["outputDimensionality"]);t!==void 0&&i!=null&&c(t,["parameters","outputDimensionality"],i);const l=a(e,["mimeType"]);t!==void 0&&l!=null&&c(t,["instances[]","mimeType"],l);const d=a(e,["autoTruncate"]);return t!==void 0&&d!=null&&c(t,["parameters","autoTruncate"],d),n}function C1(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["_url","model"],te(e,r));const s=a(t,["contents"]);if(s!=null){let d=Ba(e,s);Array.isArray(d)&&(d=d.map(u=>u)),c(n,["requests[]","content"],d)}const i=a(t,["config"]);i!=null&&S1(i,n);const l=a(t,["model"]);return l!==void 0&&c(n,["requests[]","model"],te(e,l)),n}function E1(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["_url","model"],te(e,r));const s=a(t,["contents"]);if(s!=null){let l=Ba(e,s);Array.isArray(l)&&(l=l.map(d=>d)),c(n,["instances[]","content"],l)}const i=a(t,["config"]);return i!=null&&b1(i,n),n}function k1(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["embeddings"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>l)),c(t,["embeddings"],i)}const s=a(e,["metadata"]);return s!=null&&c(t,["metadata"],s),t}function _1(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["predictions[]","embeddings"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>i1(l))),c(t,["embeddings"],i)}const s=a(e,["metadata"]);return s!=null&&c(t,["metadata"],s),t}function T1(e){const t={},n=a(e,["endpoint"]);n!=null&&c(t,["name"],n);const r=a(e,["deployedModelId"]);return r!=null&&c(t,["deployedModelId"],r),t}function I1(e){const t={};if(a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(e,["fileUri"]);n!=null&&c(t,["fileUri"],n);const r=a(e,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}function A1(e){const t={},n=a(e,["id"]);n!=null&&c(t,["id"],n);const r=a(e,["args"]);r!=null&&c(t,["args"],r);const s=a(e,["name"]);if(s!=null&&c(t,["name"],s),a(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function R1(e){const t={},n=a(e,["allowedFunctionNames"]);n!=null&&c(t,["allowedFunctionNames"],n);const r=a(e,["mode"]);if(r!=null&&c(t,["mode"],r),a(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function M1(e){const t={},n=a(e,["description"]);n!=null&&c(t,["description"],n);const r=a(e,["name"]);r!=null&&c(t,["name"],r);const s=a(e,["parameters"]);s!=null&&c(t,["parameters"],s);const i=a(e,["parametersJsonSchema"]);i!=null&&c(t,["parametersJsonSchema"],i);const l=a(e,["response"]);l!=null&&c(t,["response"],l);const d=a(e,["responseJsonSchema"]);if(d!=null&&c(t,["responseJsonSchema"],d),a(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function P1(e,t,n){const r={},s=a(t,["systemInstruction"]);n!==void 0&&s!=null&&c(n,["systemInstruction"],Xo(De(s)));const i=a(t,["temperature"]);i!=null&&c(r,["temperature"],i);const l=a(t,["topP"]);l!=null&&c(r,["topP"],l);const d=a(t,["topK"]);d!=null&&c(r,["topK"],d);const u=a(t,["candidateCount"]);u!=null&&c(r,["candidateCount"],u);const f=a(t,["maxOutputTokens"]);f!=null&&c(r,["maxOutputTokens"],f);const p=a(t,["stopSequences"]);p!=null&&c(r,["stopSequences"],p);const m=a(t,["responseLogprobs"]);m!=null&&c(r,["responseLogprobs"],m);const h=a(t,["logprobs"]);h!=null&&c(r,["logprobs"],h);const g=a(t,["presencePenalty"]);g!=null&&c(r,["presencePenalty"],g);const w=a(t,["frequencyPenalty"]);w!=null&&c(r,["frequencyPenalty"],w);const N=a(t,["seed"]);N!=null&&c(r,["seed"],N);const S=a(t,["responseMimeType"]);S!=null&&c(r,["responseMimeType"],S);const x=a(t,["responseSchema"]);x!=null&&c(r,["responseSchema"],Ga(x));const v=a(t,["responseJsonSchema"]);if(v!=null&&c(r,["responseJsonSchema"],v),a(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const y=a(t,["safetySettings"]);if(n!==void 0&&y!=null){let P=y;Array.isArray(P)&&(P=P.map(R=>bw(R))),c(n,["safetySettings"],P)}const C=a(t,["tools"]);if(n!==void 0&&C!=null){let P=gr(C);Array.isArray(P)&&(P=P.map(R=>Aw(hr(R)))),c(n,["tools"],P)}const b=a(t,["toolConfig"]);if(n!==void 0&&b!=null&&c(n,["toolConfig"],Iw(b)),a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const E=a(t,["cachedContent"]);n!==void 0&&E!=null&&c(n,["cachedContent"],Ht(e,E));const T=a(t,["responseModalities"]);T!=null&&c(r,["responseModalities"],T);const I=a(t,["mediaResolution"]);I!=null&&c(r,["mediaResolution"],I);const _=a(t,["speechConfig"]);if(_!=null&&c(r,["speechConfig"],Oa(_)),a(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const A=a(t,["thinkingConfig"]);A!=null&&c(r,["thinkingConfig"],A);const L=a(t,["imageConfig"]);L!=null&&c(r,["imageConfig"],iw(L));const M=a(t,["enableEnhancedCivicAnswers"]);return M!=null&&c(r,["enableEnhancedCivicAnswers"],M),r}function j1(e,t,n){const r={},s=a(t,["systemInstruction"]);n!==void 0&&s!=null&&c(n,["systemInstruction"],De(s));const i=a(t,["temperature"]);i!=null&&c(r,["temperature"],i);const l=a(t,["topP"]);l!=null&&c(r,["topP"],l);const d=a(t,["topK"]);d!=null&&c(r,["topK"],d);const u=a(t,["candidateCount"]);u!=null&&c(r,["candidateCount"],u);const f=a(t,["maxOutputTokens"]);f!=null&&c(r,["maxOutputTokens"],f);const p=a(t,["stopSequences"]);p!=null&&c(r,["stopSequences"],p);const m=a(t,["responseLogprobs"]);m!=null&&c(r,["responseLogprobs"],m);const h=a(t,["logprobs"]);h!=null&&c(r,["logprobs"],h);const g=a(t,["presencePenalty"]);g!=null&&c(r,["presencePenalty"],g);const w=a(t,["frequencyPenalty"]);w!=null&&c(r,["frequencyPenalty"],w);const N=a(t,["seed"]);N!=null&&c(r,["seed"],N);const S=a(t,["responseMimeType"]);S!=null&&c(r,["responseMimeType"],S);const x=a(t,["responseSchema"]);x!=null&&c(r,["responseSchema"],Ga(x));const v=a(t,["responseJsonSchema"]);v!=null&&c(r,["responseJsonSchema"],v);const y=a(t,["routingConfig"]);y!=null&&c(r,["routingConfig"],y);const C=a(t,["modelSelectionConfig"]);C!=null&&c(r,["modelConfig"],C);const b=a(t,["safetySettings"]);if(n!==void 0&&b!=null){let q=b;Array.isArray(q)&&(q=q.map(J=>J)),c(n,["safetySettings"],q)}const E=a(t,["tools"]);if(n!==void 0&&E!=null){let q=gr(E);Array.isArray(q)&&(q=q.map(J=>Rm(hr(J)))),c(n,["tools"],q)}const T=a(t,["toolConfig"]);n!==void 0&&T!=null&&c(n,["toolConfig"],T);const I=a(t,["labels"]);n!==void 0&&I!=null&&c(n,["labels"],I);const _=a(t,["cachedContent"]);n!==void 0&&_!=null&&c(n,["cachedContent"],Ht(e,_));const A=a(t,["responseModalities"]);A!=null&&c(r,["responseModalities"],A);const L=a(t,["mediaResolution"]);L!=null&&c(r,["mediaResolution"],L);const M=a(t,["speechConfig"]);M!=null&&c(r,["speechConfig"],Oa(M));const P=a(t,["audioTimestamp"]);P!=null&&c(r,["audioTimestamp"],P);const R=a(t,["thinkingConfig"]);R!=null&&c(r,["thinkingConfig"],R);const F=a(t,["imageConfig"]);if(F!=null&&c(r,["imageConfig"],lw(F)),a(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function _u(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["_url","model"],te(e,r));const s=a(t,["contents"]);if(s!=null){let l=at(s);Array.isArray(l)&&(l=l.map(d=>Xo(d))),c(n,["contents"],l)}const i=a(t,["config"]);return i!=null&&c(n,["generationConfig"],P1(e,i,n)),n}function Tu(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["_url","model"],te(e,r));const s=a(t,["contents"]);if(s!=null){let l=at(s);Array.isArray(l)&&(l=l.map(d=>d)),c(n,["contents"],l)}const i=a(t,["config"]);return i!=null&&c(n,["generationConfig"],j1(e,i,n)),n}function Iu(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>n1(f))),c(t,["candidates"],u)}const s=a(e,["modelVersion"]);s!=null&&c(t,["modelVersion"],s);const i=a(e,["promptFeedback"]);i!=null&&c(t,["promptFeedback"],i);const l=a(e,["responseId"]);l!=null&&c(t,["responseId"],l);const d=a(e,["usageMetadata"]);return d!=null&&c(t,["usageMetadata"],d),t}function Au(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(p=>p)),c(t,["candidates"],f)}const s=a(e,["createTime"]);s!=null&&c(t,["createTime"],s);const i=a(e,["modelVersion"]);i!=null&&c(t,["modelVersion"],i);const l=a(e,["promptFeedback"]);l!=null&&c(t,["promptFeedback"],l);const d=a(e,["responseId"]);d!=null&&c(t,["responseId"],d);const u=a(e,["usageMetadata"]);return u!=null&&c(t,["usageMetadata"],u),t}function L1(e,t){const n={};if(a(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=a(e,["numberOfImages"]);t!==void 0&&r!=null&&c(t,["parameters","sampleCount"],r);const s=a(e,["aspectRatio"]);t!==void 0&&s!=null&&c(t,["parameters","aspectRatio"],s);const i=a(e,["guidanceScale"]);if(t!==void 0&&i!=null&&c(t,["parameters","guidanceScale"],i),a(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=a(e,["safetyFilterLevel"]);t!==void 0&&l!=null&&c(t,["parameters","safetySetting"],l);const d=a(e,["personGeneration"]);t!==void 0&&d!=null&&c(t,["parameters","personGeneration"],d);const u=a(e,["includeSafetyAttributes"]);t!==void 0&&u!=null&&c(t,["parameters","includeSafetyAttributes"],u);const f=a(e,["includeRaiReason"]);t!==void 0&&f!=null&&c(t,["parameters","includeRaiReason"],f);const p=a(e,["language"]);t!==void 0&&p!=null&&c(t,["parameters","language"],p);const m=a(e,["outputMimeType"]);t!==void 0&&m!=null&&c(t,["parameters","outputOptions","mimeType"],m);const h=a(e,["outputCompressionQuality"]);if(t!==void 0&&h!=null&&c(t,["parameters","outputOptions","compressionQuality"],h),a(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=a(e,["imageSize"]);if(t!==void 0&&g!=null&&c(t,["parameters","sampleImageSize"],g),a(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function D1(e,t){const n={},r=a(e,["outputGcsUri"]);t!==void 0&&r!=null&&c(t,["parameters","storageUri"],r);const s=a(e,["negativePrompt"]);t!==void 0&&s!=null&&c(t,["parameters","negativePrompt"],s);const i=a(e,["numberOfImages"]);t!==void 0&&i!=null&&c(t,["parameters","sampleCount"],i);const l=a(e,["aspectRatio"]);t!==void 0&&l!=null&&c(t,["parameters","aspectRatio"],l);const d=a(e,["guidanceScale"]);t!==void 0&&d!=null&&c(t,["parameters","guidanceScale"],d);const u=a(e,["seed"]);t!==void 0&&u!=null&&c(t,["parameters","seed"],u);const f=a(e,["safetyFilterLevel"]);t!==void 0&&f!=null&&c(t,["parameters","safetySetting"],f);const p=a(e,["personGeneration"]);t!==void 0&&p!=null&&c(t,["parameters","personGeneration"],p);const m=a(e,["includeSafetyAttributes"]);t!==void 0&&m!=null&&c(t,["parameters","includeSafetyAttributes"],m);const h=a(e,["includeRaiReason"]);t!==void 0&&h!=null&&c(t,["parameters","includeRaiReason"],h);const g=a(e,["language"]);t!==void 0&&g!=null&&c(t,["parameters","language"],g);const w=a(e,["outputMimeType"]);t!==void 0&&w!=null&&c(t,["parameters","outputOptions","mimeType"],w);const N=a(e,["outputCompressionQuality"]);t!==void 0&&N!=null&&c(t,["parameters","outputOptions","compressionQuality"],N);const S=a(e,["addWatermark"]);t!==void 0&&S!=null&&c(t,["parameters","addWatermark"],S);const x=a(e,["labels"]);t!==void 0&&x!=null&&c(t,["labels"],x);const v=a(e,["imageSize"]);t!==void 0&&v!=null&&c(t,["parameters","sampleImageSize"],v);const y=a(e,["enhancePrompt"]);return t!==void 0&&y!=null&&c(t,["parameters","enhancePrompt"],y),n}function F1(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["_url","model"],te(e,r));const s=a(t,["prompt"]);s!=null&&c(n,["instances[0]","prompt"],s);const i=a(t,["config"]);return i!=null&&L1(i,n),n}function U1(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["_url","model"],te(e,r));const s=a(t,["prompt"]);s!=null&&c(n,["instances[0]","prompt"],s);const i=a(t,["config"]);return i!=null&&D1(i,n),n}function V1(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>Q1(l))),c(t,["generatedImages"],i)}const s=a(e,["positivePromptSafetyAttributes"]);return s!=null&&c(t,["positivePromptSafetyAttributes"],Im(s)),t}function H1(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>Zo(l))),c(t,["generatedImages"],i)}const s=a(e,["positivePromptSafetyAttributes"]);return s!=null&&c(t,["positivePromptSafetyAttributes"],Am(s)),t}function B1(e,t){const n={},r=a(e,["numberOfVideos"]);if(t!==void 0&&r!=null&&c(t,["parameters","sampleCount"],r),a(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=a(e,["durationSeconds"]);if(t!==void 0&&s!=null&&c(t,["parameters","durationSeconds"],s),a(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=a(e,["aspectRatio"]);t!==void 0&&i!=null&&c(t,["parameters","aspectRatio"],i);const l=a(e,["resolution"]);t!==void 0&&l!=null&&c(t,["parameters","resolution"],l);const d=a(e,["personGeneration"]);if(t!==void 0&&d!=null&&c(t,["parameters","personGeneration"],d),a(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const u=a(e,["negativePrompt"]);t!==void 0&&u!=null&&c(t,["parameters","negativePrompt"],u);const f=a(e,["enhancePrompt"]);if(t!==void 0&&f!=null&&c(t,["parameters","enhancePrompt"],f),a(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const p=a(e,["lastFrame"]);t!==void 0&&p!=null&&c(t,["instances[0]","lastFrame"],ei(p));const m=a(e,["referenceImages"]);if(t!==void 0&&m!=null){let h=m;Array.isArray(h)&&(h=h.map(g=>Ow(g))),c(t,["instances[0]","referenceImages"],h)}if(a(e,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(a(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function G1(e,t){const n={},r=a(e,["numberOfVideos"]);t!==void 0&&r!=null&&c(t,["parameters","sampleCount"],r);const s=a(e,["outputGcsUri"]);t!==void 0&&s!=null&&c(t,["parameters","storageUri"],s);const i=a(e,["fps"]);t!==void 0&&i!=null&&c(t,["parameters","fps"],i);const l=a(e,["durationSeconds"]);t!==void 0&&l!=null&&c(t,["parameters","durationSeconds"],l);const d=a(e,["seed"]);t!==void 0&&d!=null&&c(t,["parameters","seed"],d);const u=a(e,["aspectRatio"]);t!==void 0&&u!=null&&c(t,["parameters","aspectRatio"],u);const f=a(e,["resolution"]);t!==void 0&&f!=null&&c(t,["parameters","resolution"],f);const p=a(e,["personGeneration"]);t!==void 0&&p!=null&&c(t,["parameters","personGeneration"],p);const m=a(e,["pubsubTopic"]);t!==void 0&&m!=null&&c(t,["parameters","pubsubTopic"],m);const h=a(e,["negativePrompt"]);t!==void 0&&h!=null&&c(t,["parameters","negativePrompt"],h);const g=a(e,["enhancePrompt"]);t!==void 0&&g!=null&&c(t,["parameters","enhancePrompt"],g);const w=a(e,["generateAudio"]);t!==void 0&&w!=null&&c(t,["parameters","generateAudio"],w);const N=a(e,["lastFrame"]);t!==void 0&&N!=null&&c(t,["instances[0]","lastFrame"],St(N));const S=a(e,["referenceImages"]);if(t!==void 0&&S!=null){let y=S;Array.isArray(y)&&(y=y.map(C=>zw(C))),c(t,["instances[0]","referenceImages"],y)}const x=a(e,["mask"]);t!==void 0&&x!=null&&c(t,["instances[0]","mask"],Gw(x));const v=a(e,["compressionQuality"]);return t!==void 0&&v!=null&&c(t,["parameters","compressionQuality"],v),n}function O1(e){const t={},n=a(e,["name"]);n!=null&&c(t,["name"],n);const r=a(e,["metadata"]);r!=null&&c(t,["metadata"],r);const s=a(e,["done"]);s!=null&&c(t,["done"],s);const i=a(e,["error"]);i!=null&&c(t,["error"],i);const l=a(e,["response","generateVideoResponse"]);return l!=null&&c(t,["response"],W1(l)),t}function z1(e){const t={},n=a(e,["name"]);n!=null&&c(t,["name"],n);const r=a(e,["metadata"]);r!=null&&c(t,["metadata"],r);const s=a(e,["done"]);s!=null&&c(t,["done"],s);const i=a(e,["error"]);i!=null&&c(t,["error"],i);const l=a(e,["response"]);return l!=null&&c(t,["response"],J1(l)),t}function q1(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["_url","model"],te(e,r));const s=a(t,["prompt"]);s!=null&&c(n,["instances[0]","prompt"],s);const i=a(t,["image"]);i!=null&&c(n,["instances[0]","image"],ei(i));const l=a(t,["video"]);l!=null&&c(n,["instances[0]","video"],Mm(l));const d=a(t,["source"]);d!=null&&K1(d,n);const u=a(t,["config"]);return u!=null&&B1(u,n),n}function $1(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["_url","model"],te(e,r));const s=a(t,["prompt"]);s!=null&&c(n,["instances[0]","prompt"],s);const i=a(t,["image"]);i!=null&&c(n,["instances[0]","image"],St(i));const l=a(t,["video"]);l!=null&&c(n,["instances[0]","video"],Pm(l));const d=a(t,["source"]);d!=null&&Y1(d,n);const u=a(t,["config"]);return u!=null&&G1(u,n),n}function W1(e){const t={},n=a(e,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>Z1(l))),c(t,["generatedVideos"],i)}const r=a(e,["raiMediaFilteredCount"]);r!=null&&c(t,["raiMediaFilteredCount"],r);const s=a(e,["raiMediaFilteredReasons"]);return s!=null&&c(t,["raiMediaFilteredReasons"],s),t}function J1(e){const t={},n=a(e,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>ew(l))),c(t,["generatedVideos"],i)}const r=a(e,["raiMediaFilteredCount"]);r!=null&&c(t,["raiMediaFilteredCount"],r);const s=a(e,["raiMediaFilteredReasons"]);return s!=null&&c(t,["raiMediaFilteredReasons"],s),t}function K1(e,t){const n={},r=a(e,["prompt"]);t!==void 0&&r!=null&&c(t,["instances[0]","prompt"],r);const s=a(e,["image"]);t!==void 0&&s!=null&&c(t,["instances[0]","image"],ei(s));const i=a(e,["video"]);return t!==void 0&&i!=null&&c(t,["instances[0]","video"],Mm(i)),n}function Y1(e,t){const n={},r=a(e,["prompt"]);t!==void 0&&r!=null&&c(t,["instances[0]","prompt"],r);const s=a(e,["image"]);t!==void 0&&s!=null&&c(t,["instances[0]","image"],St(s));const i=a(e,["video"]);return t!==void 0&&i!=null&&c(t,["instances[0]","video"],Pm(i)),n}function Q1(e){const t={},n=a(e,["_self"]);n!=null&&c(t,["image"],aw(n));const r=a(e,["raiFilteredReason"]);r!=null&&c(t,["raiFilteredReason"],r);const s=a(e,["_self"]);return s!=null&&c(t,["safetyAttributes"],Im(s)),t}function Zo(e){const t={},n=a(e,["_self"]);n!=null&&c(t,["image"],Tm(n));const r=a(e,["raiFilteredReason"]);r!=null&&c(t,["raiFilteredReason"],r);const s=a(e,["_self"]);s!=null&&c(t,["safetyAttributes"],Am(s));const i=a(e,["prompt"]);return i!=null&&c(t,["enhancedPrompt"],i),t}function X1(e){const t={},n=a(e,["_self"]);n!=null&&c(t,["mask"],Tm(n));const r=a(e,["labels"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>i)),c(t,["labels"],s)}return t}function Z1(e){const t={},n=a(e,["video"]);return n!=null&&c(t,["video"],Hw(n)),t}function ew(e){const t={},n=a(e,["_self"]);return n!=null&&c(t,["video"],Bw(n)),t}function tw(e){const t={},n=a(e,["modelSelectionConfig"]);n!=null&&c(t,["modelConfig"],n);const r=a(e,["responseJsonSchema"]);r!=null&&c(t,["responseJsonSchema"],r);const s=a(e,["audioTimestamp"]);s!=null&&c(t,["audioTimestamp"],s);const i=a(e,["candidateCount"]);i!=null&&c(t,["candidateCount"],i);const l=a(e,["enableAffectiveDialog"]);l!=null&&c(t,["enableAffectiveDialog"],l);const d=a(e,["frequencyPenalty"]);d!=null&&c(t,["frequencyPenalty"],d);const u=a(e,["logprobs"]);u!=null&&c(t,["logprobs"],u);const f=a(e,["maxOutputTokens"]);f!=null&&c(t,["maxOutputTokens"],f);const p=a(e,["mediaResolution"]);p!=null&&c(t,["mediaResolution"],p);const m=a(e,["presencePenalty"]);m!=null&&c(t,["presencePenalty"],m);const h=a(e,["responseLogprobs"]);h!=null&&c(t,["responseLogprobs"],h);const g=a(e,["responseMimeType"]);g!=null&&c(t,["responseMimeType"],g);const w=a(e,["responseModalities"]);w!=null&&c(t,["responseModalities"],w);const N=a(e,["responseSchema"]);N!=null&&c(t,["responseSchema"],N);const S=a(e,["routingConfig"]);S!=null&&c(t,["routingConfig"],S);const x=a(e,["seed"]);x!=null&&c(t,["seed"],x);const v=a(e,["speechConfig"]);v!=null&&c(t,["speechConfig"],v);const y=a(e,["stopSequences"]);y!=null&&c(t,["stopSequences"],y);const C=a(e,["temperature"]);C!=null&&c(t,["temperature"],C);const b=a(e,["thinkingConfig"]);b!=null&&c(t,["thinkingConfig"],b);const E=a(e,["topK"]);E!=null&&c(t,["topK"],E);const T=a(e,["topP"]);if(T!=null&&c(t,["topP"],T),a(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function nw(e,t){const n={},r=a(t,["model"]);return r!=null&&c(n,["_url","name"],te(e,r)),n}function rw(e,t){const n={},r=a(t,["model"]);return r!=null&&c(n,["_url","name"],te(e,r)),n}function sw(e){const t={};if(a(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(e,["enableWidget"]);return n!=null&&c(t,["enableWidget"],n),t}function ow(e){const t={};if(a(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(e,["timeRangeFilter"]);return n!=null&&c(t,["timeRangeFilter"],n),t}function iw(e){const t={},n=a(e,["aspectRatio"]);n!=null&&c(t,["aspectRatio"],n);const r=a(e,["imageSize"]);if(r!=null&&c(t,["imageSize"],r),a(e,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(a(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function lw(e){const t={},n=a(e,["aspectRatio"]);n!=null&&c(t,["aspectRatio"],n);const r=a(e,["imageSize"]);r!=null&&c(t,["imageSize"],r);const s=a(e,["personGeneration"]);s!=null&&c(t,["personGeneration"],s);const i=a(e,["outputMimeType"]);i!=null&&c(t,["imageOutputOptions","mimeType"],i);const l=a(e,["outputCompressionQuality"]);return l!=null&&c(t,["imageOutputOptions","compressionQuality"],l),t}function aw(e){const t={},n=a(e,["bytesBase64Encoded"]);n!=null&&c(t,["imageBytes"],dn(n));const r=a(e,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}function Tm(e){const t={},n=a(e,["gcsUri"]);n!=null&&c(t,["gcsUri"],n);const r=a(e,["bytesBase64Encoded"]);r!=null&&c(t,["imageBytes"],dn(r));const s=a(e,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function ei(e){const t={};if(a(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=a(e,["imageBytes"]);n!=null&&c(t,["bytesBase64Encoded"],dn(n));const r=a(e,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}function St(e){const t={},n=a(e,["gcsUri"]);n!=null&&c(t,["gcsUri"],n);const r=a(e,["imageBytes"]);r!=null&&c(t,["bytesBase64Encoded"],dn(r));const s=a(e,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function cw(e,t,n){const r={},s=a(t,["pageSize"]);n!==void 0&&s!=null&&c(n,["_query","pageSize"],s);const i=a(t,["pageToken"]);n!==void 0&&i!=null&&c(n,["_query","pageToken"],i);const l=a(t,["filter"]);n!==void 0&&l!=null&&c(n,["_query","filter"],l);const d=a(t,["queryBase"]);return n!==void 0&&d!=null&&c(n,["_url","models_url"],Nm(e,d)),r}function dw(e,t,n){const r={},s=a(t,["pageSize"]);n!==void 0&&s!=null&&c(n,["_query","pageSize"],s);const i=a(t,["pageToken"]);n!==void 0&&i!=null&&c(n,["_query","pageToken"],i);const l=a(t,["filter"]);n!==void 0&&l!=null&&c(n,["_query","filter"],l);const d=a(t,["queryBase"]);return n!==void 0&&d!=null&&c(n,["_url","models_url"],Nm(e,d)),r}function uw(e,t){const n={},r=a(t,["config"]);return r!=null&&cw(e,r,n),n}function fw(e,t){const n={},r=a(t,["config"]);return r!=null&&dw(e,r,n),n}function pw(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["nextPageToken"]);r!=null&&c(t,["nextPageToken"],r);const s=a(e,["_self"]);if(s!=null){let i=Sm(s);Array.isArray(i)&&(i=i.map(l=>Ll(l))),c(t,["models"],i)}return t}function mw(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["nextPageToken"]);r!=null&&c(t,["nextPageToken"],r);const s=a(e,["_self"]);if(s!=null){let i=Sm(s);Array.isArray(i)&&(i=i.map(l=>Dl(l))),c(t,["models"],i)}return t}function hw(e){const t={},n=a(e,["maskMode"]);n!=null&&c(t,["maskMode"],n);const r=a(e,["segmentationClasses"]);r!=null&&c(t,["maskClasses"],r);const s=a(e,["maskDilation"]);return s!=null&&c(t,["dilation"],s),t}function Ll(e){const t={},n=a(e,["name"]);n!=null&&c(t,["name"],n);const r=a(e,["displayName"]);r!=null&&c(t,["displayName"],r);const s=a(e,["description"]);s!=null&&c(t,["description"],s);const i=a(e,["version"]);i!=null&&c(t,["version"],i);const l=a(e,["_self"]);l!=null&&c(t,["tunedModelInfo"],Rw(l));const d=a(e,["inputTokenLimit"]);d!=null&&c(t,["inputTokenLimit"],d);const u=a(e,["outputTokenLimit"]);u!=null&&c(t,["outputTokenLimit"],u);const f=a(e,["supportedGenerationMethods"]);f!=null&&c(t,["supportedActions"],f);const p=a(e,["temperature"]);p!=null&&c(t,["temperature"],p);const m=a(e,["maxTemperature"]);m!=null&&c(t,["maxTemperature"],m);const h=a(e,["topP"]);h!=null&&c(t,["topP"],h);const g=a(e,["topK"]);g!=null&&c(t,["topK"],g);const w=a(e,["thinking"]);return w!=null&&c(t,["thinking"],w),t}function Dl(e){const t={},n=a(e,["name"]);n!=null&&c(t,["name"],n);const r=a(e,["displayName"]);r!=null&&c(t,["displayName"],r);const s=a(e,["description"]);s!=null&&c(t,["description"],s);const i=a(e,["versionId"]);i!=null&&c(t,["version"],i);const l=a(e,["deployedModels"]);if(l!=null){let m=l;Array.isArray(m)&&(m=m.map(h=>T1(h))),c(t,["endpoints"],m)}const d=a(e,["labels"]);d!=null&&c(t,["labels"],d);const u=a(e,["_self"]);u!=null&&c(t,["tunedModelInfo"],Mw(u));const f=a(e,["defaultCheckpointId"]);f!=null&&c(t,["defaultCheckpointId"],f);const p=a(e,["checkpoints"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(h=>h)),c(t,["checkpoints"],m)}return t}function gw(e){const t={},n=a(e,["mediaResolution"]);n!=null&&c(t,["mediaResolution"],n);const r=a(e,["codeExecutionResult"]);r!=null&&c(t,["codeExecutionResult"],r);const s=a(e,["executableCode"]);s!=null&&c(t,["executableCode"],s);const i=a(e,["fileData"]);i!=null&&c(t,["fileData"],I1(i));const l=a(e,["functionCall"]);l!=null&&c(t,["functionCall"],A1(l));const d=a(e,["functionResponse"]);d!=null&&c(t,["functionResponse"],d);const u=a(e,["inlineData"]);u!=null&&c(t,["inlineData"],t1(u));const f=a(e,["text"]);f!=null&&c(t,["text"],f);const p=a(e,["thought"]);p!=null&&c(t,["thought"],p);const m=a(e,["thoughtSignature"]);m!=null&&c(t,["thoughtSignature"],m);const h=a(e,["videoMetadata"]);return h!=null&&c(t,["videoMetadata"],h),t}function xw(e){const t={},n=a(e,["productImage"]);return n!=null&&c(t,["image"],St(n)),t}function vw(e,t){const n={},r=a(e,["numberOfImages"]);t!==void 0&&r!=null&&c(t,["parameters","sampleCount"],r);const s=a(e,["baseSteps"]);t!==void 0&&s!=null&&c(t,["parameters","baseSteps"],s);const i=a(e,["outputGcsUri"]);t!==void 0&&i!=null&&c(t,["parameters","storageUri"],i);const l=a(e,["seed"]);t!==void 0&&l!=null&&c(t,["parameters","seed"],l);const d=a(e,["safetyFilterLevel"]);t!==void 0&&d!=null&&c(t,["parameters","safetySetting"],d);const u=a(e,["personGeneration"]);t!==void 0&&u!=null&&c(t,["parameters","personGeneration"],u);const f=a(e,["addWatermark"]);t!==void 0&&f!=null&&c(t,["parameters","addWatermark"],f);const p=a(e,["outputMimeType"]);t!==void 0&&p!=null&&c(t,["parameters","outputOptions","mimeType"],p);const m=a(e,["outputCompressionQuality"]);t!==void 0&&m!=null&&c(t,["parameters","outputOptions","compressionQuality"],m);const h=a(e,["enhancePrompt"]);t!==void 0&&h!=null&&c(t,["parameters","enhancePrompt"],h);const g=a(e,["labels"]);return t!==void 0&&g!=null&&c(t,["labels"],g),n}function yw(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["_url","model"],te(e,r));const s=a(t,["source"]);s!=null&&Nw(s,n);const i=a(t,["config"]);return i!=null&&vw(i,n),n}function ww(e){const t={},n=a(e,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Zo(s))),c(t,["generatedImages"],r)}return t}function Nw(e,t){const n={},r=a(e,["prompt"]);t!==void 0&&r!=null&&c(t,["instances[0]","prompt"],r);const s=a(e,["personImage"]);t!==void 0&&s!=null&&c(t,["instances[0]","personImage","image"],St(s));const i=a(e,["productImages"]);if(t!==void 0&&i!=null){let l=i;Array.isArray(l)&&(l=l.map(d=>xw(d))),c(t,["instances[0]","productImages"],l)}return n}function Sw(e){const t={},n=a(e,["referenceImage"]);n!=null&&c(t,["referenceImage"],St(n));const r=a(e,["referenceId"]);r!=null&&c(t,["referenceId"],r);const s=a(e,["referenceType"]);s!=null&&c(t,["referenceType"],s);const i=a(e,["maskImageConfig"]);i!=null&&c(t,["maskImageConfig"],hw(i));const l=a(e,["controlImageConfig"]);l!=null&&c(t,["controlImageConfig"],a1(l));const d=a(e,["styleImageConfig"]);d!=null&&c(t,["styleImageConfig"],d);const u=a(e,["subjectImageConfig"]);return u!=null&&c(t,["subjectImageConfig"],u),t}function Im(e){const t={},n=a(e,["safetyAttributes","categories"]);n!=null&&c(t,["categories"],n);const r=a(e,["safetyAttributes","scores"]);r!=null&&c(t,["scores"],r);const s=a(e,["contentType"]);return s!=null&&c(t,["contentType"],s),t}function Am(e){const t={},n=a(e,["safetyAttributes","categories"]);n!=null&&c(t,["categories"],n);const r=a(e,["safetyAttributes","scores"]);r!=null&&c(t,["scores"],r);const s=a(e,["contentType"]);return s!=null&&c(t,["contentType"],s),t}function bw(e){const t={},n=a(e,["category"]);if(n!=null&&c(t,["category"],n),a(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=a(e,["threshold"]);return r!=null&&c(t,["threshold"],r),t}function Cw(e){const t={},n=a(e,["image"]);return n!=null&&c(t,["image"],St(n)),t}function Ew(e,t){const n={},r=a(e,["mode"]);t!==void 0&&r!=null&&c(t,["parameters","mode"],r);const s=a(e,["maxPredictions"]);t!==void 0&&s!=null&&c(t,["parameters","maxPredictions"],s);const i=a(e,["confidenceThreshold"]);t!==void 0&&i!=null&&c(t,["parameters","confidenceThreshold"],i);const l=a(e,["maskDilation"]);t!==void 0&&l!=null&&c(t,["parameters","maskDilation"],l);const d=a(e,["binaryColorThreshold"]);t!==void 0&&d!=null&&c(t,["parameters","binaryColorThreshold"],d);const u=a(e,["labels"]);return t!==void 0&&u!=null&&c(t,["labels"],u),n}function kw(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["_url","model"],te(e,r));const s=a(t,["source"]);s!=null&&Tw(s,n);const i=a(t,["config"]);return i!=null&&Ew(i,n),n}function _w(e){const t={},n=a(e,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>X1(s))),c(t,["generatedMasks"],r)}return t}function Tw(e,t){const n={},r=a(e,["prompt"]);t!==void 0&&r!=null&&c(t,["instances[0]","prompt"],r);const s=a(e,["image"]);t!==void 0&&s!=null&&c(t,["instances[0]","image"],St(s));const i=a(e,["scribbleImage"]);return t!==void 0&&i!=null&&c(t,["instances[0]","scribble"],Cw(i)),n}function Iw(e){const t={},n=a(e,["retrievalConfig"]);n!=null&&c(t,["retrievalConfig"],n);const r=a(e,["functionCallingConfig"]);return r!=null&&c(t,["functionCallingConfig"],R1(r)),t}function Aw(e){const t={};if(a(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=a(e,["computerUse"]);n!=null&&c(t,["computerUse"],n);const r=a(e,["fileSearch"]);r!=null&&c(t,["fileSearch"],r);const s=a(e,["codeExecution"]);if(s!=null&&c(t,["codeExecution"],s),a(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=a(e,["functionDeclarations"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(m=>m)),c(t,["functionDeclarations"],p)}const l=a(e,["googleMaps"]);l!=null&&c(t,["googleMaps"],sw(l));const d=a(e,["googleSearch"]);d!=null&&c(t,["googleSearch"],ow(d));const u=a(e,["googleSearchRetrieval"]);u!=null&&c(t,["googleSearchRetrieval"],u);const f=a(e,["urlContext"]);return f!=null&&c(t,["urlContext"],f),t}function Rm(e){const t={},n=a(e,["retrieval"]);n!=null&&c(t,["retrieval"],n);const r=a(e,["computerUse"]);if(r!=null&&c(t,["computerUse"],r),a(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=a(e,["codeExecution"]);s!=null&&c(t,["codeExecution"],s);const i=a(e,["enterpriseWebSearch"]);i!=null&&c(t,["enterpriseWebSearch"],i);const l=a(e,["functionDeclarations"]);if(l!=null){let m=l;Array.isArray(m)&&(m=m.map(h=>M1(h))),c(t,["functionDeclarations"],m)}const d=a(e,["googleMaps"]);d!=null&&c(t,["googleMaps"],d);const u=a(e,["googleSearch"]);u!=null&&c(t,["googleSearch"],u);const f=a(e,["googleSearchRetrieval"]);f!=null&&c(t,["googleSearchRetrieval"],f);const p=a(e,["urlContext"]);return p!=null&&c(t,["urlContext"],p),t}function Rw(e){const t={},n=a(e,["baseModel"]);n!=null&&c(t,["baseModel"],n);const r=a(e,["createTime"]);r!=null&&c(t,["createTime"],r);const s=a(e,["updateTime"]);return s!=null&&c(t,["updateTime"],s),t}function Mw(e){const t={},n=a(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&c(t,["baseModel"],n);const r=a(e,["createTime"]);r!=null&&c(t,["createTime"],r);const s=a(e,["updateTime"]);return s!=null&&c(t,["updateTime"],s),t}function Pw(e,t){const n={},r=a(e,["displayName"]);t!==void 0&&r!=null&&c(t,["displayName"],r);const s=a(e,["description"]);t!==void 0&&s!=null&&c(t,["description"],s);const i=a(e,["defaultCheckpointId"]);return t!==void 0&&i!=null&&c(t,["defaultCheckpointId"],i),n}function jw(e,t){const n={},r=a(e,["displayName"]);t!==void 0&&r!=null&&c(t,["displayName"],r);const s=a(e,["description"]);t!==void 0&&s!=null&&c(t,["description"],s);const i=a(e,["defaultCheckpointId"]);return t!==void 0&&i!=null&&c(t,["defaultCheckpointId"],i),n}function Lw(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["_url","name"],te(e,r));const s=a(t,["config"]);return s!=null&&Pw(s,n),n}function Dw(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["_url","model"],te(e,r));const s=a(t,["config"]);return s!=null&&jw(s,n),n}function Fw(e,t){const n={},r=a(e,["outputGcsUri"]);t!==void 0&&r!=null&&c(t,["parameters","storageUri"],r);const s=a(e,["safetyFilterLevel"]);t!==void 0&&s!=null&&c(t,["parameters","safetySetting"],s);const i=a(e,["personGeneration"]);t!==void 0&&i!=null&&c(t,["parameters","personGeneration"],i);const l=a(e,["includeRaiReason"]);t!==void 0&&l!=null&&c(t,["parameters","includeRaiReason"],l);const d=a(e,["outputMimeType"]);t!==void 0&&d!=null&&c(t,["parameters","outputOptions","mimeType"],d);const u=a(e,["outputCompressionQuality"]);t!==void 0&&u!=null&&c(t,["parameters","outputOptions","compressionQuality"],u);const f=a(e,["enhanceInputImage"]);t!==void 0&&f!=null&&c(t,["parameters","upscaleConfig","enhanceInputImage"],f);const p=a(e,["imagePreservationFactor"]);t!==void 0&&p!=null&&c(t,["parameters","upscaleConfig","imagePreservationFactor"],p);const m=a(e,["labels"]);t!==void 0&&m!=null&&c(t,["labels"],m);const h=a(e,["numberOfImages"]);t!==void 0&&h!=null&&c(t,["parameters","sampleCount"],h);const g=a(e,["mode"]);return t!==void 0&&g!=null&&c(t,["parameters","mode"],g),n}function Uw(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["_url","model"],te(e,r));const s=a(t,["image"]);s!=null&&c(n,["instances[0]","image"],St(s));const i=a(t,["upscaleFactor"]);i!=null&&c(n,["parameters","upscaleConfig","upscaleFactor"],i);const l=a(t,["config"]);return l!=null&&Fw(l,n),n}function Vw(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>Zo(i))),c(t,["generatedImages"],s)}return t}function Hw(e){const t={},n=a(e,["uri"]);n!=null&&c(t,["uri"],n);const r=a(e,["encodedVideo"]);r!=null&&c(t,["videoBytes"],dn(r));const s=a(e,["encoding"]);return s!=null&&c(t,["mimeType"],s),t}function Bw(e){const t={},n=a(e,["gcsUri"]);n!=null&&c(t,["uri"],n);const r=a(e,["bytesBase64Encoded"]);r!=null&&c(t,["videoBytes"],dn(r));const s=a(e,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function Gw(e){const t={},n=a(e,["image"]);n!=null&&c(t,["_self"],St(n));const r=a(e,["maskMode"]);return r!=null&&c(t,["maskMode"],r),t}function Ow(e){const t={},n=a(e,["image"]);n!=null&&c(t,["image"],ei(n));const r=a(e,["referenceType"]);return r!=null&&c(t,["referenceType"],r),t}function zw(e){const t={},n=a(e,["image"]);n!=null&&c(t,["image"],St(n));const r=a(e,["referenceType"]);return r!=null&&c(t,["referenceType"],r),t}function Mm(e){const t={},n=a(e,["uri"]);n!=null&&c(t,["uri"],n);const r=a(e,["videoBytes"]);r!=null&&c(t,["encodedVideo"],dn(r));const s=a(e,["mimeType"]);return s!=null&&c(t,["encoding"],s),t}function Pm(e){const t={},n=a(e,["uri"]);n!=null&&c(t,["gcsUri"],n);const r=a(e,["videoBytes"]);r!=null&&c(t,["bytesBase64Encoded"],dn(r));const s=a(e,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qw(e,t){const n={},r=a(e,["displayName"]);return t!==void 0&&r!=null&&c(t,["displayName"],r),n}function $w(e){const t={},n=a(e,["config"]);return n!=null&&qw(n,t),t}function Ww(e,t){const n={},r=a(e,["force"]);return t!==void 0&&r!=null&&c(t,["_query","force"],r),n}function Jw(e){const t={},n=a(e,["name"]);n!=null&&c(t,["_url","name"],n);const r=a(e,["config"]);return r!=null&&Ww(r,t),t}function Kw(e){const t={},n=a(e,["name"]);return n!=null&&c(t,["_url","name"],n),t}function Yw(e,t){const n={},r=a(e,["customMetadata"]);if(t!==void 0&&r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>l)),c(t,["customMetadata"],i)}const s=a(e,["chunkingConfig"]);return t!==void 0&&s!=null&&c(t,["chunkingConfig"],s),n}function Qw(e){const t={},n=a(e,["name"]);n!=null&&c(t,["name"],n);const r=a(e,["metadata"]);r!=null&&c(t,["metadata"],r);const s=a(e,["done"]);s!=null&&c(t,["done"],s);const i=a(e,["error"]);i!=null&&c(t,["error"],i);const l=a(e,["response"]);return l!=null&&c(t,["response"],Zw(l)),t}function Xw(e){const t={},n=a(e,["fileSearchStoreName"]);n!=null&&c(t,["_url","file_search_store_name"],n);const r=a(e,["fileName"]);r!=null&&c(t,["fileName"],r);const s=a(e,["config"]);return s!=null&&Yw(s,t),t}function Zw(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["parent"]);r!=null&&c(t,["parent"],r);const s=a(e,["documentName"]);return s!=null&&c(t,["documentName"],s),t}function eN(e,t){const n={},r=a(e,["pageSize"]);t!==void 0&&r!=null&&c(t,["_query","pageSize"],r);const s=a(e,["pageToken"]);return t!==void 0&&s!=null&&c(t,["_query","pageToken"],s),n}function tN(e){const t={},n=a(e,["config"]);return n!=null&&eN(n,t),t}function nN(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["nextPageToken"]);r!=null&&c(t,["nextPageToken"],r);const s=a(e,["fileSearchStores"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(l=>l)),c(t,["fileSearchStores"],i)}return t}function jm(e,t){const n={},r=a(e,["mimeType"]);t!==void 0&&r!=null&&c(t,["mimeType"],r);const s=a(e,["displayName"]);t!==void 0&&s!=null&&c(t,["displayName"],s);const i=a(e,["customMetadata"]);if(t!==void 0&&i!=null){let d=i;Array.isArray(d)&&(d=d.map(u=>u)),c(t,["customMetadata"],d)}const l=a(e,["chunkingConfig"]);return t!==void 0&&l!=null&&c(t,["chunkingConfig"],l),n}function rN(e){const t={},n=a(e,["fileSearchStoreName"]);n!=null&&c(t,["_url","file_search_store_name"],n);const r=a(e,["config"]);return r!=null&&jm(r,t),t}function sN(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&c(t,["sdkHttpResponse"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oN="Content-Type",iN="X-Server-Timeout",lN="User-Agent",Fl="x-goog-api-client",aN="1.35.0",cN=`google-genai-sdk/${aN}`,dN="v1beta1",uN="v1beta";class fN{constructor(t){var n,r;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:dN,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:uN,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const t=new Headers;return await this.clientOptions.auth.addAuthHeaders(t),t}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&r.push(t.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,r){const s=[this.getRequestUrlInternal(n)];return r&&s.push(this.getBaseResourcePath()),t!==""&&s.push(t),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const r=this.shouldPrependVertexProjectPath(t),s=this.constructUrl(t.path,n,r);if(t.queryParams)for(const[l,d]of Object.entries(t.queryParams))s.searchParams.append(l,String(d));let i={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=t.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,n,s.toString(),t.abortSignal),this.unaryApiCall(s,i,t.httpMethod)}patchHttpOptions(t,n){const r=JSON.parse(JSON.stringify(t));for(const[s,i]of Object.entries(n))typeof i=="object"?r[s]=Object.assign(Object.assign({},r[s]),i):i!==void 0&&(r[s]=i);return r}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const r=this.shouldPrependVertexProjectPath(t),s=this.constructUrl(t.path,n,r);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let i={};return i.body=t.body,i=await this.includeExtraHttpOptionsToRequestInit(i,n,s.toString(),t.abortSignal),this.streamApiCall(s,i,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,r,s){if(n&&n.timeout||s){const i=new AbortController,l=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const d=setTimeout(()=>i.abort(),n.timeout);d&&typeof d.unref=="function"&&d.unref()}s&&s.addEventListener("abort",()=>{i.abort()}),t.signal=l}return n&&n.extraBody!==null&&pN(t,n.extraBody),t.headers=await this.getHeadersInternal(n,r),t}async unaryApiCall(t,n,r){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await Ru(s),new Ml(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(t,n,r){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await Ru(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(t){return yt(this,arguments,function*(){var r;const s=(r=t==null?void 0:t.body)===null||r===void 0?void 0:r.getReader(),i=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let l="";const d="data:",u=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:f,value:p}=yield K(s.read());if(f){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=i.decode(p,{stream:!0});try{const w=JSON.parse(m);if("error"in w){const N=JSON.parse(JSON.stringify(w.error)),S=N.status,x=N.code,v=`got status: ${S}. ${JSON.stringify(w)}`;if(x>=400&&x<600)throw new Qo({message:v,status:x})}}catch(w){if(w.name==="ApiError")throw w}l+=m;let h=-1,g=0;for(;;){h=-1,g=0;for(const S of u){const x=l.indexOf(S);x!==-1&&(h===-1||x<h)&&(h=x,g=S.length)}if(h===-1)break;const w=l.substring(0,h);l=l.substring(h+g);const N=w.trim();if(N.startsWith(d)){const S=N.substring(d.length).trim();try{const x=new Response(S,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield K(new Ml(x))}catch(x){throw new Error(`exception parsing stream chunk ${S}. ${x}`)}}}}}finally{s.releaseLock()}})}async apiCall(t,n){return fetch(t,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const t={},n=cN+" "+this.clientOptions.userAgentExtra;return t[lN]=n,t[Fl]=n,t[oN]="application/json",t}async getHeadersInternal(t,n){const r=new Headers;if(t&&t.headers){for(const[s,i]of Object.entries(t.headers))r.append(s,i);t.timeout&&t.timeout>0&&r.append(iN,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(t){var n;let r="";return typeof t=="string"&&(r=t.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(t,n){var r;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const i=this.clientOptions.uploader,l=await i.stat(t);s.sizeBytes=String(l.size);const d=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:l.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=d;const u={file:s},f=this.getFileName(t),p=U("upload/v1beta/files",u._url),m=await this.fetchUploadUrl(p,s.sizeBytes,s.mimeType,f,u,n==null?void 0:n.httpOptions);return i.upload(t,m,this)}async uploadFileToFileSearchStore(t,n,r){var s;const i=this.clientOptions.uploader,l=await i.stat(n),d=String(l.size),u=(s=r==null?void 0:r.mimeType)!==null&&s!==void 0?s:l.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const f=`upload/v1beta/${t}:uploadToFileSearchStore`,p=this.getFileName(n),m={};r!=null&&jm(r,m);const h=await this.fetchUploadUrl(f,d,u,p,m,r==null?void 0:r.httpOptions);return i.uploadToFileSearchStore(n,h,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n,r,s,i,l){var d;let u={};l?u=l:u={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},s?{"X-Goog-Upload-File-Name":s}:{})};const f=await this.request({path:t,body:JSON.stringify(i),httpMethod:"POST",httpOptions:u});if(!f||!(f!=null&&f.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const p=(d=f==null?void 0:f.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(p===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return p}}async function Ru(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){const n=e.status;let r;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?r=await e.json():r={error:{message:await e.text(),code:e.status,status:e.statusText}};const s=JSON.stringify(r);throw n>=400&&n<600?new Qo({message:s,status:n}):new Error(s)}}function pN(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof e.body=="string"&&e.body.length>0)try{const i=JSON.parse(e.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))n=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(i,l){const d=Object.assign({},i);for(const u in l)if(Object.prototype.hasOwnProperty.call(l,u)){const f=l[u],p=d[u];f&&typeof f=="object"&&!Array.isArray(f)&&p&&typeof p=="object"&&!Array.isArray(p)?d[u]=r(p,f):(p&&f&&typeof p!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${u}". Original type: ${typeof p}, New type: ${typeof f}. Overwriting.`),d[u]=f)}return d}const s=r(n,t);e.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mN="mcp_used/unknown";let hN=!1;function Lm(e){for(const t of e)if(gN(t)||typeof t=="object"&&"inputSchema"in t)return!0;return hN}function Dm(e){var t;const n=(t=e[Fl])!==null&&t!==void 0?t:"";e[Fl]=(n+` ${mN}`).trimStart()}function gN(e){return e!==null&&typeof e=="object"&&e instanceof qa}function xN(e){return yt(this,arguments,function*(n,r=100){let s,i=0;for(;i<r;){const l=yield K(n.listTools({cursor:s}));for(const d of l.tools)yield yield K(d),i++;if(!l.nextCursor)break;s=l.nextCursor}})}class qa{constructor(t=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=n}static create(t,n){return new qa(t,n)}async initialize(){var t,n,r,s;if(this.mcpTools.length>0)return;const i={},l=[];for(const p of this.mcpClients)try{for(var d=!0,u=(n=void 0,wt(xN(p))),f;f=await u.next(),t=f.done,!t;d=!0){s=f.value,d=!1;const m=s;l.push(m);const h=m.name;if(i[h])throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);i[h]=p}}catch(m){n={error:m}}finally{try{!d&&!t&&(r=u.return)&&await r.call(u)}finally{if(n)throw n.error}}this.mcpTools=l,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),Kx(this.mcpTools,this.config)}async callTool(t){await this.initialize();const n=[];for(const r of t)if(r.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[r.name];let i;this.config.timeout&&(i={timeout:this.config.timeout});const l=await s.callTool({name:r.name,arguments:r.args},void 0,i);n.push({functionResponse:{name:r.name,response:l.isError?{error:l}:l}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function vN(e,t,n){const r=new Bx;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data),Object.assign(r,s),t(r)}class yN{constructor(t,n,r){this.apiClient=t,this.auth=n,this.webSocketFactory=r}async connect(t){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),l=SN(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),u=`${s}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${d}`;let f=()=>{};const p=new Promise(y=>{f=y}),m=t.callbacks,h=function(){f({})},g=this.apiClient,w={onopen:h,onmessage:y=>{vN(g,m.onmessage,y)},onerror:(n=m==null?void 0:m.onerror)!==null&&n!==void 0?n:function(y){},onclose:(r=m==null?void 0:m.onclose)!==null&&r!==void 0?r:function(y){}},N=this.webSocketFactory.create(u,NN(l),w);N.connect(),await p;const v={setup:{model:te(this.apiClient,t.model)}};return N.send(JSON.stringify(v)),new wN(N,this.apiClient)}}class wN{constructor(t,n){this.conn=t,this.apiClient=n}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=$y(t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const n=qy(t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(t){const n={playbackControl:t};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Jn.PLAY)}pause(){this.sendPlaybackControl(Jn.PAUSE)}stop(){this.sendPlaybackControl(Jn.STOP)}resetContext(){this.sendPlaybackControl(Jn.RESET_CONTEXT)}close(){this.conn.close()}}function NN(e){const t={};return e.forEach((n,r)=>{t[r]=n}),t}function SN(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bN="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function CN(e,t,n){const r=new Hx;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const i=JSON.parse(s);if(e.isVertexAI()){const l=Ky(i);Object.assign(r,l)}else Object.assign(r,i);t(r)}class EN{constructor(t,n,r){this.apiClient=t,this.auth=n,this.webSocketFactory=r,this.music=new yN(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var n,r,s,i,l,d;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const u=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let p;const m=this.apiClient.getHeaders();t.config&&t.config.tools&&Lm(t.config.tools)&&Dm(m);const h=IN(m);if(this.apiClient.isVertexAI())p=`${u}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h,p);else{const _=this.apiClient.getApiKey();let A="BidiGenerateContent",L="key";_!=null&&_.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),A="BidiGenerateContentConstrained",L="access_token"),p=`${u}/ws/google.ai.generativelanguage.${f}.GenerativeService.${A}?${L}=${_}`}let g=()=>{};const w=new Promise(_=>{g=_}),N=t.callbacks,S=function(){var _;(_=N==null?void 0:N.onopen)===null||_===void 0||_.call(N),g({})},x=this.apiClient,v={onopen:S,onmessage:_=>{CN(x,N.onmessage,_)},onerror:(n=N==null?void 0:N.onerror)!==null&&n!==void 0?n:function(_){},onclose:(r=N==null?void 0:N.onclose)!==null&&r!==void 0?r:function(_){}},y=this.webSocketFactory.create(p,TN(h),v);y.connect(),await w;let C=te(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&C.startsWith("publishers/")){const _=this.apiClient.getProject(),A=this.apiClient.getLocation();C=`projects/${_}/locations/${A}/`+C}let b={};this.apiClient.isVertexAI()&&((s=t.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[ko.AUDIO]}:t.config.responseModalities=[ko.AUDIO]),!((i=t.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const E=(d=(l=t.config)===null||l===void 0?void 0:l.tools)!==null&&d!==void 0?d:[],T=[];for(const _ of E)if(this.isCallableTool(_)){const A=_;T.push(await A.tool())}else T.push(_);T.length>0&&(t.config.tools=T);const I={model:C,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?b=zy(this.apiClient,I):b=Oy(this.apiClient,I),delete b.config,y.send(JSON.stringify(b)),new _N(y,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const kN={turnComplete:!0};class _N{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=at(n.turns),t.isVertexAI()||(r=r.map(s=>Xo(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const i of r){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!t.isVertexAI()&&!("id"in i))throw new Error(bN)}return{toolResponse:{functionResponses:r}}}sendClientContent(t){t=Object.assign(Object.assign({},kN),t);const n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Jy(t)}:n={realtimeInput:Wy(t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function TN(e){const t={};return e.forEach((n,r)=>{t[r]=n}),t}function IN(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Mu=10;function Pu(e){var t,n,r;if(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let s=!1;for(const l of(n=e==null?void 0:e.tools)!==null&&n!==void 0?n:[])if(rr(l)){s=!0;break}if(!s)return!0;const i=(r=e==null?void 0:e.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function rr(e){return"callTool"in e&&typeof e.callTool=="function"}function AN(e){var t,n,r;return(r=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(s=>rr(s)))!==null&&r!==void 0?r:!1}function ju(e){var t;const n=[];return!((t=e==null?void 0:e.config)===null||t===void 0)&&t.tools&&e.config.tools.forEach((r,s)=>{if(rr(r))return;const i=r;i.functionDeclarations&&i.functionDeclarations.length>0&&n.push(s)}),n}function Lu(e){var t;return!(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class RN extends Vt{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>{var r,s,i,l,d;const u=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!AN(n)||Pu(n.config))return await this.generateContentInternal(u);const f=ju(n);if(f.length>0){const N=f.map(S=>`tools[${S}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${N}.`)}let p,m;const h=at(u.contents),g=(i=(s=(r=u.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&i!==void 0?i:Mu;let w=0;for(;w<g&&(p=await this.generateContentInternal(u),!(!p.functionCalls||p.functionCalls.length===0));){const N=p.candidates[0].content,S=[];for(const x of(d=(l=n.config)===null||l===void 0?void 0:l.tools)!==null&&d!==void 0?d:[])if(rr(x)){const y=await x.callTool(p.functionCalls);S.push(...y)}w++,m={role:"user",parts:S},u.contents=at(u.contents),u.contents.push(N),u.contents.push(m),Lu(u.config)&&(h.push(N),h.push(m))}return Lu(u.config)&&(p.automaticFunctionCallingHistory=h),p},this.generateContentStream=async n=>{var r,s,i,l,d;if(this.maybeMoveToResponseJsonSchem(n),Pu(n.config)){const m=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(m)}const u=ju(n);if(u.length>0){const m=u.map(h=>`tools[${h}]`).join(", ");throw new Error(`Incompatible tools found at ${m}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const f=(i=(s=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||i===void 0?void 0:i.streamFunctionCallArguments,p=(d=(l=n==null?void 0:n.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(f&&!p)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var s;let i;const l=[];if(r!=null&&r.generatedImages)for(const u of r.generatedImages)u&&(u!=null&&u.safetyAttributes)&&((s=u==null?void 0:u.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?i=u==null?void 0:u.safetyAttributes:l.push(u);let d;return i?d={generatedImages:l,positivePromptSafetyAttributes:i,sdkHttpResponse:r.sdkHttpResponse}:d={generatedImages:l,sdkHttpResponse:r.sdkHttpResponse},d}),this.list=async n=>{var r;const l={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((r=l.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new An(Ft.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(l),l)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>{var r,s,i,l,d,u;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((s=n.video)===null||s===void 0)&&s.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((l=(i=n.source)===null||i===void 0?void 0:i.video)===null||l===void 0)&&l.uri&&(!((u=(d=n.source)===null||d===void 0?void 0:d.video)===null||u===void 0)&&u.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var n,r,s;const i=(n=t.config)===null||n===void 0?void 0:n.tools;if(!i)return t;const l=await Promise.all(i.map(async u=>rr(u)?await u.tool():u)),d={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:l})};if(d.config.tools=l,t.config&&t.config.tools&&Lm(t.config.tools)){const u=(s=(r=t.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&s!==void 0?s:{};let f=Object.assign({},u);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),Dm(f),d.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:f})}return d}async initAfcToolsMap(t){var n,r,s;const i=new Map;for(const l of(r=(n=t.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(rr(l)){const d=l,u=await d.tool();for(const f of(s=u.functionDeclarations)!==null&&s!==void 0?s:[]){if(!f.name)throw new Error("Function declaration name is required.");if(i.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);i.set(f.name,d)}}return i}async processAfcStream(t){var n,r,s;const i=(s=(r=(n=t.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&s!==void 0?s:Mu;let l=!1,d=0;const u=await this.initAfcToolsMap(t);return function(f,p,m){return yt(this,arguments,function*(){for(var h,g,w,N,S,x;d<i;){l&&(d++,l=!1);const b=yield K(f.processParamsMaybeAddMcpUsage(m)),E=yield K(f.generateContentStreamInternal(b)),T=[],I=[];try{for(var v=!0,y=(g=void 0,wt(E)),C;C=yield K(y.next()),h=C.done,!h;v=!0){N=C.value,v=!1;const _=N;if(yield yield K(_),_.candidates&&(!((S=_.candidates[0])===null||S===void 0)&&S.content)){I.push(_.candidates[0].content);for(const A of(x=_.candidates[0].content.parts)!==null&&x!==void 0?x:[])if(d<i&&A.functionCall){if(!A.functionCall.name)throw new Error("Function call name was not returned by the model.");if(p.has(A.functionCall.name)){const L=yield K(p.get(A.functionCall.name).callTool([A.functionCall]));T.push(...L)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${p.keys()}, mising tool: ${A.functionCall.name}`)}}}}catch(_){g={error:_}}finally{try{!v&&!h&&(w=y.return)&&(yield K(w.call(y)))}finally{if(g)throw g.error}}if(T.length>0){l=!0;const _=new _r;_.candidates=[{content:{role:"user",parts:T}}],yield yield K(_);const A=[];A.push(...I),A.push({role:"user",parts:T});const L=at(m.contents).concat(A);m.contents=L}else break}})}(this,u,t)}async generateContentInternal(t){var n,r,s,i;let l,d="",u={};if(this.apiClient.isVertexAI()){const f=Tu(this.apiClient,t);return d=U("{model}:generateContent",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=Au(p),h=new _r;return Object.assign(h,m),h})}else{const f=_u(this.apiClient,t);return d=U("{model}:generateContent",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=Iu(p),h=new _r;return Object.assign(h,m),h})}}async generateContentStreamInternal(t){var n,r,s,i;let l,d="",u={};if(this.apiClient.isVertexAI()){const f=Tu(this.apiClient,t);return d=U("{model}:streamGenerateContent?alt=sse",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.requestStream({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}),l.then(function(m){return yt(this,arguments,function*(){var h,g,w,N;try{for(var S=!0,x=wt(m),v;v=yield K(x.next()),h=v.done,!h;S=!0){N=v.value,S=!1;const y=N,C=Au(yield K(y.json()));C.sdkHttpResponse={headers:y.headers};const b=new _r;Object.assign(b,C),yield yield K(b)}}catch(y){g={error:y}}finally{try{!S&&!h&&(w=x.return)&&(yield K(w.call(x)))}finally{if(g)throw g.error}}})})}else{const f=_u(this.apiClient,t);return d=U("{model}:streamGenerateContent?alt=sse",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.requestStream({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}),l.then(function(m){return yt(this,arguments,function*(){var h,g,w,N;try{for(var S=!0,x=wt(m),v;v=yield K(x.next()),h=v.done,!h;S=!0){N=v.value,S=!1;const y=N,C=Iu(yield K(y.json()));C.sdkHttpResponse={headers:y.headers};const b=new _r;Object.assign(b,C),yield yield K(b)}}catch(y){g={error:y}}finally{try{!S&&!h&&(w=x.return)&&(yield K(w.call(x)))}finally{if(g)throw g.error}}})})}}async embedContent(t){var n,r,s,i;let l,d="",u={};if(this.apiClient.isVertexAI()){const f=E1(this.apiClient,t);return d=U("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=_1(p),h=new du;return Object.assign(h,m),h})}else{const f=C1(this.apiClient,t);return d=U("{model}:batchEmbedContents",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=k1(p),h=new du;return Object.assign(h,m),h})}}async generateImagesInternal(t){var n,r,s,i;let l,d="",u={};if(this.apiClient.isVertexAI()){const f=U1(this.apiClient,t);return d=U("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=H1(p),h=new uu;return Object.assign(h,m),h})}else{const f=F1(this.apiClient,t);return d=U("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=V1(p),h=new uu;return Object.assign(h,m),h})}}async editImageInternal(t){var n,r;let s,i="",l={};if(this.apiClient.isVertexAI()){const d=w1(this.apiClient,t);return i=U("{model}:predict",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:u.headers},p})),s.then(u=>{const f=N1(u),p=new Ix;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,r;let s,i="",l={};if(this.apiClient.isVertexAI()){const d=Uw(this.apiClient,t);return i=U("{model}:predict",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:u.headers},p})),s.then(u=>{const f=Vw(u),p=new Ax;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var n,r;let s,i="",l={};if(this.apiClient.isVertexAI()){const d=yw(this.apiClient,t);return i=U("{model}:predict",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>{const f=ww(u),p=new Rx;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var n,r;let s,i="",l={};if(this.apiClient.isVertexAI()){const d=kw(this.apiClient,t);return i=U("{model}:predict",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>{const f=_w(u),p=new Mx;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,r,s,i;let l,d="",u={};if(this.apiClient.isVertexAI()){const f=rw(this.apiClient,t);return d=U("{name}",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),l.then(p=>Dl(p))}else{const f=nw(this.apiClient,t);return d=U("{name}",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>Ll(p))}}async listInternal(t){var n,r,s,i;let l,d="",u={};if(this.apiClient.isVertexAI()){const f=fw(this.apiClient,t);return d=U("{models_url}",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=mw(p),h=new fu;return Object.assign(h,m),h})}else{const f=uw(this.apiClient,t);return d=U("{models_url}",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=pw(p),h=new fu;return Object.assign(h,m),h})}}async update(t){var n,r,s,i;let l,d="",u={};if(this.apiClient.isVertexAI()){const f=Dw(this.apiClient,t);return d=U("{model}",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),l.then(p=>Dl(p))}else{const f=Lw(this.apiClient,t);return d=U("{name}",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>Ll(p))}}async delete(t){var n,r,s,i;let l,d="",u={};if(this.apiClient.isVertexAI()){const f=g1(this.apiClient,t);return d=U("{name}",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=v1(p),h=new pu;return Object.assign(h,m),h})}else{const f=h1(this.apiClient,t);return d=U("{name}",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=x1(p),h=new pu;return Object.assign(h,m),h})}}async countTokens(t){var n,r,s,i;let l,d="",u={};if(this.apiClient.isVertexAI()){const f=f1(this.apiClient,t);return d=U("{model}:countTokens",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=m1(p),h=new mu;return Object.assign(h,m),h})}else{const f=u1(this.apiClient,t);return d=U("{model}:countTokens",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=p1(p),h=new mu;return Object.assign(h,m),h})}}async computeTokens(t){var n,r;let s,i="",l={};if(this.apiClient.isVertexAI()){const d=s1(this.apiClient,t);return i=U("{model}:computeTokens",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:u.headers},p})),s.then(u=>{const f=o1(u),p=new Px;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var n,r,s,i;let l,d="",u={};if(this.apiClient.isVertexAI()){const f=$1(this.apiClient,t);return d=U("{model}:predictLongRunning",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),l.then(p=>{const m=z1(p),h=new _o;return Object.assign(h,m),h})}else{const f=q1(this.apiClient,t);return d=U("{model}:predictLongRunning",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>{const m=O1(p),h=new _o;return Object.assign(h,m),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class MN extends Vt{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const n=t.operation,r=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let i;r&&"httpOptions"in r&&(i=r.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(t){const n=t.operation,r=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let i;r&&"httpOptions"in r&&(i=r.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(t){var n,r,s,i;let l,d="",u={};if(this.apiClient.isVertexAI()){const f=bx(t);return d=U("{operationName}",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),l}else{const f=Sx(t);return d=U("{operationName}",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l}}async fetchPredictVideosOperationInternal(t){var n,r;let s,i="",l={};if(this.apiClient.isVertexAI()){const d=hx(t);return i=U("{resourceName}:fetchPredictOperation",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PN(e){const t={},n=a(e,["data"]);if(n!=null&&c(t,["data"],n),a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(e,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}function jN(e){const t={},n=a(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>ON(i))),c(t,["parts"],s)}const r=a(e,["role"]);return r!=null&&c(t,["role"],r),t}function LN(e,t,n){const r={},s=a(t,["expireTime"]);n!==void 0&&s!=null&&c(n,["expireTime"],s);const i=a(t,["newSessionExpireTime"]);n!==void 0&&i!=null&&c(n,["newSessionExpireTime"],i);const l=a(t,["uses"]);n!==void 0&&l!=null&&c(n,["uses"],l);const d=a(t,["liveConnectConstraints"]);n!==void 0&&d!=null&&c(n,["bidiGenerateContentSetup"],GN(e,d));const u=a(t,["lockAdditionalFields"]);return n!==void 0&&u!=null&&c(n,["fieldMask"],u),r}function DN(e,t){const n={},r=a(t,["config"]);return r!=null&&c(n,["config"],LN(e,r,n)),n}function FN(e){const t={};if(a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(e,["fileUri"]);n!=null&&c(t,["fileUri"],n);const r=a(e,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}function UN(e){const t={},n=a(e,["id"]);n!=null&&c(t,["id"],n);const r=a(e,["args"]);r!=null&&c(t,["args"],r);const s=a(e,["name"]);if(s!=null&&c(t,["name"],s),a(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function VN(e){const t={};if(a(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(e,["enableWidget"]);return n!=null&&c(t,["enableWidget"],n),t}function HN(e){const t={};if(a(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(e,["timeRangeFilter"]);return n!=null&&c(t,["timeRangeFilter"],n),t}function BN(e,t){const n={},r=a(e,["generationConfig"]);t!==void 0&&r!=null&&c(t,["setup","generationConfig"],r);const s=a(e,["responseModalities"]);t!==void 0&&s!=null&&c(t,["setup","generationConfig","responseModalities"],s);const i=a(e,["temperature"]);t!==void 0&&i!=null&&c(t,["setup","generationConfig","temperature"],i);const l=a(e,["topP"]);t!==void 0&&l!=null&&c(t,["setup","generationConfig","topP"],l);const d=a(e,["topK"]);t!==void 0&&d!=null&&c(t,["setup","generationConfig","topK"],d);const u=a(e,["maxOutputTokens"]);t!==void 0&&u!=null&&c(t,["setup","generationConfig","maxOutputTokens"],u);const f=a(e,["mediaResolution"]);t!==void 0&&f!=null&&c(t,["setup","generationConfig","mediaResolution"],f);const p=a(e,["seed"]);t!==void 0&&p!=null&&c(t,["setup","generationConfig","seed"],p);const m=a(e,["speechConfig"]);t!==void 0&&m!=null&&c(t,["setup","generationConfig","speechConfig"],za(m));const h=a(e,["thinkingConfig"]);t!==void 0&&h!=null&&c(t,["setup","generationConfig","thinkingConfig"],h);const g=a(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&c(t,["setup","generationConfig","enableAffectiveDialog"],g);const w=a(e,["systemInstruction"]);t!==void 0&&w!=null&&c(t,["setup","systemInstruction"],jN(De(w)));const N=a(e,["tools"]);if(t!==void 0&&N!=null){let E=gr(N);Array.isArray(E)&&(E=E.map(T=>qN(hr(T)))),c(t,["setup","tools"],E)}const S=a(e,["sessionResumption"]);t!==void 0&&S!=null&&c(t,["setup","sessionResumption"],zN(S));const x=a(e,["inputAudioTranscription"]);t!==void 0&&x!=null&&c(t,["setup","inputAudioTranscription"],x);const v=a(e,["outputAudioTranscription"]);t!==void 0&&v!=null&&c(t,["setup","outputAudioTranscription"],v);const y=a(e,["realtimeInputConfig"]);t!==void 0&&y!=null&&c(t,["setup","realtimeInputConfig"],y);const C=a(e,["contextWindowCompression"]);t!==void 0&&C!=null&&c(t,["setup","contextWindowCompression"],C);const b=a(e,["proactivity"]);if(t!==void 0&&b!=null&&c(t,["setup","proactivity"],b),a(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function GN(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["setup","model"],te(e,r));const s=a(t,["config"]);return s!=null&&c(n,["config"],BN(s,n)),n}function ON(e){const t={},n=a(e,["mediaResolution"]);n!=null&&c(t,["mediaResolution"],n);const r=a(e,["codeExecutionResult"]);r!=null&&c(t,["codeExecutionResult"],r);const s=a(e,["executableCode"]);s!=null&&c(t,["executableCode"],s);const i=a(e,["fileData"]);i!=null&&c(t,["fileData"],FN(i));const l=a(e,["functionCall"]);l!=null&&c(t,["functionCall"],UN(l));const d=a(e,["functionResponse"]);d!=null&&c(t,["functionResponse"],d);const u=a(e,["inlineData"]);u!=null&&c(t,["inlineData"],PN(u));const f=a(e,["text"]);f!=null&&c(t,["text"],f);const p=a(e,["thought"]);p!=null&&c(t,["thought"],p);const m=a(e,["thoughtSignature"]);m!=null&&c(t,["thoughtSignature"],m);const h=a(e,["videoMetadata"]);return h!=null&&c(t,["videoMetadata"],h),t}function zN(e){const t={},n=a(e,["handle"]);if(n!=null&&c(t,["handle"],n),a(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function qN(e){const t={};if(a(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=a(e,["computerUse"]);n!=null&&c(t,["computerUse"],n);const r=a(e,["fileSearch"]);r!=null&&c(t,["fileSearch"],r);const s=a(e,["codeExecution"]);if(s!=null&&c(t,["codeExecution"],s),a(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=a(e,["functionDeclarations"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(m=>m)),c(t,["functionDeclarations"],p)}const l=a(e,["googleMaps"]);l!=null&&c(t,["googleMaps"],VN(l));const d=a(e,["googleSearch"]);d!=null&&c(t,["googleSearch"],HN(d));const u=a(e,["googleSearchRetrieval"]);u!=null&&c(t,["googleSearchRetrieval"],u);const f=a(e,["urlContext"]);return f!=null&&c(t,["urlContext"],f),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $N(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const r=e[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const s=Object.keys(r).map(i=>`${n}.${i}`);t.push(...s)}else t.push(n)}return t.join(",")}function WN(e,t){let n=null;const r=e.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const i=r.setup;typeof i=="object"&&i!==null?(e.bidiGenerateContentSetup=i,n=i):delete e.bidiGenerateContentSetup}else r!==void 0&&delete e.bidiGenerateContentSetup;const s=e.fieldMask;if(n){const i=$N(n);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)i?e.fieldMask=i:delete e.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];s.length>0&&(d=s.map(f=>l.includes(f)?`generationConfig.${f}`:f));const u=[];i&&u.push(i),d.length>0&&u.push(...d),u.length>0?e.fieldMask=u.join(","):delete e.fieldMask}else delete e.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?e.fieldMask=s.join(","):delete e.fieldMask;return e}class JN extends Vt{constructor(t){super(),this.apiClient=t}async create(t){var n,r;let s,i="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=DN(this.apiClient,t);i=U("auth_tokens",d._url),l=d._query,delete d.config,delete d._url,delete d._query;const u=WN(d,t.config);return s=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KN(e,t){const n={},r=a(e,["force"]);return t!==void 0&&r!=null&&c(t,["_query","force"],r),n}function YN(e){const t={},n=a(e,["name"]);n!=null&&c(t,["_url","name"],n);const r=a(e,["config"]);return r!=null&&KN(r,t),t}function QN(e){const t={},n=a(e,["name"]);return n!=null&&c(t,["_url","name"],n),t}function XN(e,t){const n={},r=a(e,["pageSize"]);t!==void 0&&r!=null&&c(t,["_query","pageSize"],r);const s=a(e,["pageToken"]);return t!==void 0&&s!=null&&c(t,["_query","pageToken"],s),n}function ZN(e){const t={},n=a(e,["parent"]);n!=null&&c(t,["_url","parent"],n);const r=a(e,["config"]);return r!=null&&XN(r,t),t}function e2(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["nextPageToken"]);r!=null&&c(t,["nextPageToken"],r);const s=a(e,["documents"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(l=>l)),c(t,["documents"],i)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class t2 extends Vt{constructor(t){super(),this.apiClient=t,this.list=async n=>new An(Ft.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(t){var n,r;let s,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=QN(t);return i=U("{name}",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>u)}}async delete(t){var n,r;let s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=YN(t);s=U("{name}",l._url),i=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(t){var n,r;let s,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=ZN(t);return i=U("{parent}/documents",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>{const f=e2(u),p=new jx;return Object.assign(p,f),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class n2 extends Vt{constructor(t,n=new t2(t)){super(),this.apiClient=t,this.documents=n,this.list=async(r={})=>new An(Ft.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(r),r)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var n,r;let s,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=$w(t);return i=U("fileSearchStores",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>u)}}async get(t){var n,r;let s,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Kw(t);return i=U("{name}",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>u)}}async delete(t){var n,r;let s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Jw(t);s=U("{name}",l._url),i=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(t){var n,r;let s,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=tN(t);return i=U("fileSearchStores",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>{const f=nN(u),p=new Lx;return Object.assign(p,f),p})}}async uploadToFileSearchStoreInternal(t){var n,r;let s,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=rN(t);return i=U("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>{const f=sN(u),p=new Dx;return Object.assign(p,f),p})}}async importFile(t){var n,r;let s,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Xw(t);return i=U("{file_search_store_name}:importFile",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>{const f=Qw(u),p=new Va;return Object.assign(p,f),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Fm=function(){const{crypto:e}=globalThis;if(e!=null&&e.randomUUID)return Fm=e.randomUUID.bind(e),e.randomUUID();const t=new Uint8Array(1),n=e?()=>e.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const r2=()=>Fm();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ul(e){return typeof e=="object"&&e!==null&&("name"in e&&e.name==="AbortError"||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}const Vl=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null){try{if(Object.prototype.toString.call(e)==="[object Error]"){const t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return new Error(JSON.stringify(e))}catch{}}return new Error(e)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ut extends Error{}class Be extends ut{constructor(t,n,r,s){super(`${Be.makeMessage(t,n,r)}`),this.status=t,this.headers=s,this.error=n}static makeMessage(t,n,r){const s=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return t&&s?`${t} ${s}`:t?`${t} status code (no body)`:s||"(no status code or body)"}static generate(t,n,r,s){if(!t||!s)return new ti({message:r,cause:Vl(n)});const i=n;return t===400?new Vm(t,i,r,s):t===401?new Hm(t,i,r,s):t===403?new Bm(t,i,r,s):t===404?new Gm(t,i,r,s):t===409?new Om(t,i,r,s):t===422?new zm(t,i,r,s):t===429?new qm(t,i,r,s):t>=500?new $m(t,i,r,s):new Be(t,i,r,s)}}class Hl extends Be{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class ti extends Be{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),n&&(this.cause=n)}}class Um extends ti{constructor({message:t}={}){super({message:t??"Request timed out."})}}class Vm extends Be{}class Hm extends Be{}class Bm extends Be{}class Gm extends Be{}class Om extends Be{}class zm extends Be{}class qm extends Be{}class $m extends Be{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const s2=/^[a-z][a-z0-9+.-]*:/i,o2=e=>s2.test(e);let Bl=e=>(Bl=Array.isArray,Bl(e));const i2=Bl;let l2=i2;const Du=l2;function a2(e){if(!e)return!0;for(const t in e)return!1;return!0}function c2(e,t){return Object.prototype.hasOwnProperty.call(e,t)}const d2=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new ut(`${e} must be an integer`);if(t<0)throw new ut(`${e} must be a positive integer`);return t},u2=e=>{try{return JSON.parse(e)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const f2=e=>new Promise(t=>setTimeout(t,e));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ln="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function p2(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const m2=()=>{var e,t,n,r,s;const i=p2();if(i==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ln,"X-Stainless-OS":Uu(Deno.build.os),"X-Stainless-Arch":Fu(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(e=Deno.version)===null||e===void 0?void 0:e.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ln,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(i==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ln,"X-Stainless-OS":Uu((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":Fu((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(s=globalThis.process.version)!==null&&s!==void 0?s:"unknown"};const l=h2();return l?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ln,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${l.browser}`,"X-Stainless-Runtime-Version":l.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ln,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function h2(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,i=r[2]||0,l=r[3]||0;return{browser:t,version:`${s}.${i}.${l}`}}}return null}const Fu=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",Uu=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let As;const g2=()=>As??(As=m2());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function x2(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Wm(...e){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function v2(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return Wm({start(){},async pull(n){const{done:r,value:s}=await t.next();r?n.close():n.enqueue(s)},async cancel(){var n;await((n=t.return)===null||n===void 0?void 0:n.call(t))}})}function Jm(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const n=await t.read();return n!=null&&n.done&&t.releaseLock(),n}catch(n){throw t.releaseLock(),n}},async return(){const n=t.cancel();return t.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function y2(e){var t,n;if(e===null||typeof e!="object")return;if(e[Symbol.asyncIterator]){await((n=(t=e[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(t));return}const r=e.getReader(),s=r.cancel();r.releaseLock(),await s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const w2=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Km=()=>{var e;if(typeof File>"u"){const{process:t}=globalThis,n=typeof((e=t==null?void 0:t.versions)===null||e===void 0?void 0:e.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Di(e,t,n){return Km(),new File(e,t??"unknown_file",n)}function N2(e){return(typeof e=="object"&&e!==null&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}const S2=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ym=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",b2=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&Ym(e),C2=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function";async function E2(e,t,n){if(Km(),e=await e,b2(e))return e instanceof File?e:Di([await e.arrayBuffer()],e.name);if(C2(e)){const s=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),Di(await Gl(s),t,n)}const r=await Gl(e);if(t||(t=N2(e)),!(n!=null&&n.type)){const s=r.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof s=="string"&&(n=Object.assign(Object.assign({},n),{type:s}))}return Di(r,t,n)}async function Gl(e){var t,n,r,s,i;let l=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)l.push(e);else if(Ym(e))l.push(e instanceof Blob?e:await e.arrayBuffer());else if(S2(e))try{for(var d=!0,u=wt(e),f;f=await u.next(),t=f.done,!t;d=!0){s=f.value,d=!1;const p=s;l.push(...await Gl(p))}}catch(p){n={error:p}}finally{try{!d&&!t&&(r=u.return)&&await r.call(u)}finally{if(n)throw n.error}}else{const p=(i=e==null?void 0:e.constructor)===null||i===void 0?void 0:i.name;throw new Error(`Unexpected data type: ${typeof e}${p?`; constructor: ${p}`:""}${k2(e)}`)}return l}function k2(e){return typeof e!="object"||e===null?"":`; props: [${Object.getOwnPropertyNames(e).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qm{constructor(t){this._client=t}}Qm._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xm(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Vu=Object.freeze(Object.create(null)),_2=(e=Xm)=>function(n,...r){if(n.length===1)return n[0];let s=!1;const i=[],l=n.reduce((p,m,h)=>{var g,w,N;/[?#]/.test(m)&&(s=!0);const S=r[h];let x=(s?encodeURIComponent:e)(""+S);return h!==r.length&&(S==null||typeof S=="object"&&S.toString===((N=Object.getPrototypeOf((w=Object.getPrototypeOf((g=S.hasOwnProperty)!==null&&g!==void 0?g:Vu))!==null&&w!==void 0?w:Vu))===null||N===void 0?void 0:N.toString))&&(x=S+"",i.push({start:p.length+m.length,length:x.length,error:`Value of type ${Object.prototype.toString.call(S).slice(8,-1)} is not a valid path parameter`})),p+m+(h===r.length?"":x)},""),d=l.split(/[?#]/,1)[0],u=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let f;for(;(f=u.exec(d))!==null;)i.push({start:f.index,length:f[0].length,error:`Value "${f[0]}" can't be safely passed as a path parameter`});if(i.sort((p,m)=>p.start-m.start),i.length>0){let p=0;const m=i.reduce((h,g)=>{const w=" ".repeat(g.start-p),N="^".repeat(g.length);return p=g.start+g.length,h+w+N},"");throw new ut(`Path parameters result in path with invalid segments:
${i.map(h=>h.error).join(`
`)}
${l}
${m}`)}return l},Rs=_2(Xm);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zm extends Qm{create(t,n){var r;const{api_version:s=this._client.apiVersion}=t,i=Io(t,["api_version"]);if("model"in i&&"agent_config"in i)throw new ut("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in i&&"generation_config"in i)throw new ut("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Rs`/${s}/interactions`,Object.assign(Object.assign({body:i},n),{stream:(r=t.stream)!==null&&r!==void 0?r:!1}))}delete(t,n={},r){const{api_version:s=this._client.apiVersion}=n??{};return this._client.delete(Rs`/${s}/interactions/${t}`,r)}cancel(t,n={},r){const{api_version:s=this._client.apiVersion}=n??{};return this._client.post(Rs`/${s}/interactions/${t}/cancel`,r)}get(t,n={},r){var s;const i=n??{},{api_version:l=this._client.apiVersion}=i,d=Io(i,["api_version"]);return this._client.get(Rs`/${l}/interactions/${t}`,Object.assign(Object.assign({query:d},r),{stream:(s=n==null?void 0:n.stream)!==null&&s!==void 0?s:!1}))}}Zm._key=Object.freeze(["interactions"]);class eh extends Zm{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function T2(e){let t=0;for(const s of e)t+=s.length;const n=new Uint8Array(t);let r=0;for(const s of e)n.set(s,r),r+=s.length;return n}let Ms;function $a(e){let t;return(Ms??(t=new globalThis.TextEncoder,Ms=t.encode.bind(t)))(e)}let Ps;function Hu(e){let t;return(Ps??(t=new globalThis.TextDecoder,Ps=t.decode.bind(t)))(e)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ni{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];const n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?$a(t):t;this.buffer=T2([this.buffer,n]);const r=[];let s;for(;(s=I2(this.buffer,this.carriageReturnIndex))!=null;){if(s.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=s.index;continue}if(this.carriageReturnIndex!=null&&(s.index!==this.carriageReturnIndex+1||s.carriage)){r.push(Hu(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const i=this.carriageReturnIndex!==null?s.preceding-1:s.preceding,l=Hu(this.buffer.subarray(0,i));r.push(l),this.buffer=this.buffer.subarray(s.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}ni.NEWLINE_CHARS=new Set([`
`,"\r"]);ni.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function I2(e,t){for(let s=t??0;s<e.length;s++){if(e[s]===10)return{preceding:s,index:s+1,carriage:!1};if(e[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function A2(e){for(let r=0;r<e.length-1;r++){if(e[r]===10&&e[r+1]===10||e[r]===13&&e[r+1]===13)return r+2;if(e[r]===13&&e[r+1]===10&&r+3<e.length&&e[r+2]===13&&e[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ao={off:0,error:200,warn:300,info:400,debug:500},Bu=(e,t,n)=>{if(e){if(c2(Ao,e))return e;Ue(n).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(Ao))}`)}};function Pr(){}function js(e,t,n){return!t||Ao[e]>Ao[n]?Pr:t[e].bind(t)}const R2={error:Pr,warn:Pr,info:Pr,debug:Pr};let Gu=new WeakMap;function Ue(e){var t;const n=e.logger,r=(t=e.logLevel)!==null&&t!==void 0?t:"off";if(!n)return R2;const s=Gu.get(n);if(s&&s[0]===r)return s[1];const i={error:js("error",n,r),warn:js("warn",n,r),info:js("info",n,r),debug:js("debug",n,r)};return Gu.set(n,[r,i]),i}const hn=e=>(e.options&&(e.options=Object.assign({},e.options),delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([t,n])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kn{constructor(t,n,r){this.iterator=t,this.controller=n,this.client=r}static fromSSEResponse(t,n,r){let s=!1;const i=r?Ue(r):console;function l(){return yt(this,arguments,function*(){var u,f,p,m;if(s)throw new ut("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let h=!1;try{try{for(var g=!0,w=wt(M2(t,n)),N;N=yield K(w.next()),u=N.done,!u;g=!0){m=N.value,g=!1;const S=m;if(!h)if(S.data.startsWith("[DONE]")){h=!0;continue}else try{yield yield K(JSON.parse(S.data))}catch(x){throw i.error("Could not parse message into JSON:",S.data),i.error("From chunk:",S.raw),x}}}catch(S){f={error:S}}finally{try{!g&&!u&&(p=w.return)&&(yield K(p.call(w)))}finally{if(f)throw f.error}}h=!0}catch(S){if(Ul(S))return yield K(void 0);throw S}finally{h||n.abort()}})}return new Kn(l,n,r)}static fromReadableStream(t,n,r){let s=!1;function i(){return yt(this,arguments,function*(){var u,f,p,m;const h=new ni,g=Jm(t);try{for(var w=!0,N=wt(g),S;S=yield K(N.next()),u=S.done,!u;w=!0){m=S.value,w=!1;const x=m;for(const v of h.decode(x))yield yield K(v)}}catch(x){f={error:x}}finally{try{!w&&!u&&(p=N.return)&&(yield K(p.call(N)))}finally{if(f)throw f.error}}for(const x of h.flush())yield yield K(x)})}function l(){return yt(this,arguments,function*(){var u,f,p,m;if(s)throw new ut("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let h=!1;try{try{for(var g=!0,w=wt(i()),N;N=yield K(w.next()),u=N.done,!u;g=!0){m=N.value,g=!1;const S=m;h||S&&(yield yield K(JSON.parse(S)))}}catch(S){f={error:S}}finally{try{!g&&!u&&(p=w.return)&&(yield K(p.call(w)))}finally{if(f)throw f.error}}h=!0}catch(S){if(Ul(S))return yield K(void 0);throw S}finally{h||n.abort()}})}return new Kn(l,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],n=[],r=this.iterator(),s=i=>({next:()=>{if(i.length===0){const l=r.next();t.push(l),n.push(l)}return i.shift()}});return[new Kn(()=>s(t),this.controller,this.client),new Kn(()=>s(n),this.controller,this.client)]}toReadableStream(){const t=this;let n;return Wm({async start(){n=t[Symbol.asyncIterator]()},async pull(r){try{const{value:s,done:i}=await n.next();if(i)return r.close();const l=$a(JSON.stringify(s)+`
`);r.enqueue(l)}catch(s){r.error(s)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}}function M2(e,t){return yt(this,arguments,function*(){var r,s,i,l;if(!e.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new ut("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new ut("Attempted to iterate over a response with no body");const d=new j2,u=new ni,f=Jm(e.body);try{for(var p=!0,m=wt(P2(f)),h;h=yield K(m.next()),r=h.done,!r;p=!0){l=h.value,p=!1;const g=l;for(const w of u.decode(g)){const N=d.decode(w);N&&(yield yield K(N))}}}catch(g){s={error:g}}finally{try{!p&&!r&&(i=m.return)&&(yield K(i.call(m)))}finally{if(s)throw s.error}}for(const g of u.flush()){const w=d.decode(g);w&&(yield yield K(w))}})}function P2(e){return yt(this,arguments,function*(){var n,r,s,i;let l=new Uint8Array;try{for(var d=!0,u=wt(e),f;f=yield K(u.next()),n=f.done,!n;d=!0){i=f.value,d=!1;const p=i;if(p==null)continue;const m=p instanceof ArrayBuffer?new Uint8Array(p):typeof p=="string"?$a(p):p;let h=new Uint8Array(l.length+m.length);h.set(l),h.set(m,l.length),l=h;let g;for(;(g=A2(l))!==-1;)yield yield K(l.slice(0,g)),l=l.slice(g)}}catch(p){r={error:p}}finally{try{!d&&!n&&(s=u.return)&&(yield K(s.call(u)))}finally{if(r)throw r.error}}l.length>0&&(yield yield K(l))})}class j2{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,r,s]=L2(t,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function L2(e,t){const n=e.indexOf(t);return n!==-1?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function D2(e,t){const{response:n,requestLogID:r,retryOfRequestLogID:s,startTime:i}=t,l=await(async()=>{var d;if(t.options.stream)return Ue(e).debug("response",n.status,n.url,n.headers,n.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(n,t.controller,e):Kn.fromSSEResponse(n,t.controller,e);if(n.status===204)return null;if(t.options.__binaryResponse)return n;const u=n.headers.get("content-type"),f=(d=u==null?void 0:u.split(";")[0])===null||d===void 0?void 0:d.trim();return(f==null?void 0:f.includes("application/json"))||(f==null?void 0:f.endsWith("+json"))?await n.json():await n.text()})();return Ue(e).debug(`[${r}] response parsed`,hn({retryOfRequestLogID:s,url:n.url,status:n.status,body:l,durationMs:Date.now()-i})),l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wa extends Promise{constructor(t,n,r=D2){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=r,this.client=t}_thenUnwrap(t){return new Wa(this.client,this.responsePromise,async(n,r)=>t(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const th=Symbol("brand.privateNullableHeaders");function*F2(e){if(!e)return;if(th in e){const{values:r,nulls:s}=e;yield*r.entries();for(const i of s)yield[i,null];return}let t=!1,n;e instanceof Headers?n=e.entries():Du(e)?n=e:(t=!0,n=Object.entries(e??{}));for(let r of n){const s=r[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const i=Du(r[1])?r[1]:[r[1]];let l=!1;for(const d of i)d!==void 0&&(t&&!l&&(l=!0,yield[s,null]),yield[s,d])}}const Tr=e=>{const t=new Headers,n=new Set;for(const r of e){const s=new Set;for(const[i,l]of F2(r)){const d=i.toLowerCase();s.has(d)||(t.delete(i),s.add(d)),l===null?(t.delete(i),n.add(d)):(t.append(i,l),n.delete(d))}}return{[th]:!0,values:t,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fi=e=>{var t,n,r,s,i,l;if(typeof globalThis.process<"u")return(r=(n=(t=cx)===null||t===void 0?void 0:t[e])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(l=(i=(s=globalThis.Deno.env)===null||s===void 0?void 0:s.get)===null||i===void 0?void 0:i.call(s,e))===null||l===void 0?void 0:l.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var nh;class ri{constructor(t){var n,r,s,i,l,d,u,{baseURL:f=Fi("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:p=(n=Fi("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:m="v1beta"}=t,h=Io(t,["baseURL","apiKey","apiVersion"]);const g=Object.assign(Object.assign({apiKey:p,apiVersion:m},h),{baseURL:f||"https://generativelanguage.googleapis.com"});this.baseURL=g.baseURL,this.timeout=(r=g.timeout)!==null&&r!==void 0?r:ri.DEFAULT_TIMEOUT,this.logger=(s=g.logger)!==null&&s!==void 0?s:console;const w="warn";this.logLevel=w,this.logLevel=(l=(i=Bu(g.logLevel,"ClientOptions.logLevel",this))!==null&&i!==void 0?i:Bu(Fi("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&l!==void 0?l:w,this.fetchOptions=g.fetchOptions,this.maxRetries=(d=g.maxRetries)!==null&&d!==void 0?d:2,this.fetch=(u=g.fetch)!==null&&u!==void 0?u:x2(),this.encoder=w2,this._options=g,this.apiKey=p,this.apiVersion=m,this.clientAdapter=g.clientAdapter}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:n}){if(!(t.has("authorization")||t.has("x-goog-api-key"))&&!(this.apiKey&&t.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){const n=Tr([t.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Tr([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Tr([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(t){return Object.entries(t).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new ut(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Ln}`}defaultIdempotencyKey(){return`stainless-node-retry-${r2()}`}makeStatusError(t,n,r,s){return Be.generate(t,n,r,s)}buildURL(t,n,r){const s=!this.baseURLOverridden()&&r||this.baseURL,i=o2(t)?new URL(t):new URL(s+(s.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),l=this.defaultQuery();return a2(l)||(n=Object.assign(Object.assign({},l),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(i.search=this.stringifyQuery(n)),i.toString()}async prepareOptions(t){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!t.path.startsWith(`/${this.apiVersion}/projects/`)){const n=t.path.slice(this.apiVersion.length+1);t.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(t,{url:n,options:r}){}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,r){return this.request(Promise.resolve(r).then(s=>Object.assign({method:t,path:n},s)))}request(t,n=null){return new Wa(this,this.makeRequest(t,n,void 0))}async makeRequest(t,n,r){var s,i,l;const d=await t,u=(s=d.maxRetries)!==null&&s!==void 0?s:this.maxRetries;n==null&&(n=u),await this.prepareOptions(d);const{req:f,url:p,timeout:m}=await this.buildRequest(d,{retryCount:u-n});await this.prepareRequest(f,{url:p,options:d});const h="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),g=r===void 0?"":`, retryOf: ${r}`,w=Date.now();if(Ue(this).debug(`[${h}] sending request`,hn({retryOfRequestLogID:r,method:d.method,url:p,options:d,headers:f.headers})),!((i=d.signal)===null||i===void 0)&&i.aborted)throw new Hl;const N=new AbortController,S=await this.fetchWithTimeout(p,f,m,N).catch(Vl),x=Date.now();if(S instanceof globalThis.Error){const y=`retrying, ${n} attempts remaining`;if(!((l=d.signal)===null||l===void 0)&&l.aborted)throw new Hl;const C=Ul(S)||/timed? ?out/i.test(String(S)+("cause"in S?String(S.cause):""));if(n)return Ue(this).info(`[${h}] connection ${C?"timed out":"failed"} - ${y}`),Ue(this).debug(`[${h}] connection ${C?"timed out":"failed"} (${y})`,hn({retryOfRequestLogID:r,url:p,durationMs:x-w,message:S.message})),this.retryRequest(d,n,r??h);throw Ue(this).info(`[${h}] connection ${C?"timed out":"failed"} - error; no more retries left`),Ue(this).debug(`[${h}] connection ${C?"timed out":"failed"} (error; no more retries left)`,hn({retryOfRequestLogID:r,url:p,durationMs:x-w,message:S.message})),C?new Um:new ti({cause:S})}const v=`[${h}${g}] ${f.method} ${p} ${S.ok?"succeeded":"failed"} with status ${S.status} in ${x-w}ms`;if(!S.ok){const y=await this.shouldRetry(S);if(n&&y){const _=`retrying, ${n} attempts remaining`;return await y2(S.body),Ue(this).info(`${v} - ${_}`),Ue(this).debug(`[${h}] response error (${_})`,hn({retryOfRequestLogID:r,url:S.url,status:S.status,headers:S.headers,durationMs:x-w})),this.retryRequest(d,n,r??h,S.headers)}const C=y?"error; no more retries left":"error; not retryable";Ue(this).info(`${v} - ${C}`);const b=await S.text().catch(_=>Vl(_).message),E=u2(b),T=E?void 0:b;throw Ue(this).debug(`[${h}] response error (${C})`,hn({retryOfRequestLogID:r,url:S.url,status:S.status,headers:S.headers,message:T,durationMs:Date.now()-w})),this.makeStatusError(S.status,E,T,S.headers)}return Ue(this).info(v),Ue(this).debug(`[${h}] response start`,hn({retryOfRequestLogID:r,url:S.url,status:S.status,headers:S.headers,durationMs:x-w})),{response:S,options:d,controller:N,requestLogID:h,retryOfRequestLogID:r,startTime:w}}async fetchWithTimeout(t,n,r,s){const i=n||{},{signal:l,method:d}=i,u=Io(i,["signal","method"]);l&&l.addEventListener("abort",()=>s.abort());const f=setTimeout(()=>s.abort(),r),p=globalThis.ReadableStream&&u.body instanceof globalThis.ReadableStream||typeof u.body=="object"&&u.body!==null&&Symbol.asyncIterator in u.body,m=Object.assign(Object.assign(Object.assign({signal:s.signal},p?{duplex:"half"}:{}),{method:"GET"}),u);d&&(m.method=d.toUpperCase());try{return await this.fetch.call(void 0,t,m)}finally{clearTimeout(f)}}async shouldRetry(t){const n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,n,r,s){var i;let l;const d=s==null?void 0:s.get("retry-after-ms");if(d){const f=parseFloat(d);Number.isNaN(f)||(l=f)}const u=s==null?void 0:s.get("retry-after");if(u&&!l){const f=parseFloat(u);Number.isNaN(f)?l=Date.parse(u)-Date.now():l=f*1e3}if(!(l&&0<=l&&l<60*1e3)){const f=(i=t.maxRetries)!==null&&i!==void 0?i:this.maxRetries;l=this.calculateDefaultRetryTimeoutMillis(n,f)}return await f2(l),this.makeRequest(t,n-1,r)}calculateDefaultRetryTimeoutMillis(t,n){const i=n-t,l=Math.min(.5*Math.pow(2,i),8),d=1-Math.random()*.25;return l*d*1e3}async buildRequest(t,{retryCount:n=0}={}){var r,s,i;const l=Object.assign({},t),{method:d,path:u,query:f,defaultBaseURL:p}=l,m=this.buildURL(u,f,p);"timeout"in l&&d2("timeout",l.timeout),l.timeout=(r=l.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:h,body:g}=this.buildBody({options:l}),w=await this.buildHeaders({options:t,method:d,bodyHeaders:h,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:d,headers:w},l.signal&&{signal:l.signal}),globalThis.ReadableStream&&g instanceof globalThis.ReadableStream&&{duplex:"half"}),g&&{body:g}),(s=this.fetchOptions)!==null&&s!==void 0?s:{}),(i=l.fetchOptions)!==null&&i!==void 0?i:{}),url:m,timeout:l.timeout}}async buildHeaders({options:t,method:n,bodyHeaders:r,retryCount:s}){let i={};this.idempotencyHeader&&n!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=t.idempotencyKey);const l=await this.authHeaders(t);let d=Tr([i,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),g2()),this._options.defaultHeaders,r,t.headers,l]);return this.validateHeaders(d),d.values}buildBody({options:{body:t,headers:n}}){if(!t)return{bodyHeaders:void 0,body:void 0};const r=Tr([n]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&r.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:v2(t)}:this.encoder({body:t,headers:r})}}ri.DEFAULT_TIMEOUT=6e4;class ke extends ri{constructor(){super(...arguments),this.interactions=new eh(this)}}nh=ke;ke.GeminiNextGenAPIClient=nh;ke.GeminiNextGenAPIClientError=ut;ke.APIError=Be;ke.APIConnectionError=ti;ke.APIConnectionTimeoutError=Um;ke.APIUserAbortError=Hl;ke.NotFoundError=Gm;ke.ConflictError=Om;ke.RateLimitError=qm;ke.BadRequestError=Vm;ke.AuthenticationError=Hm;ke.InternalServerError=$m;ke.PermissionDeniedError=Bm;ke.UnprocessableEntityError=zm;ke.toFile=E2;ke.Interactions=eh;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function U2(e,t){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],r),n}function V2(e,t){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],r),n}function H2(e,t){const n={},r=a(e,["sdkHttpResponse"]);return r!=null&&c(n,["sdkHttpResponse"],r),n}function B2(e,t){const n={},r=a(e,["sdkHttpResponse"]);return r!=null&&c(n,["sdkHttpResponse"],r),n}function G2(e,t,n){const r={};if(a(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=a(e,["tunedModelDisplayName"]);if(t!==void 0&&s!=null&&c(t,["displayName"],s),a(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=a(e,["epochCount"]);t!==void 0&&i!=null&&c(t,["tuningTask","hyperparameters","epochCount"],i);const l=a(e,["learningRateMultiplier"]);if(l!=null&&c(r,["tuningTask","hyperparameters","learningRateMultiplier"],l),a(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(a(e,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(a(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=a(e,["batchSize"]);t!==void 0&&d!=null&&c(t,["tuningTask","hyperparameters","batchSize"],d);const u=a(e,["learningRate"]);if(t!==void 0&&u!=null&&c(t,["tuningTask","hyperparameters","learningRate"],u),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(a(e,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function O2(e,t,n){const r={};let s=a(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const g=a(e,["validationDataset"]);t!==void 0&&g!=null&&c(t,["supervisedTuningSpec"],Ou(g))}else if(s==="PREFERENCE_TUNING"){const g=a(e,["validationDataset"]);t!==void 0&&g!=null&&c(t,["preferenceOptimizationSpec"],Ou(g))}const i=a(e,["tunedModelDisplayName"]);t!==void 0&&i!=null&&c(t,["tunedModelDisplayName"],i);const l=a(e,["description"]);t!==void 0&&l!=null&&c(t,["description"],l);let d=a(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const g=a(e,["epochCount"]);t!==void 0&&g!=null&&c(t,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(d==="PREFERENCE_TUNING"){const g=a(e,["epochCount"]);t!==void 0&&g!=null&&c(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let u=a(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const g=a(e,["learningRateMultiplier"]);t!==void 0&&g!=null&&c(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(u==="PREFERENCE_TUNING"){const g=a(e,["learningRateMultiplier"]);t!==void 0&&g!=null&&c(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let f=a(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const g=a(e,["exportLastCheckpointOnly"]);t!==void 0&&g!=null&&c(t,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(f==="PREFERENCE_TUNING"){const g=a(e,["exportLastCheckpointOnly"]);t!==void 0&&g!=null&&c(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let p=a(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const g=a(e,["adapterSize"]);t!==void 0&&g!=null&&c(t,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(p==="PREFERENCE_TUNING"){const g=a(e,["adapterSize"]);t!==void 0&&g!=null&&c(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(a(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(a(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const m=a(e,["labels"]);t!==void 0&&m!=null&&c(t,["labels"],m);const h=a(e,["beta"]);return t!==void 0&&h!=null&&c(t,["preferenceOptimizationSpec","hyperParameters","beta"],h),r}function z2(e,t){const n={},r=a(e,["baseModel"]);r!=null&&c(n,["baseModel"],r);const s=a(e,["preTunedModel"]);s!=null&&c(n,["preTunedModel"],s);const i=a(e,["trainingDataset"]);i!=null&&tS(i);const l=a(e,["config"]);return l!=null&&G2(l,n),n}function q2(e,t){const n={},r=a(e,["baseModel"]);r!=null&&c(n,["baseModel"],r);const s=a(e,["preTunedModel"]);s!=null&&c(n,["preTunedModel"],s);const i=a(e,["trainingDataset"]);i!=null&&nS(i,n,t);const l=a(e,["config"]);return l!=null&&O2(l,n,t),n}function $2(e,t){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],r),n}function W2(e,t){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],r),n}function J2(e,t,n){const r={},s=a(e,["pageSize"]);t!==void 0&&s!=null&&c(t,["_query","pageSize"],s);const i=a(e,["pageToken"]);t!==void 0&&i!=null&&c(t,["_query","pageToken"],i);const l=a(e,["filter"]);return t!==void 0&&l!=null&&c(t,["_query","filter"],l),r}function K2(e,t,n){const r={},s=a(e,["pageSize"]);t!==void 0&&s!=null&&c(t,["_query","pageSize"],s);const i=a(e,["pageToken"]);t!==void 0&&i!=null&&c(t,["_query","pageToken"],i);const l=a(e,["filter"]);return t!==void 0&&l!=null&&c(t,["_query","filter"],l),r}function Y2(e,t){const n={},r=a(e,["config"]);return r!=null&&J2(r,n),n}function Q2(e,t){const n={},r=a(e,["config"]);return r!=null&&K2(r,n),n}function X2(e,t){const n={},r=a(e,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const s=a(e,["nextPageToken"]);s!=null&&c(n,["nextPageToken"],s);const i=a(e,["tunedModels"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(d=>rh(d))),c(n,["tuningJobs"],l)}return n}function Z2(e,t){const n={},r=a(e,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const s=a(e,["nextPageToken"]);s!=null&&c(n,["nextPageToken"],s);const i=a(e,["tuningJobs"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(d=>Ol(d))),c(n,["tuningJobs"],l)}return n}function eS(e,t){const n={},r=a(e,["name"]);r!=null&&c(n,["model"],r);const s=a(e,["name"]);return s!=null&&c(n,["endpoint"],s),n}function tS(e,t){const n={};if(a(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=a(e,["examples"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>i)),c(n,["examples","examples"],s)}return n}function nS(e,t,n){const r={};let s=a(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const l=a(e,["gcsUri"]);t!==void 0&&l!=null&&c(t,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(s==="PREFERENCE_TUNING"){const l=a(e,["gcsUri"]);t!==void 0&&l!=null&&c(t,["preferenceOptimizationSpec","trainingDatasetUri"],l)}let i=a(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const l=a(e,["vertexDatasetResource"]);t!==void 0&&l!=null&&c(t,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(i==="PREFERENCE_TUNING"){const l=a(e,["vertexDatasetResource"]);t!==void 0&&l!=null&&c(t,["preferenceOptimizationSpec","trainingDatasetUri"],l)}if(a(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function rh(e,t){const n={},r=a(e,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const s=a(e,["name"]);s!=null&&c(n,["name"],s);const i=a(e,["state"]);i!=null&&c(n,["state"],ym(i));const l=a(e,["createTime"]);l!=null&&c(n,["createTime"],l);const d=a(e,["tuningTask","startTime"]);d!=null&&c(n,["startTime"],d);const u=a(e,["tuningTask","completeTime"]);u!=null&&c(n,["endTime"],u);const f=a(e,["updateTime"]);f!=null&&c(n,["updateTime"],f);const p=a(e,["description"]);p!=null&&c(n,["description"],p);const m=a(e,["baseModel"]);m!=null&&c(n,["baseModel"],m);const h=a(e,["_self"]);return h!=null&&c(n,["tunedModel"],eS(h)),n}function Ol(e,t){const n={},r=a(e,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const s=a(e,["name"]);s!=null&&c(n,["name"],s);const i=a(e,["state"]);i!=null&&c(n,["state"],ym(i));const l=a(e,["createTime"]);l!=null&&c(n,["createTime"],l);const d=a(e,["startTime"]);d!=null&&c(n,["startTime"],d);const u=a(e,["endTime"]);u!=null&&c(n,["endTime"],u);const f=a(e,["updateTime"]);f!=null&&c(n,["updateTime"],f);const p=a(e,["error"]);p!=null&&c(n,["error"],p);const m=a(e,["description"]);m!=null&&c(n,["description"],m);const h=a(e,["baseModel"]);h!=null&&c(n,["baseModel"],h);const g=a(e,["tunedModel"]);g!=null&&c(n,["tunedModel"],g);const w=a(e,["preTunedModel"]);w!=null&&c(n,["preTunedModel"],w);const N=a(e,["supervisedTuningSpec"]);N!=null&&c(n,["supervisedTuningSpec"],N);const S=a(e,["preferenceOptimizationSpec"]);S!=null&&c(n,["preferenceOptimizationSpec"],S);const x=a(e,["tuningDataStats"]);x!=null&&c(n,["tuningDataStats"],x);const v=a(e,["encryptionSpec"]);v!=null&&c(n,["encryptionSpec"],v);const y=a(e,["partnerModelTuningSpec"]);y!=null&&c(n,["partnerModelTuningSpec"],y);const C=a(e,["customBaseModel"]);C!=null&&c(n,["customBaseModel"],C);const b=a(e,["experiment"]);b!=null&&c(n,["experiment"],b);const E=a(e,["labels"]);E!=null&&c(n,["labels"],E);const T=a(e,["outputUri"]);T!=null&&c(n,["outputUri"],T);const I=a(e,["pipelineJob"]);I!=null&&c(n,["pipelineJob"],I);const _=a(e,["serviceAccount"]);_!=null&&c(n,["serviceAccount"],_);const A=a(e,["tunedModelDisplayName"]);A!=null&&c(n,["tunedModelDisplayName"],A);const L=a(e,["veoTuningSpec"]);return L!=null&&c(n,["veoTuningSpec"],L),n}function rS(e,t){const n={},r=a(e,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const s=a(e,["name"]);s!=null&&c(n,["name"],s);const i=a(e,["metadata"]);i!=null&&c(n,["metadata"],i);const l=a(e,["done"]);l!=null&&c(n,["done"],l);const d=a(e,["error"]);return d!=null&&c(n,["error"],d),n}function Ou(e,t){const n={},r=a(e,["gcsUri"]);r!=null&&c(n,["validationDatasetUri"],r);const s=a(e,["vertexDatasetResource"]);return s!=null&&c(n,["validationDatasetUri"],s),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sS extends Vt{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new An(Ft.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const s={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(s.checkpointId=n.config.preTunedModelCheckpointId);const i=Object.assign(Object.assign({},n),{preTunedModel:s});return i.baseModel=void 0,await this.tuneInternal(i)}else{const s=Object.assign({},n);return await this.tuneInternal(s)}else{const s=Object.assign({},n),i=await this.tuneMldevInternal(s);let l="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?l=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(l=i.name.split("/operations/")[0]),{name:l,state:Rl.JOB_STATE_QUEUED}}}}async getInternal(t){var n,r,s,i;let l,d="",u={};if(this.apiClient.isVertexAI()){const f=W2(t);return d=U("{name}",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>Ol(p))}else{const f=$2(t);return d=U("{name}",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>rh(p))}}async listInternal(t){var n,r,s,i;let l,d="",u={};if(this.apiClient.isVertexAI()){const f=Q2(t);return d=U("tuningJobs",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=Z2(p),h=new hu;return Object.assign(h,m),h})}else{const f=Y2(t);return d=U("tunedModels",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=X2(p),h=new hu;return Object.assign(h,m),h})}}async cancel(t){var n,r,s,i;let l,d="",u={};if(this.apiClient.isVertexAI()){const f=V2(t);return d=U("{name}:cancel",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=B2(p),h=new gu;return Object.assign(h,m),h})}else{const f=U2(t);return d=U("{name}:cancel",f._url),u=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=H2(p),h=new gu;return Object.assign(h,m),h})}}async tuneInternal(t){var n,r;let s,i="",l={};if(this.apiClient.isVertexAI()){const d=q2(t,t);return i=U("tuningJobs",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:u.headers},p})),s.then(u=>Ol(u))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,r;let s,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=z2(t);return i=U("tunedModels",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:u.headers},p})),s.then(u=>rS(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oS{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const iS=1024*1024*8,lS=3,aS=1e3,cS=2,Ro="x-goog-upload-status";async function dS(e,t,n){var r;const s=await sh(e,t,n),i=await(s==null?void 0:s.json());if(((r=s==null?void 0:s.headers)===null||r===void 0?void 0:r[Ro])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return i.file}async function uS(e,t,n){var r;const s=await sh(e,t,n),i=await(s==null?void 0:s.json());if(((r=s==null?void 0:s.headers)===null||r===void 0?void 0:r[Ro])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const l=pm(i),d=new Ha;return Object.assign(d,l),d}async function sh(e,t,n){var r,s;let i=0,l=0,d=new Ml(new Response),u="upload";for(i=e.size;l<i;){const f=Math.min(iS,i-l),p=e.slice(l,l+f);l+f>=i&&(u+=", finalize");let m=0,h=aS;for(;m<lS&&(d=await n.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(l),"Content-Length":String(f)}}}),!(!((r=d==null?void 0:d.headers)===null||r===void 0)&&r[Ro]));)m++,await pS(h),h=h*cS;if(l+=f,((s=d==null?void 0:d.headers)===null||s===void 0?void 0:s[Ro])!=="active")break;if(i<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function fS(e){return{size:e.size,type:e.type}}function pS(e){return new Promise(t=>setTimeout(t,e))}class mS{async upload(t,n,r){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await dS(t,n,r)}async uploadToFileSearchStore(t,n,r){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await uS(t,n,r)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await fS(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hS{create(t,n,r){return new gS(t,n,r)}}class gS{constructor(t,n,r){this.url=t,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zu="x-goog-api-key";class xS{constructor(t){this.apiKey=t}async addAuthHeaders(t,n){if(t.get(zu)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(zu,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vS="gl-node/";class yS{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const t=this.httpOptions;t!=null&&t.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new ke({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t==null?void 0:t.timeout});return this._interactions=n.interactions,this._interactions}constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;const r=px(t.httpOptions,t.vertexai,void 0,void 0);r&&(t.httpOptions?t.httpOptions.baseUrl=r:t.httpOptions={baseUrl:r}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;const s=new xS(this.apiKey);this.apiClient=new fN({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:vS+"web",uploader:new mS,downloader:new oS}),this.models=new RN(this.apiClient),this.live=new EN(this.apiClient,s,new hS),this.batches=new Gv(this.apiClient),this.chats=new by(this.models,this.apiClient),this.caches=new wy(this.apiClient),this.files=new Py(this.apiClient),this.operations=new MN(this.apiClient),this.authTokens=new JN(this.apiClient),this.tunings=new sS(this.apiClient),this.fileSearchStores=new n2(this.apiClient)}}var wS={};const NS=async e=>{const t=new yS({apiKey:wS.API_KEY});try{const n=ur.filter(d=>e[d.id]===de.BAD),r=ur.filter(d=>e[d.id]===de.ATTENTION);let s=`You are a Senior Fleet Safety Manager. Review the following truck inspection report.
`;s+=`Truck No: ${e.truckNo}, Trailer: ${e.trailerNo}, Odometer: ${e.odometer}
`,s+=`
BAD / FAILED ITEMS (${n.length}):
`,n.length===0?s+=`None.
`:n.forEach(d=>{s+=`- ${d.label} (Status: Critical Failure)
`}),s+=`
ITEMS NEEDING ATTENTION (${r.length}):
`,r.length===0?s+=`None.
`:r.forEach(d=>{s+=`- ${d.label} (Status: Needs Attention)
`}),s+=`
REMARKS from Inspector: ${e.remarks||"No remarks provided."}
`,s+=`
Overall Rating given by inspector: ${e.rate}/5
`,s+=`
Task:
`,s+=`1. Summarize the condition of the vehicle in 2 sentences.
`,s+=`2. Provide a "Safety Risk Score" from 1 (Safe) to 10 (Critical).
`,s+=`3. List 3 immediate prioritized actions for the maintenance team.
`,s+=`
Format the output as professional, concise text.`;const i=[{text:s}];if(e.photoDamage){const d=e.photoDamage.split(",")[1];d&&(i.push({inlineData:{mimeType:"image/jpeg",data:d}}),i.push({text:"Also analyze the attached photo of the reported damage for severity."}))}return(await t.models.generateContent({model:"gemini-3-flash-preview",contents:{parts:i}})).text||"Analysis complete but no text returned."}catch(n){return console.error("Gemini Analysis Failed:",n),"AI Safety Analysis currently unavailable. Please review the manual report."}},qu=({message:e,type:t,onClose:n})=>{const r={success:"bg-green-600",error:"bg-red-600",info:"bg-blue-600",warning:"bg-amber-500"};return o.jsxs("div",{className:`fixed top-4 right-4 z-50 ${r[t]} text-white px-6 py-4 rounded-xl shadow-2xl flex items-center gap-4 animate-fadeIn max-w-sm`,children:[o.jsx("div",{className:"flex-1 font-medium",children:e}),o.jsx("button",{onClick:n,className:"opacity-80 hover:opacity-100",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})},SS=({onClose:e,onPrint:t,children:n,title:r})=>{const[s,i]=k.useState(!1),l=()=>{i(!0);const d=document.getElementById("printable-report-content");if(!d){console.error("Report content not found"),i(!1);return}const f={margin:0,filename:`${r.replace(/[^a-zA-Z0-9]/g,"_")}_${new Date().toISOString().split("T")[0]}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,letterRendering:!0,scrollY:0},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}},p=window.html2pdf;p?p().set(f).from(d).save().then(()=>{i(!1)}).catch(m=>{console.error("PDF Generation Error",m),i(!1),alert("Failed to generate PDF. You can use the Print button as a fallback.")}):(t(),i(!1))};return o.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-md animate-fadeIn no-print",children:o.jsxs("div",{className:"bg-white w-full max-w-5xl h-[94vh] rounded-3xl shadow-2xl flex flex-col overflow-hidden border border-white/20",children:[o.jsxs("div",{className:"px-6 py-4 border-b flex justify-between items-center bg-slate-50 border-slate-200",children:[o.jsx("div",{className:"flex items-center gap-6",children:o.jsxs("button",{onClick:e,className:"text-sm font-bold text-slate-500 hover:text-slate-800 transition-colors uppercase tracking-wider flex items-center gap-2",children:[o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),"Close"]})}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("button",{onClick:l,disabled:s,className:"px-5 py-2.5 text-xs font-bold text-white bg-slate-900 hover:bg-black rounded-xl shadow-lg flex items-center gap-2 transition-all active:scale-95 disabled:bg-slate-400",children:[s?o.jsxs("svg",{className:"animate-spin w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:o.jsx("path",{d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download PDF"]}),o.jsxs("button",{onClick:t,className:"hidden sm:flex px-5 py-2.5 text-xs font-bold text-slate-700 bg-white border border-slate-200 rounded-xl hover:bg-slate-50 transition-all items-center gap-2",children:[o.jsx("svg",{className:"w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:o.jsx("path",{d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Print"]})]})]}),o.jsx("div",{className:"flex-1 overflow-auto bg-slate-100 p-4 sm:p-10 flex justify-center relative",children:o.jsx("div",{className:"origin-top transform scale-[0.9] lg:scale-100 transition-transform duration-500",children:o.jsx("div",{id:"printable-report-content",className:"bg-white shadow-2xl min-h-[297mm] relative z-10 w-[210mm] print:shadow-none",children:n})})})]})})},bS=({status:e,onClose:t,onViewReport:n,aiAnalysis:r})=>e==="idle"?null:o.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center overflow-y-auto py-10",children:[o.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-md transition-all duration-300"}),o.jsxs("div",{className:"relative bg-white rounded-3xl shadow-2xl p-6 sm:p-8 w-full mx-4 text-center transform transition-all duration-300 scale-100 animate-fadeIn border border-white/20 max-w-xl my-auto",children:[e==="submitting"&&o.jsxs("div",{className:"flex flex-col items-center gap-4 py-10",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-16 h-16 border-4 border-blue-100 border-t-blue-600 rounded-full animate-spin"}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-gray-900 uppercase tracking-tight",children:"Uploading Inspection"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1 font-medium uppercase tracking-widest opacity-60",children:"Syncing with Fleet Database..."})]})]}),e==="success"&&o.jsxs("div",{className:"flex flex-col items-center gap-6 py-4 animate-fadeIn",children:[o.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center shadow-inner",children:o.jsx("svg",{className:"w-8 h-8 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-black text-gray-900 uppercase tracking-tighter",children:"Submission Successful"}),o.jsx("p",{className:"text-xs text-slate-500 mt-1 font-medium uppercase tracking-widest",children:"Fleet repository updated"})]}),o.jsxs("div",{className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-5 text-left relative overflow-hidden",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx("div",{className:"w-6 h-6 bg-indigo-600 rounded-lg flex items-center justify-center text-white",children:o.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),o.jsx("h4",{className:"text-[10px] font-black text-indigo-600 uppercase tracking-[0.2em]",children:"Safety AI Insights"})]}),r?o.jsx("div",{className:"animate-fadeIn",children:o.jsx("p",{className:"text-xs font-medium text-slate-700 leading-relaxed whitespace-pre-wrap",children:r})}):o.jsxs("div",{className:"flex flex-col items-center py-6 gap-3",children:[o.jsxs("svg",{className:"animate-spin h-5 w-5 text-indigo-400",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),o.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest animate-pulse",children:"Analyzing Vehicle Condition..."})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 w-full",children:[o.jsxs("button",{onClick:n,className:"w-full py-4 bg-white border border-slate-200 text-slate-700 font-bold rounded-xl shadow-sm hover:bg-slate-50 transition-all flex items-center justify-center gap-2 text-[10px] uppercase tracking-widest",children:[o.jsxs("svg",{className:"w-4 h-4 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Digital PDF"]}),o.jsx("button",{onClick:t,className:"w-full py-4 bg-slate-900 text-white font-black rounded-xl shadow-lg hover:bg-black transition-all flex items-center justify-center gap-2 text-[10px] uppercase tracking-widest active:scale-95",children:"Return Home"})]})]}),e==="offline_saved"&&o.jsxs("div",{className:"flex flex-col items-center gap-4 py-10",children:[o.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center shadow-inner",children:o.jsx("svg",{className:"w-10 h-10 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-black text-gray-900 uppercase tracking-tighter",children:"Offline Saved"}),o.jsx("p",{className:"text-sm text-gray-500 mt-2 leading-relaxed font-medium",children:"Data stored on-device. Sync will resume automatically when internet returns."})]}),o.jsx("button",{onClick:t,className:"w-full mt-4 py-4 bg-slate-100 text-slate-600 font-bold rounded-xl hover:bg-slate-200 transition-all text-[10px] uppercase tracking-widest",children:"Got It"})]})]})]}),CS=({user:e,settings:t,appScriptUrl:n,onClose:r,showToast:s,onUpdateSuccess:i,onLogout:l})=>{const d=(e.name||"").split(" "),u=d[0]||"",f=d.slice(1).join(" ")||"",[p,m]=k.useState(""),[h,g]=k.useState(""),[w,N]=k.useState(!1),[S,x]=k.useState(e.preferences||{emailNotifications:!0,notifyGeneral:!0,notifyPetroleum:!0,notifyPetroleumV2:!0,notifyAcid:!0}),[v,y]=k.useState(!1),C=async()=>{if(!p){s("Please enter a new password.","warning");return}if(p!==h){s("Passwords do not match.","error");return}N(!0);try{const I=await(await fetch(n,{method:"POST",body:JSON.stringify({action:"update_user",originalUsername:e.username,password:p})})).json();I.status==="success"?(s("Security updated!","success"),m(""),g("")):s(I.message||"Failed to update.","error")}catch{s("Sync failed.","error")}finally{N(!1)}},b=async T=>{x(T),y(!0);try{(await(await fetch(n,{method:"POST",body:JSON.stringify({action:"update_user",originalUsername:e.username,preferences:T})})).json()).status==="success"&&(i({...e,preferences:T}),s("Preferences synced.","success"))}catch{s("Sync failed.","error")}finally{y(!1)}},E=T=>{const I={...S,[T]:!S[T]};b(I)};return o.jsxs("div",{className:"fixed inset-0 z-[100] bg-white flex flex-col animate-fadeIn overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-100 px-4 py-3 flex items-center shrink-0 z-10 shadow-sm",children:[o.jsx("button",{onClick:r,className:"p-2 text-blue-500 hover:bg-blue-50 rounded-full transition-all",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})}),o.jsx("h1",{className:"flex-1 text-center font-bold text-slate-800 text-sm uppercase tracking-widest",children:"My Workspace"}),o.jsx("div",{className:"w-10"})]}),o.jsxs("div",{className:"max-w-2xl mx-auto w-full px-6 py-10 space-y-12 pb-24",children:[o.jsxs("section",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-800 border-b border-gray-100 pb-2 uppercase tracking-tight",children:"Identity Profile"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between items-center text-sm py-1",children:[o.jsx("span",{className:"font-semibold text-slate-600",children:"Organization"}),o.jsx("span",{className:"text-slate-400 font-medium",children:t.companyName||"Transport Pro"})]}),o.jsxs("div",{className:"flex justify-between items-center text-sm py-1",children:[o.jsx("span",{className:"font-semibold text-slate-600",children:"First Name"}),o.jsx("span",{className:"text-slate-400 font-medium",children:u})]}),o.jsxs("div",{className:"flex justify-between items-center text-sm py-1",children:[o.jsx("span",{className:"font-semibold text-slate-600",children:"Last Name"}),o.jsx("span",{className:"text-slate-400 font-medium",children:f})]}),o.jsxs("div",{className:"flex justify-between items-center text-sm py-1",children:[o.jsx("span",{className:"font-semibold text-slate-600",children:"Login ID"}),o.jsx("span",{className:"text-slate-400 font-medium",children:e.username})]})]})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-800 border-b border-gray-100 pb-2 uppercase tracking-tight",children:"Security Access"}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("input",{type:"password",placeholder:"Set New Password",className:"w-full p-3.5 border border-gray-200 rounded-xl text-sm bg-slate-50 focus:bg-white focus:ring-2 focus:ring-blue-100 outline-none transition-all font-semibold",value:p,onChange:T=>m(T.target.value)}),o.jsx("input",{type:"password",placeholder:"Confirm Password",className:"w-full p-3.5 border border-gray-200 rounded-xl text-sm bg-slate-50 focus:bg-white focus:ring-2 focus:ring-blue-100 outline-none transition-all font-semibold",value:h,onChange:T=>g(T.target.value)}),o.jsx("button",{onClick:C,disabled:w,className:"w-full py-4 bg-slate-900 hover:bg-black text-white font-bold rounded-xl shadow-lg transition-all active:scale-95 flex items-center justify-center gap-2 text-xs uppercase tracking-widest",children:w?o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Verifying..."]}):"Update Security"})]})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between border-b border-gray-100 pb-2",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-800 uppercase tracking-tight",children:"Alert Preferences"}),v&&o.jsxs("svg",{className:"animate-spin h-4 w-4 text-blue-500",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"flex items-center justify-between p-4 rounded-2xl bg-slate-50 border border-slate-100 cursor-pointer group",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-bold text-slate-800",children:"Master Email Alert"}),o.jsx("p",{className:"text-[10px] text-slate-400 font-semibold uppercase tracking-wider",children:"Automated system triggers"})]}),o.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:S.emailNotifications,onChange:()=>E("emailNotifications")})]}),o.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 gap-3 pt-2 transition-opacity duration-300 ${!S.emailNotifications&&"opacity-40 pointer-events-none"}`,children:[{key:"notifyGeneral",label:"General Fleet"},{key:"notifyPetroleum",label:"Petroleum V1"},{key:"notifyPetroleumV2",label:"Petroleum V2"},{key:"notifyAcid",label:"Acid Tankers"}].map(T=>o.jsxs("label",{className:"flex items-center justify-between px-4 py-3.5 rounded-xl border border-gray-100 bg-white hover:bg-gray-50 cursor-pointer transition-colors shadow-sm",children:[o.jsx("span",{className:"text-[11px] font-bold text-slate-500 uppercase tracking-widest",children:T.label}),o.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-gray-300 text-blue-600",checked:S[T.key],onChange:()=>E(T.key)})]},T.key))})]})]}),o.jsx("section",{className:"pt-8",children:o.jsxs("button",{onClick:l,className:"w-full py-4 bg-white border-2 border-red-500 text-red-500 hover:bg-red-50 font-bold rounded-xl transition-all flex items-center justify-center gap-3 uppercase tracking-[0.2em] active:scale-95 text-xs",children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H5a3 3-0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign Out"]})})]})]})},ES=({id:e,notifications:t,onMarkAsRead:n,onDismiss:r,onClearAll:s,onAcknowledge:i,canAcknowledge:l=!1})=>{const[d,u]=k.useState(!1),[f,p]=k.useState("all"),[m,h]=k.useState(null),g=k.useRef(null);k.useEffect(()=>{function b(E){g.current&&!g.current.contains(E.target)&&u(!1)}return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[g]);const w=t.filter(b=>!b.read).length,N=t.filter(b=>!b.read&&b.type==="critical").length,S=k.useMemo(()=>{let b=[...t];return f==="unread"?b=b.filter(E=>!E.read):f==="critical"&&(b=b.filter(E=>E.type==="critical")),b.sort((E,T)=>E.type==="critical"&&!E.read&&(T.type!=="critical"||T.read)?-1:T.type==="critical"&&!T.read&&(E.type!=="critical"||E.read)?1:new Date(T.timestamp).getTime()-new Date(E.timestamp).getTime())},[t,f]),x=b=>{const E=new Date(b),I=Math.floor((new Date().getTime()-E.getTime())/1e3);return I<60?"Just now":I<3600?`${Math.floor(I/60)}m ago`:I<86400?`${Math.floor(I/3600)}h ago`:I<172800?"Yesterday":E.toLocaleDateString()},v=b=>{switch(b){case"critical":return o.jsx("div",{className:"w-9 h-9 rounded-full bg-red-100 text-red-600 flex items-center justify-center shrink-0 shadow-sm border border-red-200",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})});case"warning":return o.jsx("div",{className:"w-9 h-9 rounded-full bg-amber-100 text-amber-600 flex items-center justify-center shrink-0 shadow-sm border border-amber-200",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})});case"success":return o.jsx("div",{className:"w-9 h-9 rounded-full bg-green-100 text-green-600 flex items-center justify-center shrink-0 shadow-sm border border-green-200",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})});default:return o.jsx("div",{className:"w-9 h-9 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center shrink-0 shadow-sm border border-blue-200",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}},y=(b,E)=>{b.stopPropagation(),i&&(h(E),i(E))},C=(b,E)=>{b.stopPropagation(),n(E)};return o.jsxs("div",{className:"relative",ref:g,children:[o.jsxs("button",{id:e,onClick:()=>u(!d),className:`relative p-2 transition-colors rounded-full transition-all duration-300
                    ${d?"bg-blue-800 text-white":"text-blue-200 hover:text-white hover:bg-blue-800"}
                `,children:[o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),w>0&&o.jsxs("span",{className:"absolute top-1 right-1 flex h-4 w-4",children:[o.jsx("span",{className:`animate-ping absolute inline-flex h-full w-full rounded-full opacity-75 ${N>0?"bg-red-400":"bg-blue-400"}`}),o.jsx("span",{className:`relative inline-flex rounded-full h-4 w-4 text-[9px] font-bold text-white items-center justify-center ${N>0?"bg-red-500":"bg-blue-500"}`,children:w>9?"9+":w})]})]}),d&&o.jsxs("div",{className:"absolute right-0 mt-3 w-80 md:w-96 bg-white rounded-2xl shadow-2xl ring-1 ring-black ring-opacity-5 z-[100] overflow-hidden animate-fadeIn origin-top-right",children:[o.jsxs("div",{className:"px-5 py-4 bg-white border-b border-gray-100 flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:"Notifications"}),N>0&&o.jsxs("p",{className:"text-xs text-red-600 font-bold mt-0.5 flex items-center gap-1",children:[o.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-600"}),N," Critical Issues Found"]})]}),t.length>0&&o.jsxs("button",{onClick:s,className:"text-xs font-bold text-slate-500 hover:text-red-600 bg-slate-100 hover:bg-red-50 px-3 py-1.5 rounded-lg transition-colors flex items-center gap-1",children:[o.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Dismiss All"]})]}),o.jsxs("div",{className:"flex border-b border-gray-100 bg-gray-50/50",children:[o.jsx("button",{onClick:()=>p("all"),className:`flex-1 py-2.5 text-xs font-bold text-center border-b-2 transition-colors ${f==="all"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"All"}),o.jsx("button",{onClick:()=>p("unread"),className:`flex-1 py-2.5 text-xs font-bold text-center border-b-2 transition-colors ${f==="unread"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Unread"}),o.jsx("button",{onClick:()=>p("critical"),className:`flex-1 py-2.5 text-xs font-bold text-center border-b-2 transition-colors ${f==="critical"?"border-red-500 text-red-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Critical"})]}),o.jsx("div",{className:"max-h-[60vh] overflow-y-auto bg-gray-50",children:S.length===0?o.jsxs("div",{className:"p-10 text-center text-gray-400 flex flex-col items-center",children:[o.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-3",children:o.jsx("svg",{className:"w-8 h-8 opacity-40",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"You're all caught up!"}),o.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["No ",f==="all"?"new":f," notifications."]})]}):o.jsx("div",{className:"divide-y divide-gray-100",children:S.map(b=>{var E;return o.jsxs("div",{className:`p-4 transition-all relative group cursor-pointer 
                                            ${b.read?"bg-gray-50 hover:bg-gray-100":"bg-white hover:bg-blue-50/30"}
                                            ${b.type==="critical"&&!b.read?"border-l-4 border-red-500 pl-3":"border-l-4 border-transparent pl-3"}
                                        `,onClick:()=>n(b.id),children:[o.jsxs("div",{className:"flex gap-3",children:[v(b.type),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex justify-between items-start mb-0.5",children:[o.jsx("h4",{className:`text-sm font-bold truncate pr-6 ${b.type==="critical"?"text-red-700":b.read?"text-gray-600":"text-gray-900"}`,children:b.title}),o.jsx("span",{className:"text-[10px] text-gray-400 whitespace-nowrap font-medium",children:x(b.timestamp)})]}),o.jsx("p",{className:`text-xs leading-relaxed mb-1.5 line-clamp-2 ${b.read?"text-gray-500":"text-gray-700"}`,children:b.message}),o.jsxs("div",{className:"flex items-center gap-2",children:[b.module&&o.jsx("span",{className:"inline-block px-1.5 py-0.5 rounded text-[9px] font-bold uppercase tracking-wider bg-slate-200 text-slate-600",children:b.module}),!b.read&&o.jsx("span",{className:"text-[9px] font-bold text-blue-600 bg-blue-50 px-1.5 py-0.5 rounded",children:"NEW"})]}),b.actionLink&&b.actionLink.startsWith("request:start_inspection")&&o.jsx("div",{className:"mt-3 flex items-center justify-start",children:o.jsxs("button",{onClick:T=>C(T,b.id),className:"flex items-center gap-1.5 px-4 py-2 rounded-lg text-xs font-bold bg-indigo-600 hover:bg-indigo-700 text-white transition-all shadow-md active:scale-95 w-full justify-center sm:w-auto",children:[o.jsxs("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),"Start Inspection"]})}),(b.type==="critical"||b.type==="warning")&&l&&i&&!((E=b.actionLink)!=null&&E.startsWith("request:"))&&o.jsx("div",{className:"mt-3 flex items-center justify-start",children:o.jsx("button",{onClick:T=>y(T,b.id),disabled:m===b.id,className:`flex items-center gap-1 px-3 py-1.5 rounded-lg text-xs font-bold transition-all
                                                                ${m===b.id?"bg-gray-100 text-gray-400":"bg-green-50 text-green-700 hover:bg-green-100 border border-green-200 shadow-sm"}
                                                            `,children:m===b.id?o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"animate-spin w-3 h-3",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Resolving..."]}):o.jsxs(o.Fragment,{children:[o.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),"Acknowledge & Resolve"]})})})]})]}),o.jsx("button",{onClick:T=>{T.stopPropagation(),r(b.id)},className:"absolute top-2 right-2 p-1.5 text-gray-300 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-all opacity-0 group-hover:opacity-100",title:"Dismiss locally",children:o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]},b.id)})})})]})]})},kS=({isOpen:e,onClose:t,onStartNew:n,onResume:r,hasDraft:s,moduleName:i})=>e?o.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-slate-900/70 backdrop-blur-sm animate-fadeIn",children:o.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-2xl overflow-hidden transform transition-all scale-100",children:[o.jsxs("div",{className:"bg-gradient-to-r from-emerald-900 to-emerald-800 p-6 text-white",children:[o.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[o.jsx("svg",{className:"w-6 h-6 text-emerald-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Start ",i," Inspection"]}),o.jsx("p",{className:"text-emerald-100 text-sm mt-1",children:"Select how you would like to proceed."})]}),o.jsxs("div",{className:"p-6 space-y-4",children:[s&&o.jsxs("div",{className:"bg-amber-50 border border-amber-100 rounded-xl p-4 mb-2",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-amber-100 text-amber-600 flex items-center justify-center shrink-0 mt-1",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-amber-800 text-sm",children:"Unsaved Draft Found"}),o.jsx("p",{className:"text-xs text-amber-700 mt-0.5",children:"You have an inspection in progress. Would you like to continue where you left off?"})]})]}),o.jsx("button",{onClick:r,className:"w-full mt-3 py-3 bg-amber-500 hover:bg-amber-600 text-white font-bold rounded-lg shadow-md transition flex items-center justify-center gap-2",children:"Resume Draft"})]}),o.jsxs("button",{onClick:n,className:"w-full py-4 bg-emerald-600 hover:bg-emerald-700 text-white font-bold rounded-xl shadow-lg hover:shadow-xl transition flex items-center justify-center gap-3 group",children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-emerald-500/50 flex items-center justify-center group-hover:scale-110 transition-transform",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})}),o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"text-sm font-black uppercase tracking-wide",children:"Start New Inspection"}),s&&o.jsx("div",{className:"text-[10px] font-medium text-emerald-100 opacity-80",children:"This will discard the current draft"})]})]}),o.jsx("button",{onClick:t,className:"w-full py-3 bg-white border border-gray-200 text-gray-500 hover:bg-gray-50 hover:text-gray-700 font-bold rounded-xl transition",children:"Cancel"})]})]})}):null,_S=({subscription:e,user:t,onManage:n})=>{if(!t)return null;const r=t.role==="SuperAdmin";if(e===null)return o.jsxs("div",{className:"w-full px-4 py-3 flex items-center justify-center gap-3 bg-slate-800 text-white shadow-md relative z-[100] animate-fadeIn",children:[o.jsxs("svg",{className:"animate-spin h-4 w-4 text-slate-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),o.jsx("span",{className:"text-[10px] font-bold uppercase tracking-[0.2em] text-slate-400",children:"Verifying System License Validation..."})]});const s=e.status==="Expired"||!e.expiryDate||e.daysRemaining<=0,i=!s&&e.status==="Active"&&e.daysRemaining>0&&e.daysRemaining<=7;return!s&&!i?null:o.jsxs("div",{className:`w-full px-4 py-3 flex items-center justify-between shadow-md relative z-[100] animate-fadeIn
            ${s?"bg-red-600 text-white":"bg-amber-500 text-white"}
        `,children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-1.5 bg-white/20 rounded-full",children:s?o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}):o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-bold uppercase tracking-wide",children:s?"SYSTEM LICENSE EXPIRED":"LICENSE EXPIRING SOON"}),o.jsx("p",{className:"text-xs font-medium opacity-90",children:s?"Access to core features is restricted. Renew to restore modification access.":`${e==null?void 0:e.daysRemaining} days remaining. Please renew soon.`})]})]}),r&&o.jsx("button",{onClick:n,className:"px-4 py-2 bg-white text-gray-900 rounded-lg text-xs font-bold uppercase tracking-wider hover:bg-gray-100 transition-colors shadow-sm",children:"Manage License"})]})},TS=({isOpen:e,onClose:t,onSubmit:n,validationLists:r,currentUserRole:s})=>{if(!e)return null;const[i,l]=k.useState(""),[d,u]=k.useState(""),[f,p]=k.useState("General"),[m,h]=k.useState("Normal"),[g,w]=k.useState(""),[N,S]=k.useState(""),[x,v]=k.useState(!1),[y,C]=k.useState({}),[b,E]=k.useState(!1),[T,I]=k.useState(!1);k.useEffect(()=>{E(!!i)},[i]),k.useEffect(()=>{I(!!N)},[N]);const _=async L=>{L.preventDefault();const M={};if(i||(M.truckNo="Required"),g.trim()||(M.reason="Required"),Object.keys(M).length>0){C(M);return}v(!0);try{await n({truckNo:i,trailerNo:d,type:f,priority:m,reason:g,assignedInspector:N}),t()}finally{v(!1)}},A=({label:L,value:M,onChange:P,options:R,placeholder:F="Select...",error:q,isVerified:J,isOptional:j=!1})=>{const[H,W]=k.useState(!1),[Z,B]=k.useState(""),re=k.useRef(null);k.useEffect(()=>{function oe(ne){re.current&&!re.current.contains(ne.target)&&W(!1)}return document.addEventListener("mousedown",oe),()=>document.removeEventListener("mousedown",oe)},[re]);const ae=R.filter(oe=>String(oe).toLowerCase().includes(Z.toLowerCase()));return o.jsxs("div",{className:"relative",ref:re,children:[o.jsx("div",{className:"flex justify-between items-center mb-1 px-1",children:o.jsxs("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-wider",children:[L," ",j&&o.jsx("span",{className:"text-slate-300 font-normal",children:"(Optional)"})]})}),o.jsxs("div",{onClick:()=>{R.length>0&&W(!H)},className:`relative w-full p-3 bg-slate-50 border rounded-xl outline-none text-xs font-semibold text-slate-700 transition-all cursor-pointer flex items-center justify-between
                        ${q?"border-red-200 bg-red-50 text-red-900 shadow-sm":H?"border-indigo-400 ring-2 ring-indigo-50 bg-white":"border-slate-100 hover:border-slate-200 hover:bg-slate-100/50"}
                        ${R.length===0?"opacity-60 cursor-not-allowed":""}
                    `,children:[o.jsx("span",{className:`truncate mr-4 ${!M&&"text-slate-400 font-medium"}`,children:M||(R.length===0?"Empty":F)}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[J&&M&&!q&&o.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 shadow-[0_0_4px_rgba(16,185,129,0.5)]"}),o.jsx("svg",{className:`w-3.5 h-3.5 text-slate-300 transition-transform ${H?"rotate-180 text-indigo-400":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M19 9l-7 7-7-7"})})]})]}),H&&R.length>0&&o.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-slate-100 rounded-xl shadow-xl overflow-hidden flex flex-col max-h-40",children:[o.jsx("div",{className:"p-2 border-b border-slate-50 bg-slate-50 sticky top-0 shrink-0",children:o.jsx("input",{type:"text",autoFocus:!0,className:"w-full px-3 py-1.5 text-[11px] border border-slate-200 rounded-lg focus:outline-none focus:border-indigo-400 placeholder-slate-300 font-medium",placeholder:"Filter...",value:Z,onChange:oe=>B(oe.target.value),onClick:oe=>oe.stopPropagation()})}),o.jsx("div",{className:"overflow-y-auto scrollbar-hide flex-1",children:ae.length===0?o.jsx("div",{className:"p-4 text-center text-[10px] text-slate-400 uppercase",children:"No results"}):ae.map((oe,ne)=>o.jsx("div",{onClick:()=>{P(oe),W(!1)},className:`px-4 py-2 text-xs cursor-pointer transition-all flex items-center justify-between border-b border-slate-50 last:border-0 
                                            ${M===oe?"bg-indigo-600 text-white":"text-slate-600 hover:bg-indigo-50"}
                                        `,children:oe},ne))})]}),q&&o.jsx("p",{className:"text-[8px] text-red-500 font-bold mt-0.5 ml-1 uppercase tracking-wide",children:q})]})};return o.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 sm:p-6 bg-slate-900/80 backdrop-blur-sm animate-fadeIn overflow-y-auto",children:o.jsxs("div",{className:"bg-white w-full max-w-lg rounded-[1.5rem] shadow-2xl overflow-hidden transform transition-all border border-slate-100 my-auto",children:[o.jsxs("div",{className:"bg-indigo-600 px-6 py-5 flex justify-between items-center text-white",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-black uppercase tracking-tight",children:"Request Inspection"}),o.jsx("p",{className:"text-indigo-100 text-[10px] font-bold uppercase tracking-widest leading-none",children:"Fleet Maintenance"})]})]}),o.jsx("button",{onClick:t,className:"text-white/60 hover:text-white transition-colors p-1.5 hover:bg-white/10 rounded-lg",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsx("div",{className:"p-6",children:o.jsxs("form",{onSubmit:_,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsx(A,{label:"Truck Number *",value:i,onChange:L=>{l(L),C(M=>({...M,truckNo:""}))},options:r.trucks,placeholder:"Select Reg...",error:y.truckNo,isVerified:b}),o.jsx(A,{label:"Trailer Number",value:d,onChange:L=>{u(L),C(M=>({...M,trailerNo:""}))},options:r.trailers,placeholder:"Link Trailer...",isOptional:!0})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsx(A,{label:"Type of Check",value:f,onChange:p,options:["General","Petroleum","Petroleum_V2","Acid"]}),o.jsx(A,{label:"Priority",value:m,onChange:h,options:["Normal","Urgent","Safety Concern"]})]}),o.jsx(A,{label:"Assign to Inspector",value:N,onChange:L=>{S(L),C(M=>({...M,inspector:""}))},options:r.inspectors,placeholder:"Optional",isVerified:T,isOptional:!0}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-1 px-1",children:"Notes / Instructions *"}),o.jsx("textarea",{className:`w-full p-4 bg-slate-50 border rounded-xl outline-none focus:ring-2 focus:ring-indigo-100 text-xs font-semibold h-20 placeholder-slate-300 resize-none transition-all
                                    ${y.reason?"border-red-200 bg-red-50 text-red-900":"border-slate-100 focus:border-indigo-400"}
                                `,placeholder:"Details for the inspector...",value:g,onChange:L=>{w(L.target.value),C(M=>({...M,reason:""}))},required:!0}),y.reason&&o.jsx("p",{className:"text-[8px] text-red-500 font-bold mt-0.5 ml-1 uppercase tracking-wide",children:y.reason})]}),o.jsx("div",{className:"pt-2",children:o.jsx("button",{type:"submit",disabled:x,className:`w-full py-4 rounded-xl font-bold text-white shadow-lg transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-widest active:scale-95
                                    ${x?"bg-slate-400 cursor-wait":"bg-indigo-600 hover:bg-indigo-700"}
                                `,children:x?o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):o.jsxs(o.Fragment,{children:["Submit Request",o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"3",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})})})]})})]})})},IS=({user:e,appScriptUrl:t,onComplete:n,onLogout:r})=>{const[s,i]=k.useState(0),[l,d]=k.useState(!1),[u,f]=k.useState(e.name||""),[p,m]=k.useState(e.username||""),[h,g]=k.useState(""),[w,N]=k.useState(""),[S,x]=k.useState(""),[v,y]=k.useState({emailNotifications:!0,notifyGeneral:!0,notifyPetroleum:!0,notifyPetroleumV2:!0,notifyAcid:!0}),C=()=>{x(""),i(_=>_+1)},b=async _=>{if(_.preventDefault(),s===0){if(!u.trim()){x("Please enter your name.");return}if(!p.trim()||!p.includes("@")){x("Please enter a valid email.");return}}if(s===1){if(h.length<4){x("Password must be at least 4 characters.");return}if(h!==w){x("Passwords do not match.");return}}C()},E=()=>{n({...e,needsSetup:!1})},T=async()=>{d(!0),x("");try{const _={action:"update_user",originalUsername:e.username,username:p,name:u,password:h,preferences:{...v,hasCompletedTour:!1}},L=await(await fetch(t,{method:"POST",body:JSON.stringify(_)})).json();L.status==="success"?i(3):x(L.message||"Something went wrong. Please try again.")}catch{x("Connection error. Check your internet.")}finally{d(!1)}},I=[{l:"ID"},{l:"Lock"},{l:"Alerts"}];return o.jsx("div",{className:"fixed inset-0 z-[200] bg-slate-900 flex items-center justify-center p-0 sm:p-4 animate-fadeIn overflow-hidden",children:o.jsxs("div",{className:"w-full h-full sm:h-auto sm:max-w-4xl bg-white sm:rounded-3xl shadow-2xl overflow-hidden flex flex-col md:flex-row",children:[o.jsxs("div",{className:"md:w-5/12 bg-slate-950 p-4 md:p-10 flex flex-row md:flex-col justify-between items-center md:items-start text-white shrink-0 border-b border-white/5 md:border-none",children:[o.jsxs("div",{className:"relative z-10 flex items-center md:block gap-3",children:[o.jsx("div",{className:"w-8 h-8 md:w-12 md:h-12 bg-indigo-600 rounded-lg md:rounded-2xl flex items-center justify-center md:mb-8",children:o.jsx("svg",{className:"w-4 h-4 md:w-6 md:h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:o.jsx("path",{d:"M12 11c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),o.jsxs("div",{className:"md:block",children:[o.jsx("h1",{className:"text-xs md:text-3xl font-black md:mb-2 uppercase tracking-tight leading-none",children:"SafetyCheck"}),o.jsx("p",{className:"hidden md:block text-indigo-400 text-[9px] font-bold uppercase tracking-widest opacity-60",children:"Account Finalization"})]})]}),o.jsx("div",{className:"relative z-10 flex flex-row md:flex-col gap-2 md:gap-6",children:I.map((_,A)=>o.jsxs("div",{className:`flex items-center gap-1.5 md:gap-4 transition-all duration-500 ${s>=A?"opacity-100":"opacity-20"}`,children:[o.jsx("div",{className:`w-4 h-4 md:w-8 md:h-8 rounded-full flex items-center justify-center border ${s>A?"bg-emerald-500 border-emerald-500 text-white":s===A?"border-indigo-400 text-indigo-400":"border-slate-700 text-slate-700"} font-black text-[8px] md:text-xs`,children:s>A?"":A+1}),o.jsx("span",{className:"hidden md:block font-bold text-[9px] uppercase tracking-[0.2em]",children:_.l})]},A))})]}),o.jsxs("div",{className:"flex-1 p-5 md:p-14 bg-white flex flex-col justify-center relative overflow-hidden",children:[s===0&&o.jsxs("div",{className:"animate-fadeIn w-full max-w-sm mx-auto flex flex-col",children:[o.jsxs("div",{className:"mb-4 md:mb-8",children:[o.jsx("h2",{className:"text-lg md:text-2xl font-black text-slate-800 uppercase tracking-tight",children:"Identity Profile"}),o.jsx("p",{className:"text-slate-400 text-[10px] md:text-xs font-medium uppercase tracking-wider mt-1",children:"Verification mapping required."})]}),o.jsxs("form",{onSubmit:b,className:"space-y-3 md:space-y-5",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[8px] font-black uppercase text-slate-400 mb-1.5 tracking-widest ml-1",children:"Official Name"}),o.jsx("input",{type:"text",autoFocus:!0,required:!0,className:"w-full p-3 md:p-4 bg-slate-50 border border-slate-200 rounded-xl outline-none font-bold text-slate-800 focus:ring-4 focus:ring-indigo-50 transition-all text-xs",value:u,onChange:_=>f(_.target.value),placeholder:"e.g. John Smith"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[8px] font-black uppercase text-slate-400 mb-1.5 tracking-widest ml-1",children:"Login Handle"}),o.jsx("input",{type:"email",required:!0,className:"w-full p-3 md:p-4 bg-slate-50 border border-slate-200 rounded-xl outline-none font-bold text-slate-800 focus:ring-4 focus:ring-indigo-50 transition-all text-xs",value:p,onChange:_=>m(_.target.value.toLowerCase()),placeholder:"email@company.com"})]}),S&&o.jsx("div",{className:"p-2 bg-red-50 text-red-600 text-[9px] font-bold rounded-lg border border-red-100",children:S}),o.jsxs("div",{className:"pt-2 flex flex-col gap-1 sm:gap-2",children:[o.jsx("button",{type:"submit",className:"w-full py-3.5 md:py-4 bg-slate-900 hover:bg-black text-white font-black rounded-xl uppercase tracking-widest text-[10px] shadow-lg active:scale-95 transition-all",children:"Update Details"}),o.jsxs("div",{className:"flex flex-row gap-2",children:[o.jsx("button",{type:"button",onClick:E,className:"flex-1 py-3 text-slate-400 hover:text-slate-600 font-bold text-[9px] uppercase tracking-[0.25em] transition-colors border border-slate-100 rounded-xl",children:"Setup Later"}),r&&o.jsx("button",{type:"button",onClick:r,className:"flex-1 py-3 text-rose-500 hover:text-rose-600 font-bold text-[9px] uppercase tracking-[0.25em] transition-colors border border-rose-50 rounded-xl bg-rose-50/30",children:"Sign Out"})]})]})]})]}),s===1&&o.jsxs("div",{className:"animate-fadeIn w-full max-w-sm mx-auto",children:[o.jsxs("div",{className:"mb-4 md:mb-8",children:[o.jsx("h2",{className:"text-lg md:text-2xl font-black text-slate-800 uppercase tracking-tight",children:"Security Access"}),o.jsx("p",{className:"text-slate-400 text-[10px] md:text-xs font-medium uppercase tracking-wider mt-1",children:"Define your unique entry key."})]}),o.jsxs("form",{onSubmit:b,className:"space-y-3 md:space-y-4",children:[o.jsx("input",{type:"password",autoFocus:!0,required:!0,className:"w-full p-3 md:p-4 bg-slate-50 border border-slate-200 rounded-xl outline-none font-bold text-slate-800 focus:ring-4 focus:ring-indigo-50 transition-all text-xs",value:h,onChange:_=>g(_.target.value),placeholder:"New Master Password"}),o.jsx("input",{type:"password",required:!0,className:"w-full p-3 md:p-4 bg-slate-50 border border-slate-200 rounded-xl outline-none font-bold text-slate-800 focus:ring-4 focus:ring-indigo-50 transition-all text-xs",value:w,onChange:_=>N(_.target.value),placeholder:"Confirm Master Password"}),S&&o.jsx("div",{className:"text-red-600 text-[9px] font-bold bg-red-50 p-2 rounded-lg border border-red-100",children:S}),o.jsx("button",{type:"submit",className:"w-full py-3.5 md:py-4 bg-slate-900 hover:bg-black text-white font-black rounded-xl uppercase tracking-widest text-[10px] shadow-lg active:scale-95 transition-all mt-4",children:"Finalize Security"})]})]}),s===2&&o.jsxs("div",{className:"animate-fadeIn w-full max-w-sm mx-auto flex flex-col h-full md:h-auto justify-center",children:[o.jsxs("div",{className:"mb-3 md:mb-8",children:[o.jsx("h2",{className:"text-lg md:text-2xl font-black text-slate-800 uppercase tracking-tight",children:"Alert Streams"}),o.jsx("p",{className:"text-slate-400 text-[10px] md:text-xs font-medium uppercase tracking-wider mt-1",children:"Configure automated notifications."})]}),o.jsxs("div",{className:"space-y-2 md:space-y-3 mb-4 md:mb-8",children:[o.jsxs("label",{className:"flex items-center justify-between p-3 md:p-4 bg-slate-50 rounded-xl border border-slate-200 cursor-pointer group hover:bg-slate-100 transition-colors",children:[o.jsx("span",{className:"text-[10px] md:text-xs font-black text-slate-800 uppercase tracking-tighter",children:"System Email Alerts"}),o.jsx("input",{type:"checkbox",className:"w-4 h-4 md:w-5 md:h-5 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500",checked:v.emailNotifications,onChange:()=>y(_=>({..._,emailNotifications:!_.emailNotifications}))})]}),o.jsx("div",{className:`grid grid-cols-2 gap-2 transition-opacity duration-300 ${!v.emailNotifications&&"opacity-20 pointer-events-none"}`,children:[{k:"notifyGeneral",l:"General"},{k:"notifyPetroleum",l:"Petro V1"},{k:"notifyPetroleumV2",l:"Petro V2"},{k:"notifyAcid",l:"Acid"}].map(_=>o.jsxs("label",{className:"flex items-center justify-between p-2.5 bg-white border border-slate-100 rounded-xl cursor-pointer hover:border-indigo-200 transition-all shadow-sm",children:[o.jsx("span",{className:"text-[8px] md:text-[9px] font-black text-slate-400 uppercase tracking-tight",children:_.l}),o.jsx("input",{type:"checkbox",className:"w-3.5 h-3.5 rounded border-slate-300 text-indigo-600",checked:v[_.k],onChange:()=>y(A=>({...A,[_.k]:!A[_.k]}))})]},_.k))})]}),S&&o.jsx("div",{className:"p-2 bg-red-50 text-red-600 text-[9px] font-bold rounded-lg mb-4 border border-red-100",children:S}),o.jsx("button",{onClick:T,disabled:l,className:"w-full py-4 bg-indigo-600 hover:bg-indigo-700 text-white font-black rounded-xl uppercase tracking-widest text-[10px] flex items-center justify-center gap-2 shadow-lg shadow-indigo-100 active:scale-95 transition-all",children:l?o.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Complete Enrollment"})]}),s===3&&o.jsxs("div",{className:"text-center animate-fadeIn w-full max-w-sm mx-auto py-4",children:[o.jsx("div",{className:"w-12 h-12 md:w-20 md:h-20 bg-emerald-50 rounded-full flex items-center justify-center mx-auto mb-4 md:mb-8 border border-emerald-100 text-emerald-600 shadow-inner",children:o.jsx("svg",{className:"w-6 h-6 md:w-10 md:h-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"3.5",children:o.jsx("path",{d:"M5 13l4 4L19 7"})})}),o.jsx("h2",{className:"text-lg md:text-2xl font-black text-slate-800 mb-2 uppercase tracking-tight",children:"Access Verified"}),o.jsx("p",{className:"text-slate-400 text-[10px] md:text-xs mb-6 md:mb-10 font-bold uppercase tracking-widest opacity-80 leading-relaxed px-4",children:"Workspace provisioning complete. System is now operational."}),o.jsx("button",{onClick:()=>n({...e,username:p,name:u,preferences:v,needsSetup:!1}),className:"w-full py-4 md:py-5 bg-slate-950 hover:bg-black text-white font-black rounded-2xl uppercase tracking-[0.2em] text-[10px] shadow-xl active:scale-95 transition-all",children:"Enter Fleet Portal"})]})]})]})})},jn=[{targetId:"system-mgmt-section",title:"Central Control",description:"Manage your staff, fleet registry, and global system settings from this primary control hub.",position:"bottom"},{targetId:"inspection-forms-section",title:"Inspection Hub",description:"Choose from various specialized inspection modules. All reports are synced to Google Sheets in real-time.",position:"bottom"},{targetId:"notification-bell",title:"Live Alerts",description:"Real-time notifications for critical vehicle failures and automated safety broadcasts.",position:"bottom"},{targetId:"profile-trigger",title:"User Profile",description:"Update your password, manage email alert preferences, or sign out of your session here.",position:"bottom"}],AS=({onComplete:e})=>{const[t,n]=k.useState(0),[r,s]=k.useState({}),[i,l]=k.useState({});k.useEffect(()=>{const f=()=>{const m=jn[t],h=document.getElementById(m.targetId);if(h){const g=h.getBoundingClientRect();s({position:"fixed",top:g.top-4,left:g.left-4,width:g.width+8,height:g.height+8,borderRadius:"12px",boxShadow:"0 0 0 9999px rgba(15, 23, 42, 0.85)",zIndex:150,pointerEvents:"none",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)"});const w=Math.min(340,window.innerWidth*.85);let N=g.bottom+16,S=g.left+g.width/2-w/2;N+250>window.innerHeight&&(N=g.top-220),S+w>window.innerWidth-20&&(S=window.innerWidth-w-20),S<20&&(S=20),l({position:"fixed",top:Math.max(20,N),left:S,width:w,zIndex:151,transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)"})}else s({display:"none"}),l({position:"fixed",top:"50%",left:"50%",width:Math.min(340,window.innerWidth*.85),transform:"translate(-50%, -50%)",zIndex:151})},p=setTimeout(f,150);return window.addEventListener("resize",f),()=>{window.removeEventListener("resize",f),clearTimeout(p)}},[t]);const d=()=>{t<jn.length-1?n(f=>f+1):e()},u=jn[t];return o.jsxs("div",{className:"fixed inset-0 z-[140] overflow-hidden pointer-events-none",children:[o.jsx("div",{style:r,className:"ring-2 ring-indigo-400 animate-pulse"}),o.jsxs("div",{className:"bg-white rounded-3xl shadow-[0_20px_50px_rgba(0,0,0,0.3)] p-6 sm:p-8 animate-fadeIn border border-slate-100 pointer-events-auto flex flex-col",style:i,children:[o.jsxs("div",{className:"flex justify-between items-center mb-5 shrink-0",children:[o.jsxs("span",{className:"text-[10px] font-black text-white bg-indigo-600 px-3 py-1.5 rounded-full uppercase tracking-widest shadow-sm",children:["Tip ",t+1," / ",jn.length]}),o.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 transition-colors p-1.5 hover:bg-slate-50 rounded-lg",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:o.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsxs("div",{className:"flex-1 overflow-visible",children:[o.jsx("h3",{className:"text-lg sm:text-xl font-black text-slate-800 mb-3 uppercase tracking-tight leading-tight",children:u.title}),o.jsx("p",{className:"text-sm text-slate-500 leading-relaxed font-medium break-words",children:u.description})]}),o.jsxs("div",{className:"flex justify-between items-center pt-6 mt-6 border-t border-slate-50 shrink-0",children:[o.jsx("div",{className:"flex gap-2",children:jn.map((f,p)=>o.jsx("div",{className:`h-1.5 rounded-full transition-all duration-500 ${p===t?"bg-indigo-600 w-6":"bg-slate-100 w-1.5"}`},p))}),o.jsxs("button",{onClick:d,className:"px-6 py-3 bg-slate-900 hover:bg-black text-white text-[10px] font-black rounded-xl shadow-lg transition-all active:scale-95 flex items-center gap-2 uppercase tracking-widest",children:[t===jn.length-1?"Start Working":"Next Tip",o.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"3",children:o.jsx("path",{d:"M9 5l7 7-7 7"})})]})]})]})]})},RS=()=>{const[e,t]=k.useState(null),[n,r]=k.useState(!1),[s,i]=k.useState(!1);k.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone)return;const f=localStorage.getItem("sc_install_dismissed");if(f){const h=new Date(parseInt(f)),w=Math.abs(new Date().getTime()-h.getTime());if(Math.ceil(w/(1e3*60*60*24))<7)return}const p=window.navigator.userAgent.toLowerCase(),m=/iphone|ipad|ipod/.test(p);if(i(m),m)setTimeout(()=>r(!0),3e3);else{const h=g=>{g.preventDefault(),t(g),r(!0)};return window.addEventListener("beforeinstallprompt",h),()=>{window.removeEventListener("beforeinstallprompt",h)}}},[]);const l=async()=>{if(!e)return;e.prompt();const{outcome:u}=await e.userChoice;u==="accepted"&&r(!1),t(null)},d=()=>{r(!1),localStorage.setItem("sc_install_dismissed",Date.now().toString())};return n?o.jsx("div",{className:"fixed bottom-4 left-4 right-4 z-[9999] md:left-auto md:right-4 md:w-96 animate-fadeIn",children:o.jsxs("div",{className:"bg-slate-900/95 backdrop-blur-md text-white p-4 rounded-2xl shadow-2xl border border-slate-700 flex flex-col gap-4",children:[o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:"bg-white/10 p-2.5 rounded-xl shrink-0",children:o.jsx("img",{src:"https://cdn-icons-png.flaticon.com/512/716/716766.png",alt:"Logo",className:"w-8 h-8 object-contain"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"font-bold text-sm",children:"Install SafetyCheck Pro"}),o.jsx("p",{className:"text-xs text-slate-300 mt-1 leading-relaxed",children:"Add to your home screen for offline access, full-screen view, and faster performance."})]}),o.jsx("button",{onClick:d,className:"text-slate-400 hover:text-white p-1",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),s?o.jsxs("div",{className:"bg-white/10 rounded-lg p-3 text-xs text-slate-300 flex items-center gap-3",children:[o.jsx("span",{className:"text-xl",children:""}),o.jsxs("span",{children:["Tap the ",o.jsx("span",{className:"font-bold text-white",children:"Share"})," button below and select ",o.jsx("span",{className:"font-bold text-white",children:'"Add to Home Screen"'})," [+]"]})]}):o.jsxs("button",{onClick:l,className:"w-full py-2.5 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl text-sm transition-colors shadow-lg flex items-center justify-center gap-2",children:[o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Install App"]})]})}):null},MS=({onLogin:e,appScriptUrl:t,setAppScriptUrl:n,settings:r})=>{const[s,i]=k.useState(""),[l,d]=k.useState(""),[u,f]=k.useState(!1),[p,m]=k.useState(!1),[h,g]=k.useState(""),[w,N]=k.useState(!1),[S,x]=k.useState(""),[v,y]=k.useState(""),[C,b]=k.useState(!1),[E,T]=k.useState(!1),[I,_]=k.useState(t);k.useEffect(()=>{const P=localStorage.getItem("sc_remembered_creds");if(P)try{const{u:R,p:F}=JSON.parse(atob(P));i(R),d(F),f(!0)}catch{localStorage.removeItem("sc_remembered_creds")}},[]);const A=async P=>{if(P.preventDefault(),!t||!t.startsWith("https://script.google.com")){g("System connection not configured. Please click the setup icon below."),T(!0);return}g(""),m(!0);try{const q=await(await fetch(t,{method:"POST",body:JSON.stringify(w?{action:"register_user",username:s,password:l,name:S,position:v,role:"SuperAdmin"}:{action:"login",username:s,password:l})})).json();if(q.status==="success"){const J=q.user;if(u&&l){const j=btoa(JSON.stringify({u:s,p:l}));localStorage.setItem("sc_remembered_creds",j)}else localStorage.removeItem("sc_remembered_creds");if(w)g("Admin account created. Log in now."),N(!1),x(""),y(""),d("");else{let j="Inspector";const H=J.role?String(J.role).trim().toLowerCase():"";H==="superadmin"?j="SuperAdmin":H==="admin"?j="Admin":H==="operations"?j="Operations":H==="maintenance"?j="Maintenance":H==="secretary"?j="Secretary":H==="other"&&(j="Other"),e({...J,role:j,position:J.position||"",needsSetup:!J.name})}}else q.code==="NO_USERS"?(g("Initial setup needed. Create Master Admin."),N(!0)):g(q.message||"Authentication failed.")}catch{g("Unable to reach server. Check your Internet and Engine URL.")}finally{m(!1)}},L=()=>{I.startsWith("https://script.google.com")?(n(I),localStorage.setItem("safetyCheck_scriptUrl",I),T(!1),g("")):alert("Please enter a valid Google Apps Script Executable URL.")},M=t&&t.startsWith("https://script.google.com");return o.jsxs("div",{className:"h-screen w-full bg-slate-50 flex flex-col md:flex-row font-sans text-slate-700 overflow-hidden",children:[o.jsxs("div",{className:"w-full md:w-[35%] lg:w-[30%] bg-emerald-950 p-4 sm:p-6 md:p-12 flex flex-col justify-between relative overflow-hidden shrink-0 border-b md:border-b-0 border-emerald-900 shadow-xl z-10",children:[o.jsx("div",{className:"absolute top-0 left-0 w-full h-full pointer-events-none opacity-10",children:o.jsx("div",{className:"absolute -top-10 -left-10 w-64 h-64 bg-emerald-400 rounded-full blur-[80px]"})}),o.jsxs("div",{className:"relative z-10 flex md:block items-center justify-between",children:[o.jsx("div",{className:"bg-white p-1.5 rounded-xl inline-block shadow-lg",children:r.companyLogo&&!C?o.jsx("img",{src:r.companyLogo,alt:"Logo",className:"h-6 sm:h-8 md:h-12 w-auto object-contain",onError:()=>b(!0)}):o.jsxs("div",{className:"flex items-center gap-1.5 px-1",children:[o.jsx("svg",{className:"w-5 h-5 text-emerald-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),o.jsx("span",{className:"font-black text-emerald-950 text-sm md:text-xl tracking-tight uppercase",children:"SafetyPro"})]})}),o.jsxs("div",{className:"md:mt-8 text-right md:text-left",children:[o.jsx("h1",{className:"text-sm sm:text-lg md:text-3xl font-black text-white leading-tight uppercase",children:r.companyName||"SafetyPro Fleet"}),o.jsx("p",{className:"text-emerald-400 font-bold uppercase tracking-widest text-[7px] sm:text-[9px] mt-0.5 opacity-60",children:"fleet inspection portal"})]})]}),o.jsxs("div",{className:"relative z-10 mt-2 sm:mt-4 space-y-2 sm:space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2 animate-fadeIn group",onClick:()=>T(!0),children:[o.jsx("div",{className:`w-[3px] h-4 rounded-full transition-all duration-500 
                    ${p?"bg-blue-400 animate-pulse":M?"bg-emerald-500 shadow-sm":"bg-red-500 shadow-[0_0_10px_rgba(239,68,68,0.5)]"}`}),o.jsx("div",{className:"flex flex-col",children:o.jsx("span",{className:`text-[8px] sm:text-[9px] font-black tracking-widest leading-none uppercase 
                        ${p?"text-blue-200":M?"text-white":"text-red-300"}`,children:p?"Processing":M?"Engine Online":"Server Offline"})})]}),o.jsx("div",{className:"hidden sm:block border-t border-white/5 pt-2 sm:pt-4",children:o.jsx("span",{className:"text-[7px] sm:text-[8px] text-emerald-100/30 font-medium uppercase tracking-[0.2em]",children:" SCBC FLEET SOLUTIONS 2026"})})]})]}),o.jsxs("div",{className:"flex-1 flex flex-col bg-white overflow-hidden relative",children:[o.jsx("div",{className:"flex-1 px-6 flex items-center justify-center",children:o.jsxs("div",{className:"w-full max-w-sm mx-auto",children:[o.jsxs("div",{className:"mb-4 sm:mb-8 text-center md:text-left",children:[o.jsx("h2",{className:"text-xl sm:text-2xl font-black text-slate-800 tracking-tight",children:w?"Admin Setup":"Login"}),o.jsx("p",{className:"text-slate-400 text-xs sm:text-sm mt-0.5 font-medium",children:w?"Create system owner account.":"Sign in to access inspections."})]}),h&&o.jsx("div",{className:`mb-4 p-3 rounded-lg text-[11px] font-medium border animate-fadeIn
                ${h.includes("created")?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-100"}`,children:h}),o.jsxs("form",{onSubmit:A,className:"space-y-4 sm:space-y-5",children:[w&&o.jsxs("div",{className:"space-y-3 bg-slate-50/50 p-4 rounded-xl border border-slate-100 mb-2",children:[o.jsx("input",{type:"text",required:!0,className:"w-full px-4 py-2.5 bg-white border border-slate-200 rounded-lg outline-none text-xs sm:text-sm font-bold",value:S,onChange:P=>x(P.target.value),placeholder:"Full Name"}),o.jsx("input",{type:"text",required:!0,className:"w-full px-4 py-2.5 bg-white border border-slate-200 rounded-lg outline-none text-xs sm:text-sm font-bold",value:v,onChange:P=>y(P.target.value),placeholder:"Job Title"})]}),o.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[o.jsx("input",{type:"email",required:!0,className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-lg focus:bg-white focus:border-emerald-500 outline-none font-bold text-xs sm:text-sm",value:s,onChange:P=>i(P.target.value),placeholder:"Email Address"}),!w&&o.jsxs("div",{className:"space-y-1",children:[o.jsx("input",{type:"password",className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-lg focus:bg-white focus:border-emerald-500 outline-none font-bold text-xs sm:text-sm",value:l,onChange:P=>d(P.target.value),placeholder:"Password"}),o.jsx("p",{className:"text-[9px] sm:text-[10px] text-slate-400 px-1",children:"First-time login? Leave blank if invited."})]}),w&&o.jsx("input",{type:"password",required:!0,className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-lg outline-none font-bold text-xs sm:text-sm",value:l,onChange:P=>d(P.target.value),placeholder:"Setup Password"})]}),o.jsx("div",{className:"flex items-center justify-between px-1",children:o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group select-none",children:[o.jsx("input",{type:"checkbox",className:"w-3.5 h-3.5 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500",checked:u,onChange:P=>f(P.target.checked)}),o.jsx("span",{className:"text-[11px] text-slate-400 font-medium group-hover:text-slate-600",children:"Stay signed in"})]})}),o.jsx("div",{className:"pt-2 sm:pt-4",children:o.jsxs("button",{type:"submit",disabled:p||!M,className:`w-full h-12 sm:h-14 rounded-xl font-bold text-white shadow-lg transition-all text-[11px] uppercase tracking-widest active:scale-[0.98] flex items-center justify-center gap-3
                    ${M?p?"bg-emerald-900 cursor-wait":"bg-slate-900 hover:bg-black":"bg-slate-200 cursor-not-allowed text-slate-400 shadow-none"}`,children:[p?o.jsxs("svg",{className:"animate-spin h-5 w-5 text-emerald-400",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):null,p?"Verifying...":w?"Create Admin":"Sign In"]})})]})]})}),o.jsx("button",{onClick:()=>T(!E),className:"absolute bottom-6 right-6 p-3 text-slate-300 hover:text-indigo-600 transition-colors",title:"Engine Configuration",children:o.jsxs("svg",{className:`w-5 h-5 ${M?"":"text-red-400 animate-pulse"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),o.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}),E&&o.jsx("div",{className:"absolute inset-0 bg-white/95 backdrop-blur-sm z-20 flex flex-col items-center justify-center p-8 animate-fadeIn",children:o.jsxs("div",{className:"w-full max-w-sm space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-black text-slate-800 uppercase tracking-tight",children:"System Infrastructure"}),o.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Configure your private Google Apps Script backend URL to connect the fleet database."})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Script Deployment URL"}),o.jsx("input",{type:"text",className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-xl text-xs font-mono outline-none focus:ring-4 focus:ring-indigo-50",placeholder:"https://script.google.com/macros/s/...",value:I,onChange:P=>_(P.target.value)})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:()=>T(!1),className:"flex-1 py-3 border border-slate-200 rounded-xl text-[10px] font-black uppercase tracking-widest text-slate-400 hover:bg-slate-50 transition-all",children:"Cancel"}),o.jsx("button",{onClick:L,className:"flex-1 py-3 bg-indigo-600 text-white rounded-xl text-[10px] font-black uppercase tracking-widest shadow-lg shadow-indigo-100 hover:bg-indigo-700 active:scale-95 transition-all",children:"Apply Connection"})]})]})}),o.jsx("div",{className:"sm:hidden text-center pb-4",children:o.jsx("span",{className:"text-[7px] text-slate-300 font-medium uppercase tracking-[0.2em]",children:" SCBC FLEET SOLUTIONS 2026"})})]})]})},PS=({settings:e,setSettings:t,handleSaveSettings:n,isSavingSettings:r,user:s})=>{const[i,l]=k.useState(!1);k.useEffect(()=>{l(!1)},[e.companyLogo]);const d=(s==null?void 0:s.role)==="SuperAdmin"||(s==null?void 0:s.role)==="Admin";return o.jsxs("div",{className:"max-w-4xl mx-auto animate-fadeIn space-y-8 pb-12 font-sans",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-black text-slate-800 uppercase tracking-tight",children:"Account Settings"}),o.jsx("p",{className:"text-slate-400 text-[10px] font-bold uppercase tracking-[0.3em] mt-1",children:"Workspace & Brand Identity"})]}),o.jsxs("div",{className:"bg-white p-10 rounded-3xl shadow-sm border border-slate-100 space-y-8",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-800 uppercase tracking-tight",children:"Organization Profile"}),!d&&o.jsx("span",{className:"text-[10px] font-bold text-amber-600 bg-amber-50 px-3 py-1.5 rounded-full border border-amber-100 uppercase tracking-widest",children:"Read Only Access"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase tracking-[0.2em] ml-1",children:"Company Name"}),o.jsx("input",{type:"text",disabled:!d,value:e.companyName,onChange:u=>t(f=>({...f,companyName:u.target.value})),className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl font-bold text-slate-700 focus:ring-2 focus:ring-indigo-500/20 outline-none transition-all disabled:opacity-50"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase tracking-[0.2em] ml-1",children:"Support/Admin Email"}),o.jsx("input",{type:"email",disabled:!d,value:e.managerEmail,onChange:u=>t(f=>({...f,managerEmail:u.target.value})),className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl font-bold text-slate-700 focus:ring-2 focus:ring-indigo-500/20 outline-none transition-all disabled:opacity-50"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase tracking-[0.2em] ml-1",children:"Public Portal URL (Sharing Link)"}),o.jsx("input",{type:"url",disabled:!d,value:e.webAppUrl||"",onChange:u=>t(f=>({...f,webAppUrl:u.target.value})),placeholder:"https://yourcompany.github.io/safetycheck/",className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl font-bold text-slate-700 focus:ring-2 focus:ring-indigo-500/20 outline-none transition-all disabled:opacity-50"}),o.jsx("p",{className:"text-[9px] text-slate-400 ml-1",children:"This link is used when sharing the app via the Support Center."})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase tracking-[0.2em] ml-1",children:"Brand Logo (Base64/URL)"}),o.jsx("textarea",{disabled:!d,value:e.companyLogo,onChange:u=>t(f=>({...f,companyLogo:u.target.value})),className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl font-mono text-[10px] text-slate-500 h-24 outline-none focus:ring-2 focus:ring-indigo-500/20 disabled:opacity-50",placeholder:"Paste logo image string here..."})]}),d&&o.jsx("div",{className:"flex justify-end pt-4 border-t border-slate-50",children:o.jsxs("button",{onClick:n,disabled:r,className:"px-10 py-4 bg-slate-900 hover:bg-black text-white rounded-2xl font-black shadow-xl shadow-slate-200 flex items-center justify-center gap-3 transition-all active:scale-95 disabled:opacity-50 uppercase tracking-[0.2em] text-xs",children:[r&&o.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Synchronize Profile"]})})]})]})},jS=({isLocked:e,children:t,isSuperAdmin:n,onUnlock:r,lockReason:s="license",maintenanceMessage:i})=>o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:`transition-all duration-500 ${e?"opacity-40 pointer-events-none select-none grayscale":""}`,children:t}),e&&o.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white/95 border border-slate-200 rounded-2xl shadow-2xl p-6 max-w-sm w-full text-center transform scale-100 animate-fadeIn",children:[o.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mx-auto mb-4 shadow-inner ${s==="maintenance"?"bg-amber-100":"bg-red-100"}`,children:s==="maintenance"?o.jsx("svg",{className:"w-7 h-7 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}):o.jsx("svg",{className:"w-7 h-7 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),o.jsx("h2",{className:"text-xl font-black text-slate-800 mb-1",children:"Action Restricted"}),o.jsx("div",{className:"text-[11px] text-slate-500 mb-4 leading-relaxed",children:s==="maintenance"?o.jsxs("p",{children:["System is in ",o.jsx("strong",{children:"View-Only"})," mode for scheduled maintenance.",o.jsx("br",{}),o.jsxs("span",{className:"text-slate-400 mt-1 block italic",children:['"',i||"Updating core services...",'"']})]}):o.jsxs("p",{children:["System is in ",o.jsx("strong",{children:"View-Only"})," mode because the license has expired. No new records or updates can be added."]})}),n&&s==="license"?o.jsx("button",{onClick:r,className:"w-full py-3 bg-red-600 hover:bg-red-700 text-white font-bold rounded-xl transition-all shadow-lg shadow-red-200 flex items-center justify-center gap-2 text-xs uppercase tracking-widest",children:"Manage License"}):n&&s==="maintenance"?o.jsx("button",{onClick:r,className:"w-full py-3 bg-slate-900 hover:bg-black text-white font-bold rounded-xl transition-all shadow-lg flex items-center justify-center gap-2 text-xs uppercase tracking-widest",children:"Security Console"}):o.jsx("div",{className:"bg-slate-50 border border-slate-100 rounded-xl p-3",children:o.jsx("p",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest leading-normal",children:s==="maintenance"?"Please check back later once maintenance is complete.":"Please notify your supervisor to restore full administrative access."})})]})})]}),si=({title:e,description:t,icon:n,colorTheme:r,stats:s,startNewInspection:i,fetchHistory:l,isLoadingHistory:d,historyList:u,onViewReport:f,onPrint:p,userRole:m,titlePrefix:h="INSPECTION",isLocked:g=!1,lockReason:w="license",maintenanceMessage:N})=>{const[S,x]=k.useState(""),v=k.useMemo(()=>{let E=u;if(S.trim()){const T=S.toLowerCase();E=E.filter(I=>I.truckNo&&I.truckNo.toLowerCase().includes(T)||I.driverName&&I.driverName.toLowerCase().includes(T)||I.inspectedBy&&I.inspectedBy.toLowerCase().includes(T))}else E=E.slice(0,10);return E},[u,S]),y=m==="SuperAdmin",C=(m==="Admin"||m==="Inspector"||m==="SuperAdmin")&&!g,b={text:"text-slate-600",bg:"bg-slate-50"};return o.jsxs("div",{className:"max-w-5xl mx-auto space-y-6 animate-fadeIn py-1",children:[o.jsx(jS,{isLocked:g,lockReason:w,maintenanceMessage:N,isSuperAdmin:y,children:o.jsxs("div",{className:"bg-white rounded-[2rem] p-8 border border-slate-100 shadow-sm flex flex-col md:flex-row justify-between items-center gap-8",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("span",{className:`p-2.5 rounded-2xl ${b.bg} ${b.text} shadow-inner`,children:n}),o.jsx("h2",{className:"text-2xl font-medium text-slate-800 tracking-tight uppercase",children:e})]}),t&&o.jsx("p",{className:"text-slate-500 text-xs leading-relaxed max-w-md font-normal mb-6",children:t}),o.jsxs("div",{className:"flex flex-wrap gap-4",children:[C&&o.jsxs("button",{onClick:i,className:"relative px-7 py-3 bg-slate-900 hover:bg-slate-800 text-white text-[11px] font-black rounded-2xl transition-all flex items-center gap-3 uppercase tracking-[0.2em] shadow-[0_10px_20px_-5px_rgba(15,23,42,0.3)] hover:shadow-[0_15px_25px_-5px_rgba(15,23,42,0.4)] active:scale-[0.96] group/btn border-t border-white/10",children:[o.jsx("div",{className:"w-5 h-5 bg-white/10 rounded-lg flex items-center justify-center group-hover/btn:scale-110 group-hover/btn:rotate-90 transition-all duration-300",children:o.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"3",children:o.jsx("path",{d:"M12 4v16m8-8H4"})})}),"New Check"]}),o.jsxs("button",{onClick:()=>l(!0),disabled:d,className:"px-6 py-3 bg-white border border-slate-200 text-slate-500 text-[10px] font-bold rounded-2xl hover:bg-slate-50 hover:text-slate-800 transition-all flex items-center gap-2.5 uppercase tracking-widest active:scale-95 shadow-sm disabled:opacity-50 disabled:cursor-wait",children:[o.jsx("svg",{className:`w-4 h-4 ${d?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:o.jsx("path",{d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh History"]})]})]}),o.jsxs("div",{className:"flex gap-5",children:[o.jsxs("div",{className:"bg-slate-50 rounded-[1.5rem] p-5 text-center min-w-[100px] border border-slate-100 shadow-inner",children:[o.jsx("div",{className:"text-3xl font-medium text-slate-800 leading-none",children:s.total}),o.jsx("div",{className:"text-[9px] text-slate-400 uppercase font-medium tracking-[0.2em] mt-3",children:"Verified"})]}),o.jsxs("div",{className:"bg-emerald-50 rounded-[1.5rem] p-5 text-center min-w-[100px] border border-emerald-100 shadow-inner",children:[o.jsxs("div",{className:"text-3xl font-medium text-emerald-600 leading-none",children:[s.passRate,"%"]}),o.jsx("div",{className:"text-[9px] text-slate-400 uppercase font-medium tracking-[0.2em] mt-3",children:"Pass Rate"})]})]})]})}),o.jsxs("div",{className:"bg-white rounded-[2rem] border border-slate-100 overflow-hidden shadow-sm",children:[o.jsxs("div",{className:"px-8 py-5 border-b border-slate-50 flex justify-between items-center bg-slate-50/30",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("h3",{className:"text-[10px] font-medium text-slate-400 uppercase tracking-[0.3em]",children:"Audit History"}),g&&o.jsx("span",{className:"text-[9px] font-black text-red-600 bg-red-50 px-2 py-0.5 rounded border border-red-100 uppercase tracking-tighter",children:w==="maintenance"?"Maintenance Access":"Read Only Access"})]}),o.jsxs("div",{className:"relative",children:[o.jsx("svg",{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-slate-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),o.jsx("input",{type:"text",placeholder:"Search assets...",value:S,onChange:E=>x(E.target.value),className:"w-44 pl-10 pr-4 py-2 bg-white border border-slate-200 rounded-xl text-[11px] outline-none font-normal focus:ring-2 focus:ring-indigo-500/10 focus:border-indigo-500 transition-all placeholder:text-slate-300"})]})]}),d?o.jsxs("div",{className:"py-24 text-center",children:[o.jsx("div",{className:"w-10 h-10 border-4 border-slate-100 border-t-slate-900 rounded-full animate-spin mx-auto mb-5"}),o.jsx("p",{className:"text-[10px] font-medium text-slate-400 uppercase tracking-[0.3em]",children:"Syncing Records"})]}):v.length===0?o.jsx("div",{className:"py-24 text-center text-[11px] font-medium text-slate-300 uppercase tracking-[0.3em]",children:"Vault is empty"}):o.jsxs("div",{className:"w-full",children:[o.jsxs("div",{className:"hidden md:grid grid-cols-12 px-8 py-5 border-b border-slate-50 bg-slate-50/10 text-[10px] font-medium text-slate-400 uppercase tracking-[0.25em]",children:[o.jsx("div",{className:"col-span-1",children:"Rate"}),o.jsx("div",{className:"col-span-3",children:"Vehicle Asset"}),o.jsx("div",{className:"col-span-3",children:"Audit Date"}),o.jsx("div",{className:"col-span-3",children:"Personnel"}),o.jsx("div",{className:"col-span-2 text-right",children:"Document"})]}),o.jsx("div",{className:"divide-y divide-slate-50",children:v.map((E,T)=>o.jsxs("div",{className:"md:grid md:grid-cols-12 flex flex-col md:items-center px-8 py-6 hover:bg-slate-50/30 transition-colors gap-4 md:gap-0 relative group",children:[o.jsx("div",{className:"col-span-1",children:o.jsx("span",{className:`inline-flex items-center justify-center w-8 h-8 rounded-xl text-[12px] font-medium text-white shadow-sm
                                          ${Number(E.rate)>=4?"bg-emerald-500":Number(E.rate)===3?"bg-amber-500":"bg-rose-500"}
                                      `,children:E.rate})}),o.jsxs("div",{className:"col-span-3 min-w-0",children:[o.jsx("div",{className:"md:hidden text-[9px] font-medium text-slate-300 uppercase tracking-widest mb-1",children:"Vehicle Asset"}),o.jsx("div",{className:"font-medium text-slate-800 text-base leading-tight truncate uppercase tracking-tight",children:E.truckNo}),E.trailerNo&&o.jsx("div",{className:"text-[10px] text-slate-400 font-normal uppercase tracking-wide mt-0.5",children:E.trailerNo})]}),o.jsxs("div",{className:"col-span-3",children:[o.jsx("div",{className:"md:hidden text-[9px] font-medium text-slate-300 uppercase tracking-widest mb-1",children:"Audit Date"}),o.jsx("div",{className:"text-xs font-normal text-slate-700",children:new Date(E.timestamp).toLocaleDateString()}),o.jsx("div",{className:"text-[9px] text-slate-400 font-normal uppercase mt-0.5",children:new Date(E.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),o.jsxs("div",{className:"col-span-3",children:[o.jsx("div",{className:"md:hidden text-[9px] font-medium text-slate-300 uppercase tracking-widest mb-1",children:"Personnel"}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"hidden md:flex w-8 h-8 rounded-xl bg-slate-100 items-center justify-center text-[10px] font-medium text-slate-400 border border-slate-200 uppercase shadow-sm",children:String(E.inspectedBy||"?").charAt(0)}),o.jsx("span",{className:"text-slate-600 font-normal text-xs truncate",children:E.inspectedBy})]})]}),o.jsx("div",{className:"col-span-2 text-right border-t md:border-none pt-4 md:pt-0",children:o.jsxs("button",{onClick:()=>f(E),className:"w-full md:w-auto inline-flex items-center justify-center gap-2 px-5 py-2.5 text-[10px] font-bold text-indigo-600 bg-indigo-50 hover:bg-indigo-600 hover:text-white rounded-xl transition-all uppercase tracking-widest border border-indigo-100 shadow-sm active:scale-95 group/btn",children:[o.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:[o.jsx("path",{d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),o.jsx("path",{d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View Report"]})})]},T))})]})]})]})},LS=e=>o.jsx(si,{...e,title:"General Inspection",description:"",icon:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),colorTheme:"slate",titlePrefix:"VEHICLE INSPECTION"}),DS=e=>o.jsx(si,{...e,title:"Petroleum V1 Inspection",description:"",icon:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),colorTheme:"orange",titlePrefix:"PETROLEUM INSPECTION"}),FS=e=>o.jsx(si,{...e,title:"Petroleum V2 Inspection",description:"",icon:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),colorTheme:"rose",titlePrefix:"PETROLEUM V2 INSPECTION"}),US=e=>o.jsx(si,{...e,title:"Acid Inspection",description:"",icon:o.jsxs("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("path",{d:"M12 2l-5.5 9h11z"}),o.jsx("path",{d:"M10 13v6h4v-6z"})]}),colorTheme:"purple",titlePrefix:"ACID TANKER INSPECTION"}),gn=({label:e,value:t,onChange:n,options:r=[],placeholder:s,isRegNo:i,isTitleCase:l,readOnly:d,error:u})=>{const[f,p]=k.useState(!1),[m,h]=k.useState(-1),g=k.useRef(null),w=k.useRef(null),N=r.filter(y=>y!=null&&String(y).toLowerCase().includes((t||"").toLowerCase()));k.useEffect(()=>{function y(C){g.current&&!g.current.contains(C.target)&&p(!1)}return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[g]);const S=y=>{if(d)return;let C=y.target.value;if(i){C=C.toUpperCase();let b=C.replace(/[^A-Z0-9]/g,"");b=b.replace(/([A-Z])(\d)/g,"$1 $2"),b=b.replace(/(\d)([A-Z])/g,"$1 $2"),C=b}l&&!i&&(C=C.replace(/\b\w/g,b=>b.toUpperCase())),n(C),p(!0),h(-1)},x=y=>{d||(n(String(y)),p(!1),h(-1))},v=y=>{d||(y.key==="ArrowDown"?(y.preventDefault(),h(C=>Math.min(C+1,N.length-1))):y.key==="ArrowUp"?(y.preventDefault(),h(C=>Math.max(C-1,0))):y.key==="Enter"?(y.preventDefault(),m>=0&&N[m]?x(N[m]):x(t)):y.key==="Escape"&&p(!1))};return o.jsxs("div",{className:"relative",ref:g,children:[o.jsxs("label",{className:`block text-xs font-bold uppercase mb-1.5 tracking-wide flex justify-between ${u?"text-red-600":"text-gray-500"}`,children:[e,d&&o.jsxs("span",{className:"text-[10px] bg-gray-100 text-gray-500 px-1.5 py-0.5 rounded flex items-center gap-1",children:[o.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"Verified"]})]}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{ref:w,type:"text",value:t,onChange:S,onFocus:()=>!d&&p(!0),onKeyDown:v,placeholder:s,readOnly:d,className:`w-full p-3.5 border rounded-lg transition-all font-medium 
             ${d?"bg-gray-100 border-gray-200 text-gray-500 cursor-not-allowed focus:outline-none":u?"bg-red-50 border-red-300 focus:ring-2 focus:ring-red-200 text-red-900 placeholder-red-300":"bg-gray-50 border-gray-200 focus:ring-2 focus:ring-blue-500 focus:bg-white text-gray-800 placeholder-gray-400"}
          `}),o.jsx("div",{className:`absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none ${u?"text-red-400":"text-gray-400"}`,children:d?o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}):u?o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}):o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),u&&o.jsx("p",{className:"text-[10px] text-red-500 font-bold mt-1 ml-1 animate-fadeIn",children:"This field is required"}),!d&&f&&(t.length>0||N.length>0)&&o.jsx("ul",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-xl max-h-60 overflow-y-auto",children:N.length>0?N.map((y,C)=>o.jsxs("li",{onClick:()=>x(y),className:`px-4 py-2.5 text-sm cursor-pointer transition-colors border-b border-gray-50 last:border-none flex justify-between items-center
                  ${C===m?"bg-blue-50 text-blue-700 font-medium":"text-gray-700 hover:bg-gray-50"}
                `,children:[y,i&&o.jsx("span",{className:"text-[10px] bg-gray-100 text-gray-500 px-1.5 py-0.5 rounded border border-gray-200",children:"EXISTING"})]},C)):o.jsxs("li",{onMouseDown:y=>{y.preventDefault(),x(t)},className:"px-4 py-3 text-sm text-blue-600 bg-blue-50 cursor-pointer font-medium flex items-center gap-2 hover:bg-blue-100 transition-colors",children:[o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),'Add New Entry: "',t,'"']})})]})},VS=({currentUser:e,appScriptUrl:t,showToast:n,validationLists:r,settings:s})=>{const[i,l]=k.useState([]),[d,u]=k.useState(!1),[f,p]=k.useState("list"),[m,h]=k.useState(!1),[g,w]=k.useState(""),[N,S]=k.useState({name:"",username:"",password:"",role:"Inspector",position:""}),[x,v]=k.useState(!1),y=e.role==="SuperAdmin",C=e.role==="Admin"||y;if(k.useEffect(()=>{C&&b()},[C]),!C)return o.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center font-sans",children:[o.jsx("div",{className:"w-16 h-16 bg-red-50 text-red-500 rounded-full flex items-center justify-center mb-4",children:o.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),o.jsx("h3",{className:"text-xl font-medium text-slate-800 tracking-tight",children:"Access Restricted"}),o.jsx("p",{className:"text-slate-500 max-w-xs mt-2 text-sm font-normal",children:"You do not have the required permissions to access Staff Management."})]});const b=async(M=!1)=>{if(t){u(!0);try{const R=await(await fetch(t,{method:"POST",body:JSON.stringify({action:"get_users"})})).json();R.status==="success"&&Array.isArray(R.users)&&l(R.users)}catch{n("Failed to load users","error")}finally{u(!1)}}},E=async M=>{if(window.confirm(`Remove user "${M}"?`)){u(!0);try{const R=await(await fetch(t,{method:"POST",body:JSON.stringify({action:"delete_user",username:M})})).json();R.status==="success"?(n("User removed successfully","success"),b()):n(R.message||"Delete failed","error")}catch{n("Connection failed","error")}finally{u(!1)}}},T=async M=>{if(M.username===e.username){n("You cannot restrict your own access.","warning");return}if(M.role==="SuperAdmin"){n("SuperAdmin access cannot be restricted.","error");return}const P=!M.isActive;l(R=>R.map(F=>F.username===M.username?{...F,isActive:P}:F));try{(await(await fetch(t,{method:"POST",body:JSON.stringify({action:"update_user",username:M.username,isActive:P})})).json()).status!=="success"?(l(q=>q.map(J=>J.username===M.username?{...J,isActive:!P}:J)),n("Failed to sync access state.","error")):n(`Access ${P?"restored":"restricted"} for ${M.name||M.username}`,"info")}catch{l(F=>F.map(q=>q.username===M.username?{...q,isActive:!P}:q)),n("Connection failed.","error")}},I=M=>{S({name:M.name||"",username:M.username,role:M.role,position:M.position||"",password:""}),w(M.username),h(!0),p("form")},_=async M=>{const R=`*${((s==null?void 0:s.companyName)||"Fleet Operations").toUpperCase()} - STAFF IDENTITY*

*Name:* ${M.name||"Setup Pending"}
*Role:* ${M.role}
*Job Title:* ${M.position||"N/A"}
*Login Email:* ${M.username}

_Security Notice: This confirms identity mapping in the Fleet Portal._`;if(navigator.share)try{await navigator.share({title:"Staff Identity Detail",text:R})}catch(F){F instanceof Error&&F.name!=="AbortError"&&A(R)}else A(R)},A=M=>{navigator.clipboard.writeText(M).then(()=>{n("Professional details copied to clipboard","success")}).catch(()=>{n("Failed to share details","error")})},L=async M=>{if(M.preventDefault(),!N.username){n("Login Email is required.","error");return}v(!0);try{const P={action:m?"update_user":"register_user",...N,preferences:{...m?{}:{mustChangePassword:!0}}};m&&(P.originalUsername=g);const F=await(await fetch(t,{method:"POST",body:JSON.stringify(P)})).json();F.status==="success"?(n(m?"Staff details updated":"Invite sent to new staff member","success"),p("list"),b()):n(F.message||"Operation failed","error")}catch{n("Connection failed","error")}finally{v(!1)}};return f==="form"?o.jsxs("div",{className:"max-w-lg mx-auto animate-fadeIn py-4 px-4 font-sans",children:[o.jsxs("button",{onClick:()=>p("list"),className:"mb-6 text-[10px] font-medium text-slate-400 hover:text-slate-800 flex items-center gap-2 transition-colors group uppercase tracking-widest",children:[o.jsx("svg",{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),"Back to Directory"]}),o.jsxs("div",{className:"bg-white rounded-3xl shadow-xl border border-slate-100 overflow-hidden p-6 sm:p-10",children:[o.jsx("h2",{className:"text-2xl font-normal text-slate-800 mb-2 uppercase tracking-tight leading-none",children:m?"Edit Profile":"Invite Staff"}),o.jsx("p",{className:"text-slate-400 text-[10px] font-normal mb-10 uppercase tracking-[0.2em]",children:"Configure workspace permissions"}),o.jsxs("form",{onSubmit:L,className:"space-y-6",children:[o.jsxs("div",{className:"space-y-5",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-normal uppercase text-slate-400 mb-2 tracking-[0.15em]",children:"Login Identity (Email) *"}),o.jsx("input",{type:"email",required:!0,className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl focus:ring-2 focus:ring-indigo-500 outline-none transition font-normal text-slate-700",value:N.username,onChange:M=>S({...N,username:M.target.value}),placeholder:"e.g. staff@company.com"})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-normal uppercase text-slate-400 mb-2 tracking-[0.15em]",children:"System Role"}),o.jsxs("select",{className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl text-sm font-normal text-slate-700 focus:ring-2 focus:ring-indigo-500 outline-none h-[58px] appearance-none",value:N.role,onChange:M=>S({...N,role:M.target.value}),children:[o.jsx("option",{value:"Inspector",children:"Inspector"}),o.jsx("option",{value:"Operations",children:"Operations"}),o.jsx("option",{value:"Maintenance",children:"Maintenance"}),o.jsx("option",{value:"Admin",children:"Admin"}),y&&o.jsx("option",{value:"SuperAdmin",children:"SuperAdmin"})]})]}),o.jsx(gn,{label:"Job Title",value:N.position,onChange:M=>S({...N,position:M}),options:r.positions,isTitleCase:!0,placeholder:"Optional"})]})]}),!m&&o.jsxs("div",{className:"p-4 bg-indigo-50 border border-indigo-100 rounded-2xl flex items-start gap-3",children:[o.jsx("svg",{className:"w-5 h-5 text-indigo-500 shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),o.jsxs("p",{className:"text-[10px] text-indigo-800 font-normal leading-relaxed uppercase tracking-wider",children:[o.jsx("strong",{children:"Security Notice:"})," New users will be prompted to establish their credentials upon first access via the invite email."]})]}),m&&o.jsx("div",{className:"pt-4 border-t border-slate-100",children:o.jsx(gn,{label:"Full Name",value:N.name,onChange:M=>S({...N,name:M}),options:r.inspectors,isTitleCase:!0})}),o.jsxs("button",{type:"submit",disabled:x,className:"w-full py-5 bg-slate-900 hover:bg-black text-white font-normal rounded-2xl shadow-xl transition-all active:scale-95 flex items-center justify-center gap-3 mt-4 uppercase tracking-[0.2em] text-xs",children:[x?o.jsxs("svg",{className:"animate-spin h-5 w-5 text-indigo-400",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):null,x?"Processing":m?"Update Profile":"Dispatch Invite"]})]})]})]}):o.jsxs("div",{className:"max-w-6xl mx-auto space-y-10 animate-fadeIn px-4 md:px-0 font-sans",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-normal text-slate-800 uppercase tracking-tight leading-none flex items-center gap-3",children:"Staff Directory"}),o.jsx("p",{className:"text-[10px] text-slate-400 font-normal uppercase tracking-[0.25em] mt-2",children:"Access Control & Identity Center"})]}),o.jsxs("button",{onClick:()=>{S({name:"",username:"",password:"",role:"Inspector",position:""}),h(!1),p("form")},className:"w-full sm:w-auto px-8 py-4 bg-slate-900 hover:bg-black text-white font-normal rounded-2xl shadow-xl transition-all flex items-center justify-center gap-2 group text-xs uppercase tracking-[0.2em]",children:[o.jsx("svg",{className:"w-5 h-5 group-hover:rotate-90 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),"New Member"]})]}),o.jsx("div",{className:"bg-white rounded-[2rem] shadow-sm border border-slate-100 overflow-hidden",children:o.jsxs("table",{className:"w-full text-left text-sm border-collapse block md:table",children:[o.jsx("thead",{className:"bg-slate-50 text-[10px] font-normal text-slate-400 uppercase tracking-[0.25em] border-b border-slate-100 hidden md:table-header-group",children:o.jsxs("tr",{className:"md:table-row",children:[o.jsx("th",{className:"px-10 py-6 md:table-cell",children:"Identity"}),o.jsx("th",{className:"px-10 py-6 md:table-cell",children:"Role"}),o.jsx("th",{className:"px-10 py-6 md:table-cell",children:"Access Control"}),o.jsx("th",{className:"px-10 py-6 text-right md:table-cell",children:"Actions"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-50 block md:table-row-group",children:i.map((M,P)=>{const R=M.role==="SuperAdmin",F=R&&!y;return o.jsxs("tr",{className:`hover:bg-slate-50/50 transition-colors group block md:table-row relative p-8 md:p-0 ${!M.isActive&&"opacity-60"}`,children:[o.jsx("td",{className:"md:px-10 md:py-6 block md:table-cell mb-6 md:mb-0",children:o.jsxs("div",{className:"flex items-center gap-5",children:[o.jsx("div",{className:"w-12 h-12 rounded-2xl bg-white border border-slate-100 shadow-sm flex items-center justify-center font-normal text-slate-300 text-sm tracking-tighter",children:M.name?M.name.substring(0,2).toUpperCase():"??"}),o.jsxs("div",{className:"min-w-0",children:[o.jsxs("div",{className:"font-normal text-slate-800 text-base leading-tight truncate flex items-center gap-2",children:[M.name||"Setup Pending",!M.isActive&&o.jsx("span",{className:"text-[7px] bg-red-100 text-red-600 px-1.5 py-0.5 rounded uppercase font-black",children:"Restricted"})]}),o.jsx("div",{className:"text-[11px] text-slate-400 font-normal tracking-tight truncate",children:F?" (Protected Identity)":M.username})]})]})}),o.jsxs("td",{className:"md:px-10 md:py-6 block md:table-cell mb-6 md:mb-0",children:[o.jsx("div",{className:"md:hidden text-[9px] font-normal text-slate-300 uppercase tracking-widest mb-2",children:"Access Role"}),o.jsx("span",{className:`px-4 py-2 rounded-xl text-[10px] font-normal uppercase tracking-widest
                                            ${M.role==="Admin"||R?"bg-indigo-50 text-indigo-600 border border-indigo-100 shadow-sm":"bg-slate-50 text-slate-500 border border-slate-100"}
                                        `,children:M.role})]}),o.jsxs("td",{className:"md:px-10 md:py-6 block md:table-cell mb-6 md:mb-0",children:[o.jsx("div",{className:"md:hidden text-[9px] font-normal text-slate-300 uppercase tracking-widest mb-2",children:"Login Access"}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:()=>!F&&T(M),disabled:F,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-all duration-300 ${F?"opacity-20 cursor-not-allowed":""} ${M.isActive?"bg-emerald-500 shadow-[0_0_10px_rgba(16,185,129,0.3)]":"bg-slate-200"}`,title:F?"Restricted":M.isActive?"Disable Access":"Enable Access",children:o.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform duration-300 ${M.isActive?"translate-x-6":"translate-x-1"}`})}),o.jsx("span",{className:`text-[10px] font-normal uppercase tracking-widest ${M.isActive?"text-emerald-600":"text-slate-400"}`,children:M.isActive?"Active":"Locked"})]})]}),o.jsx("td",{className:"md:px-10 md:py-6 md:text-right block md:table-cell",children:o.jsx("div",{className:"flex justify-start md:justify-end gap-3 md:opacity-0 group-hover:opacity-100 transition-all border-t md:border-0 pt-6 md:pt-0 mt-6 md:mt-0",children:F?o.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-widest p-3",children:"Immutable"}):o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>_(M),className:"p-3 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-2xl transition-all border md:border-0 bg-white md:bg-transparent shadow-sm md:shadow-none",title:"Share Identity",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})})}),o.jsx("button",{onClick:()=>I(M),className:"p-3 text-blue-500 hover:bg-blue-50 rounded-2xl transition-all border md:border-0 bg-white md:bg-transparent shadow-sm md:shadow-none",title:"Edit Profile",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),o.jsx("button",{onClick:()=>E(M.username),className:"p-3 text-red-400 hover:bg-red-50 rounded-2xl transition-all border md:border-0 bg-white md:bg-transparent shadow-sm md:shadow-none",title:"Remove User",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})})]},P)})})]})})]})},Ye=({children:e})=>o.jsx("div",{className:"w-16 h-16 sm:w-24 sm:h-24 flex items-center justify-center text-slate-900 transition-all duration-300 group-hover:scale-110",children:eo.isValidElement(e)?eo.cloneElement(e,{className:"w-full h-full",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"}):e}),Ls=()=>o.jsx(Ye,{children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[o.jsx("path",{d:"M12 2a1.5 1.5 0 100 3 1.5 1.5 0 000-3z",fill:"currentColor",stroke:"none"}),o.jsx("path",{d:"M9 3.5h6",strokeWidth:"1.5"}),o.jsx("rect",{x:"6",y:"5",width:"12",height:"15",rx:"1",ry:"1"}),o.jsx("rect",{x:"8",y:"8",width:"2.5",height:"2.5",rx:"0.5"}),o.jsx("path",{d:"M11.5 9h4"}),o.jsx("rect",{x:"8",y:"12",width:"2.5",height:"2.5",rx:"0.5"}),o.jsx("path",{d:"M11.5 13h4"}),o.jsx("rect",{x:"8",y:"16",width:"2.5",height:"2.5",rx:"0.5"}),o.jsx("path",{d:"M11.5 17h2"}),o.jsx("circle",{cx:"17.5",cy:"17.5",r:"5",fill:"white",stroke:"currentColor",strokeWidth:"1.2"}),o.jsx("path",{d:"M15.5 17.5l1.5 1.5 3-3",strokeWidth:"1.4"})]})}),HS=()=>o.jsx(Ye,{children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[o.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",strokeWidth:"1.2"}),o.jsx("circle",{cx:"12",cy:"11",r:"2.5",fill:"currentColor",stroke:"none"}),o.jsx("rect",{x:"11",y:"12",width:"2",height:"4",rx:"0.5",fill:"currentColor",stroke:"none"}),o.jsx("path",{d:"M12 11v5",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round"}),o.jsx("path",{d:"M9 11a3 3 0 116 0",strokeWidth:"1",opacity:"0.3"})]})}),BS=()=>o.jsx(Ye,{children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.2",children:[o.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),o.jsx("circle",{cx:"9",cy:"7",r:"4"}),o.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),o.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"}),o.jsx("rect",{x:"15",y:"14",width:"7",height:"4",rx:"1",strokeWidth:"1",opacity:"0.4"})]})}),GS=()=>o.jsx(Ye,{children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.8",children:[o.jsx("circle",{cx:"12",cy:"12",r:"3.5"}),o.jsx("path",{d:"M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"})]})}),OS=()=>o.jsx(Ye,{children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.2",children:[o.jsx("rect",{x:"3",y:"4",width:"18",height:"16",rx:"2"}),o.jsx("path",{d:"M7 8h10M7 12h10M7 16h6",opacity:"0.3"}),o.jsx("circle",{cx:"17",cy:"16",r:"3",strokeWidth:"1.5"}),o.jsx("path",{d:"M17 14.5v3"})]})}),zS=()=>o.jsx(Ye,{children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.2",children:[o.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",strokeOpacity:"0.2"}),o.jsx("path",{d:"M7 16V12M12 16V8M17 16V14",strokeWidth:"2"}),o.jsx("circle",{cx:"17",cy:"7",r:"3"}),o.jsx("path",{d:"M17 5v2h2",opacity:"0.5"})]})}),qS=()=>o.jsx(Ye,{children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.2",children:[o.jsx("path",{d:"M8 2v3M16 2v3",strokeWidth:"1.5"}),o.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),o.jsx("path",{d:"M7 10h10M7 14h10M7 18h5",opacity:"0.4"}),o.jsx("circle",{cx:"18",cy:"18",r:"4",fill:"white",stroke:"currentColor"}),o.jsx("path",{d:"M18 16v2h2",strokeWidth:"1.5"})]})}),$S=()=>o.jsx(Ye,{children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.2",children:[o.jsx("path",{d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),o.jsx("circle",{cx:"12",cy:"12",r:"3",strokeOpacity:"0.3"}),o.jsx("path",{d:"M12 3v18M3 12h18",strokeOpacity:"0.1"}),o.jsx("path",{d:"M9 12l2 2 4-4",strokeWidth:"1.5"})]})}),WS=()=>o.jsx(Ye,{children:o.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.2",children:o.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})})}),JS=()=>o.jsx(Ye,{children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.2",children:[o.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),o.jsx("circle",{cx:"9",cy:"7",r:"4"}),o.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),o.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"}),o.jsx("rect",{x:"15",y:"14",width:"7",height:"4",rx:"1",strokeWidth:"1",opacity:"0.4"})]})}),KS=()=>o.jsx(Ye,{children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.2",children:[o.jsx("rect",{x:"2",y:"5",width:"20",height:"14",rx:"2"}),o.jsx("line",{x1:"2",y1:"10",x2:"22",y2:"10"}),o.jsx("path",{d:"M7 15h.01M11 15h2"}),o.jsx("circle",{cx:"18",cy:"15",r:"2",opacity:"0.3"})]})}),YS=()=>o.jsx(Ye,{children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("circle",{cx:"12",cy:"12",r:"3"}),o.jsx("path",{d:"M12 2v4M12 18v4M2 12h4M18 12h4"}),o.jsx("path",{d:"M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83"})]})}),QS=()=>o.jsx(Ye,{children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.2",children:[o.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),o.jsx("polyline",{points:"9 22 9 12 15 12 15 22"}),o.jsx("circle",{cx:"18",cy:"5",r:"3",opacity:"0.4"})]})}),XS=()=>o.jsx(Ye,{children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.2",children:[o.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"}),o.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),o.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})}),Ie=({id:e,label:t,icon:n,isForcedLock:r=!1,badgeCount:s=0,badgeColor:i="bg-slate-900",isInspectionModule:l=!1,isLocked:d,isAd:u=!1,onNavigate:f})=>{const p=r||l&&d,m=()=>{if(u){f(`support:info:${t}`);return}p||f(e)};return o.jsxs("button",{onClick:m,className:`flex flex-col items-center justify-center p-4 transition-all w-full group relative 
                ${u?"md:opacity-40 opacity-70 hover:opacity-100 cursor-pointer active:scale-95":p?"opacity-25 cursor-not-allowed":"hover:opacity-60 active:scale-95"}`,children:[o.jsxs("div",{className:"relative mb-5",children:[n,p&&!u&&o.jsx("div",{className:"absolute -top-1 -right-1 bg-slate-900 text-white rounded-full p-1 shadow-sm border border-white",children:o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2",children:o.jsx("path",{d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),u&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"absolute -top-2 -right-2 bg-slate-100 text-slate-500 text-[6px] font-black px-1.5 py-0.5 rounded-full border border-slate-200 shadow-sm uppercase tracking-widest whitespace-nowrap z-10",children:"Module Pending"}),o.jsx("div",{className:"absolute -bottom-8 left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity bg-indigo-600 text-white text-[7px] font-black px-2 py-1 rounded shadow-xl whitespace-nowrap z-20 pointer-events-none uppercase tracking-widest hidden md:block",children:"Request Setup"})]}),s>0&&!p&&o.jsx("div",{className:`absolute -top-1.5 -right-1.5 ${i} text-white text-[9px] font-black w-5 h-5 rounded-full flex items-center justify-center border-2 border-white shadow-sm z-20 animate-fadeIn`,children:s})]}),o.jsx("span",{className:`text-[10px] sm:text-[11px] font-bold text-center tracking-wider leading-tight transition-colors w-full uppercase ${p&&!u?"text-slate-300":"text-slate-900 group-hover:text-blue-600"}`,children:t}),u&&o.jsx("span",{className:"text-[7px] font-bold text-slate-300 uppercase tracking-widest mt-1 group-hover:text-indigo-400 transition-colors",children:"Integration Only"})]})},Ds=({label:e})=>o.jsxs("div",{className:"w-full flex items-center gap-4 mb-10 px-8",children:[o.jsx("span",{className:"text-[11px] font-bold text-slate-400 tracking-[0.3em] whitespace-nowrap uppercase",children:e}),o.jsx("div",{className:"h-px flex-1 bg-slate-100"})]}),ZS=({onNavigate:e,userRole:t,isLocked:n=!1,pendingAlertsCount:r=0})=>{const s=t==="Admin"||t==="SuperAdmin",i=t==="SuperAdmin";return o.jsx("div",{className:"max-w-5xl mx-auto py-8 sm:py-12 flex flex-col items-center justify-center min-h-[calc(100vh-140px)] overflow-hidden",children:o.jsxs("div",{className:"w-full space-y-24 sm:space-y-32",children:[o.jsxs("section",{id:"system-mgmt-section",className:"w-full animate-fadeIn",children:[o.jsx(Ds,{label:"System Management"}),o.jsxs("div",{className:"grid grid-cols-4 gap-x-4 gap-y-16",children:[o.jsx(Ie,{id:"maintenance",label:"Security",isLocked:n,isForcedLock:!i,onNavigate:e,icon:o.jsx(HS,{})}),o.jsx(Ie,{id:"users",label:"Staff",isLocked:n,isForcedLock:!s,onNavigate:e,icon:o.jsx(BS,{})}),o.jsx(Ie,{id:"registry",label:"Fleet Registry",isLocked:n,isForcedLock:!s,onNavigate:e,icon:o.jsx(OS,{})}),o.jsx(Ie,{id:"settings",label:"Settings",isLocked:n,isForcedLock:!s,onNavigate:e,icon:o.jsx(GS,{})})]})]}),o.jsxs("section",{id:"inspection-forms-section",className:"w-full animate-fadeIn",children:[o.jsx(Ds,{label:"Inspection Hub"}),o.jsxs("div",{className:"grid grid-cols-4 gap-x-4 gap-y-16",children:[o.jsx(Ie,{id:"general",label:"General Inspection",isInspectionModule:!0,isLocked:n,onNavigate:e,icon:o.jsx(Ls,{})}),o.jsx(Ie,{id:"petroleum",label:"Petroleum V1 Inspection",isInspectionModule:!0,isLocked:n,onNavigate:e,icon:o.jsx(Ls,{})}),o.jsx(Ie,{id:"petroleum_v2",label:"Petroleum V2 Inspection",isInspectionModule:!0,isLocked:n,onNavigate:e,icon:o.jsx(Ls,{})}),o.jsx(Ie,{id:"acid",label:"Acid Tanker Inspection",isInspectionModule:!0,isLocked:n,onNavigate:e,icon:o.jsx(Ls,{})})]})]}),o.jsxs("section",{className:"w-full animate-fadeIn",children:[o.jsx(Ds,{label:"Operations & Logistics"}),o.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-x-4 gap-y-16",children:[o.jsx(Ie,{id:"analytics",label:"Fleet Analysis",isLocked:n,onNavigate:e,icon:o.jsx(zS,{}),badgeCount:r,badgeColor:"bg-rose-500"}),o.jsx(Ie,{id:"track_requests",label:"Request Inspection",isLocked:n,onNavigate:e,icon:o.jsx(qS,{})}),o.jsx(Ie,{id:"support",label:"Support Center",isLocked:n,onNavigate:e,icon:o.jsx($S,{})})]})]}),o.jsxs("section",{className:"w-full animate-fadeIn",children:[o.jsx(Ds,{label:"Integrated Corporate Solutions"}),o.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-x-4 gap-y-16",children:[o.jsx(Ie,{id:"ad_maintenance",label:"Fleet Maintenance",isAd:!0,isLocked:!0,isForcedLock:!1,onNavigate:e,icon:o.jsx(WS,{})}),o.jsx(Ie,{id:"ad_hr",label:"HR & Payroll",isAd:!0,isLocked:!0,isForcedLock:!1,onNavigate:e,icon:o.jsx(JS,{})}),o.jsx(Ie,{id:"ad_finance",label:"Finance Tickets",isAd:!0,isLocked:!0,isForcedLock:!1,onNavigate:e,icon:o.jsx(KS,{})}),o.jsx(Ie,{id:"ad_driver",label:"Driver Management",isAd:!0,isLocked:!0,isForcedLock:!1,onNavigate:e,icon:o.jsx(YS,{})}),o.jsx(Ie,{id:"ad_planning",label:"Fleet Planning",isAd:!0,isLocked:!0,isForcedLock:!1,onNavigate:e,icon:o.jsx(QS,{})}),o.jsx(Ie,{id:"ad_incident",label:"Incident Reports",isAd:!0,isLocked:!0,isForcedLock:!1,onNavigate:e,icon:o.jsx(XS,{})})]})]})]})})},Fs=({label:e,onCapture:t,existingImage:n})=>{const r=k.useRef(null),[s,i]=k.useState(n),l=d=>{var f;const u=(f=d.target.files)==null?void 0:f[0];if(u){const p=new FileReader;p.onloadend=()=>{const m=p.result;i(m),t(m)},p.readAsDataURL(u)}};return o.jsxs("div",{className:"flex flex-col gap-2 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[o.jsx("span",{className:"text-sm font-semibold text-gray-700",children:e}),o.jsx("div",{className:"relative w-full aspect-video bg-gray-200 rounded-md overflow-hidden flex items-center justify-center border-2 border-dashed border-gray-300",children:s?o.jsx("img",{src:s,alt:"Capture",className:"w-full h-full object-cover"}):o.jsxs("div",{className:"text-gray-400 flex flex-col items-center",children:[o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"}),o.jsx("circle",{cx:"12",cy:"13",r:"3"})]}),o.jsx("span",{className:"text-xs mt-1",children:"No Image"})]})}),o.jsx("input",{type:"file",accept:"image/*",capture:"environment",ref:r,onChange:l,className:"hidden"}),o.jsxs("button",{type:"button",onClick:()=>{var d;return(d=r.current)==null?void 0:d.click()},className:"w-full py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700 transition flex items-center justify-center gap-2",children:[o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),o.jsx("circle",{cx:"12",cy:"13",r:"4"})]}),s?"Retake Photo":"Take Photo"]})]})},$u=({label:e,onSave:t,existingSignature:n})=>{const r=k.useRef(null),s=k.useRef(null),[i,l]=k.useState(!1),d=k.useRef(!1);k.useEffect(()=>{const g=r.current,w=s.current;if(!g||!w)return;const N=()=>{const x=g.toDataURL(),v=w.getBoundingClientRect();g.width=v.width,g.height=160;const y=g.getContext("2d");if(d.current||n){const C=new Image;C.src=d.current?x:n||"",C.onload=()=>{y==null||y.drawImage(C,0,0,g.width,g.height),d.current=!0}}};N();const S=new ResizeObserver(()=>{N()});return S.observe(w),()=>S.disconnect()},[n]);const u=g=>{const w=r.current;if(!w)return{x:0,y:0};const N=w.getBoundingClientRect();let S,x;return"touches"in g?(S=g.touches[0].clientX,x=g.touches[0].clientY):(S=g.clientX,x=g.clientY),{x:S-N.left,y:x-N.top}},f=g=>{"touches"in g&&g.preventDefault();const w=r.current;if(!w)return;const N=w.getContext("2d");if(!N)return;l(!0);const{x:S,y:x}=u(g);N.beginPath(),N.moveTo(S,x),N.lineWidth=2,N.lineCap="round",N.strokeStyle="#000"},p=g=>{if("touches"in g&&g.preventDefault(),!i)return;const w=r.current;if(!w)return;const N=w.getContext("2d");if(!N)return;const{x:S,y:x}=u(g);N.lineTo(S,x),N.stroke()},m=g=>{"touches"in g&&g.preventDefault(),i&&(l(!1),r.current&&t(r.current.toDataURL()))},h=()=>{const g=r.current;if(g){const w=g.getContext("2d");w==null||w.clearRect(0,0,g.width,g.height),t(""),d.current=!1}};return o.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[o.jsxs("div",{className:"flex justify-between items-end",children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:e}),o.jsx("button",{type:"button",onClick:h,className:"text-[10px] text-rose-500 hover:text-rose-700 font-bold uppercase tracking-widest",children:"Clear"})]}),o.jsxs("div",{ref:s,className:"w-full border border-slate-200 rounded-2xl bg-white overflow-hidden relative shadow-sm h-[160px]",children:[o.jsx("canvas",{ref:r,className:"w-full h-full bg-white cursor-crosshair touch-none block",onMouseDown:f,onMouseMove:p,onMouseUp:m,onMouseLeave:m,onTouchStart:f,onTouchMove:p,onTouchEnd:m}),o.jsx("div",{className:"absolute bottom-3 right-4 text-[9px] font-black text-slate-200 pointer-events-none select-none uppercase tracking-[0.2em]",children:"Authentication Required"})]})]})},Us=({label:e,status:t,current:n,onClick:r,colorClass:s})=>{const i=t===n,l={green:i?"bg-emerald-600 text-white border-emerald-600 shadow-lg shadow-emerald-100":"bg-white text-emerald-700 border-emerald-100 hover:bg-emerald-50",red:i?"bg-rose-600 text-white border-rose-600 shadow-lg shadow-rose-100":"bg-white text-rose-700 border-rose-100 hover:bg-rose-50",yellow:i?"bg-amber-500 text-white border-amber-500 shadow-lg shadow-amber-100":"bg-white text-amber-600 border-amber-100 hover:bg-amber-50",gray:i?"bg-slate-700 text-white border-slate-700 shadow-lg shadow-slate-100":"bg-white text-slate-500 border-slate-200 hover:bg-slate-50"};return o.jsxs("button",{onClick:r,className:`relative py-3 px-1 rounded-xl border font-black text-[9px] sm:text-[10px] transition-all flex flex-col items-center gap-1.5 flex-1 min-w-0 ${l[s]} ${i?"z-10 scale-[1.02]":"shadow-sm opacity-80 hover:opacity-100"}`,children:[o.jsxs("div",{className:"h-4 flex items-center justify-center",children:[t===de.GOOD&&o.jsx("span",{className:"text-sm",children:""}),t===de.BAD&&o.jsx("span",{className:"text-sm",children:""}),t===de.ATTENTION&&o.jsx("span",{className:"text-sm",children:"!"}),t===de.NIL&&o.jsx("span",{className:"text-sm",children:""})]}),o.jsx("span",{className:"uppercase tracking-widest truncate w-full px-1",children:e})]})},Wu=({label:e,value:t,onChange:n,type:r="text",placeholder:s,error:i})=>o.jsxs("div",{children:[o.jsx("label",{className:`block text-xs font-bold uppercase mb-1.5 tracking-wide ${i?"text-red-600":"text-gray-500"}`,children:e}),o.jsx("input",{type:r,value:t,onChange:l=>n(l.target.value),placeholder:s,className:`w-full p-3.5 border rounded-lg focus:ring-2 focus:outline-none transition-all font-medium placeholder-gray-400
        ${i?"bg-red-50 border-red-300 focus:ring-red-200 text-red-900":"bg-gray-50 border-gray-200 focus:ring-blue-500 focus:bg-white text-gray-800"}
      `}),i&&o.jsx("p",{className:"text-[10px] text-red-500 font-bold mt-1 ml-1 animate-fadeIn",children:"This field is required"})]}),eb=({initialData:e,activeModule:t,validationLists:n,settings:r,onSaveDraft:s,onSubmit:i,onExit:l,submissionStatus:d,onViewReport:u})=>{const[f,p]=k.useState(e),[m,h]=k.useState(0),[g,w]=k.useState({}),[N,S]=k.useState(!1),x=(R,F)=>{p(q=>({...q,[R]:F})),g[R]&&w(q=>{const J={...q};return delete J[R],J})},v=()=>{s(f),S(!0),setTimeout(()=>S(!1),2e3)},y=R=>{let F=[],q=[];return t==="general"?q=ur:t==="petroleum"?q=Jo:t==="petroleum_v2"?q=Ko:t==="acid"&&(q=wn),t==="general"?(R===2&&(F=[Q.PPE,Q.DOCUMENTATION]),R===3&&(F=[Q.VEHICLE_EXTERIOR,Q.LIGHTS_ELECTRICAL]),R===4&&(F=[Q.MECHANICAL,Q.TRAILER])):t==="petroleum"?(R===2&&(F=[G.TRUCK_EQUIPMENT]),R===3&&(F=[G.TYRES,G.PPE_ID]),R===4&&(F=[G.DOCUMENTS,G.ONBOARD])):t==="petroleum_v2"?(R===2&&(F=[O.PRIME_MOVER]),R===3&&(F=[O.TRAILER_TANKS]),R===4&&(F=[O.DRIVER,O.SAFETY_SIGNS,O.DOCUMENTS])):t==="acid"&&(R===2&&(F=[Y.PPE]),R===3&&(F=[Y.VEHICLE]),R===4&&(F=[Y.SPILL_KIT,Y.DOCUMENTATION])),q.filter(J=>F.includes(J.category))},C=R=>{const F={};return R===0&&(f.truckNo||(F.truckNo=!0),f.trailerNo||(F.trailerNo=!0),f.driverName||(F.driverName=!0),f.location||(F.location=!0),f.odometer||(F.odometer=!0),t!=="general"&&!f.jobCard&&(F.jobCard=!0)),R>=2&&R<=4&&y(R).forEach(J=>{f[J.id]||(F[J.id]=!0)}),R===5&&((!f.remarks||f.remarks.trim()==="")&&(F.remarks=!0),(!f.rate||f.rate===0)&&(F.rate=!0),f.inspectorSignature||(F.inspectorSignature=!0),f.driverSignature||(F.driverSignature=!0)),Object.keys(F).length>0?(w(F),window.scrollTo({top:0,behavior:"smooth"}),!1):(w({}),!0)},b=()=>{for(let R=0;R<=5;R++)if(!C(R))return h(R),!1;return!0},E=()=>{C(m)&&(window.scrollTo({top:0,behavior:"smooth"}),h(R=>Math.min(R+1,Is.length-1)))},T=()=>{m===0?l():(window.scrollTo({top:0,behavior:"smooth"}),h(R=>Math.max(R-1,0)))},I=()=>{b()&&i(f)},_=()=>o.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[f.requestId&&o.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-indigo-800 p-5 rounded-2xl shadow-xl flex items-center justify-between text-white border border-indigo-400/30",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"p-2.5 bg-white/10 rounded-xl backdrop-blur-md",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-indigo-200",children:"Active Mission"}),o.jsxs("p",{className:"text-base font-black tracking-tight uppercase",children:["Request ID: ",f.requestId]})]})]})}),o.jsxs("div",{className:"bg-white p-6 sm:p-8 rounded-3xl shadow-sm border border-slate-100",children:[o.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-8 uppercase tracking-tight",children:"Vehicle Identity"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-y-8 gap-x-10",children:[o.jsx(gn,{label:"Truck Reg No *",value:f.truckNo,onChange:R=>x("truckNo",R),options:n.trucks,placeholder:"e.g. ABC 123",isRegNo:!0,error:g.truckNo}),o.jsx(gn,{label:"Trailer No *",value:f.trailerNo,onChange:R=>x("trailerNo",R),options:n.trailers,placeholder:"e.g. T-100",isRegNo:!0,error:g.trailerNo}),o.jsx(Wu,{label:"Job Card Reference",value:f.jobCard||"",onChange:R=>x("jobCard",R),error:g.jobCard}),o.jsx(gn,{label:"Primary Inspector",value:f.inspectedBy,onChange:R=>x("inspectedBy",R),options:n.inspectors,isTitleCase:!0,readOnly:!0}),o.jsx(gn,{label:"Driver Name *",value:f.driverName,onChange:R=>x("driverName",R),options:n.drivers,placeholder:"Verified Identity",isTitleCase:!0,error:g.driverName}),o.jsx(gn,{label:"Station Location *",value:f.location,onChange:R=>x("location",R),options:n.locations,placeholder:"Hub",isTitleCase:!0,error:g.location}),o.jsx(Wu,{label:"Odometer Readout (km) *",type:"number",value:f.odometer,onChange:R=>x("odometer",R),error:g.odometer})]})]})]}),A=()=>o.jsx("div",{className:"space-y-6 animate-fadeIn",children:o.jsxs("div",{className:"bg-white p-6 sm:p-8 rounded-3xl shadow-sm border border-slate-100",children:[o.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-8 uppercase tracking-tight",children:"Visual Documentation"}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[o.jsx(Fs,{label:"Horse: Front",existingImage:f.photoFront,onCapture:R=>x("photoFront",R)}),o.jsx(Fs,{label:"Horse: Left Profile",existingImage:f.photoLS,onCapture:R=>x("photoLS",R)}),o.jsx(Fs,{label:"Horse: Right Profile",existingImage:f.photoRS,onCapture:R=>x("photoRS",R)}),o.jsx(Fs,{label:"Trailer: Rear Aspect",existingImage:f.photoBack,onCapture:R=>x("photoBack",R)})]})]})}),L=R=>{const F=y(m).filter(J=>R.includes(J.category)),q={};return R.forEach(J=>{q[J]=F.filter(j=>j.category===J)}),o.jsx("div",{className:"space-y-10 animate-fadeIn",children:R.map(J=>o.jsxs("div",{className:"bg-white rounded-[2rem] shadow-sm border border-slate-100 overflow-hidden",children:[o.jsxs("div",{className:"bg-slate-50 px-8 py-5 border-b border-slate-100 flex justify-between items-center",children:[o.jsx("h3",{className:"text-[11px] font-black text-slate-500 uppercase tracking-[0.25em]",children:J}),o.jsx("span",{className:"text-[8px] font-black bg-rose-50 text-rose-500 px-2 py-1 rounded uppercase tracking-widest border border-rose-100",children:"Verification Req."})]}),o.jsx("div",{className:"divide-y divide-slate-50",children:q[J].map(j=>o.jsxs("div",{className:`p-6 sm:p-8 transition-colors ${g[j.id]?"bg-rose-50/40":"hover:bg-slate-50/30"}`,children:[o.jsx("div",{className:"mb-5",children:o.jsx("span",{className:`font-bold text-sm leading-tight uppercase tracking-tight ${g[j.id]?"text-rose-800":"text-slate-700"}`,children:j.label})}),o.jsxs("div",{className:"flex gap-2 sm:gap-4 max-w-xl",children:[o.jsx(Us,{label:"Compliant",status:de.GOOD,current:f[j.id],onClick:()=>x(j.id,de.GOOD),colorClass:"green"}),o.jsx(Us,{label:"Fault",status:de.BAD,current:f[j.id],onClick:()=>x(j.id,de.BAD),colorClass:"red"}),o.jsx(Us,{label:"Review",status:de.ATTENTION,current:f[j.id],onClick:()=>x(j.id,de.ATTENTION),colorClass:"yellow"}),o.jsx(Us,{label:"N/A",status:de.NIL,current:f[j.id],onClick:()=>x(j.id,de.NIL),colorClass:"gray"})]})]},j.id))})]},J))})},M=()=>o.jsx("div",{className:"space-y-6 animate-fadeIn",children:o.jsxs("div",{className:"bg-white p-6 sm:p-8 rounded-3xl shadow-sm border border-slate-100",children:[o.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-8 uppercase tracking-tight",children:"Authorization"}),o.jsxs("div",{className:"mb-10",children:[o.jsx("label",{className:`block text-[10px] font-black uppercase mb-3 tracking-[0.2em] ${g.remarks?"text-rose-600":"text-slate-400"}`,children:"Inspector Findings & Remarks *"}),o.jsx("textarea",{className:"w-full p-6 border rounded-2xl h-44 outline-none font-medium text-sm border-slate-200 focus:ring-4 focus:ring-indigo-50 bg-slate-50 transition-all resize-none",placeholder:"Detailed vehicle condition summary...",value:f.remarks,onChange:R=>x("remarks",R.target.value)})]}),o.jsxs("div",{className:"mb-12",children:[o.jsx("label",{className:"block text-[10px] font-black uppercase mb-5 tracking-[0.2em] text-slate-400",children:"Final Health Grade *"}),o.jsx("div",{className:"flex gap-3 sm:gap-5 flex-wrap",children:[1,2,3,4,5].map(R=>o.jsx("button",{type:"button",onClick:()=>x("rate",R),className:`w-14 h-14 rounded-2xl font-black text-xl transition-all active:scale-90 ${f.rate===R?"bg-slate-900 text-white shadow-2xl scale-110":"bg-slate-100 text-slate-400 hover:bg-slate-200"}`,children:R},R))})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-10 pt-10 border-t border-slate-100",children:[o.jsx($u,{label:"Inspector Authentication",existingSignature:f.inspectorSignature,onSave:R=>x("inspectorSignature",R)}),o.jsx($u,{label:"Driver Confirmation",existingSignature:f.driverSignature,onSave:R=>x("driverSignature",R)})]})]})}),P=()=>o.jsxs("div",{className:"space-y-6 animate-fadeIn pb-12",children:[o.jsxs("div",{className:"bg-white p-10 rounded-[2.5rem] shadow-sm border border-slate-100 text-center",children:[o.jsx("div",{className:"w-20 h-20 bg-emerald-50 rounded-full flex items-center justify-center mx-auto mb-8 border border-emerald-100",children:o.jsx("svg",{className:"w-10 h-10 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),o.jsx("h2",{className:"text-3xl font-black text-slate-800 mb-3 uppercase tracking-tight",children:"Audit Ready"}),o.jsx("p",{className:"text-slate-400 font-medium text-sm max-w-md mx-auto",children:"Please perform a final data review. Submitting will permanently log this record into the corporate fleet repository."})]}),o.jsxs("div",{className:"mt-8 bg-slate-900 rounded-[2.5rem] p-10 text-white shadow-2xl relative overflow-hidden group",children:[o.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-emerald-500/10 rounded-full -mr-20 -mt-20 blur-3xl"}),o.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-center justify-between gap-10",children:[o.jsxs("div",{className:"text-center md:text-left",children:[o.jsx("h3",{className:"text-2xl font-black mb-1 text-white uppercase tracking-tight",children:"Synchronize Records"}),o.jsx("p",{className:"text-emerald-400 text-xs font-black uppercase tracking-[0.25em] opacity-80",children:"Transmit to HQ Database"})]}),o.jsxs("button",{onClick:I,disabled:d!=="idle",className:`w-full md:w-auto px-12 py-5 text-white rounded-2xl font-black text-lg shadow-2xl transition-all flex items-center justify-center gap-4 active:scale-95 border-2 border-white/10 uppercase tracking-[0.2em] ${d!=="idle"?"bg-slate-700":"bg-emerald-600 hover:bg-emerald-500"}`,children:[d==="submitting"?"Uploading...":d==="offline_saved"?"Stored Locally":"Submit Inspection",d==="idle"&&o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})]})]})]})]});return o.jsxs("div",{className:"flex flex-col min-h-[calc(100vh-56px)] bg-slate-50/50 overflow-x-hidden",children:[o.jsx("div",{className:"bg-white border-b border-slate-100 sticky top-14 z-30 shadow-sm",children:o.jsx("div",{className:"w-full",children:o.jsx("div",{className:"flex px-4 py-5 justify-between md:justify-center items-center overflow-x-hidden",children:Is.map((R,F)=>{const q=F===m,J=F<m;return o.jsxs("div",{className:"flex items-center flex-1 md:flex-none",children:[o.jsxs("div",{className:"flex flex-col items-center gap-2 transition-all w-full",children:[o.jsx("div",{className:`
                                    w-7 h-7 sm:w-9 sm:h-9 rounded-xl flex items-center justify-center text-[10px] sm:text-xs font-black transition-all duration-500
                                    ${q?"bg-slate-900 text-white shadow-xl scale-110":J?"bg-emerald-500 text-white":"bg-slate-100 text-slate-300"}
                                `,children:J?"":F+1}),o.jsx("span",{className:`hidden sm:block text-[8px] uppercase font-black tracking-[0.2em] ${q?"text-slate-900":"text-slate-300"}`,children:R.title})]}),F<Is.length-1&&o.jsx("div",{className:`h-0.5 flex-1 md:w-12 mx-1 sm:mx-4 rounded-full ${J?"bg-emerald-500":"bg-slate-100"}`})]},R.id)})})})}),o.jsxs("div",{className:"flex-1 p-4 sm:p-8 md:p-12 w-full max-w-5xl mx-auto overflow-x-hidden",children:[m===0&&_(),m===1&&A(),t==="general"&&m===2&&L([Q.PPE,Q.DOCUMENTATION]),t==="general"&&m===3&&L([Q.VEHICLE_EXTERIOR,Q.LIGHTS_ELECTRICAL]),t==="general"&&m===4&&L([Q.MECHANICAL,Q.TRAILER]),t==="petroleum"&&m===2&&L([G.TRUCK_EQUIPMENT]),t==="petroleum"&&m===3&&L([G.TYRES,G.PPE_ID]),t==="petroleum"&&m===4&&L([G.DOCUMENTS,G.ONBOARD]),t==="petroleum_v2"&&m===2&&L([O.PRIME_MOVER]),t==="petroleum_v2"&&m===3&&L([O.TRAILER_TANKS]),t==="petroleum_v2"&&m===4&&L([O.DRIVER,O.SAFETY_SIGNS,O.DOCUMENTS]),t==="acid"&&m===2&&L([Y.PPE]),t==="acid"&&m===3&&L([Y.VEHICLE]),t==="acid"&&m===4&&L([Y.SPILL_KIT,Y.DOCUMENTATION]),m===5&&M(),m===6&&P()]}),o.jsx("footer",{className:"bg-white border-t border-slate-100 p-5 sm:p-8 sticky bottom-0 z-30 shadow-2xl backdrop-blur-md bg-white/90",children:o.jsxs("div",{className:"max-w-5xl mx-auto flex justify-between gap-4",children:[o.jsx("button",{onClick:T,className:"px-8 py-4 rounded-2xl border border-slate-200 font-black text-slate-400 hover:text-slate-800 hover:bg-slate-50 transition-all text-[10px] uppercase tracking-widest active:scale-95",children:m===0?"Exit":"Previous"}),o.jsxs("div",{className:"flex gap-3 flex-1 justify-end",children:[o.jsx("button",{onClick:v,className:"flex px-8 py-4 rounded-2xl border border-indigo-100 bg-indigo-50 text-indigo-600 font-black hover:bg-indigo-100 transition-all items-center justify-center gap-3 text-[10px] uppercase tracking-widest active:scale-95 relative overflow-hidden",children:N?o.jsxs(o.Fragment,{children:[o.jsx("svg",{className:"w-4 h-4 text-emerald-500 animate-bounce",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"3",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),o.jsx("span",{className:"animate-fadeIn",children:"Draft Saved"})]}):o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"}),o.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),o.jsx("polyline",{points:"7 3 7 8 15 8"})]}),"Save Draft"]})}),m<Is.length-1&&o.jsxs("button",{onClick:E,className:"flex-1 sm:flex-none px-10 py-4 rounded-2xl bg-slate-900 text-white font-black hover:bg-black shadow-xl transition-all flex items-center justify-center gap-3 text-[10px] uppercase tracking-[0.2em] active:scale-95",children:["Next",o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"3",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})]})]})})]})},tb=({tickets:e,isLoading:t,onRefresh:n,onSelect:r,filterStatus:s})=>{const i=k.useMemo(()=>s==="OPEN"?e.filter(l=>l.status==="Open"||l.status==="In Progress"):s==="CLOSED"?e.filter(l=>l.status==="Resolved"||l.status==="Closed"):e,[e,s]);return o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden min-h-[300px]",children:[o.jsxs("div",{className:"p-4 bg-gray-50 border-b border-gray-100 flex justify-between items-center",children:[o.jsxs("span",{className:"font-bold text-sm text-gray-700",children:["Help History (",i.length,")"]}),o.jsx("button",{onClick:n,className:"text-[10px] text-indigo-600 font-black uppercase tracking-widest bg-white px-3 py-1.5 rounded-lg border border-indigo-100 hover:bg-indigo-50 transition-colors shadow-sm",children:"Refresh List"})]}),o.jsx("div",{className:"divide-y divide-gray-100",children:t?o.jsx("div",{className:"p-12 text-center text-gray-400 font-medium",children:"Checking for updates..."}):i.length===0?o.jsx("div",{className:"p-16 text-center text-gray-400 italic font-medium",children:"No help requests found yet."}):i.map(l=>o.jsxs("div",{onClick:()=>r(l),className:"p-5 hover:bg-slate-50 cursor-pointer transition-colors group",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsxs("span",{className:"font-bold text-sm text-slate-800 group-hover:text-indigo-600 transition-colors",children:["Request #",l.ticketId,": ",l.subject]}),o.jsx("span",{className:`text-[9px] font-black px-2.5 py-1 rounded-full uppercase tracking-tighter border ${l.status==="Resolved"?"bg-emerald-50 text-emerald-600 border-emerald-100":"bg-indigo-50 text-indigo-600 border-indigo-100"}`,children:l.status})]}),o.jsx("p",{className:"text-xs text-slate-500 truncate font-medium",children:l.description}),o.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[o.jsx("span",{className:"text-[9px] font-bold text-slate-300 uppercase",children:new Date(l.timestamp).toLocaleDateString()}),o.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-200"}),o.jsx("span",{className:"text-[9px] font-bold text-slate-300 uppercase",children:l.user})]})]},l.ticketId))})]})},nb=({ticket:e,currentUser:t,isAdmin:n,onClose:r,onReply:s,isSendingReply:i,isLocked:l})=>{var p;const[d,u]=k.useState(""),f=()=>{!d.trim()||l||(s(d),u(""))};return o.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 overflow-hidden flex flex-col h-[600px] animate-fadeIn",children:[o.jsxs("div",{className:"p-4 bg-slate-50 border-b flex justify-between items-center",children:[o.jsxs("button",{onClick:r,className:"text-[10px] font-black text-slate-500 hover:text-indigo-600 transition-colors uppercase tracking-widest flex items-center gap-2 bg-white px-3 py-2 rounded-xl border border-slate-200 shadow-sm",children:[o.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"3",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),"Go Back"]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"font-black text-slate-800 uppercase tracking-tight text-sm",children:e.subject}),l&&o.jsx("span",{className:"text-[8px] font-black text-amber-600 bg-amber-50 px-2.5 py-1 rounded-full border border-amber-200 uppercase",children:"View Only"})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6 bg-slate-50/20",children:[o.jsxs("div",{className:"p-5 rounded-2xl bg-white border border-slate-100 shadow-sm mb-4",children:[o.jsx("p",{className:"text-[10px] font-black text-indigo-500 uppercase tracking-widest mb-2",children:"Original Problem"}),o.jsx("p",{className:"text-sm font-medium text-slate-700 leading-relaxed",children:e.description})]}),(p=e.comments)==null?void 0:p.map((m,h)=>{var S;const g=((S=m.role)==null?void 0:S.toLowerCase())||"",w=g==="admin"||g==="superadmin",N=w?"Support":m.user;return o.jsxs("div",{className:`p-4 rounded-2xl shadow-sm border ${m.user===(t==null?void 0:t.name)?"bg-indigo-600 text-white ml-auto border-indigo-500":"bg-white text-gray-700 mr-auto border-slate-100"} max-w-[90%] md:max-w-[80%]`,children:[o.jsxs("div",{className:"flex justify-between items-center mb-1.5 gap-6",children:[o.jsxs("p",{className:"text-[9px] font-black uppercase tracking-widest opacity-70",children:[N," ",!w&&m.role&&`(${m.role})`]}),o.jsxs("p",{className:"text-[8px] font-bold opacity-50 uppercase",children:[new Date(m.timestamp).toLocaleDateString()," ",new Date(m.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),o.jsx("p",{className:"text-sm font-semibold leading-relaxed",children:m.message})]},h)})]}),!l&&o.jsxs("div",{className:"p-4 border-t bg-white flex gap-3 items-center",children:[o.jsx("input",{className:"flex-1 border border-slate-200 rounded-xl px-5 py-4 text-sm font-medium focus:ring-4 focus:ring-indigo-50 outline-none transition-all placeholder:text-slate-300",placeholder:"Type your reply here...",value:d,onChange:m=>u(m.target.value)}),o.jsxs("button",{onClick:f,disabled:i||!d.trim(),className:"h-[52px] px-8 bg-indigo-600 hover:bg-indigo-700 text-white font-black rounded-xl flex items-center justify-center gap-2 transition-all active:scale-95 shadow-lg shadow-indigo-100 disabled:bg-slate-300 disabled:shadow-none uppercase tracking-[0.2em] text-[10px]",children:[i?o.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):null,i?"Sending":"Send"]})]})]})},rb=({appScriptUrl:e,currentUser:t,showToast:n,settings:r,prefillData:s,onPrefillConsumed:i})=>{const l=window.isSubscriptionLocked||!1,[d,u]=k.useState(l?"list":"create"),[f,p]=k.useState([]),[m,h]=k.useState(null),[g,w]=k.useState(!1),[N,S]=k.useState(!1),[x,v]=k.useState(!1),[y,C]=k.useState({subject:"",description:"",priority:"Medium"});k.useEffect(()=>{s&&(C({subject:s.subject,description:s.description,priority:"Medium"}),u("create"),i&&i())},[s]);const b=async()=>{if(!(!e||!t)){w(!0);try{const A=await(await fetch(e,{method:"POST",body:JSON.stringify({action:"get_tickets",email:t.username,role:t.role})})).json();A.status==="success"&&p(A.tickets)}finally{w(!1)}}};k.useEffect(()=>{b()},[]);const E=async _=>{if(_.preventDefault(),l){n("Action restricted: License expired.","error");return}S(!0);try{const A={action:"submit_support_ticket",type:"Issue",...y,user:t==null?void 0:t.name,email:t==null?void 0:t.username,role:t==null?void 0:t.role};(await(await fetch(e,{method:"POST",body:JSON.stringify(A)})).json()).status==="success"&&(n("Your request has been sent to the team.","success"),C({subject:"",description:"",priority:"Medium"}),u("list"),b())}catch{n("Sending failed. Check connection.","error")}finally{S(!1)}},T=async _=>{if(!(!m||l)){v(!0);try{const A={user:t==null?void 0:t.name,role:t==null?void 0:t.role,message:_,timestamp:new Date().toISOString()};await fetch(e,{method:"POST",body:JSON.stringify({action:"update_ticket",ticketId:m.ticketId,comment:A}),mode:"no-cors"});const L={...m,comments:[...m.comments,A]};h(L),p(M=>M.map(P=>P.ticketId===L.ticketId?L:P)),n("Reply sent.","success")}finally{v(!1)}}},I=async()=>{if(!r)return;const _={title:r.companyName||"SafetyCheck Pro",text:`Access the ${r.companyName||"Fleet"} Inspection Portal here:`,url:r.webAppUrl||window.location.href};try{navigator.share?await navigator.share(_):(await navigator.clipboard.writeText(_.url),n("Portal link copied to clipboard.","info"))}catch(A){console.error("Error sharing:",A)}};return o.jsxs("div",{className:"max-w-6xl mx-auto space-y-10 animate-fadeIn pb-24 px-4 md:px-0 font-sans",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-8",children:[o.jsxs("div",{className:"flex items-center gap-5",children:[o.jsx("div",{className:"p-3 bg-amber-100 text-amber-600 rounded-2xl shrink-0 shadow-sm border border-amber-50",children:o.jsx("svg",{className:"w-10 h-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"1.5",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"})})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-black text-slate-800 uppercase tracking-tight leading-none",children:"Help & Support"}),o.jsx("p",{className:"text-[11px] text-slate-400 font-bold uppercase tracking-[0.25em] mt-3",children:"Get help with the app or report a problem"})]})]}),l&&o.jsx("span",{className:"px-5 py-2.5 bg-amber-50 text-amber-700 border border-amber-100 rounded-2xl text-[10px] font-black uppercase tracking-[0.2em] animate-pulse",children:"View-Only Mode"})]}),o.jsxs("div",{className:"flex gap-3 bg-slate-100/50 p-2 rounded-2xl w-fit border border-slate-200/50 shadow-inner",children:[o.jsx("button",{onClick:()=>!l&&u("create"),disabled:l,className:`px-8 py-3 rounded-xl font-black text-[11px] uppercase tracking-widest transition-all ${d==="create"?"bg-white text-indigo-600 shadow-sm border border-slate-200":"text-slate-400"} ${l?"opacity-30 cursor-not-allowed grayscale":"hover:text-indigo-500"}`,children:"Ask for Help"}),o.jsx("button",{onClick:()=>u("list"),className:`px-8 py-3 rounded-xl font-black text-[11px] uppercase tracking-widest transition-all ${d==="list"?"bg-white text-indigo-600 shadow-sm border border-slate-200":"text-slate-400"} hover:text-indigo-500`,children:"See My Requests"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[o.jsx("div",{className:"lg:col-span-2 space-y-10",children:d==="create"?o.jsxs("div",{className:"bg-white p-8 sm:p-12 rounded-[2.5rem] border border-slate-100 shadow-2xl shadow-slate-100/50 animate-fadeIn",children:[o.jsx("h3",{className:"text-2xl font-black text-slate-800 uppercase tracking-tight mb-3",children:"Send a Help Request"}),o.jsx("p",{className:"text-slate-400 text-sm font-medium mb-10 leading-relaxed",children:"Tell us what's wrong and we'll look into it as soon as possible."}),o.jsxs("form",{onSubmit:E,className:"space-y-8",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] ml-1",children:"What is the problem? (Short Title)"}),o.jsx("input",{className:"w-full p-5 bg-slate-50 border border-slate-200 rounded-2xl text-sm font-bold text-slate-700 outline-none focus:ring-4 focus:ring-indigo-50 transition-all placeholder:font-normal",placeholder:"e.g. Can't sync my reports",value:y.subject,onChange:_=>C({...y,subject:_.target.value}),required:!0})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] ml-1",children:"Explain the problem in detail"}),o.jsx("textarea",{className:"w-full p-5 bg-slate-50 border border-slate-200 rounded-2xl text-sm font-medium text-slate-600 h-44 outline-none focus:ring-4 focus:ring-indigo-50 transition-all resize-none placeholder:font-normal",placeholder:"Describe what happened...",value:y.description,onChange:_=>C({...y,description:_.target.value}),required:!0})]}),o.jsx("button",{type:"submit",disabled:N,className:"w-full py-6 bg-slate-900 hover:bg-black text-white font-black rounded-2xl flex items-center justify-center gap-4 shadow-2xl shadow-slate-200 active:scale-95 transition-all text-xs uppercase tracking-[0.3em]",children:N?o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"animate-spin h-5 w-5 text-indigo-400",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):o.jsxs(o.Fragment,{children:["Send Help Request",o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"3",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})})]})]}):m?o.jsx(nb,{ticket:m,currentUser:t,isAdmin:(t==null?void 0:t.role)==="Admin"||(t==null?void 0:t.role)==="SuperAdmin",onClose:()=>h(null),onReply:T,isSendingReply:x,isLocked:l}):o.jsx(tb,{tickets:f,isLoading:g,onRefresh:b,onSelect:h,isAdmin:(t==null?void 0:t.role)==="Admin"||(t==null?void 0:t.role)==="SuperAdmin",filterStatus:"ALL"})}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white p-8 rounded-[2rem] border border-slate-100 shadow-lg animate-fadeIn",children:[o.jsx("h3",{className:"text-lg font-black text-slate-800 uppercase tracking-tight mb-2",children:"Share Application"}),o.jsx("p",{className:"text-xs text-slate-500 font-medium leading-relaxed mb-6",children:"Invite colleagues or save the link to your device for quick access."}),o.jsxs("button",{onClick:I,className:"w-full py-4 bg-emerald-600 hover:bg-emerald-700 text-white font-black rounded-xl shadow-lg transition-all active:scale-95 flex items-center justify-center gap-3 text-[10px] uppercase tracking-[0.2em]",children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})}),"Share Access Link"]})]}),o.jsxs("div",{className:"bg-indigo-50 p-8 rounded-[2rem] border border-indigo-100",children:[o.jsx("h4",{className:"text-xs font-black text-indigo-900 uppercase tracking-widest mb-4",children:"Support Hours"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between text-[11px] font-bold",children:[o.jsx("span",{className:"text-indigo-400 uppercase tracking-tighter",children:"Mon - Fri"}),o.jsx("span",{className:"text-indigo-900",children:"08:00 - 17:00"})]}),o.jsxs("div",{className:"flex justify-between text-[11px] font-bold",children:[o.jsx("span",{className:"text-indigo-400 uppercase tracking-tighter",children:"Saturday"}),o.jsx("span",{className:"text-indigo-900",children:"09:00 - 13:00"})]}),o.jsx("div",{className:"pt-4 border-t border-indigo-200/50",children:o.jsx("p",{className:"text-[10px] text-indigo-700 leading-relaxed font-medium",children:"Critical system outages are monitored 24/7 by our technical response team."})})]})]})]})]})]})},sb=({user:e,appScriptUrl:t,settings:n,onSettingsUpdate:r,showToast:s,onRefreshSubscription:i,subscription:l,history:d=[]})=>{const[u,f]=k.useState("info"),[p,m]=k.useState(""),[h,g]=k.useState(!1),[w,N]=k.useState(n.maintenanceMode||!1),[S,x]=k.useState(n.maintenanceMessage||"System under scheduled maintenance."),[v,y]=k.useState(!1),[C,b]=k.useState(new Date().toISOString().split("T")[0]),[E,T]=k.useState(1),[I,_]=k.useState("month"),[A,L]=k.useState("Enterprise"),[M,P]=k.useState(!1),R=k.useMemo(()=>{const z=new Date(C);return I==="month"?z.setMonth(z.getMonth()+Number(E)):z.setFullYear(z.getFullYear()+Number(E)),z.toISOString().split("T")[0]},[C,E,I]);k.useEffect(()=>{N(n.maintenanceMode||!1),x(n.maintenanceMessage||"System under scheduled maintenance.")},[n.maintenanceMode,n.maintenanceMessage]);const F=async()=>{if(!p.trim()){s("Please enter a message.","error");return}g(!0);try{await fetch(t,{method:"POST",body:JSON.stringify({action:"broadcast",type:u,message:p}),mode:"no-cors"}),s("Broadcast sent successfully!","success"),m("")}catch{s("Failed to send broadcast.","error")}finally{g(!1)}},q=async()=>{y(!0);try{await fetch(t,{method:"POST",body:JSON.stringify({action:"update_settings",...n,maintenanceMode:w,maintenanceMessage:S}),mode:"no-cors"}),r({maintenanceMode:w,maintenanceMessage:S}),s(w?"SYSTEM LOCKDOWN ACTIVATED":"System Access Restored","success")}catch{s("Failed to update status.","error")}finally{y(!1)}},J=async()=>{P(!0);try{const _e=await(await fetch(t,{method:"POST",body:JSON.stringify({action:"extend_subscription",expiryDate:R,plan:A,processedBy:e.name})})).json();if(_e.status==="success")s(`${A} license extended until ${R}`,"success"),i&&i();else throw new Error(_e.message)}catch{s("Failed to update license on server.","error")}finally{P(!1)}},[j,H]=k.useState("1_Controller.gs"),[W,Z]=k.useState(null),[B,re]=k.useState(t),ae=()=>{const z=Qs[j];z&&navigator.clipboard.writeText(z).then(()=>{Z(j),s(`${j} copied`,"success"),setTimeout(()=>Z(null),2e3)})},oe=()=>{localStorage.setItem("safetyCheck_scriptUrl",B),window.location.reload()},ne=k.useMemo(()=>[...d].reverse(),[d]);return o.jsxs("div",{className:"max-w-6xl mx-auto animate-fadeIn pb-24 space-y-8 px-4 sm:px-0 font-sans",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 text-center sm:text-left",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl sm:text-4xl font-black text-slate-900 uppercase tracking-tight",children:"System Security & Core"}),o.jsx("p",{className:"text-slate-400 text-[9px] sm:text-[10px] font-bold uppercase tracking-[0.3em] mt-1",children:"Master Administrator Console"})]}),o.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-slate-100 rounded-2xl border border-slate-200",children:[o.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),o.jsx("span",{className:"text-[10px] font-black text-slate-600 uppercase tracking-widest",children:"Active Security Session"})]})]}),o.jsxs("section",{className:"bg-white rounded-[2rem] shadow-sm border border-slate-100 overflow-hidden",children:[o.jsxs("div",{className:"bg-slate-900 px-8 py-6 text-white flex flex-col sm:flex-row justify-between items-center gap-4",children:[o.jsxs("div",{className:"text-center sm:text-left",children:[o.jsx("h3",{className:"font-bold text-xl uppercase tracking-tight",children:"Subscription & Licensing"}),o.jsx("p",{className:"text-slate-400 text-[10px] font-bold uppercase tracking-widest mt-0.5",children:"Manage enterprise access duration"})]}),o.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-2xl flex items-center justify-center border border-white/5",children:o.jsx("svg",{className:"w-7 h-7 text-emerald-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})})]}),o.jsxs("div",{className:"p-6 sm:p-10 grid grid-cols-1 lg:grid-cols-12 gap-10",children:[o.jsx("div",{className:"lg:col-span-5 space-y-8",children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("h4",{className:"text-[11px] font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[o.jsx("span",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full"}),"New License Calculator"]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-widest ml-1",children:"Start Date"}),o.jsx("input",{type:"date",value:C,onChange:z=>b(z.target.value),className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl font-bold text-slate-700 outline-none focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-400 transition-all"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-widest ml-1",children:"Plan Type"}),o.jsxs("select",{value:A,onChange:z=>L(z.target.value),className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl font-bold text-slate-700 outline-none h-[58px]",children:[o.jsx("option",{value:"Standard",children:"Standard"}),o.jsx("option",{value:"Professional",children:"Professional"}),o.jsx("option",{value:"Enterprise",children:"Enterprise"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-widest ml-1",children:"Renewal Duration"}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("input",{type:"number",min:"1",value:E,onChange:z=>T(Math.max(1,parseInt(z.target.value)||1)),className:"w-24 p-4 bg-slate-50 border border-slate-200 rounded-2xl font-bold text-slate-700 outline-none"}),o.jsxs("select",{value:I,onChange:z=>_(z.target.value),className:"flex-1 p-4 bg-slate-50 border border-slate-200 rounded-2xl font-bold text-slate-700 outline-none",children:[o.jsx("option",{value:"month",children:"Month(s)"}),o.jsx("option",{value:"year",children:"Year(s)"})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-white rounded-3xl p-8 border border-indigo-100 shadow-inner relative overflow-hidden group",children:[o.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-indigo-500/5 rounded-full -mr-10 -mt-10 group-hover:scale-110 transition-transform duration-500"}),o.jsxs("div",{className:"relative z-10 space-y-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-[10px] font-bold text-indigo-400 uppercase tracking-widest",children:"Calculated Expiry"}),o.jsx("p",{className:"text-3xl font-black text-indigo-900 tracking-tighter",children:new Date(R).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"})})]}),o.jsxs("button",{onClick:J,disabled:M,className:"w-full py-5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-2xl font-black text-xs uppercase tracking-[0.2em] shadow-xl shadow-indigo-200 transition-all active:scale-95 flex items-center justify-center gap-3 disabled:opacity-50",children:[M&&o.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Commit System Renewal"]})]})]})]})}),o.jsxs("div",{className:"lg:col-span-7 space-y-6",children:[o.jsxs("h4",{className:"text-[11px] font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[o.jsx("span",{className:"w-1.5 h-1.5 bg-slate-300 rounded-full"}),"License Registry History"]}),o.jsxs("div",{className:"bg-slate-50/50 rounded-3xl border border-slate-100 overflow-hidden",children:[o.jsx("div",{className:"hidden sm:block",children:o.jsxs("table",{className:"w-full text-left",children:[o.jsx("thead",{className:"bg-slate-100/80 text-slate-500 font-bold text-[10px] uppercase tracking-widest border-b border-slate-200",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-4",children:"Processor"}),o.jsx("th",{className:"px-6 py-4",children:"Tier"}),o.jsx("th",{className:"px-6 py-4",children:"Coverage Date"}),o.jsx("th",{className:"px-6 py-4 text-right",children:"Integrity"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-100",children:ne.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"p-16 text-center text-slate-300 font-bold italic uppercase tracking-widest text-[11px]",children:"Database empty / connection pending"})}):ne.map((z,_e)=>{const ze=String(z.expiryDate||"").trim().split("T")[0],Qe=(l==null?void 0:l.expiryDate)===ze;return o.jsxs("tr",{className:`transition-colors ${Qe?"bg-indigo-50/40":"hover:bg-white"}`,children:[o.jsx("td",{className:"px-6 py-5",children:o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-slate-400 text-[8px] font-black uppercase mb-0.5",children:String(z.timestamp||"2026-01-01").split("T")[0]}),o.jsx("span",{className:"text-slate-700 font-bold text-xs truncate max-w-[120px]",children:z.processedBy})]})}),o.jsx("td",{className:"px-6 py-5",children:o.jsx("span",{className:"text-slate-500 font-black text-[10px] uppercase tracking-tighter",children:z.plan})}),o.jsx("td",{className:"px-6 py-5",children:o.jsx("span",{className:`font-black uppercase tracking-tight text-sm ${Qe?"text-indigo-600":"text-slate-400"}`,children:ze})}),o.jsx("td",{className:"px-6 py-5 text-right",children:Qe?o.jsx("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 bg-indigo-600 text-white rounded-full text-[8px] font-black uppercase tracking-widest shadow-sm",children:"Active"}):o.jsx("span",{className:"text-[9px] font-bold text-slate-300 uppercase tracking-widest",children:"Legacy"})})]},_e)})})]})}),o.jsx("div",{className:"sm:hidden divide-y divide-slate-100 p-4",children:ne.length===0?o.jsx("div",{className:"p-10 text-center text-slate-300 font-bold italic uppercase tracking-widest text-[10px]",children:"No records found"}):ne.map((z,_e)=>o.jsxs("div",{className:"py-5 first:pt-0 last:pb-0 space-y-3",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-[8px] font-black text-slate-400 uppercase",children:String(z.timestamp||"").split("T")[0]}),o.jsx("p",{className:"text-xs font-bold text-slate-800",children:z.processedBy})]}),(l==null?void 0:l.expiryDate)===String(z.expiryDate).split("T")[0]?o.jsx("span",{className:"px-2 py-0.5 bg-indigo-600 text-white rounded-full text-[7px] font-black uppercase tracking-widest",children:"Active"}):o.jsx("span",{className:"text-[7px] font-bold text-slate-300 uppercase",children:"Legacy"})]}),o.jsxs("div",{className:"flex justify-between items-center bg-white p-3 rounded-xl border border-slate-100",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-[8px] font-bold text-slate-400 uppercase",children:"Tier"}),o.jsx("span",{className:"text-[10px] font-black text-slate-600",children:z.plan})]}),o.jsxs("div",{className:"flex flex-col text-right",children:[o.jsx("span",{className:"text-[8px] font-bold text-slate-400 uppercase",children:"Expires"}),o.jsx("span",{className:"text-[11px] font-black text-slate-800 tracking-tight",children:String(z.expiryDate).split("T")[0]})]})]})]},_e))})]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"bg-white rounded-[2rem] shadow-sm border border-slate-100 p-8 space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-blue-50 text-blue-600 rounded-xl flex items-center justify-center border border-blue-100/50",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"})})}),o.jsx("h3",{className:"font-bold text-slate-800 uppercase tracking-tight text-lg",children:"Global Broadcast"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1",children:"Message Body"}),o.jsx("textarea",{className:"w-full p-5 bg-slate-50 border border-slate-200 rounded-2xl h-36 outline-none focus:ring-4 focus:ring-blue-500/10 focus:border-blue-400 text-sm font-medium transition-all",placeholder:"Type important fleet-wide announcement...",value:p,onChange:z=>m(z.target.value)})]}),o.jsxs("button",{onClick:F,disabled:h,className:"w-full py-5 bg-blue-600 hover:bg-blue-700 text-white font-black rounded-2xl shadow-xl shadow-blue-100 transition-all flex items-center justify-center gap-3 uppercase tracking-widest text-[11px] active:scale-[0.98] disabled:opacity-50",children:[h?"Broadcasting...":"Dispatch Fleet Alert",!h&&o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})]}),o.jsxs("div",{className:"bg-rose-50 rounded-[2rem] border border-rose-100 p-8 space-y-6 flex flex-col justify-between",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx("div",{className:"w-10 h-10 bg-rose-100 text-rose-600 rounded-xl flex items-center justify-center border border-rose-200",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),o.jsx("h3",{className:"font-bold text-rose-800 uppercase tracking-tight text-lg",children:"System Lockdown"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between p-5 bg-white border border-rose-100 rounded-2xl shadow-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-black text-rose-900 uppercase tracking-tighter",children:"Maintenance Mode"}),o.jsx("p",{className:"text-[10px] text-rose-400 font-bold uppercase tracking-widest mt-0.5",children:"Restrict all non-admin access"})]}),o.jsx("button",{onClick:()=>N(!w),className:`relative inline-flex h-7 w-12 items-center rounded-full transition-colors ${w?"bg-rose-600":"bg-slate-200"}`,children:o.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white transition shadow-sm ${w?"translate-x-6":"translate-x-1"}`})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-[10px] font-bold text-rose-400 uppercase tracking-widest ml-1",children:"Lockdown Message"}),o.jsx("input",{type:"text",value:S,onChange:z=>x(z.target.value),className:"w-full p-4 bg-white border border-rose-100 rounded-2xl font-bold text-rose-800 outline-none placeholder:text-rose-200 focus:ring-4 focus:ring-rose-500/10"})]})]})]}),o.jsxs("button",{onClick:q,disabled:v,className:"w-full py-5 bg-rose-600 hover:bg-rose-700 text-white font-black rounded-2xl shadow-xl shadow-rose-200 transition-all flex items-center justify-center gap-3 uppercase tracking-widest text-[11px] active:scale-[0.98] disabled:opacity-50 mt-4",children:[v?"Updating...":"Apply System Status",!v&&o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})]})]})]}),o.jsxs("section",{className:"bg-white rounded-[2rem] shadow-sm border border-slate-100 p-6 sm:p-10 space-y-8",children:[o.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-slate-800 uppercase tracking-tight",children:"Backend Architecture"}),o.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest mt-0.5",children:"Deployment modules for Google Apps Script"})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[o.jsx("select",{value:j,onChange:z=>H(z.target.value),className:"p-4 bg-slate-50 border border-slate-200 rounded-2xl text-xs font-black text-slate-700 outline-none min-w-[200px] h-[54px]",children:Object.keys(Qs).map(z=>o.jsx("option",{value:z,children:z},z))}),o.jsxs("button",{onClick:ae,className:"px-8 py-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-2xl font-black text-[11px] uppercase tracking-widest transition-all active:scale-[0.98] shadow-lg shadow-indigo-100 h-[54px] flex items-center justify-center gap-2",children:[W===j?o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})}):o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})}),W===j?"Copied to Clipboard":"Source Code"]})]})]}),o.jsxs("div",{className:"relative group",children:[o.jsx("div",{className:"absolute top-4 right-4 text-[9px] font-bold text-slate-300 uppercase tracking-widest pointer-events-none group-hover:opacity-0 transition-opacity",children:"Read Only"}),o.jsx("textarea",{readOnly:!0,value:Qs[j]||"",className:"w-full min-h-[400px] p-8 bg-slate-50 border border-slate-200 rounded-[2rem] font-mono text-[11px] leading-relaxed text-slate-500 focus:ring-0 outline-none resize-none scrollbar-hide border-dashed"})]}),o.jsxs("div",{className:"p-4 bg-amber-50 border border-amber-100 rounded-2xl flex items-center gap-3",children:[o.jsx("svg",{className:"w-5 h-5 text-amber-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),o.jsx("p",{className:"text-[10px] text-amber-700 font-bold uppercase tracking-widest leading-relaxed",children:"Deployment Note: Copy this module into your Google Apps Script editor and deploy as a new version to sync updates."})]})]}),o.jsxs("section",{className:"bg-white rounded-[2rem] shadow-sm border border-slate-100 p-8 sm:p-10 space-y-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-slate-800 uppercase tracking-tight flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-slate-100 text-slate-600 rounded-xl flex items-center justify-center border border-slate-200",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),"Google Apps Script URL"]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[o.jsx("input",{type:"text",value:B,onChange:z=>re(z.target.value),className:"flex-1 p-5 bg-slate-50 border border-slate-200 rounded-2xl font-mono text-xs text-slate-600 outline-none focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-400 transition-all",placeholder:"https://script.google.com/macros/s/..."}),o.jsx("button",{onClick:oe,className:"px-8 py-5 bg-slate-900 hover:bg-black text-white rounded-2xl font-black text-[11px] uppercase tracking-[0.2em] active:scale-[0.98] shadow-2xl transition-all h-[60px]",children:"Save & Reload"})]}),o.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest text-center",children:"Caution: Changing this URL will reset the connection to your data storage."})]})]})},ob=({appScriptUrl:e,currentUser:t,showToast:n,onRequestNew:r})=>{const[s,i]=k.useState([]),[l,d]=k.useState(!1),u=window.isSubscriptionLocked||!1;k.useEffect(()=>{f();const g=setInterval(f,6e4);return()=>clearInterval(g)},[t==null?void 0:t.username,e]);const f=async()=>{if(!(!e||!t)){s.length===0&&d(!0);try{const N=(await(await fetch(`${e}?t=${new Date().getTime()}`)).json()).Inspection_Requests;if(N&&Array.isArray(N)&&N.length>1){const x=N.slice(1).map(v=>({id:v[0],requester:v[1],truck:v[3],trailer:v[4],type:v[5],reason:v[6],priority:v[7],assignedTo:v[8],status:v[9]||"Pending",timestamp:v[10]})).filter(v=>{const y=t.role.toLowerCase();if(y==="admin"||y==="superadmin")return!0;const C=String(t.name||"").toLowerCase(),b=String(v.requester).toLowerCase()===C,E=String(v.assignedTo).toLowerCase()===C,T=String(v.assignedTo).toLowerCase()==="unassigned";return y==="inspector"&&(E||T)||b}).sort((v,y)=>new Date(y.timestamp).getTime()-new Date(v.timestamp).getTime());i(x)}else i([])}catch(g){console.error("Failed to fetch requests",g),s.length===0&&n("Failed to load requests.","error")}finally{d(!1)}}},p=s.filter(g=>g.status==="Pending").length,m=s.filter(g=>g.status==="Completed").length,h=s.length>0?Math.round(m/s.length*100):0;return o.jsxs("div",{className:"max-w-6xl mx-auto space-y-8 animate-fadeIn px-4 md:px-0",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-4",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"text-3xl font-black text-gray-800 flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-indigo-100 text-indigo-700 rounded-xl shrink-0",children:o.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),"Inspection Requests & Tracking"]}),o.jsx("p",{className:"text-gray-500 font-medium mt-1 uppercase tracking-widest text-[10px]",children:"Fleet Request Pipeline Summary"})]}),o.jsx("div",{className:"flex gap-3 w-full md:w-auto",children:r&&o.jsxs("button",{onClick:r,disabled:u,className:`flex-1 md:flex-none px-6 py-3 text-white font-bold rounded-xl shadow-lg transition-all transform flex items-center justify-center gap-2 text-xs uppercase tracking-widest
                                ${u?"bg-slate-300 cursor-not-allowed grayscale":"bg-indigo-600 hover:bg-indigo-700 active:scale-95 shadow-indigo-200"}
                            `,children:[o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M12 4v16m8-8H4"})}),u?"Locked":"New Request"]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-wide",children:"Queue"}),o.jsx("h3",{className:"text-3xl font-black text-amber-500",children:p})]}),o.jsx("div",{className:"w-10 h-10 rounded-xl bg-amber-50 flex items-center justify-center text-amber-500",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),o.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-wide",children:"Finished"}),o.jsx("h3",{className:"text-3xl font-black text-emerald-600",children:m})]}),o.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-50 flex items-center justify-center text-emerald-600",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})})]}),o.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-wide",children:"Fulfillment"}),o.jsxs("h3",{className:"text-3xl font-black text-indigo-600",children:[h,"%"]})]}),o.jsx("div",{className:"w-10 h-10 rounded-xl bg-indigo-50 flex items-center justify-center text-indigo-600",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})]})]}),o.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden",children:o.jsxs("div",{className:"block md:table w-full",children:[o.jsx("div",{className:"bg-gray-50 text-[10px] font-bold text-slate-400 uppercase tracking-[0.2em] border-b border-gray-100 hidden md:table-header-group",children:o.jsxs("div",{className:"md:table-row",children:[o.jsx("div",{className:"md:table-cell px-8 py-5",children:"Status"}),o.jsx("div",{className:"md:table-cell px-8 py-5",children:"Vehicle"}),o.jsx("div",{className:"md:table-cell px-8 py-5",children:"Order Detail"}),o.jsx("div",{className:"md:table-cell px-8 py-5",children:"Personnel"}),o.jsx("div",{className:"md:table-cell px-8 py-5 text-right",children:"Requested"})]})}),o.jsx("div",{className:"block md:table-row-group divide-y divide-gray-100",children:l?o.jsxs("div",{className:"p-12 text-center text-gray-400 flex flex-col items-center",children:[o.jsx("div",{className:"w-8 h-8 border-4 border-gray-200 border-t-indigo-500 rounded-full animate-spin mb-4"}),o.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest",children:"Updating Pipeline..."})]}):s.length===0?o.jsxs("div",{className:"p-16 text-center",children:[o.jsx("h3",{className:"text-gray-800 font-bold mb-1",children:"Queue Empty"}),o.jsx("p",{className:"text-sm text-gray-400",children:"No active inspection requests found."})]}):s.map(g=>o.jsxs("div",{className:"hover:bg-gray-50 transition block md:table-row p-6 md:p-0 relative",children:[o.jsx("div",{className:"md:table-cell md:px-8 md:py-6 block mb-4 md:mb-0",children:g.status==="Completed"?o.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-xl text-[10px] font-bold bg-emerald-50 text-emerald-600 border border-emerald-100 uppercase tracking-widest",children:[o.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})}),"Fulfilled"]}):o.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-xl text-[10px] font-bold bg-amber-50 text-amber-700 border border-amber-100 animate-pulse uppercase tracking-widest",children:[o.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-amber-500"}),"Active"]})}),o.jsxs("div",{className:"md:table-cell md:px-8 md:py-6 block mb-4 md:mb-0",children:[o.jsx("div",{className:"md:hidden text-[9px] font-black text-slate-300 uppercase tracking-widest mb-1",children:"Vehicle Asset"}),o.jsx("div",{className:"font-bold text-gray-800 text-base uppercase",children:g.truck}),o.jsx("div",{className:"text-[10px] text-gray-400 font-bold",children:g.trailer||"Stand-alone Unit"})]}),o.jsxs("div",{className:"md:table-cell md:px-8 md:py-6 block mb-4 md:mb-0",children:[o.jsx("div",{className:"md:hidden text-[9px] font-black text-slate-300 uppercase tracking-widest mb-1",children:"Classification"}),o.jsxs("div",{className:"text-xs font-bold text-gray-700",children:[g.type," Check"]}),o.jsxs("div",{className:`text-[10px] font-black uppercase mt-0.5 tracking-wider ${g.priority==="Critical"||g.priority==="Urgent"||g.priority==="Safety Concern"?"text-red-600":"text-slate-400"}`,children:[g.priority," Priority"]})]}),o.jsxs("div",{className:"md:table-cell md:px-8 md:py-6 block mb-4 md:mb-0",children:[o.jsx("div",{className:"md:hidden text-[9px] font-black text-slate-300 uppercase tracking-widest mb-1",children:"Assigned Resource"}),g.assignedTo&&g.assignedTo!=="Unassigned"?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-7 h-7 rounded-lg bg-slate-100 flex items-center justify-center text-[10px] font-black text-slate-500 border border-slate-200 shadow-sm",children:g.assignedTo.charAt(0).toUpperCase()}),o.jsx("span",{className:"text-gray-600 font-bold text-xs",children:g.assignedTo})]}):o.jsx("span",{className:"text-gray-400 italic text-[11px] font-medium tracking-wide",children:"Pending Dispatch"})]}),o.jsxs("div",{className:"md:table-cell md:px-8 md:py-6 md:text-right block text-slate-400 font-mono text-[11px] pt-4 md:pt-6 border-t md:border-0 border-gray-50",children:[o.jsx("div",{className:"md:hidden text-[9px] font-black text-slate-300 uppercase tracking-widest mb-1",children:"Order Date"}),new Date(g.timestamp).toLocaleDateString(),o.jsx("div",{className:"text-[9px] opacity-60 uppercase font-black",children:new Date(g.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},g.id))})]})})]})},ib=({historyList:e,isLoading:t})=>{const[n,r]=k.useState(!1),[s,i]=k.useState(null),l=k.useMemo(()=>{if(!e.length)return null;const u=e.length,f=e.filter(b=>Number(b.rate)<=2).length,p=e.filter(b=>Number(b.rate)===3).length,m=e.filter(b=>Number(b.rate)>=4).length,h=m/u*100,g=h.toFixed(1),w={},N={},S={"Mechanical & Braking":0,"Tyres & Wheels":0,"Documentation & PPE":0,"Electrical & Lights":0,"Visibility & Body":0,"Fluid Leaks & Environmental":0};e.forEach(b=>{const E=Number(b.rate);if(E<=3&&(w[b.truckNo]=(w[b.truckNo]||0)+1),Object.entries(b).forEach(([T,I])=>{if(I==="Bad"||I==="Needs Attention"){const _=T.toLowerCase();_.includes("brake")||_.includes("mech")||_.includes("fifth")||_.includes("landing")?S["Mechanical & Braking"]++:_.includes("tyre")||_.includes("wheel")||_.includes("nut")?S["Tyres & Wheels"]++:_.includes("road")||_.includes("doc")||_.includes("suit")||_.includes("gear")||_.includes("ppe")||_.includes("manual")?S["Documentation & PPE"]++:_.includes("light")||_.includes("lamp")||_.includes("indica")||_.includes("horn")||_.includes("elec")||_.includes("ignit")?S["Electrical & Lights"]++:_.includes("wind")||_.includes("mirror")||_.includes("screen")||_.includes("cab")||_.includes("body")?S["Visibility & Body"]++:(_.includes("leak")||_.includes("spill")||_.includes("fluid")||_.includes("oil"))&&S["Fluid Leaks & Environmental"]++}}),b.driverName){const T=E===5?10:E===4?5:E===3?-5:-20;N[b.driverName]=(N[b.driverName]||0)+T}});const x=Object.values(S).reduce((b,E)=>b+E,0),v=Object.entries(S).map(([b,E])=>({label:b,count:E,pct:x>0?E/x*100:0})).sort((b,E)=>E.count-b.count),y=Object.entries(N).sort(([,b],[,E])=>E-b).slice(0,3),C=[{label:"Exemplary (5/5)",count:e.filter(b=>Number(b.rate)===5).length,color:"bg-emerald-600"},{label:"Good (4/5)",count:e.filter(b=>Number(b.rate)===4).length,color:"bg-emerald-400"},{label:"Serviceable (3/5)",count:p,color:"bg-amber-400"},{label:"Immediate Action (1-2/5)",count:f,color:"bg-rose-500"}];return{total:u,criticalCount:f,warningCount:p,goodCount:m,passRate:g,passRateNum:h,sortedRisks:v,leaderboard:y,conditionDistribution:C,totalFaults:x}},[e]),d=()=>{l&&(r(!0),setTimeout(()=>{const u=l.passRateNum,f=l.sortedRisks[0];let p="";u>=90?p="The fleet is operating at peak safety compliance.":u>=75?p="Overall fleet health is stable, though minor maintenance trends are emerging.":p="CRITICAL: The fleet safety rating has fallen below acceptable thresholds.";const m=f&&f.count>0?`The systemic analysis identifies '${f.label}' as the primary source of safety downgrades, accounting for ${f.pct.toFixed(0)}% of all recorded faults.`:"No significant systemic failure patterns detected.",h=`EXECUTIVE BRIEFING:
${p} Out of ${l.total} audits, ${l.goodCount} were satisfactory.

SYSTEMIC ANALYSIS:
${m}

STRATEGY:
1. Prioritize preventative maintenance on ${(f==null?void 0:f.label)||"critical systems"}.
2. Reinforce compliance standards for underperforming domains.
3. Review driver pre-trip inspection diligence for high-frequency fault areas.`;i(h),r(!1)},600))};return t?o.jsxs("div",{className:"flex flex-col items-center justify-center py-24 gap-4",children:[o.jsx("div",{className:"w-12 h-12 border-4 border-slate-100 border-t-indigo-600 rounded-full animate-spin"}),o.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Compiling Fleet Intelligence..."})]}):l?o.jsxs("div",{className:"max-w-6xl mx-auto space-y-10 animate-fadeIn font-sans pb-24 px-4 md:px-0",children:[o.jsxs("div",{className:"flex justify-between items-end px-2",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-black text-slate-900 uppercase tracking-tight leading-none",children:"Fleet Insights"}),o.jsx("p",{className:"text-slate-400 text-[10px] font-bold uppercase tracking-[0.3em] mt-3",children:"Safety & Risk Intelligence"})]}),o.jsx("div",{className:"text-right hidden sm:block",children:o.jsx("span",{className:"text-[10px] font-black text-slate-300 uppercase tracking-widest",children:"Analytics Engine v3.0"})})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6",children:[o.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-slate-100 shadow-sm",children:[o.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-4",children:"Total Audits"}),o.jsx("h3",{className:"text-4xl font-black text-slate-900",children:l.total})]}),o.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-slate-100 shadow-sm",children:[o.jsx("p",{className:"text-[10px] font-black text-emerald-500 uppercase tracking-widest mb-4",children:"Pass Rate"}),o.jsxs("h3",{className:"text-4xl font-black text-emerald-600",children:[l.passRate,"%"]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-slate-100 shadow-sm",children:[o.jsx("p",{className:"text-[10px] font-black text-amber-500 uppercase tracking-widest mb-4",children:"Warnings"}),o.jsx("h3",{className:"text-4xl font-black text-amber-600",children:l.warningCount})]}),o.jsxs("div",{className:"bg-rose-50 p-6 rounded-3xl border border-rose-100 shadow-sm",children:[o.jsx("p",{className:"text-[10px] font-black text-rose-500 uppercase tracking-widest mb-4",children:"Grounded"}),o.jsx("h3",{className:"text-4xl font-black text-rose-600",children:l.criticalCount})]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-indigo-900 via-slate-900 to-black p-10 rounded-[2.5rem] text-white shadow-2xl relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-indigo-500/10 rounded-full -mr-32 -mt-32 blur-3xl"}),o.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-center justify-between gap-12",children:[o.jsxs("div",{className:"max-w-md text-center md:text-left",children:[o.jsx("h4",{className:"text-sm font-black text-indigo-300 uppercase tracking-[0.2em] mb-4",children:"Safety Excellence Leaderboard"}),o.jsx("p",{className:"text-slate-400 text-sm font-medium leading-relaxed",children:"Recognizing outstanding safety standards. Points are aggregated from deterministic vehicle health scores."})]}),o.jsxs("div",{className:"flex items-end gap-2 sm:gap-6 pt-10",children:[l.leaderboard[1]&&o.jsxs("div",{className:"flex flex-col items-center group",children:[o.jsx("div",{className:"w-12 h-12 bg-slate-400/20 rounded-full border border-slate-400/30 flex items-center justify-center font-black text-slate-300 mb-2 group-hover:scale-110 transition-transform",children:"2"}),o.jsxs("div",{className:"w-20 sm:w-28 h-20 sm:h-24 bg-gradient-to-t from-slate-400/20 to-slate-400/40 rounded-t-2xl border-x border-t border-slate-400/20 p-4 text-center",children:[o.jsx("p",{className:"text-[8px] font-black text-slate-400 uppercase truncate",children:l.leaderboard[1][0]}),o.jsxs("p",{className:"text-xs font-black text-white mt-1",children:[l.leaderboard[1][1]," pts"]})]})]}),l.leaderboard[0]&&o.jsxs("div",{className:"flex flex-col items-center group",children:[o.jsx("div",{className:"w-16 h-16 bg-amber-500/20 rounded-full border border-amber-500/40 flex items-center justify-center font-black text-amber-400 mb-2 shadow-[0_0_20px_rgba(245,158,11,0.2)] group-hover:scale-110 transition-transform",children:"1"}),o.jsxs("div",{className:"w-24 sm:w-32 h-28 sm:h-36 bg-gradient-to-t from-amber-500/20 to-amber-500/40 rounded-t-2xl border-x border-t border-amber-500/30 p-4 text-center",children:[o.jsx("p",{className:"text-[10px] font-black text-amber-300 uppercase truncate",children:l.leaderboard[0][0]}),o.jsxs("p",{className:"text-lg font-black text-white mt-1",children:[l.leaderboard[0][1]," pts"]}),o.jsx("div",{className:"mt-3 flex justify-center",children:o.jsx("svg",{className:"w-4 h-4 text-amber-400 animate-bounce",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})})]})]}),l.leaderboard[2]&&o.jsxs("div",{className:"flex flex-col items-center group",children:[o.jsx("div",{className:"w-12 h-12 bg-orange-800/20 rounded-full border border-orange-800/30 flex items-center justify-center font-black text-orange-400 mb-2 group-hover:scale-110 transition-transform",children:"3"}),o.jsxs("div",{className:"w-20 sm:w-28 h-16 sm:h-20 bg-gradient-to-t from-orange-800/20 to-orange-800/40 rounded-t-2xl border-x border-t border-orange-800/20 p-4 text-center",children:[o.jsx("p",{className:"text-[8px] font-black text-orange-300 uppercase truncate",children:l.leaderboard[2][0]}),o.jsxs("p",{className:"text-xs font-black text-white mt-1",children:[l.leaderboard[2][1]," pts"]})]})]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"bg-white p-6 sm:p-10 rounded-[2.5rem] border border-slate-100 shadow-sm",children:[o.jsxs("h4",{className:"text-sm font-black text-slate-800 uppercase tracking-widest mb-8 flex items-center gap-2",children:[o.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-500"}),"Asset Condition Profile"]}),o.jsx("div",{className:"space-y-6",children:l.conditionDistribution.map((u,f)=>{const p=(u.count/l.total*100).toFixed(0);return o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-[11px] font-bold text-slate-500 uppercase tracking-tighter",children:[o.jsx("span",{children:u.label}),o.jsxs("span",{className:"text-slate-900",children:[u.count," Units (",p,"%)"]})]}),o.jsx("div",{className:"h-3 bg-slate-50 rounded-lg overflow-hidden border border-slate-100",children:o.jsx("div",{className:`h-full ${u.color} transition-all duration-1000`,style:{width:`${p}%`}})})]},f)})})]}),o.jsxs("div",{className:"bg-slate-900 p-6 sm:p-10 rounded-[2.5rem] text-white shadow-2xl relative overflow-hidden flex flex-col",children:[o.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-500/10 rounded-full -mr-20 -mt-20 blur-3xl"}),o.jsxs("div",{className:"flex justify-between items-start mb-8 relative z-10",children:[o.jsx("h4",{className:"text-sm font-black text-indigo-400 uppercase tracking-widest",children:"Systemic Risk Profile"}),o.jsx("span",{className:"text-[8px] font-black bg-white/10 px-2 py-1 rounded text-slate-400 uppercase tracking-widest",children:"Fault Frequency"})]}),o.jsx("div",{className:"flex-1 space-y-6 relative z-10 overflow-y-auto pr-2 scrollbar-hide",children:l.totalFaults>0?l.sortedRisks.map((u,f)=>o.jsxs("div",{className:"space-y-2 group",children:[o.jsxs("div",{className:"flex justify-between items-end",children:[o.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-300 group-hover:text-white transition-colors",children:u.label}),o.jsxs("p",{className:"text-[10px] font-bold text-indigo-400",children:[u.count," Faults"]})]}),o.jsx("div",{className:"h-2 bg-white/5 rounded-full overflow-hidden border border-white/5",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-600 to-indigo-400 transition-all duration-1000 ease-out",style:{width:`${u.pct}%`}})})]},f)):o.jsx("div",{className:"h-40 flex items-center justify-center",children:o.jsx("p",{className:"text-slate-500 italic text-sm text-center px-6",children:"No systemic safety failures identified in active registry."})})}),o.jsx("p",{className:"text-[8px] text-slate-500 font-bold uppercase tracking-[0.2em] mt-6 border-t border-white/5 pt-4",children:"Root-Cause Intelligence Hub v3.0 (Pattern Logic)"})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white p-8 sm:p-10 rounded-[2.5rem] border border-slate-100 shadow-sm flex flex-col md:flex-row items-center justify-between gap-6",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-black text-lg uppercase tracking-tight leading-none",children:"Management Briefing"}),o.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mt-1",children:"Cross-Fleet Logic Aggregator"})]}),o.jsx("button",{onClick:d,disabled:n,className:"w-full md:w-auto px-8 py-3 bg-slate-900 text-white rounded-xl font-black text-[11px] uppercase tracking-widest hover:bg-black transition-all shadow-lg active:scale-95 disabled:bg-slate-200",children:n?"Analyzing Patterns...":"Generate Executive Brief"})]}),s&&o.jsx("div",{className:"bg-white p-10 rounded-[2.5rem] border border-slate-100 shadow-2xl animate-fadeIn",children:o.jsx("div",{className:"prose prose-slate max-w-none",children:o.jsx("p",{className:"text-slate-700 font-medium whitespace-pre-wrap leading-relaxed text-sm",children:s})})})]})]}):o.jsx("div",{className:"py-24 text-center",children:o.jsx("p",{className:"text-slate-400 font-medium text-sm italic",children:"Insufficient data to generate analytics report."})})},lb=({historyList:e,isLoading:t,onClose:n})=>{const r=k.useMemo(()=>{if(!e.length)return null;const s={};e.forEach(p=>{(!s[p.truckNo]||new Date(p.timestamp)>new Date(s[p.truckNo].timestamp))&&(s[p.truckNo]=p)});const i=Object.values(s),l=i.filter(p=>Number(p.rate)<=2),d=i.filter(p=>Number(p.rate)===3),u=i.filter(p=>Number(p.rate)>=4),f=[...e].sort((p,m)=>new Date(m.timestamp).getTime()-new Date(p.timestamp).getTime()).slice(0,12);return{grounded:l,warning:d,active:u,recentLogs:f,totalAssets:i.length}},[e]);return t?o.jsxs("div",{className:"fixed inset-0 z-[200] bg-slate-950 flex flex-col items-center justify-center gap-6",children:[o.jsx("div",{className:"w-16 h-16 border-4 border-slate-900 border-t-emerald-500 rounded-full animate-spin"}),o.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Waking Operations Monitor..."})]}):r?o.jsxs("div",{className:"fixed inset-0 z-[200] bg-slate-950 text-white overflow-hidden flex flex-col font-sans",children:[o.jsxs("div",{className:"h-20 border-b border-white/5 flex items-center justify-between px-10 shrink-0 bg-slate-900/50 backdrop-blur-md",children:[o.jsxs("div",{className:"flex items-center gap-6",children:[o.jsx("div",{className:"w-10 h-10 bg-indigo-600 rounded-lg flex items-center justify-center font-black text-xl italic shadow-[0_0_20px_rgba(79,70,229,0.4)]",children:"S"}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-black uppercase tracking-tighter leading-none",children:"Fleet Control Center"}),o.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-[0.3em] mt-1",children:"Live Telemetry Interface"})]})]}),o.jsxs("div",{className:"hidden lg:flex gap-10",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-1",children:"Fleet Deployment"}),o.jsx("p",{className:"text-2xl font-black tracking-tight",children:r.totalAssets})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-[9px] font-bold text-emerald-500 uppercase tracking-widest mb-1",children:"Operational"}),o.jsx("p",{className:"text-2xl font-black text-emerald-400 tracking-tight",children:r.active.length})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-[9px] font-bold text-rose-500 uppercase tracking-widest mb-1",children:"Grounded"}),o.jsx("p",{className:"text-2xl font-black text-rose-400 tracking-tight",children:r.grounded.length})]})]}),o.jsxs("button",{onClick:n,className:"px-6 py-2.5 bg-white/5 hover:bg-white/10 border border-white/10 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all flex items-center gap-2 group",children:[o.jsx("svg",{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M15 19l-7-7 7-7"})}),"Exit Monitor"]})]}),o.jsxs("div",{className:"flex-1 grid grid-cols-12 gap-px bg-white/5 overflow-hidden",children:[o.jsxs("div",{className:"col-span-12 md:col-span-3 bg-slate-950 flex flex-col",children:[o.jsx("div",{className:"p-6 border-b border-white/5",children:o.jsxs("h3",{className:"text-xs font-black text-rose-500 uppercase tracking-[0.2em] flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 rounded-full bg-rose-500 animate-ping"}),"Safety Exceptions"]})}),o.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-hide p-4 space-y-3",children:r.grounded.length===0?o.jsx("div",{className:"h-full flex items-center justify-center text-slate-600 text-[10px] font-bold uppercase tracking-widest italic text-center px-4",children:"No critical exceptions detected in active fleet."}):r.grounded.map((s,i)=>o.jsxs("div",{className:"bg-rose-500/10 border border-rose-500/20 rounded-2xl p-5 animate-pulse",children:[o.jsxs("div",{className:"flex justify-between items-start mb-3",children:[o.jsx("span",{className:"text-lg font-black text-white tracking-tighter uppercase",children:s.truckNo}),o.jsx("span",{className:"text-[10px] font-bold text-rose-400 bg-rose-950 px-2 py-0.5 rounded border border-rose-800",children:"GROUNDED"})]}),o.jsxs("p",{className:"text-[10px] text-rose-200/60 font-medium leading-relaxed italic line-clamp-2",children:['"',s.remarks,'"']}),o.jsxs("div",{className:"mt-4 pt-4 border-t border-rose-500/10 flex justify-between items-end",children:[o.jsx("span",{className:"text-[8px] font-bold text-rose-300 uppercase",children:s.inspectedBy}),o.jsx("span",{className:"text-[8px] font-black text-slate-500 uppercase",children:new Date(s.timestamp).toLocaleDateString()})]})]},i))})]}),o.jsxs("div",{className:"hidden md:flex md:col-span-5 bg-slate-900/20 flex-col border-x border-white/5",children:[o.jsxs("div",{className:"p-6 border-b border-white/5 flex justify-between items-center",children:[o.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-[0.2em]",children:"Activity Stream"}),o.jsx("span",{className:"text-[8px] text-indigo-400 font-black animate-pulse uppercase",children:"Syncing Now"})]}),o.jsxs("div",{className:"flex-1 overflow-hidden p-6 relative",children:[o.jsx("div",{className:"space-y-4",children:r.recentLogs.map((s,i)=>o.jsxs("div",{className:"flex items-center gap-6 p-4 bg-white/5 rounded-2xl border border-white/5 hover:bg-white/10 transition-all duration-500 group",children:[o.jsx("div",{className:`w-3 h-3 rounded-full shrink-0 shadow-[0_0_10px_currentColor] ${Number(s.rate)>=4?"text-emerald-500":Number(s.rate)===3?"text-amber-500":"text-rose-500"} bg-current`}),o.jsxs("div",{className:"flex-1 flex items-center justify-between min-w-0",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-black uppercase tracking-tight group-hover:text-indigo-300 transition-colors",children:s.truckNo}),o.jsx("p",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-widest",children:s.inspectedBy})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("p",{className:"text-xs font-black text-slate-300",children:[s.rate,"/5"]}),o.jsx("p",{className:"text-[8px] font-medium text-slate-600 uppercase mt-1",children:new Date(s.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})]},i))}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-slate-950 to-transparent"})]})]}),o.jsxs("div",{className:"hidden lg:flex lg:col-span-4 bg-slate-950 flex flex-col",children:[o.jsx("div",{className:"p-6 border-b border-white/5",children:o.jsx("h3",{className:"text-xs font-black text-indigo-400 uppercase tracking-[0.2em]",children:"Asset Inventory Status"})}),o.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-hide p-6",children:o.jsx("div",{className:"grid grid-cols-2 gap-3",children:[...r.active,...r.warning,...r.grounded].map((s,i)=>o.jsxs("div",{className:"p-3 rounded-xl bg-white/5 border border-white/5 flex items-center justify-between",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("p",{className:"text-[11px] font-black uppercase truncate",children:s.truckNo}),o.jsx("p",{className:"text-[8px] text-slate-500 font-bold uppercase mt-0.5",children:s.location})]}),o.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${Number(s.rate)>=4?"bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.4)]":Number(s.rate)===3?"bg-amber-500 shadow-[0_0_8px_rgba(245,158,11,0.4)]":"bg-rose-500 shadow-[0_0_8px_rgba(244,63,94,0.4)]"}`})]},i))})}),o.jsx("div",{className:"p-6 border-t border-white/5 bg-slate-900/30 text-center",children:o.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:" SCBC Operations Desk 2026"})})]})]})]}):null},ab=[{id:"1",title:"Tire Inspection SOP",category:"SOP",url:"#",description:"Standard protocol for multi-point tire wear and pressure auditing."},{id:"2",title:"Acid Handling Safety",category:"Safety",url:"#",description:"Emergency protocols for sulfuric and hydrochloric acid transport."},{id:"3",title:"Petroleum V2 Guidelines",category:"Manual",url:"#",description:"Detailed walkthrough of the updated Petroleum V2 checklist."},{id:"4",title:"Brake Testing Video",category:"Video",url:"#",description:"Instructional video on conducting static and dynamic brake tests."},{id:"5",title:"PPE Compliance 2026",category:"Safety",url:"#",description:"Latest requirements for protective gear in high-risk zones."},{id:"6",title:"Electronic Logging Manual",category:"Manual",url:"#",description:"Guide for using the electronic on-board recording system."}],cb=()=>{const[e,t]=k.useState(""),[n,r]=k.useState("All"),s=ab.filter(i=>{const l=i.title.toLowerCase().includes(e.toLowerCase())||i.description.toLowerCase().includes(e.toLowerCase()),d=n==="All"||i.category===n;return l&&d});return o.jsxs("div",{className:"max-w-6xl mx-auto space-y-10 animate-fadeIn font-sans pb-24",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-6 px-2",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-black text-slate-900 uppercase tracking-tight leading-none",children:"Resource Vault"}),o.jsx("p",{className:"text-slate-400 text-[10px] font-bold uppercase tracking-[0.3em] mt-3",children:"SOPs, Manuals & Compliance Media"})]}),o.jsx("div",{className:"flex gap-2 w-full md:w-auto overflow-x-auto pb-1 scrollbar-hide",children:["All","SOP","Manual","Safety","Video"].map(i=>o.jsx("button",{onClick:()=>r(i),className:`px-6 py-2 rounded-full text-[10px] font-black uppercase tracking-widest transition-all whitespace-nowrap
                                ${n===i?"bg-indigo-600 text-white shadow-lg shadow-indigo-100":"bg-slate-100 text-slate-500 hover:bg-slate-200"}
                            `,children:i},i))})]}),o.jsxs("div",{className:"relative",children:[o.jsx("svg",{className:"w-5 h-5 absolute left-5 top-1/2 -translate-y-1/2 text-slate-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),o.jsx("input",{type:"text",placeholder:"Search documentation library...",className:"w-full pl-14 pr-6 py-5 bg-white border border-slate-100 rounded-3xl shadow-sm outline-none focus:ring-4 focus:ring-indigo-50 transition-all font-medium text-slate-700",value:e,onChange:i=>t(i.target.value)})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:s.map(i=>o.jsxs("div",{className:"bg-white rounded-[2rem] border border-slate-100 p-8 shadow-sm hover:shadow-xl transition-all group flex flex-col justify-between",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-start mb-6",children:[o.jsx("div",{className:`px-4 py-1 rounded-full text-[9px] font-black uppercase tracking-[0.2em]
                                    ${i.category==="SOP"?"bg-emerald-50 text-emerald-600":i.category==="Video"?"bg-rose-50 text-rose-600":i.category==="Manual"?"bg-blue-50 text-blue-600":"bg-amber-50 text-amber-600"}
                                `,children:i.category}),o.jsx("div",{className:"w-10 h-10 rounded-xl bg-slate-50 flex items-center justify-center text-slate-300 group-hover:bg-indigo-50 group-hover:text-indigo-600 transition-colors",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})})]}),o.jsx("h3",{className:"text-lg font-black text-slate-800 uppercase tracking-tight mb-2 group-hover:text-indigo-600 transition-colors",children:i.title}),o.jsx("p",{className:"text-slate-500 text-xs font-medium leading-relaxed",children:i.description})]}),o.jsxs("a",{href:i.url,target:"_blank",rel:"noopener noreferrer",className:"mt-8 flex items-center justify-between px-6 py-3 bg-slate-50 hover:bg-indigo-600 hover:text-white rounded-xl transition-all text-[10px] font-black uppercase tracking-widest text-slate-500",children:["Open Resource",o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]},i.id))}),s.length===0&&o.jsx("div",{className:"py-20 text-center",children:o.jsx("p",{className:"text-slate-400 font-medium text-sm italic",children:"No resources found matching your search."})})]})},db=({appScriptUrl:e,validationLists:t,onRefresh:n,showToast:r,isLocked:s})=>{const[i,l]=k.useState(""),[d,u]=k.useState(""),[f,p]=k.useState(!1),[m,h]=k.useState(!1),g=k.useRef(null),w=async x=>{const v=x==="truck"?i:d;if(!(!v.trim()||s)){p(!0);try{await fetch(e,{method:"POST",body:JSON.stringify({action:"manage_fleet",type:x,value:v.trim().toUpperCase()}),mode:"no-cors"}),r(`${x==="truck"?"Truck":"Trailer"} added`,"success"),x==="truck"?l(""):u(""),setTimeout(n,1e3)}finally{p(!1)}}},N=()=>{const x=`Truck,Trailer
ABC 123,T-100
XYZ 789,T-200`,v=new Blob([x],{type:"text/csv;charset=utf-8;"}),y=URL.createObjectURL(v),C=document.createElement("a");C.setAttribute("href",y),C.setAttribute("download","fleet_registry_sample.csv"),C.style.visibility="hidden",document.body.appendChild(C),C.click(),document.body.removeChild(C)},S=x=>{var C;const v=(C=x.target.files)==null?void 0:C[0];if(!v||s)return;const y=new FileReader;y.onload=async b=>{var T;const E=(T=b.target)==null?void 0:T.result;if(E){h(!0);try{const I=E.split(/\r?\n/),_=[],A=[];for(let L=1;L<I.length;L++){const M=I[L].trim();if(!M)continue;const[P,R]=M.split(",").map(F=>(F==null?void 0:F.trim().toUpperCase())||"");P&&_.push(P),R&&A.push(R)}if(_.length===0&&A.length===0){r("No data found","warning");return}await fetch(e,{method:"POST",body:JSON.stringify({action:"bulk_manage_fleet",trucks:_,trailers:A}),mode:"no-cors"}),r("Import complete","success"),setTimeout(n,1500)}finally{h(!1),g.current&&(g.current.value="")}}},y.readAsText(v)};return o.jsxs("div",{className:"max-w-6xl mx-auto space-y-12 py-4 px-4 font-sans",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 border-b border-slate-100 pb-8",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-black text-slate-800 uppercase tracking-tight",children:"Fleet Registry"}),o.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-[0.3em] mt-2",children:"Validated Asset Management"})]}),o.jsxs("div",{className:"flex flex-col sm:items-end gap-2 w-full sm:w-auto",children:[o.jsxs("div",{className:"flex flex-wrap gap-2 w-full sm:w-auto",children:[o.jsxs("button",{onClick:N,className:"flex-1 sm:flex-none px-6 py-3 bg-white border border-slate-200 text-slate-600 rounded-xl font-black text-[10px] uppercase tracking-widest transition-all hover:bg-slate-50 active:scale-95 flex items-center justify-center gap-2",children:[o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:o.jsx("path",{d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download Sample"]}),o.jsx("input",{type:"file",accept:".csv",className:"hidden",ref:g,onChange:S}),o.jsx("button",{onClick:()=>{var x;return(x=g.current)==null?void 0:x.click()},disabled:s||m,className:"flex-1 sm:flex-none px-6 py-3 bg-slate-900 text-white rounded-xl font-black text-[10px] uppercase tracking-widest transition-all active:scale-95 disabled:opacity-30 flex items-center justify-center gap-2",children:m?"Processing File...":"Upload Registry CSV"})]}),o.jsx("p",{className:"text-[9px] text-slate-400 font-bold uppercase",children:"Format: Truck,Trailer (No spaces)"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-10",children:[o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",placeholder:"New Truck Reg...",className:"flex-1 p-3 bg-white border border-slate-200 rounded-xl text-xs font-bold uppercase outline-none focus:ring-2 focus:ring-indigo-50",value:i,onChange:x=>l(x.target.value)}),o.jsx("button",{onClick:()=>w("truck"),disabled:f||!i.trim()||s,className:"px-5 py-3 bg-indigo-600 text-white rounded-xl font-bold text-[10px] uppercase tracking-widest disabled:opacity-30",children:"Add"})]}),o.jsxs("div",{className:"bg-slate-50/50 rounded-2xl border border-slate-100 overflow-hidden",children:[o.jsxs("div",{className:"p-4 bg-slate-100/50 border-b border-slate-200/50 flex justify-between",children:[o.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:"Truck List"}),o.jsxs("span",{className:"text-[10px] font-bold text-slate-300",children:[t.trucks.length," Units"]})]}),o.jsx("div",{className:"max-h-[300px] overflow-y-auto divide-y divide-slate-100",children:t.trucks.map((x,v)=>o.jsx("div",{className:"px-6 py-3 text-sm font-bold text-slate-500 hover:text-slate-900",children:x},v))})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",placeholder:"New Trailer ID...",className:"flex-1 p-3 bg-white border border-slate-200 rounded-xl text-xs font-bold uppercase outline-none focus:ring-2 focus:ring-emerald-50",value:d,onChange:x=>u(x.target.value)}),o.jsx("button",{onClick:()=>w("trailer"),disabled:f||!d.trim()||s,className:"px-5 py-3 bg-emerald-600 text-white rounded-xl font-bold text-[10px] uppercase tracking-widest disabled:opacity-30",children:"Add"})]}),o.jsxs("div",{className:"bg-slate-50/50 rounded-2xl border border-slate-100 overflow-hidden",children:[o.jsxs("div",{className:"p-4 bg-slate-100/50 border-b border-slate-200/50 flex justify-between",children:[o.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:"Trailer List"}),o.jsxs("span",{className:"text-[10px] font-bold text-slate-300",children:[t.trailers.length," Units"]})]}),o.jsx("div",{className:"max-h-[300px] overflow-y-auto divide-y divide-slate-100",children:t.trailers.map((x,v)=>o.jsx("div",{className:"px-6 py-3 text-sm font-bold text-slate-500 hover:text-slate-900",children:x},v))})]})]})]})]})},ub=({data:e,settings:t})=>o.jsxs("div",{className:"max-w-[210mm] mx-auto text-sm leading-tight text-gray-900 font-sans p-8 bg-white min-h-[297mm]",children:[o.jsxs("div",{className:"flex flex-col items-center mb-6",children:[o.jsx("div",{className:"flex flex-col items-center justify-center gap-2 mb-6 w-full",children:t.companyLogo?o.jsx("img",{src:t.companyLogo,alt:"Company Logo",className:"h-28 max-w-sm object-contain"}):o.jsx("div",{className:"text-center py-4",children:o.jsx("h1",{className:"text-3xl font-serif font-bold text-gray-900 tracking-wide",children:t.companyName||"Company Name"})})}),o.jsxs("div",{className:"w-full border-2 border-black mt-2",children:[o.jsxs("div",{className:"grid grid-cols-3 divide-x-2 divide-black border-b-2 border-black",children:[o.jsx("div",{className:"p-1.5 pl-2 font-medium text-sm",children:"Doc. No. MNT-F-015"}),o.jsx("div",{className:"p-1.5 pl-2 font-medium text-sm",children:"Revision No.: 01"}),o.jsxs("div",{className:"p-1.5 pl-2 font-medium text-sm",children:["Date/Time: ",new Date(e.timestamp).toLocaleString()]})]}),o.jsx("div",{className:"p-2 text-center font-black text-xl uppercase tracking-wide bg-gray-50",children:"GENERAL VEHICLE CHECKLIST"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-3 mb-6 p-4 border border-gray-300 text-xs",children:[o.jsxs("div",{className:"grid grid-cols-[100px_1fr] gap-2 items-center",children:[o.jsx("span",{className:"font-bold uppercase text-gray-600",children:"Reg No:"}),o.jsx("span",{className:"font-mono font-bold text-base border-b border-gray-300",children:e.truckNo||"N/A"})]}),o.jsxs("div",{className:"grid grid-cols-[100px_1fr] gap-2 items-center",children:[o.jsx("span",{className:"font-bold uppercase text-gray-600",children:"Trailer/Unit:"}),o.jsx("span",{className:"font-mono font-bold text-base border-b border-gray-300",children:e.trailerNo||"N/A"})]}),o.jsxs("div",{className:"grid grid-cols-[100px_1fr] gap-2 items-center",children:[o.jsx("span",{className:"font-bold uppercase text-gray-600",children:"Driver Name:"}),o.jsx("span",{className:"font-medium border-b border-gray-300",children:e.driverName||"N/A"})]}),o.jsxs("div",{className:"grid grid-cols-[100px_1fr] gap-2 items-center",children:[o.jsx("span",{className:"font-bold uppercase text-gray-600",children:"Inspected By:"}),o.jsx("span",{className:"font-medium border-b border-gray-300",children:e.inspectedBy||"N/A"})]}),o.jsxs("div",{className:"grid grid-cols-[100px_1fr] gap-2 items-center",children:[o.jsx("span",{className:"font-bold uppercase text-gray-600",children:"Location:"}),o.jsx("span",{className:"font-medium border-b border-gray-300",children:e.location||"N/A"})]}),o.jsxs("div",{className:"grid grid-cols-[100px_1fr] gap-2 items-center",children:[o.jsx("span",{className:"font-bold uppercase text-gray-600",children:"Odometer:"}),o.jsxs("span",{className:"font-medium border-b border-gray-300",children:[e.odometer||"N/A"," km"]})]})]}),o.jsx("div",{className:"mb-6",children:o.jsx("div",{className:"grid grid-cols-2 gap-x-8 gap-y-0 border-t border-gray-300",children:ur.map((n,r)=>{const s=e[n.id];let i="text-gray-900",l="";return s==="Bad"&&(i="text-red-700 font-bold",l="bg-red-50"),s==="Needs Attention"&&(i="text-amber-700 font-bold",l="bg-amber-50"),s==="Nil"&&(i="text-gray-400 italic"),o.jsxs("div",{className:`flex justify-between items-center border-b border-gray-300 py-1.5 px-2 text-xs ${l} ${r%2===0?"pr-4 border-r border-gray-300":"pl-4"}`,children:[o.jsx("span",{className:"text-gray-800 font-medium",children:n.label}),o.jsx("span",{className:`uppercase tracking-tighter ${i}`,children:s})]},n.id)})})}),o.jsxs("div",{className:"grid grid-cols-2 gap-12 mt-8 border-t-2 border-black pt-6 break-inside-avoid",children:[o.jsxs("div",{className:"text-center",children:[e.driverSignature?o.jsx("img",{src:e.driverSignature,className:"h-12 mx-auto mb-1",alt:"Driver Sig"}):o.jsx("div",{className:"h-12"}),o.jsx("p",{className:"border-t border-gray-400 pt-1 font-bold uppercase text-[10px] tracking-widest text-gray-600",children:"Driver Signature"})]}),o.jsxs("div",{className:"text-center",children:[e.inspectorSignature?o.jsx("img",{src:e.inspectorSignature,className:"h-12 mx-auto mb-1",alt:"Inspector Sig"}):o.jsx("div",{className:"h-12"}),o.jsx("p",{className:"border-t border-gray-400 pt-1 font-bold uppercase text-[10px] tracking-widest text-gray-600",children:"Inspector Signature"})]})]})]}),fb=({data:e,settings:t})=>o.jsxs("div",{className:"max-w-[210mm] mx-auto text-sm leading-tight text-gray-900 font-sans p-8 bg-white min-h-[297mm]",children:[o.jsxs("div",{className:"border border-black mb-6",children:[o.jsxs("div",{className:"grid grid-cols-[120px_1fr_150px] divide-x divide-black border-b border-black",children:[o.jsx("div",{className:"p-2 flex items-center justify-center",children:t.companyLogo?o.jsx("img",{src:t.companyLogo,alt:"Logo",className:"w-20 object-contain"}):o.jsx("span",{className:"font-bold text-xs",children:t.companyName})}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("div",{className:"border-b border-black px-2 py-1 text-xs font-medium",children:"Doc No: MNT  F  002"}),o.jsx("div",{className:"flex-1 flex items-center justify-center p-2",children:o.jsx("h1",{className:"text-xl font-bold uppercase tracking-wider text-center",children:"PETROLEUM TANKER CHECKLIST"})})]}),o.jsxs("div",{className:"text-xs divide-y divide-black",children:[o.jsxs("div",{className:"grid grid-cols-[1fr_80px]",children:[o.jsx("span",{className:"p-1 pl-2 border-r border-black",children:"Initial Issue Date"}),o.jsx("span",{className:"p-1 text-center",children:"03/02/2017"})]}),o.jsxs("div",{className:"grid grid-cols-[1fr_80px]",children:[o.jsx("span",{className:"p-1 pl-2 border-r border-black",children:"Revision Date:"}),o.jsx("span",{className:"p-1 text-center",children:"01/02/2024"})]}),o.jsxs("div",{className:"grid grid-cols-[1fr_80px]",children:[o.jsx("span",{className:"p-1 pl-2 border-r border-black",children:"Revision No."}),o.jsx("span",{className:"p-1 text-center",children:"05"})]}),o.jsxs("div",{className:"grid grid-cols-[1fr_80px]",children:[o.jsx("span",{className:"p-1 pl-2 border-r border-black",children:"Next Revision:"}),o.jsx("span",{className:"p-1 text-center",children:"12/04/2026"})]})]})]}),o.jsx("div",{className:"bg-gray-50 p-4 text-xs font-mono border-b border-black",children:o.jsxs("div",{className:"grid grid-cols-2 gap-y-2 gap-x-8",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"TRUCK #:"})," ",o.jsx("span",{className:"font-bold",children:e.truckNo})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"TRAILER #:"})," ",o.jsx("span",{className:"font-bold",children:e.trailerNo})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"JOB CARD #:"})," ",o.jsx("span",{className:"font-bold",children:e.jobCard})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"DATE/TIME:"})," ",o.jsx("span",{className:"font-bold",children:new Date(e.timestamp).toLocaleString()})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"ODOMETER:"})," ",o.jsx("span",{className:"font-bold",children:e.odometer})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"LOCATION:"})," ",o.jsx("span",{className:"font-bold",children:e.location})]})]})}),o.jsx("div",{className:"p-2 text-[10px] text-center font-medium border-black bg-gray-100 italic",children:"NA = Not Applicable, NI = Not Inspected, Tick to indicate status under Good Order or Needs Attention. If Tick Critical (Bad), The Truck Must Not Leave The Garage Until The Problem Has Been Fixed."})]}),o.jsxs("div",{className:"border border-black text-xs",children:[o.jsxs("div",{className:"grid grid-cols-[30px_1fr_60px_70px_60px_1fr] bg-gray-300 border-b border-black font-bold text-center items-center py-2",children:[o.jsx("span",{children:"No."}),o.jsx("span",{className:"text-left pl-2",children:"ITEM DESCRIPTION"}),o.jsx("span",{children:"Good Order"}),o.jsx("span",{children:"Needs Attn"}),o.jsx("span",{children:"Critical"}),o.jsx("span",{children:"COMMENTS"})]}),Jo.map((n,r)=>{const s=e[n.id],i=s===de.GOOD,l=s===de.ATTENTION,d=s===de.BAD,u=n.label.split(". "),f=u[0]+".",p=u.slice(1).join(". ");return o.jsxs("div",{className:`grid grid-cols-[30px_1fr_60px_70px_60px_1fr] border-b border-gray-400 min-h-[30px] items-center ${r%2===0?"bg-white":"bg-gray-50"}`,children:[o.jsx("span",{className:"text-center font-medium",children:f}),o.jsx("span",{className:"pl-2 border-l border-gray-300 h-full flex items-center py-1",children:p}),o.jsx("span",{className:"border-l border-gray-300 h-full flex items-center justify-center font-bold text-green-600",children:i?"":""}),o.jsx("span",{className:"border-l border-gray-300 h-full flex items-center justify-center font-bold text-amber-600",children:l?"!":""}),o.jsx("span",{className:"border-l border-gray-300 h-full flex items-center justify-center font-bold text-red-600 bg-red-50",children:d?"X":""}),o.jsx("span",{className:"border-l border-gray-300 h-full flex items-center pl-2 italic text-gray-500 py-1",children:d?"CRITICAL FAULT":l?"Check required":""})]},n.id)})]}),o.jsxs("div",{className:"mt-6 border border-black p-2 min-h-[60px]",children:[o.jsx("span",{className:"font-bold underline",children:"Remarks:"})," ",e.remarks]}),o.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-8 text-xs",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between border-b border-gray-400 pb-1",children:[o.jsx("span",{children:"Inspected By:"})," ",o.jsx("span",{className:"font-bold",children:e.inspectedBy})]}),o.jsxs("div",{className:"flex justify-between border-b border-gray-400 pb-1 items-end",children:[o.jsx("span",{children:"Inspector Sign:"}),e.inspectorSignature&&o.jsx("img",{src:e.inspectorSignature,className:"h-8",alt:"Sig"})]}),o.jsxs("div",{className:"flex justify-between border-b border-gray-400 pb-1",children:[o.jsx("span",{children:"Date:"})," ",o.jsx("span",{children:new Date(e.timestamp).toLocaleDateString()})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between border-b border-gray-400 pb-1",children:[o.jsx("span",{children:"Driver Name:"})," ",o.jsx("span",{className:"font-bold",children:e.driverName})]}),o.jsxs("div",{className:"flex justify-between border-b border-gray-400 pb-1 items-end",children:[o.jsx("span",{children:"Driver Sign:"}),e.driverSignature&&o.jsx("img",{src:e.driverSignature,className:"h-8",alt:"Sig"})]}),o.jsxs("div",{className:"flex justify-between border-b border-gray-400 pb-1",children:[o.jsx("span",{children:"Date:"})," ",o.jsx("span",{children:new Date(e.timestamp).toLocaleDateString()})]})]})]})]}),pb=({data:e,settings:t})=>o.jsxs("div",{className:"max-w-[210mm] mx-auto text-sm leading-tight text-gray-900 font-sans p-8 bg-white min-h-[297mm]",children:[o.jsxs("div",{className:"border border-black mb-6",children:[o.jsxs("div",{className:"grid grid-cols-[120px_1fr_150px] divide-x divide-black border-b border-black",children:[o.jsx("div",{className:"p-2 flex items-center justify-center",children:t.companyLogo?o.jsx("img",{src:t.companyLogo,alt:"Logo",className:"w-20 object-contain"}):o.jsx("span",{className:"font-bold text-xs",children:t.companyName})}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("div",{className:"border-b border-black px-2 py-1 text-xs font-medium",children:"Doc No: MNT  F  002"}),o.jsx("div",{className:"flex-1 flex items-center justify-center p-2",children:o.jsx("h1",{className:"text-xl font-bold uppercase tracking-wider text-center",children:"PETROLEUM TANKER CHECKLIST"})})]}),o.jsxs("div",{className:"text-xs divide-y divide-black",children:[o.jsxs("div",{className:"grid grid-cols-[1fr_80px]",children:[o.jsx("span",{className:"p-1 pl-2 border-r border-black",children:"Initial Issue Date"}),o.jsx("span",{className:"p-1 text-center",children:"03/02/2017"})]}),o.jsxs("div",{className:"grid grid-cols-[1fr_80px]",children:[o.jsx("span",{className:"p-1 pl-2 border-r border-black",children:"Revision Date:"}),o.jsx("span",{className:"p-1 text-center",children:"15/03/2022"})]}),o.jsxs("div",{className:"grid grid-cols-[1fr_80px]",children:[o.jsx("span",{className:"p-1 pl-2 border-r border-black",children:"Revision No."}),o.jsx("span",{className:"p-1 text-center",children:"05"})]}),o.jsxs("div",{className:"grid grid-cols-[1fr_80px]",children:[o.jsx("span",{className:"p-1 pl-2 border-r border-black",children:"Next Review Date:"}),o.jsx("span",{className:"p-1 text-center",children:"15/04/2025"})]})]})]}),o.jsx("div",{className:"bg-gray-50 p-4 text-xs font-mono border-b border-black",children:o.jsxs("div",{className:"grid grid-cols-2 gap-y-2 gap-x-8",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"TRUCK #:"})," ",o.jsx("span",{className:"font-bold",children:e.truckNo})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"TRAILER #:"})," ",o.jsx("span",{className:"font-bold",children:e.trailerNo})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"JOB CARD #:"})," ",o.jsx("span",{className:"font-bold",children:e.jobCard})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"DATE/TIME:"})," ",o.jsx("span",{className:"font-bold",children:new Date(e.timestamp).toLocaleString()})]})]})}),o.jsxs("div",{className:"p-2 text-[10px] text-center font-bold border-black bg-gray-100",children:["C = Compliant, NC = Non-Compliant, NA = Not Applicable, NI = Not Inspected (Tick Accordingly)",o.jsx("br",{}),"Critical = Do Not Release, Non-Critical = Waiver Applicable"]})]}),o.jsxs("div",{className:"border border-black text-xs mb-8",children:[o.jsxs("div",{className:"grid grid-cols-[30px_1fr_30px_30px_30px_30px_1fr] bg-gray-300 border-b border-black font-bold text-center items-center py-2",children:[o.jsx("span",{children:"No."}),o.jsx("span",{className:"text-left pl-2",children:"ITEM DESCRIPTION"}),o.jsx("span",{children:"C"}),o.jsx("span",{children:"NC"}),o.jsx("span",{children:"NI"}),o.jsx("span",{children:"NA"}),o.jsx("span",{children:"COMMENTS"})]}),Ko.map((n,r)=>{const s=e[n.id],i=s===de.GOOD,l=s===de.BAD,d=s===de.NIL,u=s===de.ATTENTION,f=n.label.split(". "),p=f[0],m=f.slice(1).join(". ");let h=null;return n.id==="petro2_1"&&(h="PRIME MOVER"),n.id==="petro2_16"&&(h="TRAILER/TANKS"),n.id==="petro2_33"&&(h="DRIVER"),n.id==="petro2_38"&&(h="SAFETY & WARNING SIGNS"),n.id==="petro2_45"&&(h="LICENCE & MANDATORY DOCUMENTS"),o.jsxs(eo.Fragment,{children:[h&&o.jsx("div",{className:"grid grid-cols-[1fr] bg-gray-200 border-b border-black font-bold px-2 py-1 text-center border-t-2 border-t-black",children:h}),o.jsxs("div",{className:`grid grid-cols-[30px_1fr_30px_30px_30px_30px_1fr] border-b border-gray-400 min-h-[30px] items-stretch ${r%2===0?"bg-white":"bg-gray-50"}`,children:[o.jsx("span",{className:"text-center font-medium py-1 border-r border-gray-300 flex items-center justify-center",children:p}),o.jsx("span",{className:"pl-2 border-r border-gray-300 flex items-center py-1",children:m}),o.jsx("span",{className:"border-r border-gray-300 flex items-center justify-center font-bold text-black",children:i?"":""}),o.jsx("span",{className:"border-r border-gray-300 flex items-center justify-center font-bold text-black",children:l?"":""}),o.jsx("span",{className:"border-r border-gray-300 flex items-center justify-center font-bold text-black",children:d?"":""}),o.jsx("span",{className:"border-r border-gray-300 flex items-center justify-center font-bold text-black",children:u?"":""}),o.jsx("span",{className:"flex items-center pl-2 italic text-gray-500 py-1",children:l?"NON-COMPLIANT":u?"N/A":""})]})]},n.id)})]}),o.jsxs("div",{className:"mt-6 border border-black p-2 min-h-[60px]",children:[o.jsx("span",{className:"font-bold underline",children:"Remarks:"})," ",e.remarks]}),o.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-8 text-xs",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between border-b border-gray-400 pb-1",children:[o.jsx("span",{children:"Inspected By:"})," ",o.jsx("span",{className:"font-bold",children:e.inspectedBy})]}),o.jsxs("div",{className:"flex justify-between border-b border-gray-400 pb-1 items-end",children:[o.jsx("span",{children:"Inspector Sign:"}),e.inspectorSignature&&o.jsx("img",{src:e.inspectorSignature,className:"h-8",alt:"Sig"})]}),o.jsxs("div",{className:"flex justify-between border-b border-gray-400 pb-1",children:[o.jsx("span",{children:"Date:"})," ",o.jsx("span",{children:new Date(e.timestamp).toLocaleDateString()})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between border-b border-gray-400 pb-1",children:[o.jsx("span",{children:"Driver Name:"})," ",o.jsx("span",{className:"font-bold",children:e.driverName})]}),o.jsxs("div",{className:"flex justify-between border-b border-gray-400 pb-1 items-end",children:[o.jsx("span",{children:"Driver Sign:"}),e.driverSignature&&o.jsx("img",{src:e.driverSignature,className:"h-8",alt:"Sig"})]}),o.jsxs("div",{className:"flex justify-between border-b border-gray-400 pb-1",children:[o.jsx("span",{children:"Date:"})," ",o.jsx("span",{children:new Date(e.timestamp).toLocaleDateString()})]})]})]})]}),mb=({data:e,settings:t})=>o.jsxs("div",{className:"max-w-[210mm] mx-auto text-sm leading-tight text-gray-900 font-sans p-8 bg-white min-h-[297mm]",children:[o.jsx("div",{className:"border-2 border-black mb-4",children:o.jsxs("div",{className:"grid grid-cols-[120px_1fr_150px] divide-x-2 divide-black border-b-2 border-black",children:[o.jsx("div",{className:"p-2 flex items-center justify-center",children:t.companyLogo?o.jsx("img",{src:t.companyLogo,alt:"Logo",className:"w-24 object-contain"}):o.jsx("span",{className:"font-bold text-xs",children:t.companyName})}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("div",{className:"border-b-2 border-black px-2 py-1 text-xs font-medium",children:"Doc No: MNT  F  013"}),o.jsx("div",{className:"flex-1 flex items-center justify-center p-2 bg-gray-50",children:o.jsx("h1",{className:"text-xl font-black uppercase tracking-wider text-center",children:"ACID TANKER CHECKLIST"})})]}),o.jsxs("div",{className:"text-xs divide-y divide-black",children:[o.jsxs("div",{className:"grid grid-cols-[1fr_80px]",children:[o.jsx("span",{className:"p-1 pl-2 border-r border-black font-semibold",children:"Initial Issue Date"}),o.jsx("span",{className:"p-1 text-center",children:"03/02/2017"})]}),o.jsxs("div",{className:"grid grid-cols-[1fr_80px]",children:[o.jsx("span",{className:"p-1 pl-2 border-r border-black font-semibold",children:"Revision Date:"}),o.jsx("span",{className:"p-1 text-center",children:"15/03/2022"})]}),o.jsxs("div",{className:"grid grid-cols-[1fr_80px]",children:[o.jsx("span",{className:"p-1 pl-2 border-r border-black font-semibold",children:"Revision No."}),o.jsx("span",{className:"p-1 text-center",children:"05"})]}),o.jsxs("div",{className:"grid grid-cols-[1fr_80px]",children:[o.jsx("span",{className:"p-1 pl-2 border-r border-black font-semibold",children:"Next Revision:"}),o.jsx("span",{className:"p-1 text-center",children:"15/03/2023"})]})]})]})}),o.jsxs("div",{className:"mb-4 text-xs font-mono",children:[o.jsxs("div",{className:"flex flex-wrap gap-x-8 gap-y-2 mb-2",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("span",{children:"Horse #:"})," ",o.jsx("span",{className:"font-bold border-b border-gray-400 min-w-[100px]",children:e.truckNo})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("span",{children:"Trailer #:"})," ",o.jsx("span",{className:"font-bold border-b border-gray-400 min-w-[100px]",children:e.trailerNo})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("span",{children:"Job Card #:"})," ",o.jsx("span",{className:"font-bold border-b border-gray-400 min-w-[100px]",children:e.jobCard})]})]}),o.jsxs("div",{className:"flex flex-wrap gap-x-8 gap-y-2",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("span",{children:"Location:"})," ",o.jsx("span",{className:"font-bold border-b border-gray-400 min-w-[150px]",children:e.location})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("span",{children:"Inspection Date/Time:"})," ",o.jsx("span",{className:"font-bold border-b border-gray-400 min-w-[150px]",children:new Date(e.timestamp).toLocaleString()})]})]})]}),o.jsxs("div",{className:"border-2 border-black text-xs",children:[o.jsxs("div",{className:"grid grid-cols-[40px_1fr_120px] bg-white border-b-2 border-black font-bold items-center",children:[o.jsx("span",{className:"text-center py-2 border-r border-black",children:"S/N"}),o.jsx("span",{className:"text-left pl-2 py-2 border-r border-black",children:"ITEM"}),o.jsx("span",{className:"pl-2 py-2",children:"COMMENT"})]}),["PPE","VEHICLE","SPILL_KIT","DOCUMENTATION"].map(n=>{let r="",s=[];return n==="PPE"?(r="A. Personal Protective Equipment (PPE)",s=wn.filter(i=>i.category.includes("Personal"))):n==="VEHICLE"?(r="B. Vehicle (Horse & Trailer)",s=wn.filter(i=>i.category.includes("Vehicle"))):n==="SPILL_KIT"?(r="C. Spill Kit",s=wn.filter(i=>i.category.includes("Spill"))):n==="DOCUMENTATION"&&(r="D. Documentation",s=wn.filter(i=>i.category.includes("Documentation"))),o.jsxs(eo.Fragment,{children:[o.jsx("div",{className:"grid grid-cols-[1fr] border-b border-black bg-gray-100 font-bold px-2 py-1",children:r}),s.map((i,l)=>{const d=e[i.id],u=i.label.split(". "),f=u[0],p=u.slice(1).join(". ");let m="";return d===de.GOOD?m="text-green-700 font-bold":d===de.BAD?m="text-red-700 font-bold bg-red-50":d===de.ATTENTION&&(m="text-amber-700 font-bold bg-amber-50"),o.jsxs("div",{className:"grid grid-cols-[40px_1fr_120px] border-b border-black items-stretch",children:[o.jsx("span",{className:"text-center py-1 border-r border-black flex items-center justify-center font-semibold",children:f}),o.jsx("span",{className:"pl-2 py-1 border-r border-black flex items-center",children:p}),o.jsx("span",{className:`pl-2 py-1 flex items-center ${m}`,children:d||"-"})]},i.id)})]},n)})]}),o.jsxs("div",{className:"mt-4 text-xs space-y-4",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("span",{className:"font-semibold",children:"Remarks:"}),o.jsx("span",{className:"border-b border-black flex-1 border-dashed",children:e.remarks})]}),o.jsxs("div",{className:"flex gap-2 items-center",children:[o.jsx("span",{className:"font-semibold w-24",children:"Inspector:"}),o.jsx("span",{className:"border-b border-black flex-1 border-dashed",children:e.inspectedBy})]}),o.jsxs("div",{className:"flex gap-2 items-end",children:[o.jsx("span",{className:"font-semibold w-24",children:"Inspector Sig:"}),o.jsx("div",{className:"border-b border-black flex-1 border-dashed h-12",children:e.inspectorSignature&&o.jsx("img",{src:e.inspectorSignature,className:"h-full object-contain"})})]}),o.jsxs("div",{className:"flex gap-2 items-center",children:[o.jsx("span",{className:"font-semibold w-24",children:"Driver:"}),o.jsx("span",{className:"border-b border-black flex-1 border-dashed",children:e.driverName})]}),o.jsxs("div",{className:"flex gap-2 items-end",children:[o.jsx("span",{className:"font-semibold w-24",children:"Driver Sig:"}),o.jsx("div",{className:"border-b border-black flex-1 border-dashed h-12",children:e.driverSignature&&o.jsx("img",{src:e.driverSignature,className:"h-full object-contain"})})]})]}),o.jsxs("div",{className:"mt-6 text-xs",children:[o.jsx("p",{className:"font-bold mb-2",children:"Pictures of Damage/Broken/Disfigured etc.:"}),o.jsx("div",{className:"h-32 border border-black flex items-center justify-center bg-gray-50 mb-4",children:e.photoDamage?o.jsx("img",{src:e.photoDamage,className:"h-full object-contain"}):o.jsx("span",{className:"text-gray-400",children:"No damage photo"})}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-bold mb-1",children:"Front Picture:"}),o.jsx("div",{className:"h-32 border border-black flex items-center justify-center bg-gray-50",children:e.photoFront?o.jsx("img",{src:e.photoFront,className:"h-full object-contain"}):o.jsx("span",{className:"text-gray-400",children:"No photo"})})]}),o.jsxs("div",{children:[o.jsx("p",{className:"font-bold mb-1",children:"LS Picture:"}),o.jsx("div",{className:"h-32 border border-black flex items-center justify-center bg-gray-50",children:e.photoLS?o.jsx("img",{src:e.photoLS,className:"h-full object-contain"}):o.jsx("span",{className:"text-gray-400",children:"No photo"})})]}),o.jsxs("div",{children:[o.jsx("p",{className:"font-bold mb-1",children:"BS Picture:"}),o.jsx("div",{className:"h-32 border border-black flex items-center justify-center bg-gray-50",children:e.photoBack?o.jsx("img",{src:e.photoBack,className:"h-full object-contain"}):o.jsx("span",{className:"text-gray-400",children:"No photo"})})]}),o.jsxs("div",{children:[o.jsx("p",{className:"font-bold mb-1",children:"RS Picture:"}),o.jsx("div",{className:"h-32 border border-black flex items-center justify-center bg-gray-50",children:e.photoRS?o.jsx("img",{src:e.photoRS,className:"h-full object-contain"}):o.jsx("span",{className:"text-gray-400",children:"No photo"})})]})]})]})]}),hb=()=>{const{currentUser:e,setCurrentUser:t,handleLogin:n,handleLogout:r,sessionExpired:s,setSessionExpired:i}=nx(),{settings:l,setSettings:d,appScriptUrl:u,setAppScriptUrl:f,isSavingSettings:p,handleSaveSettings:m,fetchSystemSettings:h}=rx(),{subscription:g,history:w,refreshSubscription:N}=ax(u,e),[S,x]=k.useState("overview"),[v,y]=k.useState("dashboard"),[C,b]=k.useState(!1),[E,T]=k.useState(null),[I,_]=k.useState(!1),[A,L]=k.useState(!1),[M,P]=k.useState(!1),[R,F]=k.useState(null),[q,J]=k.useState(null),[j,H]=k.useState(null),[W,Z]=k.useState(!1),[B,re]=k.useState(null),[ae,oe]=k.useState(!1),{historyList:ne,isLoadingHistory:z,validationLists:_e,stats:ft,fetchHistory:ze}=ix(u,S,e);k.useEffect(()=>{e&&!e.needsSetup&&(x("overview"),y("dashboard"))},[e==null?void 0:e.username,e==null?void 0:e.needsSetup]);const Qe=k.useMemo(()=>{const $=(e==null?void 0:e.role)==="SuperAdmin",fe=g?g.status==="Expired"||g.daysRemaining<=0:!1,be=l.maintenanceMode===!0;return $?{isLocked:!1,reason:null}:be?{isLocked:!0,reason:"maintenance"}:fe?{isLocked:!0,reason:"license"}:{isLocked:!1,reason:null}},[g,l.maintenanceMode,e==null?void 0:e.role]),Se=Qe.isLocked;k.useEffect(()=>{window.isSubscriptionLocked=Se},[Se]);const ie=($,fe)=>{T({message:$,type:fe}),setTimeout(()=>T(null),4e3)};k.useEffect(()=>{s==="idle"?ie("Session expired due to inactivity.","warning"):s==="max_duration"&&ie("Session limit reached. Log in again.","info"),s&&i(null)},[s]);const{submissionStatus:Ja,setSubmissionStatus:un,addToQueue:Ka}=lx(u,ie,()=>ze(!0)),oi=async $=>{var fe;if($.startsWith("support:info:")){const be=$.replace("support:info:","");H({subject:`Inquiry: ${be} Module`,description:`I would like to request more information about integrating the ${be} module into my current workflow. This module is not yet part of my application access.`}),x("support"),y("dashboard");return}if($.startsWith("request:start_inspection")){if(Se){ie("Action Restricted: System is in View-Only mode.","error");return}const be=$.split("|"),Bt=(fe=be[1])==null?void 0:fe.toLowerCase(),Mn=be[2],ai=be[3],ci=be[4],vr=be[5];let Te="general";Bt==="petroleum"?Te="petroleum":Bt==="petroleum_v2"?Te="petroleum_v2":Bt==="acid"&&(Te="acid"),x(Te),li(Te,{truckNo:Mn,trailerNo:ai,remarks:`Requested by ${ci}: ${vr}`,requestId:be[0].split("-")[1]});return}$!=="support"&&H(null),x($),y("dashboard")},us=$=>{if(Se){ie("Action Restricted: System is in View-Only mode.","error");return}const fe=`sc_draft_${$}`;localStorage.getItem(fe)?(re($),oe(!0),Z(!0)):li()},{notifications:Ya,handleMarkNotificationRead:oh,handleDismissNotification:ih,handleClearAllNotifications:lh,handleGlobalAcknowledge:ah}=sx(u,e,ie),[ch,Qa]=k.useState(!1),[Rn,dh]=k.useState(null),[uh,Xa]=k.useState(ad),ii=(e==null?void 0:e.role)==="Admin"||(e==null?void 0:e.role)==="SuperAdmin",fh=(e==null?void 0:e.role)==="SuperAdmin",li=($,fe)=>{if(Se){ie("RESTRICTED: View-Only mode active.","error");return}F(null),J(null),Xa({...ad,timestamp:new Date().toISOString(),inspectedBy:(e==null?void 0:e.name)||"",...fe}),y("form")},ph=()=>{if(!B)return;const $=`sc_draft_${B}`,fe=localStorage.getItem($);fe&&(Xa(JSON.parse(fe)),x(B),y("form")),Z(!1)},mh=()=>{B&&(localStorage.removeItem(`sc_draft_${B}`),x(B),li(),Z(!1))},hh=$=>{localStorage.setItem(`sc_draft_${S}`,JSON.stringify($)),y("dashboard")},gh=()=>y("dashboard"),xh=async $=>{if(Se){ie("RESTRICTED: View-Only mode. Submission blocked.","error");return}if(!u){ie("Server URL not configured","error");return}un("submitting"),F($),J(null);let fe="General",be=cm,Bt="General Vehicle Inspection",Mn=ur;S==="petroleum"?(fe="Petroleum",be=dm,Bt="Petroleum Tanker Inspection",Mn=Jo):S==="petroleum_v2"?(fe="Petroleum_V2",be=um,Bt="Petroleum Tanker Inspection V2",Mn=Ko):S==="acid"&&(fe="Acid",be=fm,Bt="Acid Tanker Inspection",Mn=wn);const ai=be.map(Te=>$[Te]!==void 0?$[Te]:""),ci={title:Bt,timestamp:$.timestamp,truckNo:$.truckNo,trailerNo:$.trailerNo,jobCard:$.jobCard,location:$.location,odometer:$.odometer,inspectedBy:$.inspectedBy,driverName:$.driverName,remarks:$.remarks,rate:$.rate,signatures:{inspector:$.inspectorSignature,driver:$.driverSignature},photos:{front:$.photoFront,ls:$.photoLS,rs:$.photoRS,back:$.photoBack,damage:$.photoDamage},items:Mn.map(Te=>({label:Te.label,category:Te.category,status:$[Te.id]||"N/A"})),companyName:l.companyName,companyLogo:l.companyLogo},vr={action:"create",sheet:fe,headers:be,row:ai,requestId:$.requestId||null,reportData:ci};if(!navigator.onLine){Ka(vr),localStorage.removeItem(`sc_draft_${S}`),un("offline_saved"),setTimeout(()=>{un("idle"),y("dashboard")},3500);return}try{await fetch(u,{method:"POST",body:JSON.stringify(vr),mode:"no-cors"}),un("success"),localStorage.removeItem(`sc_draft_${S}`);try{const Te=await NS($);J(Te)}catch{J("AI analysis skipped due to connectivity or processing error.")}ze(!0)}catch(Te){console.error("Submission error",Te),Ka(vr),localStorage.removeItem(`sc_draft_${S}`),un("offline_saved"),setTimeout(()=>{un("idle"),y("dashboard")},3500)}},vh=async $=>{if(Se){ie("RESTRICTED: View-Only mode. Requests disabled.","error");return}if(u)try{await fetch(u,{method:"POST",body:JSON.stringify({action:"request_inspection",requester:e==null?void 0:e.name,role:e==null?void 0:e.role,...$}),mode:"no-cors"}),ie("Inspection Request submitted successfully","success")}catch{ie("Failed to submit request","error")}},fn=$=>{dh($),Qa(!0)},yh=$=>{const fe={...$,needsSetup:!1};t(fe),localStorage.setItem("safetyCheck_user",JSON.stringify(fe)),x("overview"),y("dashboard"),ie("Identity verified. Welcome aboard!","success"),L(!0)},wh=async()=>{P(!0);try{await h(u,!0),ie("System status updated.","info")}finally{P(!1)}},Nh=S==="overview";return e?e&&e.needsSetup?o.jsx(IS,{user:e,appScriptUrl:u,onComplete:yh,onLogout:r}):o.jsxs("div",{className:"min-h-screen bg-white font-sans text-gray-900 relative",children:[o.jsx(bS,{status:Ja,onClose:()=>{un("idle"),y("dashboard")},onViewReport:()=>R&&fn(R),aiAnalysis:q}),E&&o.jsx(qu,{message:E.message,type:E.type,onClose:()=>T(null)}),A&&o.jsx(AS,{onComplete:()=>L(!1)}),C&&o.jsx(CS,{user:e,settings:l,appScriptUrl:u,onClose:()=>b(!1),showToast:ie,onUpdateSuccess:$=>t($),onLogout:()=>{b(!1),r()}}),o.jsx(TS,{isOpen:I,onClose:()=>_(!1),onSubmit:vh,validationLists:_e,currentUserRole:e.role}),o.jsx(kS,{isOpen:W,onClose:()=>Z(!1),onStartNew:mh,onResume:ph,hasDraft:ae,moduleName:B||""}),o.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[o.jsxs("div",{className:"no-print",children:[l.maintenanceMode&&o.jsxs("div",{className:"bg-amber-600 px-4 py-3 flex flex-col sm:flex-row items-center justify-center gap-2 sm:gap-6 text-white shadow-lg relative z-[101]",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center animate-pulse",children:o.jsx("svg",{className:"w-5 h-5 text-amber-100",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),o.jsxs("div",{className:"text-center sm:text-left",children:[o.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.2em] mb-1",children:"System Maintenance Mode Active"}),o.jsx("p",{className:"text-[11px] font-medium text-amber-5 text-amber-50 leading-tight",children:l.maintenanceMessage||"Restricted view-only mode enabled."})]})]}),o.jsxs("button",{onClick:wh,disabled:M,className:"px-4 py-1.5 bg-white/10 hover:bg-white/20 border border-white/30 rounded-lg text-[9px] font-black uppercase tracking-widest transition-all flex items-center gap-2",children:[M?o.jsxs("svg",{className:"animate-spin h-3 w-3",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):null,M?"Checking...":"Check Status"]})]}),o.jsx(_S,{subscription:g,user:e,onManage:()=>x("maintenance")})]}),o.jsxs("header",{className:"bg-white border-b border-gray-100 sticky top-0 z-40 px-4 py-2 flex items-center justify-between h-14 no-print",children:[o.jsx("div",{className:"flex items-center gap-1 sm:gap-2",children:!Nh&&o.jsxs("button",{onClick:()=>{x("overview"),y("dashboard")},title:"Back to Overview",className:"p-2 text-slate-900 hover:bg-slate-50 rounded-lg transition-all flex items-center group",children:[o.jsx("svg",{className:"w-5 h-5 transition-transform group-hover:-translate-x-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),o.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest ml-1 hidden sm:inline",children:"Back"})]})}),o.jsxs("button",{onClick:()=>{x("overview"),y("dashboard")},className:"flex flex-col items-center hover:opacity-70 transition-opacity absolute left-1/2 -translate-x-1/2",children:[o.jsx("h1",{className:"text-lg font-bold text-slate-900 tracking-tight leading-none uppercase",children:l.companyName||"SafetyCheck Pro"}),o.jsx("span",{className:"text-[7px] font-bold text-slate-400 tracking-[0.3em] mt-1 uppercase",children:"Fleet Portal"})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(ES,{id:"notification-bell",notifications:Ya,onMarkAsRead:$=>oh($,oi),onDismiss:ih,onClearAll:lh,onAcknowledge:ah,canAcknowledge:ii}),o.jsx("button",{id:"profile-trigger",onClick:()=>b(!0),className:`p-2 transition-colors ${C?"text-slate-900 bg-slate-50 rounded-full":"text-slate-400 hover:text-slate-600"}`,children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})]})]}),Se&&o.jsxs("div",{className:"bg-amber-100 border-b border-amber-200 px-4 py-2 flex items-center justify-center gap-3 animate-pulse no-print",children:[o.jsx("svg",{className:"w-4 h-4 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),o.jsx("span",{className:"text-[10px] font-black text-amber-800 uppercase tracking-widest",children:Qe.reason==="maintenance"?"System in Maintenance Mode":"View-Only Mode - License Expired"})]}),o.jsx("main",{className:"flex-1 p-4 md:p-8 w-full max-w-7xl mx-auto no-print",children:v==="form"?o.jsx(eb,{initialData:uh,activeModule:S,validationLists:_e,settings:l,onSaveDraft:hh,onExit:gh,onSubmit:xh,submissionStatus:Ja,onViewReport:fn}):o.jsxs("div",{className:"animate-fadeIn",children:[S==="overview"&&o.jsx(ZS,{appScriptUrl:u,onNavigate:oi,userRole:e.role,historyList:ne,isLoading:z,onViewReport:fn,isMaintenanceActive:l.maintenanceMode,pendingAlertsCount:Ya.filter($=>!$.read&&$.type==="critical").length,isLocked:Se}),S==="analytics"&&o.jsx(ib,{historyList:ne,isLoading:z}),S==="fleet_wall"&&o.jsx(lb,{historyList:ne,isLoading:z,onClose:()=>oi("overview")}),S==="library"&&o.jsx(cb,{}),S==="settings"&&ii&&o.jsx(PS,{settings:l,setSettings:d,appScriptUrl:u,setAppScriptUrl:f,handleSaveSettings:m,isSavingSettings:p,showToast:ie,user:e}),S==="maintenance"&&fh&&o.jsx(sb,{user:e,appScriptUrl:u,settings:l,onSettingsUpdate:$=>d(fe=>({...fe,...$})),showToast:ie,onRefreshSubscription:N,subscription:g,history:w}),S==="general"&&o.jsx(LS,{userRole:e.role,stats:ft,startNewInspection:()=>us("general"),fetchHistory:ze,isLoadingHistory:z,historyList:ne,onViewReport:fn,onPrint:()=>{},isLocked:Se,lockReason:Qe.reason,maintenanceMessage:l.maintenanceMessage}),S==="petroleum"&&o.jsx(DS,{userRole:e.role,stats:ft,startNewInspection:()=>us("petroleum"),fetchHistory:ze,isLoadingHistory:z,historyList:ne,onViewReport:fn,onPrint:()=>{},isLocked:Se,lockReason:Qe.reason,maintenanceMessage:l.maintenanceMessage}),S==="petroleum_v2"&&o.jsx(FS,{userRole:e.role,stats:ft,startNewInspection:()=>us("petroleum_v2"),fetchHistory:ze,isLoadingHistory:z,historyList:ne,onViewReport:fn,onPrint:()=>{},isLocked:Se,lockReason:Qe.reason,maintenanceMessage:l.maintenanceMessage}),S==="acid"&&o.jsx(US,{userRole:e.role,stats:ft,startNewInspection:()=>us("acid"),fetchHistory:ze,isLoadingHistory:z,historyList:ne,onViewReport:fn,onPrint:()=>{},isLocked:Se,lockReason:Qe.reason,maintenanceMessage:l.maintenanceMessage}),S==="users"&&ii&&o.jsx(VS,{currentUser:e,appScriptUrl:u,showToast:ie,validationLists:_e,settings:l}),S==="support"&&o.jsx(rb,{appScriptUrl:u,currentUser:e,showToast:ie,settings:l,validationLists:_e,prefillData:j,onPrefillConsumed:()=>H(null)}),S==="track_requests"&&o.jsx(ob,{appScriptUrl:u,currentUser:e,showToast:ie,onRequestNew:()=>_(!0)}),S==="registry"&&o.jsx(db,{appScriptUrl:u,validationLists:_e,onRefresh:()=>ze(!0),showToast:ie,isLocked:Se})]})}),o.jsx("footer",{className:"mt-auto py-6 border-t border-slate-50 text-center no-print",children:o.jsx("span",{className:"text-[9px] font-bold text-slate-300 uppercase tracking-[0.2em]",children:"scbc@2026"})})]}),ch&&Rn&&o.jsx(SS,{onClose:()=>Qa(!1),onPrint:()=>window.print(),title:`Report_${Rn.id||"History"}`,children:S==="petroleum"?o.jsx(fb,{data:Rn,settings:l}):S==="petroleum_v2"?o.jsx(pb,{data:Rn,settings:l}):S==="acid"?o.jsx(mb,{data:Rn,settings:l}):o.jsx(ub,{data:Rn,settings:l})})]}):o.jsxs(o.Fragment,{children:[o.jsx(RS,{}),E&&o.jsx(qu,{message:E.message,type:E.type,onClose:()=>T(null)}),o.jsx(MS,{onLogin:n,appScriptUrl:u,setAppScriptUrl:f,settings:l})]})},Ju=document.getElementById("root");Ju&&am(Ju).render(o.jsx(hb,{}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("./sw.js").then(e=>{console.log("ServiceWorker registration successful with scope: ",e.scope)}).catch(e=>{console.log("ServiceWorker registration failed: ",e)})});
