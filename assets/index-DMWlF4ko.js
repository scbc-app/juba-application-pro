(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function wh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Wu={exports:{}},Ro={},Ju={exports:{}},X={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var os=Symbol.for("react.element"),Nh=Symbol.for("react.portal"),Sh=Symbol.for("react.fragment"),bh=Symbol.for("react.strict_mode"),Ch=Symbol.for("react.profiler"),Eh=Symbol.for("react.provider"),_h=Symbol.for("react.context"),kh=Symbol.for("react.forward_ref"),Th=Symbol.for("react.suspense"),Ih=Symbol.for("react.memo"),Ah=Symbol.for("react.lazy"),Qa=Symbol.iterator;function Rh(e){return e===null||typeof e!="object"?null:(e=Qa&&e[Qa]||e["@@iterator"],typeof e=="function"?e:null)}var Ku={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Yu=Object.assign,Qu={};function ur(e,t,n){this.props=e,this.context=t,this.refs=Qu,this.updater=n||Ku}ur.prototype.isReactComponent={};ur.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ur.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Xu(){}Xu.prototype=ur.prototype;function Ol(e,t,n){this.props=e,this.context=t,this.refs=Qu,this.updater=n||Ku}var zl=Ol.prototype=new Xu;zl.constructor=Ol;Yu(zl,ur.prototype);zl.isPureReactComponent=!0;var Xa=Array.isArray,Zu=Object.prototype.hasOwnProperty,ql={current:null},ef={key:!0,ref:!0,__self:!0,__source:!0};function tf(e,t,n){var r,s={},i=null,l=null;if(t!=null)for(r in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)Zu.call(t,r)&&!ef.hasOwnProperty(r)&&(s[r]=t[r]);var d=arguments.length-2;if(d===1)s.children=n;else if(1<d){for(var f=Array(d),u=0;u<d;u++)f[u]=arguments[u+2];s.children=f}if(e&&e.defaultProps)for(r in d=e.defaultProps,d)s[r]===void 0&&(s[r]=d[r]);return{$$typeof:os,type:e,key:i,ref:l,props:s,_owner:ql.current}}function Mh(e,t){return{$$typeof:os,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function $l(e){return typeof e=="object"&&e!==null&&e.$$typeof===os}function Ph(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Za=/\/+/g;function ci(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Ph(""+e.key):t.toString(36)}function Us(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case os:case Nh:l=!0}}if(l)return l=e,s=s(l),e=r===""?"."+ci(l,0):r,Xa(s)?(n="",e!=null&&(n=e.replace(Za,"$&/")+"/"),Us(s,t,n,"",function(u){return u})):s!=null&&($l(s)&&(s=Mh(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(Za,"$&/")+"/")+e)),t.push(s)),1;if(l=0,r=r===""?".":r+":",Xa(e))for(var d=0;d<e.length;d++){i=e[d];var f=r+ci(i,d);l+=Us(i,t,n,f,s)}else if(f=Rh(e),typeof f=="function")for(e=f.call(e),d=0;!(i=e.next()).done;)i=i.value,f=r+ci(i,d++),l+=Us(i,t,n,f,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function us(e,t,n){if(e==null)return e;var r=[],s=0;return Us(e,r,"","",function(i){return t.call(n,i,s++)}),r}function jh(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Oe={current:null},Vs={transition:null},Lh={ReactCurrentDispatcher:Oe,ReactCurrentBatchConfig:Vs,ReactCurrentOwner:ql};function nf(){throw Error("act(...) is not supported in production builds of React.")}X.Children={map:us,forEach:function(e,t,n){us(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return us(e,function(){t++}),t},toArray:function(e){return us(e,function(t){return t})||[]},only:function(e){if(!$l(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};X.Component=ur;X.Fragment=Sh;X.Profiler=Ch;X.PureComponent=Ol;X.StrictMode=bh;X.Suspense=Th;X.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lh;X.act=nf;X.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Yu({},e.props),s=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=ql.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var d=e.type.defaultProps;for(f in t)Zu.call(t,f)&&!ef.hasOwnProperty(f)&&(r[f]=t[f]===void 0&&d!==void 0?d[f]:t[f])}var f=arguments.length-2;if(f===1)r.children=n;else if(1<f){d=Array(f);for(var u=0;u<f;u++)d[u]=arguments[u+2];r.children=d}return{$$typeof:os,type:e.type,key:s,ref:i,props:r,_owner:l}};X.createContext=function(e){return e={$$typeof:_h,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Eh,_context:e},e.Consumer=e};X.createElement=tf;X.createFactory=function(e){var t=tf.bind(null,e);return t.type=e,t};X.createRef=function(){return{current:null}};X.forwardRef=function(e){return{$$typeof:kh,render:e}};X.isValidElement=$l;X.lazy=function(e){return{$$typeof:Ah,_payload:{_status:-1,_result:e},_init:jh}};X.memo=function(e,t){return{$$typeof:Ih,type:e,compare:t===void 0?null:t}};X.startTransition=function(e){var t=Vs.transition;Vs.transition={};try{e()}finally{Vs.transition=t}};X.unstable_act=nf;X.useCallback=function(e,t){return Oe.current.useCallback(e,t)};X.useContext=function(e){return Oe.current.useContext(e)};X.useDebugValue=function(){};X.useDeferredValue=function(e){return Oe.current.useDeferredValue(e)};X.useEffect=function(e,t){return Oe.current.useEffect(e,t)};X.useId=function(){return Oe.current.useId()};X.useImperativeHandle=function(e,t,n){return Oe.current.useImperativeHandle(e,t,n)};X.useInsertionEffect=function(e,t){return Oe.current.useInsertionEffect(e,t)};X.useLayoutEffect=function(e,t){return Oe.current.useLayoutEffect(e,t)};X.useMemo=function(e,t){return Oe.current.useMemo(e,t)};X.useReducer=function(e,t,n){return Oe.current.useReducer(e,t,n)};X.useRef=function(e){return Oe.current.useRef(e)};X.useState=function(e){return Oe.current.useState(e)};X.useSyncExternalStore=function(e,t,n){return Oe.current.useSyncExternalStore(e,t,n)};X.useTransition=function(){return Oe.current.useTransition()};X.version="18.3.1";Ju.exports=X;var _=Ju.exports;const Zs=wh(_);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dh=_,Fh=Symbol.for("react.element"),Uh=Symbol.for("react.fragment"),Vh=Object.prototype.hasOwnProperty,Hh=Dh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Bh={key:!0,ref:!0,__self:!0,__source:!0};function rf(e,t,n){var r,s={},i=null,l=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)Vh.call(t,r)&&!Bh.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Fh,type:e,key:i,ref:l,props:s,_owner:Hh.current}}Ro.Fragment=Uh;Ro.jsx=rf;Ro.jsxs=rf;Wu.exports=Ro;var o=Wu.exports,sf={exports:{}},tt={},of={exports:{}},lf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(j,H){var q=j.length;j.push(H);e:for(;0<q;){var Z=q-1>>>1,$=j[Z];if(0<s($,H))j[Z]=H,j[q]=$,q=Z;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var H=j[0],q=j.pop();if(q!==H){j[0]=q;e:for(var Z=0,$=j.length,se=$>>>1;Z<se;){var re=2*(Z+1)-1,te=j[re],oe=re+1,O=j[oe];if(0>s(te,q))oe<$&&0>s(O,te)?(j[Z]=O,j[oe]=q,Z=oe):(j[Z]=te,j[re]=q,Z=re);else if(oe<$&&0>s(O,q))j[Z]=O,j[oe]=q,Z=oe;else break e}}return H}function s(j,H){var q=j.sortIndex-H.sortIndex;return q!==0?q:j.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,d=l.now();e.unstable_now=function(){return l.now()-d}}var f=[],u=[],p=1,m=null,h=3,g=!1,w=!1,N=!1,S=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(j){for(var H=n(u);H!==null;){if(H.callback===null)r(u);else if(H.startTime<=j)r(u),H.sortIndex=H.expirationTime,t(f,H);else break;H=n(u)}}function C(j){if(N=!1,y(j),!w)if(n(f)!==null)w=!0,z(b);else{var H=n(u);H!==null&&J(C,H.startTime-j)}}function b(j,H){w=!1,N&&(N=!1,x(T),T=-1),g=!0;var q=h;try{for(y(H),m=n(f);m!==null&&(!(m.expirationTime>H)||j&&!L());){var Z=m.callback;if(typeof Z=="function"){m.callback=null,h=m.priorityLevel;var $=Z(m.expirationTime<=H);H=e.unstable_now(),typeof $=="function"?m.callback=$:m===n(f)&&r(f),y(H)}else r(f);m=n(f)}if(m!==null)var se=!0;else{var re=n(u);re!==null&&J(C,re.startTime-H),se=!1}return se}finally{m=null,h=q,g=!1}}var E=!1,k=null,T=-1,I=5,M=-1;function L(){return!(e.unstable_now()-M<I)}function R(){if(k!==null){var j=e.unstable_now();M=j;var H=!0;try{H=k(!0,j)}finally{H?P():(E=!1,k=null)}}else E=!1}var P;if(typeof v=="function")P=function(){v(R)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,F=A.port2;A.port1.onmessage=R,P=function(){F.postMessage(null)}}else P=function(){S(R,0)};function z(j){k=j,E||(E=!0,P())}function J(j,H){T=S(function(){j(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_continueExecution=function(){w||g||(w=!0,z(b))},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(f)},e.unstable_next=function(j){switch(h){case 1:case 2:case 3:var H=3;break;default:H=h}var q=h;h=H;try{return j()}finally{h=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(j,H){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var q=h;h=j;try{return H()}finally{h=q}},e.unstable_scheduleCallback=function(j,H,q){var Z=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?Z+q:Z):q=Z,j){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=q+$,j={id:p++,callback:H,priorityLevel:j,startTime:q,expirationTime:$,sortIndex:-1},q>Z?(j.sortIndex=q,t(u,j),n(f)===null&&j===n(u)&&(N?(x(T),T=-1):N=!0,J(C,q-Z))):(j.sortIndex=$,t(f,j),w||g||(w=!0,z(b))),j},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(j){var H=h;return function(){var q=h;h=H;try{return j.apply(this,arguments)}finally{h=q}}}})(lf);of.exports=lf;var Gh=of.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oh=_,et=Gh;function D(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var af=new Set,Gr={};function _n(e,t){rr(e,t),rr(e+"Capture",t)}function rr(e,t){for(Gr[e]=t,e=0;e<t.length;e++)af.add(t[e])}var Mt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fi=Object.prototype.hasOwnProperty,zh=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ec={},tc={};function qh(e){return Fi.call(tc,e)?!0:Fi.call(ec,e)?!1:zh.test(e)?tc[e]=!0:(ec[e]=!0,!1)}function $h(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Wh(e,t,n,r){if(t===null||typeof t>"u"||$h(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ze(e,t,n,r,s,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var Re={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Re[e]=new ze(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Re[t]=new ze(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Re[e]=new ze(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Re[e]=new ze(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Re[e]=new ze(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Re[e]=new ze(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Re[e]=new ze(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Re[e]=new ze(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Re[e]=new ze(e,5,!1,e.toLowerCase(),null,!1,!1)});var Wl=/[\-:]([a-z])/g;function Jl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Wl,Jl);Re[t]=new ze(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Wl,Jl);Re[t]=new ze(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Wl,Jl);Re[t]=new ze(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Re[e]=new ze(e,1,!1,e.toLowerCase(),null,!1,!1)});Re.xlinkHref=new ze("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Re[e]=new ze(e,1,!1,e.toLowerCase(),null,!0,!0)});function Kl(e,t,n,r){var s=Re.hasOwnProperty(t)?Re[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Wh(t,n,s,r)&&(n=null),r||s===null?qh(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Ft=Oh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fs=Symbol.for("react.element"),Ln=Symbol.for("react.portal"),Dn=Symbol.for("react.fragment"),Yl=Symbol.for("react.strict_mode"),Ui=Symbol.for("react.profiler"),cf=Symbol.for("react.provider"),df=Symbol.for("react.context"),Ql=Symbol.for("react.forward_ref"),Vi=Symbol.for("react.suspense"),Hi=Symbol.for("react.suspense_list"),Xl=Symbol.for("react.memo"),Gt=Symbol.for("react.lazy"),uf=Symbol.for("react.offscreen"),nc=Symbol.iterator;function vr(e){return e===null||typeof e!="object"?null:(e=nc&&e[nc]||e["@@iterator"],typeof e=="function"?e:null)}var ge=Object.assign,di;function Tr(e){if(di===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);di=t&&t[1]||""}return`
`+di+e}var ui=!1;function fi(e,t){if(!e||ui)return"";ui=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),l=s.length-1,d=i.length-1;1<=l&&0<=d&&s[l]!==i[d];)d--;for(;1<=l&&0<=d;l--,d--)if(s[l]!==i[d]){if(l!==1||d!==1)do if(l--,d--,0>d||s[l]!==i[d]){var f=`
`+s[l].replace(" at new "," at ");return e.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",e.displayName)),f}while(1<=l&&0<=d);break}}}finally{ui=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Tr(e):""}function Jh(e){switch(e.tag){case 5:return Tr(e.type);case 16:return Tr("Lazy");case 13:return Tr("Suspense");case 19:return Tr("SuspenseList");case 0:case 2:case 15:return e=fi(e.type,!1),e;case 11:return e=fi(e.type.render,!1),e;case 1:return e=fi(e.type,!0),e;default:return""}}function Bi(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Dn:return"Fragment";case Ln:return"Portal";case Ui:return"Profiler";case Yl:return"StrictMode";case Vi:return"Suspense";case Hi:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case df:return(e.displayName||"Context")+".Consumer";case cf:return(e._context.displayName||"Context")+".Provider";case Ql:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Xl:return t=e.displayName||null,t!==null?t:Bi(e.type)||"Memo";case Gt:t=e._payload,e=e._init;try{return Bi(e(t))}catch{}}return null}function Kh(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Bi(t);case 8:return t===Yl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function rn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ff(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Yh(e){var t=ff(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(l){r=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ps(e){e._valueTracker||(e._valueTracker=Yh(e))}function pf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ff(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function eo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Gi(e,t){var n=t.checked;return ge({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function rc(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=rn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function mf(e,t){t=t.checked,t!=null&&Kl(e,"checked",t,!1)}function Oi(e,t){mf(e,t);var n=rn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?zi(e,t.type,n):t.hasOwnProperty("defaultValue")&&zi(e,t.type,rn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function sc(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function zi(e,t,n){(t!=="number"||eo(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ir=Array.isArray;function Kn(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+rn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function qi(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(D(91));return ge({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oc(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(D(92));if(Ir(n)){if(1<n.length)throw Error(D(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:rn(n)}}function hf(e,t){var n=rn(t.value),r=rn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function ic(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function gf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $i(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?gf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ms,xf=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ms=ms||document.createElement("div"),ms.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ms.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Or(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Pr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qh=["Webkit","ms","Moz","O"];Object.keys(Pr).forEach(function(e){Qh.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Pr[t]=Pr[e]})});function vf(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Pr.hasOwnProperty(e)&&Pr[e]?(""+t).trim():t+"px"}function yf(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=vf(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Xh=ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wi(e,t){if(t){if(Xh[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(D(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(D(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(D(61))}if(t.style!=null&&typeof t.style!="object")throw Error(D(62))}}function Ji(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ki=null;function Zl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Yi=null,Yn=null,Qn=null;function lc(e){if(e=as(e)){if(typeof Yi!="function")throw Error(D(280));var t=e.stateNode;t&&(t=Do(t),Yi(e.stateNode,e.type,t))}}function wf(e){Yn?Qn?Qn.push(e):Qn=[e]:Yn=e}function Nf(){if(Yn){var e=Yn,t=Qn;if(Qn=Yn=null,lc(e),t)for(e=0;e<t.length;e++)lc(t[e])}}function Sf(e,t){return e(t)}function bf(){}var pi=!1;function Cf(e,t,n){if(pi)return e(t,n);pi=!0;try{return Sf(e,t,n)}finally{pi=!1,(Yn!==null||Qn!==null)&&(bf(),Nf())}}function zr(e,t){var n=e.stateNode;if(n===null)return null;var r=Do(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(D(231,t,typeof n));return n}var Qi=!1;if(Mt)try{var yr={};Object.defineProperty(yr,"passive",{get:function(){Qi=!0}}),window.addEventListener("test",yr,yr),window.removeEventListener("test",yr,yr)}catch{Qi=!1}function Zh(e,t,n,r,s,i,l,d,f){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(p){this.onError(p)}}var jr=!1,to=null,no=!1,Xi=null,e0={onError:function(e){jr=!0,to=e}};function t0(e,t,n,r,s,i,l,d,f){jr=!1,to=null,Zh.apply(e0,arguments)}function n0(e,t,n,r,s,i,l,d,f){if(t0.apply(this,arguments),jr){if(jr){var u=to;jr=!1,to=null}else throw Error(D(198));no||(no=!0,Xi=u)}}function kn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Ef(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ac(e){if(kn(e)!==e)throw Error(D(188))}function r0(e){var t=e.alternate;if(!t){if(t=kn(e),t===null)throw Error(D(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return ac(s),e;if(i===r)return ac(s),t;i=i.sibling}throw Error(D(188))}if(n.return!==r.return)n=s,r=i;else{for(var l=!1,d=s.child;d;){if(d===n){l=!0,n=s,r=i;break}if(d===r){l=!0,r=s,n=i;break}d=d.sibling}if(!l){for(d=i.child;d;){if(d===n){l=!0,n=i,r=s;break}if(d===r){l=!0,r=i,n=s;break}d=d.sibling}if(!l)throw Error(D(189))}}if(n.alternate!==r)throw Error(D(190))}if(n.tag!==3)throw Error(D(188));return n.stateNode.current===n?e:t}function _f(e){return e=r0(e),e!==null?kf(e):null}function kf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=kf(e);if(t!==null)return t;e=e.sibling}return null}var Tf=et.unstable_scheduleCallback,cc=et.unstable_cancelCallback,s0=et.unstable_shouldYield,o0=et.unstable_requestPaint,ye=et.unstable_now,i0=et.unstable_getCurrentPriorityLevel,ea=et.unstable_ImmediatePriority,If=et.unstable_UserBlockingPriority,ro=et.unstable_NormalPriority,l0=et.unstable_LowPriority,Af=et.unstable_IdlePriority,Mo=null,Et=null;function a0(e){if(Et&&typeof Et.onCommitFiberRoot=="function")try{Et.onCommitFiberRoot(Mo,e,void 0,(e.current.flags&128)===128)}catch{}}var gt=Math.clz32?Math.clz32:u0,c0=Math.log,d0=Math.LN2;function u0(e){return e>>>=0,e===0?32:31-(c0(e)/d0|0)|0}var hs=64,gs=4194304;function Ar(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function so(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,l=n&268435455;if(l!==0){var d=l&~s;d!==0?r=Ar(d):(i&=l,i!==0&&(r=Ar(i)))}else l=n&~s,l!==0?r=Ar(l):i!==0&&(r=Ar(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-gt(t),s=1<<n,r|=e[n],t&=~s;return r}function f0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function p0(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-gt(i),d=1<<l,f=s[l];f===-1?(!(d&n)||d&r)&&(s[l]=f0(d,t)):f<=t&&(e.expiredLanes|=d),i&=~d}}function Zi(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Rf(){var e=hs;return hs<<=1,!(hs&4194240)&&(hs=64),e}function mi(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function is(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-gt(t),e[t]=n}function m0(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-gt(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function ta(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-gt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var ie=0;function Mf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Pf,na,jf,Lf,Df,el=!1,xs=[],Kt=null,Yt=null,Qt=null,qr=new Map,$r=new Map,zt=[],h0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dc(e,t){switch(e){case"focusin":case"focusout":Kt=null;break;case"dragenter":case"dragleave":Yt=null;break;case"mouseover":case"mouseout":Qt=null;break;case"pointerover":case"pointerout":qr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":$r.delete(t.pointerId)}}function wr(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=as(t),t!==null&&na(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function g0(e,t,n,r,s){switch(t){case"focusin":return Kt=wr(Kt,e,t,n,r,s),!0;case"dragenter":return Yt=wr(Yt,e,t,n,r,s),!0;case"mouseover":return Qt=wr(Qt,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return qr.set(i,wr(qr.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,$r.set(i,wr($r.get(i)||null,e,t,n,r,s)),!0}return!1}function Ff(e){var t=hn(e.target);if(t!==null){var n=kn(t);if(n!==null){if(t=n.tag,t===13){if(t=Ef(n),t!==null){e.blockedOn=t,Df(e.priority,function(){jf(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Hs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=tl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ki=r,n.target.dispatchEvent(r),Ki=null}else return t=as(n),t!==null&&na(t),e.blockedOn=n,!1;t.shift()}return!0}function uc(e,t,n){Hs(e)&&n.delete(t)}function x0(){el=!1,Kt!==null&&Hs(Kt)&&(Kt=null),Yt!==null&&Hs(Yt)&&(Yt=null),Qt!==null&&Hs(Qt)&&(Qt=null),qr.forEach(uc),$r.forEach(uc)}function Nr(e,t){e.blockedOn===t&&(e.blockedOn=null,el||(el=!0,et.unstable_scheduleCallback(et.unstable_NormalPriority,x0)))}function Wr(e){function t(s){return Nr(s,e)}if(0<xs.length){Nr(xs[0],e);for(var n=1;n<xs.length;n++){var r=xs[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Kt!==null&&Nr(Kt,e),Yt!==null&&Nr(Yt,e),Qt!==null&&Nr(Qt,e),qr.forEach(t),$r.forEach(t),n=0;n<zt.length;n++)r=zt[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<zt.length&&(n=zt[0],n.blockedOn===null);)Ff(n),n.blockedOn===null&&zt.shift()}var Xn=Ft.ReactCurrentBatchConfig,oo=!0;function v0(e,t,n,r){var s=ie,i=Xn.transition;Xn.transition=null;try{ie=1,ra(e,t,n,r)}finally{ie=s,Xn.transition=i}}function y0(e,t,n,r){var s=ie,i=Xn.transition;Xn.transition=null;try{ie=4,ra(e,t,n,r)}finally{ie=s,Xn.transition=i}}function ra(e,t,n,r){if(oo){var s=tl(e,t,n,r);if(s===null)Ci(e,t,r,io,n),dc(e,r);else if(g0(s,e,t,n,r))r.stopPropagation();else if(dc(e,r),t&4&&-1<h0.indexOf(e)){for(;s!==null;){var i=as(s);if(i!==null&&Pf(i),i=tl(e,t,n,r),i===null&&Ci(e,t,r,io,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Ci(e,t,r,null,n)}}var io=null;function tl(e,t,n,r){if(io=null,e=Zl(r),e=hn(e),e!==null)if(t=kn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Ef(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return io=e,null}function Uf(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(i0()){case ea:return 1;case If:return 4;case ro:case l0:return 16;case Af:return 536870912;default:return 16}default:return 16}}var $t=null,sa=null,Bs=null;function Vf(){if(Bs)return Bs;var e,t=sa,n=t.length,r,s="value"in $t?$t.value:$t.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var l=n-e;for(r=1;r<=l&&t[n-r]===s[i-r];r++);return Bs=s.slice(e,1<r?1-r:void 0)}function Gs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function vs(){return!0}function fc(){return!1}function nt(e){function t(n,r,s,i,l){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var d in e)e.hasOwnProperty(d)&&(n=e[d],this[d]=n?n(i):i[d]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?vs:fc,this.isPropagationStopped=fc,this}return ge(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=vs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=vs)},persist:function(){},isPersistent:vs}),t}var fr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oa=nt(fr),ls=ge({},fr,{view:0,detail:0}),w0=nt(ls),hi,gi,Sr,Po=ge({},ls,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ia,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Sr&&(Sr&&e.type==="mousemove"?(hi=e.screenX-Sr.screenX,gi=e.screenY-Sr.screenY):gi=hi=0,Sr=e),hi)},movementY:function(e){return"movementY"in e?e.movementY:gi}}),pc=nt(Po),N0=ge({},Po,{dataTransfer:0}),S0=nt(N0),b0=ge({},ls,{relatedTarget:0}),xi=nt(b0),C0=ge({},fr,{animationName:0,elapsedTime:0,pseudoElement:0}),E0=nt(C0),_0=ge({},fr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),k0=nt(_0),T0=ge({},fr,{data:0}),mc=nt(T0),I0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},A0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},R0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function M0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=R0[e])?!!t[e]:!1}function ia(){return M0}var P0=ge({},ls,{key:function(e){if(e.key){var t=I0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Gs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?A0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ia,charCode:function(e){return e.type==="keypress"?Gs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Gs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),j0=nt(P0),L0=ge({},Po,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hc=nt(L0),D0=ge({},ls,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ia}),F0=nt(D0),U0=ge({},fr,{propertyName:0,elapsedTime:0,pseudoElement:0}),V0=nt(U0),H0=ge({},Po,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),B0=nt(H0),G0=[9,13,27,32],la=Mt&&"CompositionEvent"in window,Lr=null;Mt&&"documentMode"in document&&(Lr=document.documentMode);var O0=Mt&&"TextEvent"in window&&!Lr,Hf=Mt&&(!la||Lr&&8<Lr&&11>=Lr),gc=" ",xc=!1;function Bf(e,t){switch(e){case"keyup":return G0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Fn=!1;function z0(e,t){switch(e){case"compositionend":return Gf(t);case"keypress":return t.which!==32?null:(xc=!0,gc);case"textInput":return e=t.data,e===gc&&xc?null:e;default:return null}}function q0(e,t){if(Fn)return e==="compositionend"||!la&&Bf(e,t)?(e=Vf(),Bs=sa=$t=null,Fn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Hf&&t.locale!=="ko"?null:t.data;default:return null}}var $0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!$0[e.type]:t==="textarea"}function Of(e,t,n,r){wf(r),t=lo(t,"onChange"),0<t.length&&(n=new oa("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Dr=null,Jr=null;function W0(e){ep(e,0)}function jo(e){var t=Hn(e);if(pf(t))return e}function J0(e,t){if(e==="change")return t}var zf=!1;if(Mt){var vi;if(Mt){var yi="oninput"in document;if(!yi){var yc=document.createElement("div");yc.setAttribute("oninput","return;"),yi=typeof yc.oninput=="function"}vi=yi}else vi=!1;zf=vi&&(!document.documentMode||9<document.documentMode)}function wc(){Dr&&(Dr.detachEvent("onpropertychange",qf),Jr=Dr=null)}function qf(e){if(e.propertyName==="value"&&jo(Jr)){var t=[];Of(t,Jr,e,Zl(e)),Cf(W0,t)}}function K0(e,t,n){e==="focusin"?(wc(),Dr=t,Jr=n,Dr.attachEvent("onpropertychange",qf)):e==="focusout"&&wc()}function Y0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return jo(Jr)}function Q0(e,t){if(e==="click")return jo(t)}function X0(e,t){if(e==="input"||e==="change")return jo(t)}function Z0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var wt=typeof Object.is=="function"?Object.is:Z0;function Kr(e,t){if(wt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Fi.call(t,s)||!wt(e[s],t[s]))return!1}return!0}function Nc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Sc(e,t){var n=Nc(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Nc(n)}}function $f(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?$f(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Wf(){for(var e=window,t=eo();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=eo(e.document)}return t}function aa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function eg(e){var t=Wf(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&$f(n.ownerDocument.documentElement,n)){if(r!==null&&aa(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=Sc(n,i);var l=Sc(n,r);s&&l&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var tg=Mt&&"documentMode"in document&&11>=document.documentMode,Un=null,nl=null,Fr=null,rl=!1;function bc(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;rl||Un==null||Un!==eo(r)||(r=Un,"selectionStart"in r&&aa(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Fr&&Kr(Fr,r)||(Fr=r,r=lo(nl,"onSelect"),0<r.length&&(t=new oa("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Un)))}function ys(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Vn={animationend:ys("Animation","AnimationEnd"),animationiteration:ys("Animation","AnimationIteration"),animationstart:ys("Animation","AnimationStart"),transitionend:ys("Transition","TransitionEnd")},wi={},Jf={};Mt&&(Jf=document.createElement("div").style,"AnimationEvent"in window||(delete Vn.animationend.animation,delete Vn.animationiteration.animation,delete Vn.animationstart.animation),"TransitionEvent"in window||delete Vn.transitionend.transition);function Lo(e){if(wi[e])return wi[e];if(!Vn[e])return e;var t=Vn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Jf)return wi[e]=t[n];return e}var Kf=Lo("animationend"),Yf=Lo("animationiteration"),Qf=Lo("animationstart"),Xf=Lo("transitionend"),Zf=new Map,Cc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function on(e,t){Zf.set(e,t),_n(t,[e])}for(var Ni=0;Ni<Cc.length;Ni++){var Si=Cc[Ni],ng=Si.toLowerCase(),rg=Si[0].toUpperCase()+Si.slice(1);on(ng,"on"+rg)}on(Kf,"onAnimationEnd");on(Yf,"onAnimationIteration");on(Qf,"onAnimationStart");on("dblclick","onDoubleClick");on("focusin","onFocus");on("focusout","onBlur");on(Xf,"onTransitionEnd");rr("onMouseEnter",["mouseout","mouseover"]);rr("onMouseLeave",["mouseout","mouseover"]);rr("onPointerEnter",["pointerout","pointerover"]);rr("onPointerLeave",["pointerout","pointerover"]);_n("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_n("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_n("onBeforeInput",["compositionend","keypress","textInput","paste"]);_n("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_n("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_n("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rr));function Ec(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,n0(r,t,void 0,e),e.currentTarget=null}function ep(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var l=r.length-1;0<=l;l--){var d=r[l],f=d.instance,u=d.currentTarget;if(d=d.listener,f!==i&&s.isPropagationStopped())break e;Ec(s,d,u),i=f}else for(l=0;l<r.length;l++){if(d=r[l],f=d.instance,u=d.currentTarget,d=d.listener,f!==i&&s.isPropagationStopped())break e;Ec(s,d,u),i=f}}}if(no)throw e=Xi,no=!1,Xi=null,e}function ce(e,t){var n=t[al];n===void 0&&(n=t[al]=new Set);var r=e+"__bubble";n.has(r)||(tp(t,e,2,!1),n.add(r))}function bi(e,t,n){var r=0;t&&(r|=4),tp(n,e,r,t)}var ws="_reactListening"+Math.random().toString(36).slice(2);function Yr(e){if(!e[ws]){e[ws]=!0,af.forEach(function(n){n!=="selectionchange"&&(sg.has(n)||bi(n,!1,e),bi(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ws]||(t[ws]=!0,bi("selectionchange",!1,t))}}function tp(e,t,n,r){switch(Uf(t)){case 1:var s=v0;break;case 4:s=y0;break;default:s=ra}n=s.bind(null,t,n,e),s=void 0,!Qi||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Ci(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var d=r.stateNode.containerInfo;if(d===s||d.nodeType===8&&d.parentNode===s)break;if(l===4)for(l=r.return;l!==null;){var f=l.tag;if((f===3||f===4)&&(f=l.stateNode.containerInfo,f===s||f.nodeType===8&&f.parentNode===s))return;l=l.return}for(;d!==null;){if(l=hn(d),l===null)return;if(f=l.tag,f===5||f===6){r=i=l;continue e}d=d.parentNode}}r=r.return}Cf(function(){var u=i,p=Zl(n),m=[];e:{var h=Zf.get(e);if(h!==void 0){var g=oa,w=e;switch(e){case"keypress":if(Gs(n)===0)break e;case"keydown":case"keyup":g=j0;break;case"focusin":w="focus",g=xi;break;case"focusout":w="blur",g=xi;break;case"beforeblur":case"afterblur":g=xi;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=pc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=S0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=F0;break;case Kf:case Yf:case Qf:g=E0;break;case Xf:g=V0;break;case"scroll":g=w0;break;case"wheel":g=B0;break;case"copy":case"cut":case"paste":g=k0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=hc}var N=(t&4)!==0,S=!N&&e==="scroll",x=N?h!==null?h+"Capture":null:h;N=[];for(var v=u,y;v!==null;){y=v;var C=y.stateNode;if(y.tag===5&&C!==null&&(y=C,x!==null&&(C=zr(v,x),C!=null&&N.push(Qr(v,C,y)))),S)break;v=v.return}0<N.length&&(h=new g(h,w,null,n,p),m.push({event:h,listeners:N}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",h&&n!==Ki&&(w=n.relatedTarget||n.fromElement)&&(hn(w)||w[Pt]))break e;if((g||h)&&(h=p.window===p?p:(h=p.ownerDocument)?h.defaultView||h.parentWindow:window,g?(w=n.relatedTarget||n.toElement,g=u,w=w?hn(w):null,w!==null&&(S=kn(w),w!==S||w.tag!==5&&w.tag!==6)&&(w=null)):(g=null,w=u),g!==w)){if(N=pc,C="onMouseLeave",x="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(N=hc,C="onPointerLeave",x="onPointerEnter",v="pointer"),S=g==null?h:Hn(g),y=w==null?h:Hn(w),h=new N(C,v+"leave",g,n,p),h.target=S,h.relatedTarget=y,C=null,hn(p)===u&&(N=new N(x,v+"enter",w,n,p),N.target=y,N.relatedTarget=S,C=N),S=C,g&&w)t:{for(N=g,x=w,v=0,y=N;y;y=Mn(y))v++;for(y=0,C=x;C;C=Mn(C))y++;for(;0<v-y;)N=Mn(N),v--;for(;0<y-v;)x=Mn(x),y--;for(;v--;){if(N===x||x!==null&&N===x.alternate)break t;N=Mn(N),x=Mn(x)}N=null}else N=null;g!==null&&_c(m,h,g,N,!1),w!==null&&S!==null&&_c(m,S,w,N,!0)}}e:{if(h=u?Hn(u):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var b=J0;else if(vc(h))if(zf)b=X0;else{b=Y0;var E=K0}else(g=h.nodeName)&&g.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(b=Q0);if(b&&(b=b(e,u))){Of(m,b,n,p);break e}E&&E(e,h,u),e==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&zi(h,"number",h.value)}switch(E=u?Hn(u):window,e){case"focusin":(vc(E)||E.contentEditable==="true")&&(Un=E,nl=u,Fr=null);break;case"focusout":Fr=nl=Un=null;break;case"mousedown":rl=!0;break;case"contextmenu":case"mouseup":case"dragend":rl=!1,bc(m,n,p);break;case"selectionchange":if(tg)break;case"keydown":case"keyup":bc(m,n,p)}var k;if(la)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Fn?Bf(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(Hf&&n.locale!=="ko"&&(Fn||T!=="onCompositionStart"?T==="onCompositionEnd"&&Fn&&(k=Vf()):($t=p,sa="value"in $t?$t.value:$t.textContent,Fn=!0)),E=lo(u,T),0<E.length&&(T=new mc(T,e,null,n,p),m.push({event:T,listeners:E}),k?T.data=k:(k=Gf(n),k!==null&&(T.data=k)))),(k=O0?z0(e,n):q0(e,n))&&(u=lo(u,"onBeforeInput"),0<u.length&&(p=new mc("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:u}),p.data=k))}ep(m,t)})}function Qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function lo(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=zr(e,n),i!=null&&r.unshift(Qr(e,i,s)),i=zr(e,t),i!=null&&r.push(Qr(e,i,s))),e=e.return}return r}function Mn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function _c(e,t,n,r,s){for(var i=t._reactName,l=[];n!==null&&n!==r;){var d=n,f=d.alternate,u=d.stateNode;if(f!==null&&f===r)break;d.tag===5&&u!==null&&(d=u,s?(f=zr(n,i),f!=null&&l.unshift(Qr(n,f,d))):s||(f=zr(n,i),f!=null&&l.push(Qr(n,f,d)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var og=/\r\n?/g,ig=/\u0000|\uFFFD/g;function kc(e){return(typeof e=="string"?e:""+e).replace(og,`
`).replace(ig,"")}function Ns(e,t,n){if(t=kc(t),kc(e)!==t&&n)throw Error(D(425))}function ao(){}var sl=null,ol=null;function il(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ll=typeof setTimeout=="function"?setTimeout:void 0,lg=typeof clearTimeout=="function"?clearTimeout:void 0,Tc=typeof Promise=="function"?Promise:void 0,ag=typeof queueMicrotask=="function"?queueMicrotask:typeof Tc<"u"?function(e){return Tc.resolve(null).then(e).catch(cg)}:ll;function cg(e){setTimeout(function(){throw e})}function Ei(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Wr(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Wr(t)}function Xt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ic(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var pr=Math.random().toString(36).slice(2),Ct="__reactFiber$"+pr,Xr="__reactProps$"+pr,Pt="__reactContainer$"+pr,al="__reactEvents$"+pr,dg="__reactListeners$"+pr,ug="__reactHandles$"+pr;function hn(e){var t=e[Ct];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Pt]||n[Ct]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Ic(e);e!==null;){if(n=e[Ct])return n;e=Ic(e)}return t}e=n,n=e.parentNode}return null}function as(e){return e=e[Ct]||e[Pt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Hn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(D(33))}function Do(e){return e[Xr]||null}var cl=[],Bn=-1;function ln(e){return{current:e}}function ue(e){0>Bn||(e.current=cl[Bn],cl[Bn]=null,Bn--)}function ae(e,t){Bn++,cl[Bn]=e.current,e.current=t}var sn={},De=ln(sn),We=ln(!1),Nn=sn;function sr(e,t){var n=e.type.contextTypes;if(!n)return sn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Je(e){return e=e.childContextTypes,e!=null}function co(){ue(We),ue(De)}function Ac(e,t,n){if(De.current!==sn)throw Error(D(168));ae(De,t),ae(We,n)}function np(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(D(108,Kh(e)||"Unknown",s));return ge({},n,r)}function uo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||sn,Nn=De.current,ae(De,e),ae(We,We.current),!0}function Rc(e,t,n){var r=e.stateNode;if(!r)throw Error(D(169));n?(e=np(e,t,Nn),r.__reactInternalMemoizedMergedChildContext=e,ue(We),ue(De),ae(De,e)):ue(We),ae(We,n)}var Tt=null,Fo=!1,_i=!1;function rp(e){Tt===null?Tt=[e]:Tt.push(e)}function fg(e){Fo=!0,rp(e)}function an(){if(!_i&&Tt!==null){_i=!0;var e=0,t=ie;try{var n=Tt;for(ie=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Tt=null,Fo=!1}catch(s){throw Tt!==null&&(Tt=Tt.slice(e+1)),Tf(ea,an),s}finally{ie=t,_i=!1}}return null}var Gn=[],On=0,fo=null,po=0,st=[],ot=0,Sn=null,It=1,At="";function un(e,t){Gn[On++]=po,Gn[On++]=fo,fo=e,po=t}function sp(e,t,n){st[ot++]=It,st[ot++]=At,st[ot++]=Sn,Sn=e;var r=It;e=At;var s=32-gt(r)-1;r&=~(1<<s),n+=1;var i=32-gt(t)+s;if(30<i){var l=s-s%5;i=(r&(1<<l)-1).toString(32),r>>=l,s-=l,It=1<<32-gt(t)+s|n<<s|r,At=i+e}else It=1<<i|n<<s|r,At=e}function ca(e){e.return!==null&&(un(e,1),sp(e,1,0))}function da(e){for(;e===fo;)fo=Gn[--On],Gn[On]=null,po=Gn[--On],Gn[On]=null;for(;e===Sn;)Sn=st[--ot],st[ot]=null,At=st[--ot],st[ot]=null,It=st[--ot],st[ot]=null}var Ze=null,Xe=null,pe=!1,ht=null;function op(e,t){var n=it(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Mc(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ze=e,Xe=Xt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ze=e,Xe=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Sn!==null?{id:It,overflow:At}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=it(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ze=e,Xe=null,!0):!1;default:return!1}}function dl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ul(e){if(pe){var t=Xe;if(t){var n=t;if(!Mc(e,t)){if(dl(e))throw Error(D(418));t=Xt(n.nextSibling);var r=Ze;t&&Mc(e,t)?op(r,n):(e.flags=e.flags&-4097|2,pe=!1,Ze=e)}}else{if(dl(e))throw Error(D(418));e.flags=e.flags&-4097|2,pe=!1,Ze=e}}}function Pc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ze=e}function Ss(e){if(e!==Ze)return!1;if(!pe)return Pc(e),pe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!il(e.type,e.memoizedProps)),t&&(t=Xe)){if(dl(e))throw ip(),Error(D(418));for(;t;)op(e,t),t=Xt(t.nextSibling)}if(Pc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(D(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Xe=Xt(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Xe=null}}else Xe=Ze?Xt(e.stateNode.nextSibling):null;return!0}function ip(){for(var e=Xe;e;)e=Xt(e.nextSibling)}function or(){Xe=Ze=null,pe=!1}function ua(e){ht===null?ht=[e]:ht.push(e)}var pg=Ft.ReactCurrentBatchConfig;function br(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(D(309));var r=n.stateNode}if(!r)throw Error(D(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var d=s.refs;l===null?delete d[i]:d[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(D(284));if(!n._owner)throw Error(D(290,e))}return e}function bs(e,t){throw e=Object.prototype.toString.call(t),Error(D(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function jc(e){var t=e._init;return t(e._payload)}function lp(e){function t(x,v){if(e){var y=x.deletions;y===null?(x.deletions=[v],x.flags|=16):y.push(v)}}function n(x,v){if(!e)return null;for(;v!==null;)t(x,v),v=v.sibling;return null}function r(x,v){for(x=new Map;v!==null;)v.key!==null?x.set(v.key,v):x.set(v.index,v),v=v.sibling;return x}function s(x,v){return x=nn(x,v),x.index=0,x.sibling=null,x}function i(x,v,y){return x.index=y,e?(y=x.alternate,y!==null?(y=y.index,y<v?(x.flags|=2,v):y):(x.flags|=2,v)):(x.flags|=1048576,v)}function l(x){return e&&x.alternate===null&&(x.flags|=2),x}function d(x,v,y,C){return v===null||v.tag!==6?(v=Pi(y,x.mode,C),v.return=x,v):(v=s(v,y),v.return=x,v)}function f(x,v,y,C){var b=y.type;return b===Dn?p(x,v,y.props.children,C,y.key):v!==null&&(v.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Gt&&jc(b)===v.type)?(C=s(v,y.props),C.ref=br(x,v,y),C.return=x,C):(C=Ks(y.type,y.key,y.props,null,x.mode,C),C.ref=br(x,v,y),C.return=x,C)}function u(x,v,y,C){return v===null||v.tag!==4||v.stateNode.containerInfo!==y.containerInfo||v.stateNode.implementation!==y.implementation?(v=ji(y,x.mode,C),v.return=x,v):(v=s(v,y.children||[]),v.return=x,v)}function p(x,v,y,C,b){return v===null||v.tag!==7?(v=wn(y,x.mode,C,b),v.return=x,v):(v=s(v,y),v.return=x,v)}function m(x,v,y){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Pi(""+v,x.mode,y),v.return=x,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case fs:return y=Ks(v.type,v.key,v.props,null,x.mode,y),y.ref=br(x,null,v),y.return=x,y;case Ln:return v=ji(v,x.mode,y),v.return=x,v;case Gt:var C=v._init;return m(x,C(v._payload),y)}if(Ir(v)||vr(v))return v=wn(v,x.mode,y,null),v.return=x,v;bs(x,v)}return null}function h(x,v,y,C){var b=v!==null?v.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return b!==null?null:d(x,v,""+y,C);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case fs:return y.key===b?f(x,v,y,C):null;case Ln:return y.key===b?u(x,v,y,C):null;case Gt:return b=y._init,h(x,v,b(y._payload),C)}if(Ir(y)||vr(y))return b!==null?null:p(x,v,y,C,null);bs(x,y)}return null}function g(x,v,y,C,b){if(typeof C=="string"&&C!==""||typeof C=="number")return x=x.get(y)||null,d(v,x,""+C,b);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case fs:return x=x.get(C.key===null?y:C.key)||null,f(v,x,C,b);case Ln:return x=x.get(C.key===null?y:C.key)||null,u(v,x,C,b);case Gt:var E=C._init;return g(x,v,y,E(C._payload),b)}if(Ir(C)||vr(C))return x=x.get(y)||null,p(v,x,C,b,null);bs(v,C)}return null}function w(x,v,y,C){for(var b=null,E=null,k=v,T=v=0,I=null;k!==null&&T<y.length;T++){k.index>T?(I=k,k=null):I=k.sibling;var M=h(x,k,y[T],C);if(M===null){k===null&&(k=I);break}e&&k&&M.alternate===null&&t(x,k),v=i(M,v,T),E===null?b=M:E.sibling=M,E=M,k=I}if(T===y.length)return n(x,k),pe&&un(x,T),b;if(k===null){for(;T<y.length;T++)k=m(x,y[T],C),k!==null&&(v=i(k,v,T),E===null?b=k:E.sibling=k,E=k);return pe&&un(x,T),b}for(k=r(x,k);T<y.length;T++)I=g(k,x,T,y[T],C),I!==null&&(e&&I.alternate!==null&&k.delete(I.key===null?T:I.key),v=i(I,v,T),E===null?b=I:E.sibling=I,E=I);return e&&k.forEach(function(L){return t(x,L)}),pe&&un(x,T),b}function N(x,v,y,C){var b=vr(y);if(typeof b!="function")throw Error(D(150));if(y=b.call(y),y==null)throw Error(D(151));for(var E=b=null,k=v,T=v=0,I=null,M=y.next();k!==null&&!M.done;T++,M=y.next()){k.index>T?(I=k,k=null):I=k.sibling;var L=h(x,k,M.value,C);if(L===null){k===null&&(k=I);break}e&&k&&L.alternate===null&&t(x,k),v=i(L,v,T),E===null?b=L:E.sibling=L,E=L,k=I}if(M.done)return n(x,k),pe&&un(x,T),b;if(k===null){for(;!M.done;T++,M=y.next())M=m(x,M.value,C),M!==null&&(v=i(M,v,T),E===null?b=M:E.sibling=M,E=M);return pe&&un(x,T),b}for(k=r(x,k);!M.done;T++,M=y.next())M=g(k,x,T,M.value,C),M!==null&&(e&&M.alternate!==null&&k.delete(M.key===null?T:M.key),v=i(M,v,T),E===null?b=M:E.sibling=M,E=M);return e&&k.forEach(function(R){return t(x,R)}),pe&&un(x,T),b}function S(x,v,y,C){if(typeof y=="object"&&y!==null&&y.type===Dn&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case fs:e:{for(var b=y.key,E=v;E!==null;){if(E.key===b){if(b=y.type,b===Dn){if(E.tag===7){n(x,E.sibling),v=s(E,y.props.children),v.return=x,x=v;break e}}else if(E.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Gt&&jc(b)===E.type){n(x,E.sibling),v=s(E,y.props),v.ref=br(x,E,y),v.return=x,x=v;break e}n(x,E);break}else t(x,E);E=E.sibling}y.type===Dn?(v=wn(y.props.children,x.mode,C,y.key),v.return=x,x=v):(C=Ks(y.type,y.key,y.props,null,x.mode,C),C.ref=br(x,v,y),C.return=x,x=C)}return l(x);case Ln:e:{for(E=y.key;v!==null;){if(v.key===E)if(v.tag===4&&v.stateNode.containerInfo===y.containerInfo&&v.stateNode.implementation===y.implementation){n(x,v.sibling),v=s(v,y.children||[]),v.return=x,x=v;break e}else{n(x,v);break}else t(x,v);v=v.sibling}v=ji(y,x.mode,C),v.return=x,x=v}return l(x);case Gt:return E=y._init,S(x,v,E(y._payload),C)}if(Ir(y))return w(x,v,y,C);if(vr(y))return N(x,v,y,C);bs(x,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,v!==null&&v.tag===6?(n(x,v.sibling),v=s(v,y),v.return=x,x=v):(n(x,v),v=Pi(y,x.mode,C),v.return=x,x=v),l(x)):n(x,v)}return S}var ir=lp(!0),ap=lp(!1),mo=ln(null),ho=null,zn=null,fa=null;function pa(){fa=zn=ho=null}function ma(e){var t=mo.current;ue(mo),e._currentValue=t}function fl(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Zn(e,t){ho=e,fa=zn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&($e=!0),e.firstContext=null)}function ct(e){var t=e._currentValue;if(fa!==e)if(e={context:e,memoizedValue:t,next:null},zn===null){if(ho===null)throw Error(D(308));zn=e,ho.dependencies={lanes:0,firstContext:e}}else zn=zn.next=e;return t}var gn=null;function ha(e){gn===null?gn=[e]:gn.push(e)}function cp(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,ha(t)):(n.next=s.next,s.next=n),t.interleaved=n,jt(e,r)}function jt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ot=!1;function ga(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Rt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Zt(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ee&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,jt(e,n)}return s=r.interleaved,s===null?(t.next=t,ha(r)):(t.next=s.next,s.next=t),r.interleaved=t,jt(e,n)}function Os(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ta(e,n)}}function Lc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=l:i=i.next=l,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function go(e,t,n,r){var s=e.updateQueue;Ot=!1;var i=s.firstBaseUpdate,l=s.lastBaseUpdate,d=s.shared.pending;if(d!==null){s.shared.pending=null;var f=d,u=f.next;f.next=null,l===null?i=u:l.next=u,l=f;var p=e.alternate;p!==null&&(p=p.updateQueue,d=p.lastBaseUpdate,d!==l&&(d===null?p.firstBaseUpdate=u:d.next=u,p.lastBaseUpdate=f))}if(i!==null){var m=s.baseState;l=0,p=u=f=null,d=i;do{var h=d.lane,g=d.eventTime;if((r&h)===h){p!==null&&(p=p.next={eventTime:g,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var w=e,N=d;switch(h=t,g=n,N.tag){case 1:if(w=N.payload,typeof w=="function"){m=w.call(g,m,h);break e}m=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=N.payload,h=typeof w=="function"?w.call(g,m,h):w,h==null)break e;m=ge({},m,h);break e;case 2:Ot=!0}}d.callback!==null&&d.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[d]:h.push(d))}else g={eventTime:g,lane:h,tag:d.tag,payload:d.payload,callback:d.callback,next:null},p===null?(u=p=g,f=m):p=p.next=g,l|=h;if(d=d.next,d===null){if(d=s.shared.pending,d===null)break;h=d,d=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(p===null&&(f=m),s.baseState=f,s.firstBaseUpdate=u,s.lastBaseUpdate=p,t=s.shared.interleaved,t!==null){s=t;do l|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Cn|=l,e.lanes=l,e.memoizedState=m}}function Dc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(D(191,s));s.call(r)}}}var cs={},_t=ln(cs),Zr=ln(cs),es=ln(cs);function xn(e){if(e===cs)throw Error(D(174));return e}function xa(e,t){switch(ae(es,t),ae(Zr,e),ae(_t,cs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:$i(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=$i(t,e)}ue(_t),ae(_t,t)}function lr(){ue(_t),ue(Zr),ue(es)}function up(e){xn(es.current);var t=xn(_t.current),n=$i(t,e.type);t!==n&&(ae(Zr,e),ae(_t,n))}function va(e){Zr.current===e&&(ue(_t),ue(Zr))}var me=ln(0);function xo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ki=[];function ya(){for(var e=0;e<ki.length;e++)ki[e]._workInProgressVersionPrimary=null;ki.length=0}var zs=Ft.ReactCurrentDispatcher,Ti=Ft.ReactCurrentBatchConfig,bn=0,he=null,be=null,Ee=null,vo=!1,Ur=!1,ts=0,mg=0;function Me(){throw Error(D(321))}function wa(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!wt(e[n],t[n]))return!1;return!0}function Na(e,t,n,r,s,i){if(bn=i,he=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,zs.current=e===null||e.memoizedState===null?vg:yg,e=n(r,s),Ur){i=0;do{if(Ur=!1,ts=0,25<=i)throw Error(D(301));i+=1,Ee=be=null,t.updateQueue=null,zs.current=wg,e=n(r,s)}while(Ur)}if(zs.current=yo,t=be!==null&&be.next!==null,bn=0,Ee=be=he=null,vo=!1,t)throw Error(D(300));return e}function Sa(){var e=ts!==0;return ts=0,e}function bt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ee===null?he.memoizedState=Ee=e:Ee=Ee.next=e,Ee}function dt(){if(be===null){var e=he.alternate;e=e!==null?e.memoizedState:null}else e=be.next;var t=Ee===null?he.memoizedState:Ee.next;if(t!==null)Ee=t,be=e;else{if(e===null)throw Error(D(310));be=e,e={memoizedState:be.memoizedState,baseState:be.baseState,baseQueue:be.baseQueue,queue:be.queue,next:null},Ee===null?he.memoizedState=Ee=e:Ee=Ee.next=e}return Ee}function ns(e,t){return typeof t=="function"?t(e):t}function Ii(e){var t=dt(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var r=be,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var l=s.next;s.next=i.next,i.next=l}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var d=l=null,f=null,u=i;do{var p=u.lane;if((bn&p)===p)f!==null&&(f=f.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var m={lane:p,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};f===null?(d=f=m,l=r):f=f.next=m,he.lanes|=p,Cn|=p}u=u.next}while(u!==null&&u!==i);f===null?l=r:f.next=d,wt(r,t.memoizedState)||($e=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=f,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,he.lanes|=i,Cn|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ai(e){var t=dt(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do i=e(i,l.action),l=l.next;while(l!==s);wt(i,t.memoizedState)||($e=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function fp(){}function pp(e,t){var n=he,r=dt(),s=t(),i=!wt(r.memoizedState,s);if(i&&(r.memoizedState=s,$e=!0),r=r.queue,ba(gp.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Ee!==null&&Ee.memoizedState.tag&1){if(n.flags|=2048,rs(9,hp.bind(null,n,r,s,t),void 0,null),_e===null)throw Error(D(349));bn&30||mp(n,t,s)}return s}function mp(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=he.updateQueue,t===null?(t={lastEffect:null,stores:null},he.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function hp(e,t,n,r){t.value=n,t.getSnapshot=r,xp(t)&&vp(e)}function gp(e,t,n){return n(function(){xp(t)&&vp(e)})}function xp(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!wt(e,n)}catch{return!0}}function vp(e){var t=jt(e,1);t!==null&&xt(t,e,1,-1)}function Fc(e){var t=bt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:e},t.queue=e,e=e.dispatch=xg.bind(null,he,e),[t.memoizedState,e]}function rs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=he.updateQueue,t===null?(t={lastEffect:null,stores:null},he.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function yp(){return dt().memoizedState}function qs(e,t,n,r){var s=bt();he.flags|=e,s.memoizedState=rs(1|t,n,void 0,r===void 0?null:r)}function Uo(e,t,n,r){var s=dt();r=r===void 0?null:r;var i=void 0;if(be!==null){var l=be.memoizedState;if(i=l.destroy,r!==null&&wa(r,l.deps)){s.memoizedState=rs(t,n,i,r);return}}he.flags|=e,s.memoizedState=rs(1|t,n,i,r)}function Uc(e,t){return qs(8390656,8,e,t)}function ba(e,t){return Uo(2048,8,e,t)}function wp(e,t){return Uo(4,2,e,t)}function Np(e,t){return Uo(4,4,e,t)}function Sp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function bp(e,t,n){return n=n!=null?n.concat([e]):null,Uo(4,4,Sp.bind(null,t,e),n)}function Ca(){}function Cp(e,t){var n=dt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&wa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ep(e,t){var n=dt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&wa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function _p(e,t,n){return bn&21?(wt(n,t)||(n=Rf(),he.lanes|=n,Cn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,$e=!0),e.memoizedState=n)}function hg(e,t){var n=ie;ie=n!==0&&4>n?n:4,e(!0);var r=Ti.transition;Ti.transition={};try{e(!1),t()}finally{ie=n,Ti.transition=r}}function kp(){return dt().memoizedState}function gg(e,t,n){var r=tn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Tp(e))Ip(t,n);else if(n=cp(e,t,n,r),n!==null){var s=Be();xt(n,e,r,s),Ap(n,t,r)}}function xg(e,t,n){var r=tn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Tp(e))Ip(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,d=i(l,n);if(s.hasEagerState=!0,s.eagerState=d,wt(d,l)){var f=t.interleaved;f===null?(s.next=s,ha(t)):(s.next=f.next,f.next=s),t.interleaved=s;return}}catch{}finally{}n=cp(e,t,s,r),n!==null&&(s=Be(),xt(n,e,r,s),Ap(n,t,r))}}function Tp(e){var t=e.alternate;return e===he||t!==null&&t===he}function Ip(e,t){Ur=vo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ap(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ta(e,n)}}var yo={readContext:ct,useCallback:Me,useContext:Me,useEffect:Me,useImperativeHandle:Me,useInsertionEffect:Me,useLayoutEffect:Me,useMemo:Me,useReducer:Me,useRef:Me,useState:Me,useDebugValue:Me,useDeferredValue:Me,useTransition:Me,useMutableSource:Me,useSyncExternalStore:Me,useId:Me,unstable_isNewReconciler:!1},vg={readContext:ct,useCallback:function(e,t){return bt().memoizedState=[e,t===void 0?null:t],e},useContext:ct,useEffect:Uc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,qs(4194308,4,Sp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return qs(4194308,4,e,t)},useInsertionEffect:function(e,t){return qs(4,2,e,t)},useMemo:function(e,t){var n=bt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=bt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=gg.bind(null,he,e),[r.memoizedState,e]},useRef:function(e){var t=bt();return e={current:e},t.memoizedState=e},useState:Fc,useDebugValue:Ca,useDeferredValue:function(e){return bt().memoizedState=e},useTransition:function(){var e=Fc(!1),t=e[0];return e=hg.bind(null,e[1]),bt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=he,s=bt();if(pe){if(n===void 0)throw Error(D(407));n=n()}else{if(n=t(),_e===null)throw Error(D(349));bn&30||mp(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Uc(gp.bind(null,r,i,e),[e]),r.flags|=2048,rs(9,hp.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=bt(),t=_e.identifierPrefix;if(pe){var n=At,r=It;n=(r&~(1<<32-gt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ts++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=mg++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},yg={readContext:ct,useCallback:Cp,useContext:ct,useEffect:ba,useImperativeHandle:bp,useInsertionEffect:wp,useLayoutEffect:Np,useMemo:Ep,useReducer:Ii,useRef:yp,useState:function(){return Ii(ns)},useDebugValue:Ca,useDeferredValue:function(e){var t=dt();return _p(t,be.memoizedState,e)},useTransition:function(){var e=Ii(ns)[0],t=dt().memoizedState;return[e,t]},useMutableSource:fp,useSyncExternalStore:pp,useId:kp,unstable_isNewReconciler:!1},wg={readContext:ct,useCallback:Cp,useContext:ct,useEffect:ba,useImperativeHandle:bp,useInsertionEffect:wp,useLayoutEffect:Np,useMemo:Ep,useReducer:Ai,useRef:yp,useState:function(){return Ai(ns)},useDebugValue:Ca,useDeferredValue:function(e){var t=dt();return be===null?t.memoizedState=e:_p(t,be.memoizedState,e)},useTransition:function(){var e=Ai(ns)[0],t=dt().memoizedState;return[e,t]},useMutableSource:fp,useSyncExternalStore:pp,useId:kp,unstable_isNewReconciler:!1};function pt(e,t){if(e&&e.defaultProps){t=ge({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function pl(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ge({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Vo={isMounted:function(e){return(e=e._reactInternals)?kn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Be(),s=tn(e),i=Rt(r,s);i.payload=t,n!=null&&(i.callback=n),t=Zt(e,i,s),t!==null&&(xt(t,e,s,r),Os(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Be(),s=tn(e),i=Rt(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Zt(e,i,s),t!==null&&(xt(t,e,s,r),Os(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Be(),r=tn(e),s=Rt(n,r);s.tag=2,t!=null&&(s.callback=t),t=Zt(e,s,r),t!==null&&(xt(t,e,r,n),Os(t,e,r))}};function Vc(e,t,n,r,s,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,l):t.prototype&&t.prototype.isPureReactComponent?!Kr(n,r)||!Kr(s,i):!0}function Rp(e,t,n){var r=!1,s=sn,i=t.contextType;return typeof i=="object"&&i!==null?i=ct(i):(s=Je(t)?Nn:De.current,r=t.contextTypes,i=(r=r!=null)?sr(e,s):sn),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Vo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Hc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Vo.enqueueReplaceState(t,t.state,null)}function ml(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},ga(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=ct(i):(i=Je(t)?Nn:De.current,s.context=sr(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(pl(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Vo.enqueueReplaceState(s,s.state,null),go(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function ar(e,t){try{var n="",r=t;do n+=Jh(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Ri(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function hl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Ng=typeof WeakMap=="function"?WeakMap:Map;function Mp(e,t,n){n=Rt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){No||(No=!0,El=r),hl(e,t)},n}function Pp(e,t,n){n=Rt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){hl(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){hl(e,t),typeof r!="function"&&(en===null?en=new Set([this]):en.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function Bc(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Ng;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Lg.bind(null,e,t,n),t.then(e,e))}function Gc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Oc(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Rt(-1,1),t.tag=2,Zt(n,t,1))),n.lanes|=1),e)}var Sg=Ft.ReactCurrentOwner,$e=!1;function He(e,t,n,r){t.child=e===null?ap(t,null,n,r):ir(t,e.child,n,r)}function zc(e,t,n,r,s){n=n.render;var i=t.ref;return Zn(t,s),r=Na(e,t,n,r,i,s),n=Sa(),e!==null&&!$e?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Lt(e,t,s)):(pe&&n&&ca(t),t.flags|=1,He(e,t,r,s),t.child)}function qc(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!Ma(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,jp(e,t,i,r,s)):(e=Ks(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var l=i.memoizedProps;if(n=n.compare,n=n!==null?n:Kr,n(l,r)&&e.ref===t.ref)return Lt(e,t,s)}return t.flags|=1,e=nn(i,r),e.ref=t.ref,e.return=t,t.child=e}function jp(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Kr(i,r)&&e.ref===t.ref)if($e=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&($e=!0);else return t.lanes=e.lanes,Lt(e,t,s)}return gl(e,t,n,r,s)}function Lp(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ae($n,Qe),Qe|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ae($n,Qe),Qe|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ae($n,Qe),Qe|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,ae($n,Qe),Qe|=r;return He(e,t,s,n),t.child}function Dp(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function gl(e,t,n,r,s){var i=Je(n)?Nn:De.current;return i=sr(t,i),Zn(t,s),n=Na(e,t,n,r,i,s),r=Sa(),e!==null&&!$e?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Lt(e,t,s)):(pe&&r&&ca(t),t.flags|=1,He(e,t,n,s),t.child)}function $c(e,t,n,r,s){if(Je(n)){var i=!0;uo(t)}else i=!1;if(Zn(t,s),t.stateNode===null)$s(e,t),Rp(t,n,r),ml(t,n,r,s),r=!0;else if(e===null){var l=t.stateNode,d=t.memoizedProps;l.props=d;var f=l.context,u=n.contextType;typeof u=="object"&&u!==null?u=ct(u):(u=Je(n)?Nn:De.current,u=sr(t,u));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof l.getSnapshotBeforeUpdate=="function";m||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(d!==r||f!==u)&&Hc(t,l,r,u),Ot=!1;var h=t.memoizedState;l.state=h,go(t,r,l,s),f=t.memoizedState,d!==r||h!==f||We.current||Ot?(typeof p=="function"&&(pl(t,n,p,r),f=t.memoizedState),(d=Ot||Vc(t,n,d,r,h,f,u))?(m||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=f),l.props=r,l.state=f,l.context=u,r=d):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,dp(e,t),d=t.memoizedProps,u=t.type===t.elementType?d:pt(t.type,d),l.props=u,m=t.pendingProps,h=l.context,f=n.contextType,typeof f=="object"&&f!==null?f=ct(f):(f=Je(n)?Nn:De.current,f=sr(t,f));var g=n.getDerivedStateFromProps;(p=typeof g=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(d!==m||h!==f)&&Hc(t,l,r,f),Ot=!1,h=t.memoizedState,l.state=h,go(t,r,l,s);var w=t.memoizedState;d!==m||h!==w||We.current||Ot?(typeof g=="function"&&(pl(t,n,g,r),w=t.memoizedState),(u=Ot||Vc(t,n,u,r,h,w,f)||!1)?(p||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,w,f),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,w,f)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||d===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),l.props=r,l.state=w,l.context=f,r=u):(typeof l.componentDidUpdate!="function"||d===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return xl(e,t,n,r,i,s)}function xl(e,t,n,r,s,i){Dp(e,t);var l=(t.flags&128)!==0;if(!r&&!l)return s&&Rc(t,n,!1),Lt(e,t,i);r=t.stateNode,Sg.current=t;var d=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&l?(t.child=ir(t,e.child,null,i),t.child=ir(t,null,d,i)):He(e,t,d,i),t.memoizedState=r.state,s&&Rc(t,n,!0),t.child}function Fp(e){var t=e.stateNode;t.pendingContext?Ac(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ac(e,t.context,!1),xa(e,t.containerInfo)}function Wc(e,t,n,r,s){return or(),ua(s),t.flags|=256,He(e,t,n,r),t.child}var vl={dehydrated:null,treeContext:null,retryLane:0};function yl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Up(e,t,n){var r=t.pendingProps,s=me.current,i=!1,l=(t.flags&128)!==0,d;if((d=l)||(d=e!==null&&e.memoizedState===null?!1:(s&2)!==0),d?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ae(me,s&1),e===null)return ul(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=r.children,e=r.fallback,i?(r=t.mode,i=t.child,l={mode:"hidden",children:l},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=Go(l,r,0,null),e=wn(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=yl(n),t.memoizedState=vl,e):Ea(t,l));if(s=e.memoizedState,s!==null&&(d=s.dehydrated,d!==null))return bg(e,t,l,r,d,s,n);if(i){i=r.fallback,l=t.mode,s=e.child,d=s.sibling;var f={mode:"hidden",children:r.children};return!(l&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=f,t.deletions=null):(r=nn(s,f),r.subtreeFlags=s.subtreeFlags&14680064),d!==null?i=nn(d,i):(i=wn(i,l,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,l=e.child.memoizedState,l=l===null?yl(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~n,t.memoizedState=vl,r}return i=e.child,e=i.sibling,r=nn(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ea(e,t){return t=Go({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Cs(e,t,n,r){return r!==null&&ua(r),ir(t,e.child,null,n),e=Ea(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function bg(e,t,n,r,s,i,l){if(n)return t.flags&256?(t.flags&=-257,r=Ri(Error(D(422))),Cs(e,t,l,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Go({mode:"visible",children:r.children},s,0,null),i=wn(i,s,l,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&ir(t,e.child,null,l),t.child.memoizedState=yl(l),t.memoizedState=vl,i);if(!(t.mode&1))return Cs(e,t,l,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var d=r.dgst;return r=d,i=Error(D(419)),r=Ri(i,r,void 0),Cs(e,t,l,r)}if(d=(l&e.childLanes)!==0,$e||d){if(r=_e,r!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|l)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,jt(e,s),xt(r,e,s,-1))}return Ra(),r=Ri(Error(D(421))),Cs(e,t,l,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Dg.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Xe=Xt(s.nextSibling),Ze=t,pe=!0,ht=null,e!==null&&(st[ot++]=It,st[ot++]=At,st[ot++]=Sn,It=e.id,At=e.overflow,Sn=t),t=Ea(t,r.children),t.flags|=4096,t)}function Jc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),fl(e.return,t,n)}function Mi(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Vp(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(He(e,t,r.children,n),r=me.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Jc(e,n,t);else if(e.tag===19)Jc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ae(me,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&xo(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Mi(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&xo(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Mi(t,!0,n,null,i);break;case"together":Mi(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $s(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Lt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Cn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(D(153));if(t.child!==null){for(e=t.child,n=nn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=nn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Cg(e,t,n){switch(t.tag){case 3:Fp(t),or();break;case 5:up(t);break;case 1:Je(t.type)&&uo(t);break;case 4:xa(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;ae(mo,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ae(me,me.current&1),t.flags|=128,null):n&t.child.childLanes?Up(e,t,n):(ae(me,me.current&1),e=Lt(e,t,n),e!==null?e.sibling:null);ae(me,me.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Vp(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ae(me,me.current),r)break;return null;case 22:case 23:return t.lanes=0,Lp(e,t,n)}return Lt(e,t,n)}var Hp,wl,Bp,Gp;Hp=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};wl=function(){};Bp=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,xn(_t.current);var i=null;switch(n){case"input":s=Gi(e,s),r=Gi(e,r),i=[];break;case"select":s=ge({},s,{value:void 0}),r=ge({},r,{value:void 0}),i=[];break;case"textarea":s=qi(e,s),r=qi(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=ao)}Wi(n,r);var l;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var d=s[u];for(l in d)d.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Gr.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var f=r[u];if(d=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&f!==d&&(f!=null||d!=null))if(u==="style")if(d){for(l in d)!d.hasOwnProperty(l)||f&&f.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in f)f.hasOwnProperty(l)&&d[l]!==f[l]&&(n||(n={}),n[l]=f[l])}else n||(i||(i=[]),i.push(u,n)),n=f;else u==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,d=d?d.__html:void 0,f!=null&&d!==f&&(i=i||[]).push(u,f)):u==="children"?typeof f!="string"&&typeof f!="number"||(i=i||[]).push(u,""+f):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Gr.hasOwnProperty(u)?(f!=null&&u==="onScroll"&&ce("scroll",e),i||d===f||(i=[])):(i=i||[]).push(u,f))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};Gp=function(e,t,n,r){n!==r&&(t.flags|=4)};function Cr(e,t){if(!pe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Pe(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Eg(e,t,n){var r=t.pendingProps;switch(da(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pe(t),null;case 1:return Je(t.type)&&co(),Pe(t),null;case 3:return r=t.stateNode,lr(),ue(We),ue(De),ya(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ss(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ht!==null&&(Tl(ht),ht=null))),wl(e,t),Pe(t),null;case 5:va(t);var s=xn(es.current);if(n=t.type,e!==null&&t.stateNode!=null)Bp(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(D(166));return Pe(t),null}if(e=xn(_t.current),Ss(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Ct]=t,r[Xr]=i,e=(t.mode&1)!==0,n){case"dialog":ce("cancel",r),ce("close",r);break;case"iframe":case"object":case"embed":ce("load",r);break;case"video":case"audio":for(s=0;s<Rr.length;s++)ce(Rr[s],r);break;case"source":ce("error",r);break;case"img":case"image":case"link":ce("error",r),ce("load",r);break;case"details":ce("toggle",r);break;case"input":rc(r,i),ce("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ce("invalid",r);break;case"textarea":oc(r,i),ce("invalid",r)}Wi(n,i),s=null;for(var l in i)if(i.hasOwnProperty(l)){var d=i[l];l==="children"?typeof d=="string"?r.textContent!==d&&(i.suppressHydrationWarning!==!0&&Ns(r.textContent,d,e),s=["children",d]):typeof d=="number"&&r.textContent!==""+d&&(i.suppressHydrationWarning!==!0&&Ns(r.textContent,d,e),s=["children",""+d]):Gr.hasOwnProperty(l)&&d!=null&&l==="onScroll"&&ce("scroll",r)}switch(n){case"input":ps(r),sc(r,i,!0);break;case"textarea":ps(r),ic(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ao)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=gf(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),n==="select"&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[Ct]=t,e[Xr]=r,Hp(e,t,!1,!1),t.stateNode=e;e:{switch(l=Ji(n,r),n){case"dialog":ce("cancel",e),ce("close",e),s=r;break;case"iframe":case"object":case"embed":ce("load",e),s=r;break;case"video":case"audio":for(s=0;s<Rr.length;s++)ce(Rr[s],e);s=r;break;case"source":ce("error",e),s=r;break;case"img":case"image":case"link":ce("error",e),ce("load",e),s=r;break;case"details":ce("toggle",e),s=r;break;case"input":rc(e,r),s=Gi(e,r),ce("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=ge({},r,{value:void 0}),ce("invalid",e);break;case"textarea":oc(e,r),s=qi(e,r),ce("invalid",e);break;default:s=r}Wi(n,s),d=s;for(i in d)if(d.hasOwnProperty(i)){var f=d[i];i==="style"?yf(e,f):i==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,f!=null&&xf(e,f)):i==="children"?typeof f=="string"?(n!=="textarea"||f!=="")&&Or(e,f):typeof f=="number"&&Or(e,""+f):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Gr.hasOwnProperty(i)?f!=null&&i==="onScroll"&&ce("scroll",e):f!=null&&Kl(e,i,f,l))}switch(n){case"input":ps(e),sc(e,r,!1);break;case"textarea":ps(e),ic(e);break;case"option":r.value!=null&&e.setAttribute("value",""+rn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Kn(e,!!r.multiple,i,!1):r.defaultValue!=null&&Kn(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=ao)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Pe(t),null;case 6:if(e&&t.stateNode!=null)Gp(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(D(166));if(n=xn(es.current),xn(_t.current),Ss(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ct]=t,(i=r.nodeValue!==n)&&(e=Ze,e!==null))switch(e.tag){case 3:Ns(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ns(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ct]=t,t.stateNode=r}return Pe(t),null;case 13:if(ue(me),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(pe&&Xe!==null&&t.mode&1&&!(t.flags&128))ip(),or(),t.flags|=98560,i=!1;else if(i=Ss(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(D(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(D(317));i[Ct]=t}else or(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Pe(t),i=!1}else ht!==null&&(Tl(ht),ht=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||me.current&1?Ce===0&&(Ce=3):Ra())),t.updateQueue!==null&&(t.flags|=4),Pe(t),null);case 4:return lr(),wl(e,t),e===null&&Yr(t.stateNode.containerInfo),Pe(t),null;case 10:return ma(t.type._context),Pe(t),null;case 17:return Je(t.type)&&co(),Pe(t),null;case 19:if(ue(me),i=t.memoizedState,i===null)return Pe(t),null;if(r=(t.flags&128)!==0,l=i.rendering,l===null)if(r)Cr(i,!1);else{if(Ce!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=xo(e),l!==null){for(t.flags|=128,Cr(i,!1),r=l.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ae(me,me.current&1|2),t.child}e=e.sibling}i.tail!==null&&ye()>cr&&(t.flags|=128,r=!0,Cr(i,!1),t.lanes=4194304)}else{if(!r)if(e=xo(l),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Cr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!pe)return Pe(t),null}else 2*ye()-i.renderingStartTime>cr&&n!==1073741824&&(t.flags|=128,r=!0,Cr(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(n=i.last,n!==null?n.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ye(),t.sibling=null,n=me.current,ae(me,r?n&1|2:n&1),t):(Pe(t),null);case 22:case 23:return Aa(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Qe&1073741824&&(Pe(t),t.subtreeFlags&6&&(t.flags|=8192)):Pe(t),null;case 24:return null;case 25:return null}throw Error(D(156,t.tag))}function _g(e,t){switch(da(t),t.tag){case 1:return Je(t.type)&&co(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return lr(),ue(We),ue(De),ya(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return va(t),null;case 13:if(ue(me),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(D(340));or()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ue(me),null;case 4:return lr(),null;case 10:return ma(t.type._context),null;case 22:case 23:return Aa(),null;case 24:return null;default:return null}}var Es=!1,je=!1,kg=typeof WeakSet=="function"?WeakSet:Set,V=null;function qn(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){xe(e,t,r)}else n.current=null}function Nl(e,t,n){try{n()}catch(r){xe(e,t,r)}}var Kc=!1;function Tg(e,t){if(sl=oo,e=Wf(),aa(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var l=0,d=-1,f=-1,u=0,p=0,m=e,h=null;t:for(;;){for(var g;m!==n||s!==0&&m.nodeType!==3||(d=l+s),m!==i||r!==0&&m.nodeType!==3||(f=l+r),m.nodeType===3&&(l+=m.nodeValue.length),(g=m.firstChild)!==null;)h=m,m=g;for(;;){if(m===e)break t;if(h===n&&++u===s&&(d=l),h===i&&++p===r&&(f=l),(g=m.nextSibling)!==null)break;m=h,h=m.parentNode}m=g}n=d===-1||f===-1?null:{start:d,end:f}}else n=null}n=n||{start:0,end:0}}else n=null;for(ol={focusedElem:e,selectionRange:n},oo=!1,V=t;V!==null;)if(t=V,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,V=e;else for(;V!==null;){t=V;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var N=w.memoizedProps,S=w.memoizedState,x=t.stateNode,v=x.getSnapshotBeforeUpdate(t.elementType===t.type?N:pt(t.type,N),S);x.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(C){xe(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,V=e;break}V=t.return}return w=Kc,Kc=!1,w}function Vr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Nl(t,n,i)}s=s.next}while(s!==r)}}function Ho(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Sl(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Op(e){var t=e.alternate;t!==null&&(e.alternate=null,Op(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ct],delete t[Xr],delete t[al],delete t[dg],delete t[ug])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function zp(e){return e.tag===5||e.tag===3||e.tag===4}function Yc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||zp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function bl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ao));else if(r!==4&&(e=e.child,e!==null))for(bl(e,t,n),e=e.sibling;e!==null;)bl(e,t,n),e=e.sibling}function Cl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Cl(e,t,n),e=e.sibling;e!==null;)Cl(e,t,n),e=e.sibling}var Ie=null,mt=!1;function Bt(e,t,n){for(n=n.child;n!==null;)qp(e,t,n),n=n.sibling}function qp(e,t,n){if(Et&&typeof Et.onCommitFiberUnmount=="function")try{Et.onCommitFiberUnmount(Mo,n)}catch{}switch(n.tag){case 5:je||qn(n,t);case 6:var r=Ie,s=mt;Ie=null,Bt(e,t,n),Ie=r,mt=s,Ie!==null&&(mt?(e=Ie,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ie.removeChild(n.stateNode));break;case 18:Ie!==null&&(mt?(e=Ie,n=n.stateNode,e.nodeType===8?Ei(e.parentNode,n):e.nodeType===1&&Ei(e,n),Wr(e)):Ei(Ie,n.stateNode));break;case 4:r=Ie,s=mt,Ie=n.stateNode.containerInfo,mt=!0,Bt(e,t,n),Ie=r,mt=s;break;case 0:case 11:case 14:case 15:if(!je&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&Nl(n,t,l),s=s.next}while(s!==r)}Bt(e,t,n);break;case 1:if(!je&&(qn(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(d){xe(n,t,d)}Bt(e,t,n);break;case 21:Bt(e,t,n);break;case 22:n.mode&1?(je=(r=je)||n.memoizedState!==null,Bt(e,t,n),je=r):Bt(e,t,n);break;default:Bt(e,t,n)}}function Qc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new kg),t.forEach(function(r){var s=Fg.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ft(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,l=t,d=l;e:for(;d!==null;){switch(d.tag){case 5:Ie=d.stateNode,mt=!1;break e;case 3:Ie=d.stateNode.containerInfo,mt=!0;break e;case 4:Ie=d.stateNode.containerInfo,mt=!0;break e}d=d.return}if(Ie===null)throw Error(D(160));qp(i,l,s),Ie=null,mt=!1;var f=s.alternate;f!==null&&(f.return=null),s.return=null}catch(u){xe(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)$p(t,e),t=t.sibling}function $p(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ft(t,e),St(e),r&4){try{Vr(3,e,e.return),Ho(3,e)}catch(N){xe(e,e.return,N)}try{Vr(5,e,e.return)}catch(N){xe(e,e.return,N)}}break;case 1:ft(t,e),St(e),r&512&&n!==null&&qn(n,n.return);break;case 5:if(ft(t,e),St(e),r&512&&n!==null&&qn(n,n.return),e.flags&32){var s=e.stateNode;try{Or(s,"")}catch(N){xe(e,e.return,N)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,l=n!==null?n.memoizedProps:i,d=e.type,f=e.updateQueue;if(e.updateQueue=null,f!==null)try{d==="input"&&i.type==="radio"&&i.name!=null&&mf(s,i),Ji(d,l);var u=Ji(d,i);for(l=0;l<f.length;l+=2){var p=f[l],m=f[l+1];p==="style"?yf(s,m):p==="dangerouslySetInnerHTML"?xf(s,m):p==="children"?Or(s,m):Kl(s,p,m,u)}switch(d){case"input":Oi(s,i);break;case"textarea":hf(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Kn(s,!!i.multiple,g,!1):h!==!!i.multiple&&(i.defaultValue!=null?Kn(s,!!i.multiple,i.defaultValue,!0):Kn(s,!!i.multiple,i.multiple?[]:"",!1))}s[Xr]=i}catch(N){xe(e,e.return,N)}}break;case 6:if(ft(t,e),St(e),r&4){if(e.stateNode===null)throw Error(D(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(N){xe(e,e.return,N)}}break;case 3:if(ft(t,e),St(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Wr(t.containerInfo)}catch(N){xe(e,e.return,N)}break;case 4:ft(t,e),St(e);break;case 13:ft(t,e),St(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Ta=ye())),r&4&&Qc(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(je=(u=je)||p,ft(t,e),je=u):ft(t,e),St(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!p&&e.mode&1)for(V=e,p=e.child;p!==null;){for(m=V=p;V!==null;){switch(h=V,g=h.child,h.tag){case 0:case 11:case 14:case 15:Vr(4,h,h.return);break;case 1:qn(h,h.return);var w=h.stateNode;if(typeof w.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(N){xe(r,n,N)}}break;case 5:qn(h,h.return);break;case 22:if(h.memoizedState!==null){Zc(m);continue}}g!==null?(g.return=h,V=g):Zc(m)}p=p.sibling}e:for(p=null,m=e;;){if(m.tag===5){if(p===null){p=m;try{s=m.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(d=m.stateNode,f=m.memoizedProps.style,l=f!=null&&f.hasOwnProperty("display")?f.display:null,d.style.display=vf("display",l))}catch(N){xe(e,e.return,N)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=u?"":m.memoizedProps}catch(N){xe(e,e.return,N)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:ft(t,e),St(e),r&4&&Qc(e);break;case 21:break;default:ft(t,e),St(e)}}function St(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(zp(n)){var r=n;break e}n=n.return}throw Error(D(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Or(s,""),r.flags&=-33);var i=Yc(e);Cl(e,i,s);break;case 3:case 4:var l=r.stateNode.containerInfo,d=Yc(e);bl(e,d,l);break;default:throw Error(D(161))}}catch(f){xe(e,e.return,f)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ig(e,t,n){V=e,Wp(e)}function Wp(e,t,n){for(var r=(e.mode&1)!==0;V!==null;){var s=V,i=s.child;if(s.tag===22&&r){var l=s.memoizedState!==null||Es;if(!l){var d=s.alternate,f=d!==null&&d.memoizedState!==null||je;d=Es;var u=je;if(Es=l,(je=f)&&!u)for(V=s;V!==null;)l=V,f=l.child,l.tag===22&&l.memoizedState!==null?ed(s):f!==null?(f.return=l,V=f):ed(s);for(;i!==null;)V=i,Wp(i),i=i.sibling;V=s,Es=d,je=u}Xc(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,V=i):Xc(e)}}function Xc(e){for(;V!==null;){var t=V;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:je||Ho(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!je)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:pt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Dc(t,i,r);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Dc(t,l,n)}break;case 5:var d=t.stateNode;if(n===null&&t.flags&4){n=d;var f=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":f.autoFocus&&n.focus();break;case"img":f.src&&(n.src=f.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var p=u.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&Wr(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}je||t.flags&512&&Sl(t)}catch(h){xe(t,t.return,h)}}if(t===e){V=null;break}if(n=t.sibling,n!==null){n.return=t.return,V=n;break}V=t.return}}function Zc(e){for(;V!==null;){var t=V;if(t===e){V=null;break}var n=t.sibling;if(n!==null){n.return=t.return,V=n;break}V=t.return}}function ed(e){for(;V!==null;){var t=V;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ho(4,t)}catch(f){xe(t,n,f)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(f){xe(t,s,f)}}var i=t.return;try{Sl(t)}catch(f){xe(t,i,f)}break;case 5:var l=t.return;try{Sl(t)}catch(f){xe(t,l,f)}}}catch(f){xe(t,t.return,f)}if(t===e){V=null;break}var d=t.sibling;if(d!==null){d.return=t.return,V=d;break}V=t.return}}var Ag=Math.ceil,wo=Ft.ReactCurrentDispatcher,_a=Ft.ReactCurrentOwner,lt=Ft.ReactCurrentBatchConfig,ee=0,_e=null,we=null,Ae=0,Qe=0,$n=ln(0),Ce=0,ss=null,Cn=0,Bo=0,ka=0,Hr=null,qe=null,Ta=0,cr=1/0,kt=null,No=!1,El=null,en=null,_s=!1,Wt=null,So=0,Br=0,_l=null,Ws=-1,Js=0;function Be(){return ee&6?ye():Ws!==-1?Ws:Ws=ye()}function tn(e){return e.mode&1?ee&2&&Ae!==0?Ae&-Ae:pg.transition!==null?(Js===0&&(Js=Rf()),Js):(e=ie,e!==0||(e=window.event,e=e===void 0?16:Uf(e.type)),e):1}function xt(e,t,n,r){if(50<Br)throw Br=0,_l=null,Error(D(185));is(e,n,r),(!(ee&2)||e!==_e)&&(e===_e&&(!(ee&2)&&(Bo|=n),Ce===4&&qt(e,Ae)),Ke(e,r),n===1&&ee===0&&!(t.mode&1)&&(cr=ye()+500,Fo&&an()))}function Ke(e,t){var n=e.callbackNode;p0(e,t);var r=so(e,e===_e?Ae:0);if(r===0)n!==null&&cc(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&cc(n),t===1)e.tag===0?fg(td.bind(null,e)):rp(td.bind(null,e)),ag(function(){!(ee&6)&&an()}),n=null;else{switch(Mf(r)){case 1:n=ea;break;case 4:n=If;break;case 16:n=ro;break;case 536870912:n=Af;break;default:n=ro}n=tm(n,Jp.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Jp(e,t){if(Ws=-1,Js=0,ee&6)throw Error(D(327));var n=e.callbackNode;if(er()&&e.callbackNode!==n)return null;var r=so(e,e===_e?Ae:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=bo(e,r);else{t=r;var s=ee;ee|=2;var i=Yp();(_e!==e||Ae!==t)&&(kt=null,cr=ye()+500,yn(e,t));do try{Pg();break}catch(d){Kp(e,d)}while(!0);pa(),wo.current=i,ee=s,we!==null?t=0:(_e=null,Ae=0,t=Ce)}if(t!==0){if(t===2&&(s=Zi(e),s!==0&&(r=s,t=kl(e,s))),t===1)throw n=ss,yn(e,0),qt(e,r),Ke(e,ye()),n;if(t===6)qt(e,r);else{if(s=e.current.alternate,!(r&30)&&!Rg(s)&&(t=bo(e,r),t===2&&(i=Zi(e),i!==0&&(r=i,t=kl(e,i))),t===1))throw n=ss,yn(e,0),qt(e,r),Ke(e,ye()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(D(345));case 2:fn(e,qe,kt);break;case 3:if(qt(e,r),(r&130023424)===r&&(t=Ta+500-ye(),10<t)){if(so(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Be(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=ll(fn.bind(null,e,qe,kt),t);break}fn(e,qe,kt);break;case 4:if(qt(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var l=31-gt(r);i=1<<l,l=t[l],l>s&&(s=l),r&=~i}if(r=s,r=ye()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ag(r/1960))-r,10<r){e.timeoutHandle=ll(fn.bind(null,e,qe,kt),r);break}fn(e,qe,kt);break;case 5:fn(e,qe,kt);break;default:throw Error(D(329))}}}return Ke(e,ye()),e.callbackNode===n?Jp.bind(null,e):null}function kl(e,t){var n=Hr;return e.current.memoizedState.isDehydrated&&(yn(e,t).flags|=256),e=bo(e,t),e!==2&&(t=qe,qe=n,t!==null&&Tl(t)),e}function Tl(e){qe===null?qe=e:qe.push.apply(qe,e)}function Rg(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!wt(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function qt(e,t){for(t&=~ka,t&=~Bo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-gt(t),r=1<<n;e[n]=-1,t&=~r}}function td(e){if(ee&6)throw Error(D(327));er();var t=so(e,0);if(!(t&1))return Ke(e,ye()),null;var n=bo(e,t);if(e.tag!==0&&n===2){var r=Zi(e);r!==0&&(t=r,n=kl(e,r))}if(n===1)throw n=ss,yn(e,0),qt(e,t),Ke(e,ye()),n;if(n===6)throw Error(D(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,fn(e,qe,kt),Ke(e,ye()),null}function Ia(e,t){var n=ee;ee|=1;try{return e(t)}finally{ee=n,ee===0&&(cr=ye()+500,Fo&&an())}}function En(e){Wt!==null&&Wt.tag===0&&!(ee&6)&&er();var t=ee;ee|=1;var n=lt.transition,r=ie;try{if(lt.transition=null,ie=1,e)return e()}finally{ie=r,lt.transition=n,ee=t,!(ee&6)&&an()}}function Aa(){Qe=$n.current,ue($n)}function yn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,lg(n)),we!==null)for(n=we.return;n!==null;){var r=n;switch(da(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&co();break;case 3:lr(),ue(We),ue(De),ya();break;case 5:va(r);break;case 4:lr();break;case 13:ue(me);break;case 19:ue(me);break;case 10:ma(r.type._context);break;case 22:case 23:Aa()}n=n.return}if(_e=e,we=e=nn(e.current,null),Ae=Qe=t,Ce=0,ss=null,ka=Bo=Cn=0,qe=Hr=null,gn!==null){for(t=0;t<gn.length;t++)if(n=gn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var l=i.next;i.next=s,r.next=l}n.pending=r}gn=null}return e}function Kp(e,t){do{var n=we;try{if(pa(),zs.current=yo,vo){for(var r=he.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}vo=!1}if(bn=0,Ee=be=he=null,Ur=!1,ts=0,_a.current=null,n===null||n.return===null){Ce=1,ss=t,we=null;break}e:{var i=e,l=n.return,d=n,f=t;if(t=Ae,d.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){var u=f,p=d,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var h=p.alternate;h?(p.updateQueue=h.updateQueue,p.memoizedState=h.memoizedState,p.lanes=h.lanes):(p.updateQueue=null,p.memoizedState=null)}var g=Gc(l);if(g!==null){g.flags&=-257,Oc(g,l,d,i,t),g.mode&1&&Bc(i,u,t),t=g,f=u;var w=t.updateQueue;if(w===null){var N=new Set;N.add(f),t.updateQueue=N}else w.add(f);break e}else{if(!(t&1)){Bc(i,u,t),Ra();break e}f=Error(D(426))}}else if(pe&&d.mode&1){var S=Gc(l);if(S!==null){!(S.flags&65536)&&(S.flags|=256),Oc(S,l,d,i,t),ua(ar(f,d));break e}}i=f=ar(f,d),Ce!==4&&(Ce=2),Hr===null?Hr=[i]:Hr.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var x=Mp(i,f,t);Lc(i,x);break e;case 1:d=f;var v=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(en===null||!en.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t;var C=Pp(i,d,t);Lc(i,C);break e}}i=i.return}while(i!==null)}Xp(n)}catch(b){t=b,we===n&&n!==null&&(we=n=n.return);continue}break}while(!0)}function Yp(){var e=wo.current;return wo.current=yo,e===null?yo:e}function Ra(){(Ce===0||Ce===3||Ce===2)&&(Ce=4),_e===null||!(Cn&268435455)&&!(Bo&268435455)||qt(_e,Ae)}function bo(e,t){var n=ee;ee|=2;var r=Yp();(_e!==e||Ae!==t)&&(kt=null,yn(e,t));do try{Mg();break}catch(s){Kp(e,s)}while(!0);if(pa(),ee=n,wo.current=r,we!==null)throw Error(D(261));return _e=null,Ae=0,Ce}function Mg(){for(;we!==null;)Qp(we)}function Pg(){for(;we!==null&&!s0();)Qp(we)}function Qp(e){var t=em(e.alternate,e,Qe);e.memoizedProps=e.pendingProps,t===null?Xp(e):we=t,_a.current=null}function Xp(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=_g(n,t),n!==null){n.flags&=32767,we=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ce=6,we=null;return}}else if(n=Eg(n,t,Qe),n!==null){we=n;return}if(t=t.sibling,t!==null){we=t;return}we=t=e}while(t!==null);Ce===0&&(Ce=5)}function fn(e,t,n){var r=ie,s=lt.transition;try{lt.transition=null,ie=1,jg(e,t,n,r)}finally{lt.transition=s,ie=r}return null}function jg(e,t,n,r){do er();while(Wt!==null);if(ee&6)throw Error(D(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(D(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(m0(e,i),e===_e&&(we=_e=null,Ae=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||_s||(_s=!0,tm(ro,function(){return er(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=lt.transition,lt.transition=null;var l=ie;ie=1;var d=ee;ee|=4,_a.current=null,Tg(e,n),$p(n,e),eg(ol),oo=!!sl,ol=sl=null,e.current=n,Ig(n),o0(),ee=d,ie=l,lt.transition=i}else e.current=n;if(_s&&(_s=!1,Wt=e,So=s),i=e.pendingLanes,i===0&&(en=null),a0(n.stateNode),Ke(e,ye()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(No)throw No=!1,e=El,El=null,e;return So&1&&e.tag!==0&&er(),i=e.pendingLanes,i&1?e===_l?Br++:(Br=0,_l=e):Br=0,an(),null}function er(){if(Wt!==null){var e=Mf(So),t=lt.transition,n=ie;try{if(lt.transition=null,ie=16>e?16:e,Wt===null)var r=!1;else{if(e=Wt,Wt=null,So=0,ee&6)throw Error(D(331));var s=ee;for(ee|=4,V=e.current;V!==null;){var i=V,l=i.child;if(V.flags&16){var d=i.deletions;if(d!==null){for(var f=0;f<d.length;f++){var u=d[f];for(V=u;V!==null;){var p=V;switch(p.tag){case 0:case 11:case 15:Vr(8,p,i)}var m=p.child;if(m!==null)m.return=p,V=m;else for(;V!==null;){p=V;var h=p.sibling,g=p.return;if(Op(p),p===u){V=null;break}if(h!==null){h.return=g,V=h;break}V=g}}}var w=i.alternate;if(w!==null){var N=w.child;if(N!==null){w.child=null;do{var S=N.sibling;N.sibling=null,N=S}while(N!==null)}}V=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,V=l;else e:for(;V!==null;){if(i=V,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Vr(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,V=x;break e}V=i.return}}var v=e.current;for(V=v;V!==null;){l=V;var y=l.child;if(l.subtreeFlags&2064&&y!==null)y.return=l,V=y;else e:for(l=v;V!==null;){if(d=V,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:Ho(9,d)}}catch(b){xe(d,d.return,b)}if(d===l){V=null;break e}var C=d.sibling;if(C!==null){C.return=d.return,V=C;break e}V=d.return}}if(ee=s,an(),Et&&typeof Et.onPostCommitFiberRoot=="function")try{Et.onPostCommitFiberRoot(Mo,e)}catch{}r=!0}return r}finally{ie=n,lt.transition=t}}return!1}function nd(e,t,n){t=ar(n,t),t=Mp(e,t,1),e=Zt(e,t,1),t=Be(),e!==null&&(is(e,1,t),Ke(e,t))}function xe(e,t,n){if(e.tag===3)nd(e,e,n);else for(;t!==null;){if(t.tag===3){nd(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(en===null||!en.has(r))){e=ar(n,e),e=Pp(t,e,1),t=Zt(t,e,1),e=Be(),t!==null&&(is(t,1,e),Ke(t,e));break}}t=t.return}}function Lg(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Be(),e.pingedLanes|=e.suspendedLanes&n,_e===e&&(Ae&n)===n&&(Ce===4||Ce===3&&(Ae&130023424)===Ae&&500>ye()-Ta?yn(e,0):ka|=n),Ke(e,t)}function Zp(e,t){t===0&&(e.mode&1?(t=gs,gs<<=1,!(gs&130023424)&&(gs=4194304)):t=1);var n=Be();e=jt(e,t),e!==null&&(is(e,t,n),Ke(e,n))}function Dg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Zp(e,n)}function Fg(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(D(314))}r!==null&&r.delete(t),Zp(e,n)}var em;em=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||We.current)$e=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return $e=!1,Cg(e,t,n);$e=!!(e.flags&131072)}else $e=!1,pe&&t.flags&1048576&&sp(t,po,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;$s(e,t),e=t.pendingProps;var s=sr(t,De.current);Zn(t,n),s=Na(null,t,r,e,s,n);var i=Sa();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Je(r)?(i=!0,uo(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ga(t),s.updater=Vo,t.stateNode=s,s._reactInternals=t,ml(t,r,e,n),t=xl(null,t,r,!0,i,n)):(t.tag=0,pe&&i&&ca(t),He(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch($s(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Vg(r),e=pt(r,e),s){case 0:t=gl(null,t,r,e,n);break e;case 1:t=$c(null,t,r,e,n);break e;case 11:t=zc(null,t,r,e,n);break e;case 14:t=qc(null,t,r,pt(r.type,e),n);break e}throw Error(D(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:pt(r,s),gl(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:pt(r,s),$c(e,t,r,s,n);case 3:e:{if(Fp(t),e===null)throw Error(D(387));r=t.pendingProps,i=t.memoizedState,s=i.element,dp(e,t),go(t,r,null,n);var l=t.memoizedState;if(r=l.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=ar(Error(D(423)),t),t=Wc(e,t,r,n,s);break e}else if(r!==s){s=ar(Error(D(424)),t),t=Wc(e,t,r,n,s);break e}else for(Xe=Xt(t.stateNode.containerInfo.firstChild),Ze=t,pe=!0,ht=null,n=ap(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(or(),r===s){t=Lt(e,t,n);break e}He(e,t,r,n)}t=t.child}return t;case 5:return up(t),e===null&&ul(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,l=s.children,il(r,s)?l=null:i!==null&&il(r,i)&&(t.flags|=32),Dp(e,t),He(e,t,l,n),t.child;case 6:return e===null&&ul(t),null;case 13:return Up(e,t,n);case 4:return xa(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ir(t,null,r,n):He(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:pt(r,s),zc(e,t,r,s,n);case 7:return He(e,t,t.pendingProps,n),t.child;case 8:return He(e,t,t.pendingProps.children,n),t.child;case 12:return He(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,l=s.value,ae(mo,r._currentValue),r._currentValue=l,i!==null)if(wt(i.value,l)){if(i.children===s.children&&!We.current){t=Lt(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var d=i.dependencies;if(d!==null){l=i.child;for(var f=d.firstContext;f!==null;){if(f.context===r){if(i.tag===1){f=Rt(-1,n&-n),f.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var p=u.pending;p===null?f.next=f:(f.next=p.next,p.next=f),u.pending=f}}i.lanes|=n,f=i.alternate,f!==null&&(f.lanes|=n),fl(i.return,n,t),d.lanes|=n;break}f=f.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(D(341));l.lanes|=n,d=l.alternate,d!==null&&(d.lanes|=n),fl(l,n,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}He(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Zn(t,n),s=ct(s),r=r(s),t.flags|=1,He(e,t,r,n),t.child;case 14:return r=t.type,s=pt(r,t.pendingProps),s=pt(r.type,s),qc(e,t,r,s,n);case 15:return jp(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:pt(r,s),$s(e,t),t.tag=1,Je(r)?(e=!0,uo(t)):e=!1,Zn(t,n),Rp(t,r,s),ml(t,r,s,n),xl(null,t,r,!0,e,n);case 19:return Vp(e,t,n);case 22:return Lp(e,t,n)}throw Error(D(156,t.tag))};function tm(e,t){return Tf(e,t)}function Ug(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function it(e,t,n,r){return new Ug(e,t,n,r)}function Ma(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Vg(e){if(typeof e=="function")return Ma(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ql)return 11;if(e===Xl)return 14}return 2}function nn(e,t){var n=e.alternate;return n===null?(n=it(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ks(e,t,n,r,s,i){var l=2;if(r=e,typeof e=="function")Ma(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Dn:return wn(n.children,s,i,t);case Yl:l=8,s|=8;break;case Ui:return e=it(12,n,t,s|2),e.elementType=Ui,e.lanes=i,e;case Vi:return e=it(13,n,t,s),e.elementType=Vi,e.lanes=i,e;case Hi:return e=it(19,n,t,s),e.elementType=Hi,e.lanes=i,e;case uf:return Go(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case cf:l=10;break e;case df:l=9;break e;case Ql:l=11;break e;case Xl:l=14;break e;case Gt:l=16,r=null;break e}throw Error(D(130,e==null?e:typeof e,""))}return t=it(l,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function wn(e,t,n,r){return e=it(7,e,r,t),e.lanes=n,e}function Go(e,t,n,r){return e=it(22,e,r,t),e.elementType=uf,e.lanes=n,e.stateNode={isHidden:!1},e}function Pi(e,t,n){return e=it(6,e,null,t),e.lanes=n,e}function ji(e,t,n){return t=it(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Hg(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mi(0),this.expirationTimes=mi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mi(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Pa(e,t,n,r,s,i,l,d,f){return e=new Hg(e,t,n,d,f),t===1?(t=1,i===!0&&(t|=8)):t=0,i=it(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ga(i),e}function Bg(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ln,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function nm(e){if(!e)return sn;e=e._reactInternals;e:{if(kn(e)!==e||e.tag!==1)throw Error(D(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Je(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(D(171))}if(e.tag===1){var n=e.type;if(Je(n))return np(e,n,t)}return t}function rm(e,t,n,r,s,i,l,d,f){return e=Pa(n,r,!0,e,s,i,l,d,f),e.context=nm(null),n=e.current,r=Be(),s=tn(n),i=Rt(r,s),i.callback=t??null,Zt(n,i,s),e.current.lanes=s,is(e,s,r),Ke(e,r),e}function Oo(e,t,n,r){var s=t.current,i=Be(),l=tn(s);return n=nm(n),t.context===null?t.context=n:t.pendingContext=n,t=Rt(i,l),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Zt(s,t,l),e!==null&&(xt(e,s,l,i),Os(e,s,l)),l}function Co(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function rd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ja(e,t){rd(e,t),(e=e.alternate)&&rd(e,t)}function Gg(){return null}var sm=typeof reportError=="function"?reportError:function(e){console.error(e)};function La(e){this._internalRoot=e}zo.prototype.render=La.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(D(409));Oo(e,t,null,null)};zo.prototype.unmount=La.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;En(function(){Oo(null,e,null,null)}),t[Pt]=null}};function zo(e){this._internalRoot=e}zo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Lf();e={blockedOn:null,target:e,priority:t};for(var n=0;n<zt.length&&t!==0&&t<zt[n].priority;n++);zt.splice(n,0,e),n===0&&Ff(e)}};function Da(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function qo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function sd(){}function Og(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Co(l);i.call(u)}}var l=rm(t,r,e,0,null,!1,!1,"",sd);return e._reactRootContainer=l,e[Pt]=l.current,Yr(e.nodeType===8?e.parentNode:e),En(),l}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var d=r;r=function(){var u=Co(f);d.call(u)}}var f=Pa(e,0,!1,null,null,!1,!1,"",sd);return e._reactRootContainer=f,e[Pt]=f.current,Yr(e.nodeType===8?e.parentNode:e),En(function(){Oo(t,f,n,r)}),f}function $o(e,t,n,r,s){var i=n._reactRootContainer;if(i){var l=i;if(typeof s=="function"){var d=s;s=function(){var f=Co(l);d.call(f)}}Oo(t,l,e,s)}else l=Og(n,t,e,s,r);return Co(l)}Pf=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ar(t.pendingLanes);n!==0&&(ta(t,n|1),Ke(t,ye()),!(ee&6)&&(cr=ye()+500,an()))}break;case 13:En(function(){var r=jt(e,1);if(r!==null){var s=Be();xt(r,e,1,s)}}),ja(e,1)}};na=function(e){if(e.tag===13){var t=jt(e,134217728);if(t!==null){var n=Be();xt(t,e,134217728,n)}ja(e,134217728)}};jf=function(e){if(e.tag===13){var t=tn(e),n=jt(e,t);if(n!==null){var r=Be();xt(n,e,t,r)}ja(e,t)}};Lf=function(){return ie};Df=function(e,t){var n=ie;try{return ie=e,t()}finally{ie=n}};Yi=function(e,t,n){switch(t){case"input":if(Oi(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Do(r);if(!s)throw Error(D(90));pf(r),Oi(r,s)}}}break;case"textarea":hf(e,n);break;case"select":t=n.value,t!=null&&Kn(e,!!n.multiple,t,!1)}};Sf=Ia;bf=En;var zg={usingClientEntryPoint:!1,Events:[as,Hn,Do,wf,Nf,Ia]},Er={findFiberByHostInstance:hn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qg={bundleType:Er.bundleType,version:Er.version,rendererPackageName:Er.rendererPackageName,rendererConfig:Er.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ft.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=_f(e),e===null?null:e.stateNode},findFiberByHostInstance:Er.findFiberByHostInstance||Gg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ks=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ks.isDisabled&&ks.supportsFiber)try{Mo=ks.inject(qg),Et=ks}catch{}}tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zg;tt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Da(t))throw Error(D(200));return Bg(e,t,null,n)};tt.createRoot=function(e,t){if(!Da(e))throw Error(D(299));var n=!1,r="",s=sm;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Pa(e,1,!1,null,null,n,!1,r,s),e[Pt]=t.current,Yr(e.nodeType===8?e.parentNode:e),new La(t)};tt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(D(188)):(e=Object.keys(e).join(","),Error(D(268,e)));return e=_f(t),e=e===null?null:e.stateNode,e};tt.flushSync=function(e){return En(e)};tt.hydrate=function(e,t,n){if(!qo(t))throw Error(D(200));return $o(null,e,t,!0,n)};tt.hydrateRoot=function(e,t,n){if(!Da(e))throw Error(D(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",l=sm;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=rm(t,null,e,1,n??null,s,!1,i,l),e[Pt]=t.current,Yr(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new zo(t)};tt.render=function(e,t,n){if(!qo(t))throw Error(D(200));return $o(null,e,t,!1,n)};tt.unmountComponentAtNode=function(e){if(!qo(e))throw Error(D(40));return e._reactRootContainer?(En(function(){$o(null,null,e,!1,function(){e._reactRootContainer=null,e[Pt]=null})}),!0):!1};tt.unstable_batchedUpdates=Ia;tt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!qo(n))throw Error(D(200));if(e==null||e._reactInternals===void 0)throw Error(D(38));return $o(e,t,n,!1,r)};tt.version="18.3.1-next-f1338f8080-20240426";function om(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(om)}catch(e){console.error(e)}}om(),sf.exports=tt;var $g=sf.exports,im,od=$g;im=od.createRoot,od.hydrateRoot;var de=(e=>(e.GOOD="Good",e.BAD="Bad",e.ATTENTION="Needs Attention",e.NIL="Nil",e))(de||{});const id={truckNo:"",trailerNo:"",inspectedBy:"",driverName:"",location:"",odometer:"",jobCard:"",timestamp:"",rate:0,remarks:"",inspectorSignature:"",driverSignature:"",photoFront:"",photoLS:"",photoRS:"",photoBack:"",photoDamage:""},Ts=[{id:"details",title:"Details",label:"Details"},{id:"photos",title:"Photos",label:"Photos"},{id:"checklist_1",title:"Checklist 1",label:"Part 1"},{id:"checklist_2",title:"Checklist 2",label:"Part 2"},{id:"checklist_3",title:"Checklist 3",label:"Part 3"},{id:"signatures",title:"Signatures",label:"Signatures"},{id:"summary",title:"Summary",label:"Summary"}],Q={PPE:"PPE & Safety Gear",DOCUMENTATION:"Documentation & Legal",VEHICLE_EXTERIOR:"Vehicle Exterior & Cab",LIGHTS_ELECTRICAL:"Lights & Electrical",MECHANICAL:"Mechanical & Safety Equipment",TRAILER:"Trailer Specifics"},dr=[{id:"reflectiveWorkSuit",label:"Reflective Work Suit",category:Q.PPE},{id:"safetyGear",label:"Safety Goggles, Boots, Gloves, Hard Hat",category:Q.PPE},{id:"dustMask",label:"Dust Mask (Task Application)",category:Q.PPE},{id:"roadFitness",label:"Valid Road Fitness / Road Tax / Insurance",category:Q.DOCUMENTATION},{id:"validDriverDocs",label:"Valid Drivers License, DDT Certificate, Driver ID",category:Q.DOCUMENTATION},{id:"driverManual",label:"Driver Manual",category:Q.DOCUMENTATION},{id:"routeRisk",label:"Route Risk Assessment",category:Q.DOCUMENTATION},{id:"windscreen",label:"Windscreen Condition",category:Q.VEHICLE_EXTERIOR},{id:"mirrors",label:"Mirrors Condition",category:Q.VEHICLE_EXTERIOR},{id:"chevrons",label:"Chevrons, Plate/Reflective Tape",category:Q.VEHICLE_EXTERIOR},{id:"generalCondition",label:"General Condition (Interior Cab, Body: Signs of Tear & Wear, Dents)",category:Q.VEHICLE_EXTERIOR},{id:"seatBelt",label:"Three-Point Retractable Seat Belt",category:Q.VEHICLE_EXTERIOR},{id:"headLamps",label:"Head Lamps Condition",category:Q.LIGHTS_ELECTRICAL},{id:"indicators",label:"Indicators Condition",category:Q.LIGHTS_ELECTRICAL},{id:"parkingLights",label:"Parking Lights Condition",category:Q.LIGHTS_ELECTRICAL},{id:"reverseAlarm",label:"Reverse Alarm, Reverse Lights Condition",category:Q.LIGHTS_ELECTRICAL},{id:"hornIgnition",label:"Horn, Ignition & Electrical (Doors/Windows)",category:Q.LIGHTS_ELECTRICAL},{id:"brakes",label:"Brakes, Brake Lights, Trailer Lights, Brake Air Pipes",category:Q.MECHANICAL},{id:"tyres",label:"Tyres Condition (Not Worn Out, Pressure, Spare)",category:Q.MECHANICAL},{id:"wheelNuts",label:"Wheel Nuts, Wheel Pointers",category:Q.MECHANICAL},{id:"fluidLeaks",label:"No Leaks of Lubricants/Fluids (Oil, Coolant, etc.)",category:Q.MECHANICAL},{id:"fireExtinguisher",label:"Recommended Fire Extinguisher (9Kg & 2.5Kg)",category:Q.MECHANICAL},{id:"warningTriangles",label:"Warning Triangles, Two Approved Wheel Chocks",category:Q.MECHANICAL},{id:"firstAid",label:"First Aid Kit",category:Q.MECHANICAL},{id:"trailerCondition",label:"Trailer Condition",category:Q.TRAILER},{id:"fifthWheel",label:"Fifth Wheel Condition",category:Q.TRAILER},{id:"landingLegs",label:"Position and Condition of Landing Legs",category:Q.TRAILER},{id:"tarpaulins",label:"Tarpaulins, Ropes, Belts or Straps",category:Q.TRAILER}],B={TRUCK_EQUIPMENT:"Truck/Tractor and Equipment",TYRES:"Tyres and Horses",PPE_ID:"Drivers Protective Gear & ID",DOCUMENTS:"Documents",ONBOARD:"On Board Equipment"},Wo=[{id:"petro_1",label:"1. OBC functionality: live",category:B.TRUCK_EQUIPMENT},{id:"petro_2",label:"2. Large exterior mirror for all around vision (incl. parabolic on passenger side)",category:B.TRUCK_EQUIPMENT},{id:"petro_3",label:"3. Single pane laminated windshields (no cracks)",category:B.TRUCK_EQUIPMENT},{id:"petro_4",label:"4. Ergonomically designed seats and head restraints",category:B.TRUCK_EQUIPMENT},{id:"petro_5",label:"5. 3 point seat belts on both seats",category:B.TRUCK_EQUIPMENT},{id:"petro_6",label:"6. Brake Testing required",category:B.TRUCK_EQUIPMENT},{id:"petro_7",label:"7. Functioning, master battery switch & engine cut  off switch on side of cab",category:B.TRUCK_EQUIPMENT},{id:"petro_8",label:"8. Stop Tail, Backing and Turn lights",category:B.TRUCK_EQUIPMENT},{id:"petro_9",label:"9. Cab mounted grab handle for ease of entry exit",category:B.TRUCK_EQUIPMENT},{id:"petro_10",label:"10. Jack, Mats, Wheel Spanner",category:B.TRUCK_EQUIPMENT},{id:"petro_11",label:"11. Cabin Jack",category:B.TRUCK_EQUIPMENT},{id:"petro_12",label:"12. P. window switches",category:B.TRUCK_EQUIPMENT},{id:"petro_13",label:"13. Condition of the fifth wheel (Lock/Lubricants)",category:B.TRUCK_EQUIPMENT},{id:"petro_14",label:"14. Each component outlets (faucet) numbered and marked with fill capacity",category:B.TRUCK_EQUIPMENT},{id:"petro_15",label:"15. 2 bronze grounding bolts compatible with loading rack (permissive) system",category:B.TRUCK_EQUIPMENT},{id:"petro_16",label:"16. Anti  slip walkway along the whole length of the tank",category:B.TRUCK_EQUIPMENT},{id:"petro_17",label:"17. Tank hatch and roll  over protection (coatings)",category:B.TRUCK_EQUIPMENT},{id:"petro_18",label:"18. Double latching lockable man lids, installed with hinges facing forward",category:B.TRUCK_EQUIPMENT},{id:"petro_19",label:"19. Trailer fitted with fall protection harness of handrails",category:B.TRUCK_EQUIPMENT},{id:"petro_20",label:"20. Ullage marks in correct places & sealed, also Doom Cover",category:B.TRUCK_EQUIPMENT},{id:"petro_21",label:"21. Presence of emergency/foot valves",category:B.TRUCK_EQUIPMENT},{id:"petro_22",label:"22. Emergence valves for all components",category:B.TRUCK_EQUIPMENT},{id:"petro_23",label:"23. Condition of landing legs",category:B.TRUCK_EQUIPMENT},{id:"petro_24",label:"24. Minimum tread depth set at the center for all wheel (incl. Spare tyre)",category:B.TYRES},{id:"petro_25",label:"25. Wheel nut indicators",category:B.TYRES},{id:"petro_26",label:"26. Mudguards for all wheels",category:B.TYRES},{id:"petro_27",label:"27. Choke blocks",category:B.TYRES},{id:"petro_28",label:"28. Hoses damaged/fittings? Continuity Test done?",category:B.TYRES},{id:"petro_29",label:"29. Delivery hose(s) for gravity drops",category:B.TYRES},{id:"petro_30",label:"30. Truck/trailer loaded within legal limits (axle weight)?",category:B.TYRES},{id:"petro_31",label:"31. Signs of lubrication loss on wheel",category:B.TYRES},{id:"petro_32",label:"32. Anti-static clothes/Work suite?",category:B.PPE_ID},{id:"petro_33",label:"33. Gloves for hydrocarbon handing Present?",category:B.PPE_ID},{id:"petro_34",label:"34. Safety shoes - hydrocarbon proof Present?",category:B.PPE_ID},{id:"petro_35",label:"35. Hard hat Present?",category:B.PPE_ID},{id:"petro_36",label:"36. Drivers ID Present?",category:B.PPE_ID},{id:"petro_37",label:"37. Road worthiness approval by authorities",category:B.DOCUMENTS},{id:"petro_38",label:"38. Valid drivers DDT certificate",category:B.DOCUMENTS},{id:"petro_39",label:"39. Valid drivers License",category:B.DOCUMENTS},{id:"petro_40",label:"40. Electric certificate",category:B.DOCUMENTS},{id:"petro_41",label:"41. Drivers Manual",category:B.DOCUMENTS},{id:"petro_42",label:"42. Route Risk Assessment",category:B.DOCUMENTS},{id:"petro_43",label:"43. ZCSA certificate",category:B.DOCUMENTS},{id:"petro_44",label:"44. Assize Certificate",category:B.DOCUMENTS},{id:"petro_45",label:"45. TREM Card",category:B.DOCUMENTS},{id:"petro_46",label:"46. Fire extinguisher (2kg dry chemical) fixed & valid X 1",category:B.ONBOARD},{id:"petro_47",label:"47. Fire extinguisher (9kg dry chemical) within inspection X 2",category:B.ONBOARD},{id:"petro_48",label:"48. Barricading tape",category:B.ONBOARD},{id:"petro_49",label:"49. Charge Line",category:B.ONBOARD},{id:"petro_50",label:"50. Torch",category:B.ONBOARD},{id:"petro_51",label:"51. Spill Kit",category:B.ONBOARD},{id:"petro_52",label:"52. First aid kit 4 warning triangles and 3 cones",category:B.ONBOARD},{id:"petro_53",label:"53. On Board camera",category:B.ONBOARD},{id:"petro_54",label:"54. Safe Loading Pass/ Safe to operate/ Tech inspection",category:B.ONBOARD}],Y={PPE:"A. Personal Protective Equipment",VEHICLE:"B. Vehicle (Horse & Trailer)",SPILL_KIT:"C. Spill Kit",DOCUMENTATION:"D. Documentation"},vn=[{id:"acid_1",label:"1. Reflective Work Suit (Acid Proof), Gumboots Safety Goggles",category:Y.PPE},{id:"acid_2",label:"2. Hard Hat, PVC Gloves, Respirator (Double side), Face shield",category:Y.PPE},{id:"acid_3",label:"3. Valid road fitness/road tax/Insurance/permit",category:Y.VEHICLE},{id:"acid_4",label:"4. Wind screen condition",category:Y.VEHICLE},{id:"acid_5",label:"5. Mirrors in good condition",category:Y.VEHICLE},{id:"acid_6",label:"6. Three-point retractable seat belt",category:Y.VEHICLE},{id:"acid_7",label:"7. Horn working, ignition switch, electrical (doors/windows)",category:Y.VEHICLE},{id:"acid_8",label:"8. Valid Fire extinguisher (9kg=2, 2kg=1)",category:Y.VEHICLE},{id:"acid_9",label:"9. Warning triangles, Cones, two approved wheel chokes",category:Y.VEHICLE},{id:"acid_10",label:"10. Headlamps working",category:Y.VEHICLE},{id:"acid_11",label:"11. Amber beacon",category:Y.VEHICLE},{id:"acid_12",label:"12. Brake lights, trailer lights, indicators working",category:Y.VEHICLE},{id:"acid_13",label:"13. Brakes, air pipes, air bags OK",category:Y.VEHICLE},{id:"acid_14",label:"14. Tyres not worn  out, visual Tyre Pressure, Spare wheel",category:Y.VEHICLE},{id:"acid_15",label:"15. Wheel nuts, wheel pointers, bolts, Flanges OK",category:Y.VEHICLE},{id:"acid_16",label:"16. Revers alarm, reverse lights working",category:Y.VEHICLE},{id:"acid_17",label:"17. Chevrons plate/reflective tape",category:Y.VEHICLE},{id:"acid_18",label:"18. Hazchem diamond symbols correct & display on both 2 sides",category:Y.VEHICLE},{id:"acid_19",label:"19. Anti-slip protection, Ladder, Hand rails",category:Y.VEHICLE},{id:"acid_20",label:"20. Over spill hose connected to containment container",category:Y.VEHICLE},{id:"acid_21",label:"21. Hatch, Valves, Vents",category:Y.VEHICLE},{id:"acid_22",label:"22. No leaks of chemicals/lubricants (oil, coolants, acid etc.)",category:Y.VEHICLE},{id:"acid_23",label:"23. General condition (interior cab, body: signs of Corrosion, Cracks, leaks)",category:Y.VEHICLE},{id:"acid_25",label:"25. Lime box filled with lime",category:Y.SPILL_KIT},{id:"acid_26",label:"26. First Aid Kit, Diphotrine",category:Y.SPILL_KIT},{id:"acid_27",label:"27. Pick and Shovel",category:Y.SPILL_KIT},{id:"acid_28",label:"28. Barricading tape",category:Y.SPILL_KIT},{id:"acid_29",label:"29. Water (20 liters container)",category:Y.SPILL_KIT},{id:"acid_30",label:"30. Pressure/Thickness Test Certificate",category:Y.DOCUMENTATION},{id:"acid_31",label:"31. Electric System Certificate",category:Y.DOCUMENTATION},{id:"acid_32",label:"32. Tank Cleanliness Certificate",category:Y.DOCUMENTATION},{id:"acid_33",label:"33. Driver Manual, Route Risk Assessment/Journey plan",category:Y.DOCUMENTATION},{id:"acid_34",label:"34. Valid Driver licence, DDT certificate, ID",category:Y.DOCUMENTATION}],G={PRIME_MOVER:"Prime Mover",TRAILER_TANKS:"Trailer/Tanks",DRIVER:"Driver",SAFETY_SIGNS:"Safety & Warning Signs",DOCUMENTS:"Licence & Mandatory Documents"},Jo=[{id:"petro2_1",label:"1. General: Appearance, Paint, Leaks, Charge line",category:G.PRIME_MOVER},{id:"petro2_2",label:"2. Visibility: Windscreen, Windows, Wipers, Mirrors",category:G.PRIME_MOVER},{id:"petro2_3",label:"3. Lighting: Headlights, Beacon, Turning, Stop, Reverse Lights",category:G.PRIME_MOVER},{id:"petro2_4",label:"4. Provision for Orange Diamond",category:G.PRIME_MOVER},{id:"petro2_5",label:"5. Seat Belt: 3-point Contact, Retractable",category:G.PRIME_MOVER},{id:"petro2_6",label:"6. IVMS /Speed limiting device: installed, working",category:G.PRIME_MOVER},{id:"petro2_7",label:"7. Document Holder/Box : Position, Colour, Labeled",category:G.PRIME_MOVER},{id:"petro2_8",label:"8. Tools: Jack, Wheel Spanner, Cabin, Triangles (4), Cones (3)",category:G.PRIME_MOVER},{id:"petro2_9",label:"9. Equipment: Spill Kit, First Aid Kit, Barricading Tape, Fire Extinguisher (Cabin, Trailer x2)",category:G.PRIME_MOVER},{id:"petro2_10",label:"10. Electrical: Battery Master Switch, Battery Box, Terminals, Wiring",category:G.PRIME_MOVER},{id:"petro2_11",label:"11. Tyres: No Retread, Combination, Spray Suppression, Wheels",category:G.PRIME_MOVER},{id:"petro2_12",label:"12. Brake System: ABS, Wheel Pointers, Brake Testing Required?",category:G.PRIME_MOVER},{id:"petro2_13",label:"13. Shielding of Engine, Rear Window Non-opening",category:G.PRIME_MOVER},{id:"petro2_14",label:"14. Exhaust: Discharge on Right Side, Tank outlet 100mm Clearance",category:G.PRIME_MOVER},{id:"petro2_15",label:"15. Condition of the Fifth Wheel (Lock/Lubrication)",category:G.PRIME_MOVER},{id:"petro2_16",label:"16. Compartment Capacities: labeled, < 7000L per compartment",category:G.TRAILER_TANKS},{id:"petro2_17",label:"17. Under Run Protection: Sides, Rear End",category:G.TRAILER_TANKS},{id:"petro2_18",label:"18. Overturn Damage Protection",category:G.TRAILER_TANKS},{id:"petro2_19",label:"19. Valves: Discharge, Actuator, Dust Cups, Colour Coding",category:G.TRAILER_TANKS},{id:"petro2_20",label:"20. Emergency Shut Off: Main, Side(s)/ Brake Interlock System",category:G.TRAILER_TANKS},{id:"petro2_21",label:"21. Electrical Bonding: Cable, Bronze Earthing Studs",category:G.TRAILER_TANKS},{id:"petro2_22",label:"22. Spill Tray, Hose Storage Rack, Fire Extinguisher Holders",category:G.TRAILER_TANKS},{id:"petro2_23",label:"23. Tyres: Tread Depth, Spare Tyre, Non-retread, Combination",category:G.TRAILER_TANKS},{id:"petro2_24",label:"24. Mudguards for all Wheels, Spray Suppressors",category:G.TRAILER_TANKS},{id:"petro2_25",label:"25. Landing Legs",category:G.TRAILER_TANKS},{id:"petro2_26",label:"26. Reversing Alarm",category:G.TRAILER_TANKS},{id:"petro2_27",label:"27. Delivery Hose(s): State, Continuity, Colour Coded, Dust Cups",category:G.TRAILER_TANKS},{id:"petro2_28",label:"28. Lighting: Brakes, Reverse, Warning, Emergency Lighting",category:G.TRAILER_TANKS},{id:"petro2_29",label:"29. Rear Bumper: > 300mm Beyond Tank",category:G.TRAILER_TANKS},{id:"petro2_30",label:"30. Fall Protection: Access Ladder, Anti-slip Walkway, Handrail",category:G.TRAILER_TANKS},{id:"petro2_31",label:"31. Manholes: Dia, Center, Secured, Standard (EN 13317)",category:G.TRAILER_TANKS},{id:"petro2_32",label:"32. Fittings: Ullage Marks, Overfill Protection, Pressure Release",category:G.TRAILER_TANKS},{id:"petro2_33",label:"33. Work Suit: Anti-static, Reflective",category:G.DRIVER},{id:"petro2_34",label:"34. Safety Gloves: For Hydrocarbon Handing",category:G.DRIVER},{id:"petro2_35",label:"35. Safety Boot: With Toe Cap, Oil Resistant",category:G.DRIVER},{id:"petro2_36",label:"36. Safety Helmet: 2- 4-Point Chin Strap",category:G.DRIVER},{id:"petro2_37",label:"37. Drivers ID: Identity Card, Driver Blue Tag",category:G.DRIVER},{id:"petro2_38",label:"38. Hazchem: Both Sides, Rear",category:G.SAFETY_SIGNS},{id:"petro2_39",label:"39. No Smocking, Naked Flame, Cell Phone",category:G.SAFETY_SIGNS},{id:"petro2_40",label:"40. Orange Reflectors: Continuous",category:G.SAFETY_SIGNS},{id:"petro2_41",label:"41. Chevron, Red Reflectors at Rear",category:G.SAFETY_SIGNS},{id:"petro2_42",label:"42. Number Plate: ZABS Approved, Lighting",category:G.SAFETY_SIGNS},{id:"petro2_43",label:"43. Speed Limit Sign: 80 km/h",category:G.SAFETY_SIGNS},{id:"petro2_44",label:"44. Data Plate: Pressure Test",category:G.SAFETY_SIGNS},{id:"petro2_45",label:"45. Road Tax, Certificate of Fitness, Insurance, Identity",category:G.DOCUMENTS},{id:"petro2_46",label:"46. Defensive Driver Training (DDT): Dangerous Goods Certificate",category:G.DOCUMENTS},{id:"petro2_47",label:"47. Drivers License: Validity of Dangerous Goods, CE",category:G.DOCUMENTS},{id:"petro2_48",label:"48. Electric Certificate",category:G.DOCUMENTS},{id:"petro2_49",label:"49. Drivers Manual",category:G.DOCUMENTS},{id:"petro2_50",label:"50. Route Risk Assessment Guide",category:G.DOCUMENTS},{id:"petro2_51",label:"51. ZCSA Certificate",category:G.DOCUMENTS},{id:"petro2_52",label:"52. Assize Certificate",category:G.DOCUMENTS},{id:"petro2_53",label:"53. TREM Card",category:G.DOCUMENTS}],Ko=["id","timestamp","truckNo","trailerNo","inspectedBy","driverName","location","odometer","rate","remarks","inspectorSignature","driverSignature","photoFront","photoLS","photoRS","photoBack","photoDamage","jobCard"],lm=[...Ko,...dr.map(e=>e.id)],am=[...Ko,...Wo.map(e=>e.id)],cm=[...Ko,...Jo.map(e=>e.id)],dm=[...Ko,...vn.map(e=>e.id)],Wg=`
function doPost(e) {
  const lock = LockService.getScriptLock();
  lock.tryLock(30000); 
  try {
    const ss = SpreadsheetApp.getActiveSpreadsheet();
    const body = e.postData ? JSON.parse(e.postData.contents) : {};
    return routeRequest(ss, body);
  } catch (err) {
    return ResponseBuilder.error(err.toString());
  } finally {
    lock.releaseLock();
  }
}

function doGet(e) {
  const ss = SpreadsheetApp.getActiveSpreadsheet();
  return DataHandlers.handleGetRequest(ss);
}

function routeRequest(ss, body) {
  const action = body.action;
  const routes = {
    'login': () => AuthHandlers.handleLogin(ss, body),
    'register_user': () => AuthHandlers.handleRegisterUser(ss, body),
    'get_users': () => AuthHandlers.handleGetUsers(ss),
    'delete_user': () => AuthHandlers.handleDeleteUser(ss, body),
    'update_user': () => AuthHandlers.handleUpdateUser(ss, body),
    'manage_fleet': () => SystemHandlers.handleManageFleet(ss, body),
    'bulk_manage_fleet': () => SystemHandlers.handleBulkManageFleet(ss, body),
    'update_settings': () => SystemHandlers.handleUpdateSettings(ss, body)
  };
  if (!action || action === 'create' || !routes[action]) return DataHandlers.handleDataSubmission(ss, body);
  return routes[action]();
}`,Jg=`
const AuthHandlers = {
  handleLogin: function(ss, body) {
    let userSheet = ss.getSheetByName('Users');
    if (!userSheet) return ResponseBuilder.error("No users found.");
    const data = userSheet.getDataRange().getValues();
    const username = body.username.toLowerCase();
    for (let i = 1; i < data.length; i++) {
        if (data[i][0].toLowerCase() === username && data[i][1] === body.password) {
            return ResponseBuilder.success({ user: { username: data[i][0], name: data[i][2], role: data[i][3] } });
        }
    }
    return ResponseBuilder.error("Invalid credentials.");
  },
  handleRegisterUser: function(ss, body) {
    let sheet = ss.getSheetByName('Users') || ss.insertSheet('Users');
    sheet.appendRow([body.username.toLowerCase(), body.password, body.name, body.role, body.position, new Date().toISOString(), "{}", "TRUE"]);
    return ResponseBuilder.success();
  }
};`,Kg=`
const DataHandlers = {
  handleDataSubmission: function(ss, body) {
    let sheet = ss.getSheetByName(body.sheet) || ss.insertSheet(body.sheet);
    if (sheet.getLastRow() === 0 && body.headers) sheet.appendRow(body.headers);
    sheet.appendRow(body.row);
    return ResponseBuilder.success();
  },
  handleGetRequest: function(ss) {
    const data = {};
    ss.getSheets().forEach(sheet => {
      const name = sheet.getName();
      const lastRow = sheet.getLastRow();
      if (lastRow === 0) { data[name] = []; return; }
      if (name === 'Validation_Data') {
         const values = sheet.getDataRange().getValues();
         const columns = {};
         if (values.length > 0) {
             const headers = values[0];
             headers.forEach((h, idx) => {
                 columns[h] = values.slice(1).map(r => r[idx]).filter(v => v !== "");
             });
         }
         data[name] = columns;
      } else {
         data[name] = sheet.getDataRange().getValues();
      }
    });
    return ContentService.createTextOutput(JSON.stringify(data)).setMimeType(ContentService.MimeType.JSON);
  }
};

const SystemHandlers = {
  handleManageFleet: function(ss, body) {
    let sheet = ss.getSheetByName('Validation_Data') || ss.insertSheet('Validation_Data');
    const lastRow = sheet.getLastRow();
    // Ensure standard headers exist
    if (lastRow === 0) {
      sheet.appendRow(["Driver_Name","Inspector_Name","Location","Position","Misc1","Misc2","Misc3","Truck_Reg_No","Trailer_Reg_No"]);
      sheet.setFrozenRows(1);
    }
    
    const colIdx = body.type === 'truck' ? 8 : 9; // Col H is 8, Col I is 9
    const range = sheet.getRange(1, colIdx, Math.max(1, sheet.getLastRow()), 1);
    const colValues = range.getValues().flat();
    const firstEmpty = colValues.indexOf("");
    const targetRow = firstEmpty === -1 ? sheet.getLastRow() + 1 : firstEmpty + 1;
    
    sheet.getRange(targetRow, colIdx).setValue(body.value);
    return ResponseBuilder.success({ message: "Asset added to Col " + (colIdx === 8 ? "H" : "I") });
  },

  handleBulkManageFleet: function(ss, body) {
    let sheet = ss.getSheetByName('Validation_Data') || ss.insertSheet('Validation_Data');
    const lastRow = sheet.getLastRow();
    if (lastRow === 0) {
      sheet.appendRow(["Driver_Name","Inspector_Name","Location","Position","Misc1","Misc2","Misc3","Truck_Reg_No","Trailer_Reg_No"]);
      sheet.setFrozenRows(1);
    }
    
    const trucks = body.trucks || [];
    const trailers = body.trailers || [];

    const getFirstEmptyInCol = (col) => {
        const vals = sheet.getRange(1, col, Math.max(1, sheet.getLastRow()), 1).getValues().flat();
        const idx = vals.indexOf("");
        return idx === -1 ? sheet.getLastRow() + 1 : idx + 1;
    };

    if (trucks.length > 0) {
        const startRow = getFirstEmptyInCol(8);
        sheet.getRange(startRow, 8, trucks.length, 1).setValues(trucks.map(t => [t]));
    }
    
    if (trailers.length > 0) {
        const startRow = getFirstEmptyInCol(9);
        sheet.getRange(startRow, 9, trailers.length, 1).setValues(trailers.map(t => [t]));
    }

    return ResponseBuilder.success({ message: "Bulk import complete" });
  },

  handleUpdateSettings: function(ss, body) {
    let sheet = ss.getSheetByName('System_Settings') || ss.insertSheet('System_Settings');
    const row = [body.companyName, body.managerEmail, new Date(), "Admin", body.companyLogo, "", "", body.maintenanceMode ? "TRUE" : "FALSE", body.maintenanceMessage];
    if (sheet.getLastRow() < 2) sheet.appendRow(["A","B","C","D","E","F","G","H","I"]);
    sheet.getRange(2, 1, 1, row.length).setValues([row]);
    return ResponseBuilder.success();
  }
};`,Yg=`const ResponseBuilder = {
  success: function(data = {}) { return this.build({ status: "success", ...data }); },
  error: function(message) { return this.build({ status: "error", message: message }); },
  build: function(data) { return ContentService.createTextOutput(JSON.stringify(data)).setMimeType(ContentService.MimeType.JSON); }
};`,Ys={"1_Controller.gs":Wg,"2_Auth.gs":Jg,"3_Core.gs":Kg,"5_Utils.gs":Yg};Object.values(Ys).join(`

`);const Qg="https://script.google.com/macros/s/AKfycbzFXz7fdEEpOSOzpKegLuqJCMBYJ2WzqppbPYWJVE6bm8YzHEGEoZlfm22L8HrWgg5qXA/exec",Xg=3e5,Zg=30*60*1e3,ld=12*60*60*1e3,ex=()=>{const[e,t]=_.useState(null),[n,r]=_.useState(null),s=_.useRef(Date.now()),i=_.useRef(Date.now()),l=_.useRef(null);_.useEffect(()=>{const g=localStorage.getItem("safetyCheck_user"),w=localStorage.getItem("safetyCheck_session_start");if(g)try{if(w){if(Date.now()-parseInt(w)>ld){h("max_duration");return}i.current=parseInt(w)}else localStorage.setItem("safetyCheck_session_start",Date.now().toString());const N=JSON.parse(g),S=N.role?String(N.role).trim().toLowerCase():"";S==="admin"?N.role="Admin":S==="operations"?N.role="Operations":S==="maintenance"?N.role="Maintenance":S==="secretary"?N.role="Secretary":S==="other"?N.role="Other":S==="superadmin"?N.role="SuperAdmin":N.role="Inspector",N.needsSetup=!N.name||N.needsSetup===!0,t(N),f()}catch{h()}},[]);const d=_.useCallback(()=>{if(!e)return;const g=Date.now();g-s.current>1e3&&(s.current=g,localStorage.setItem("safetyCheck_last_activity",g.toString()))},[e]),f=()=>{window.addEventListener("mousemove",d),window.addEventListener("keydown",d),window.addEventListener("touchstart",d),window.addEventListener("click",d),l.current&&window.clearInterval(l.current),l.current=window.setInterval(p,6e4)},u=()=>{window.removeEventListener("mousemove",d),window.removeEventListener("keydown",d),window.removeEventListener("touchstart",d),window.removeEventListener("click",d),l.current&&(window.clearInterval(l.current),l.current=null)},p=()=>{const g=Date.now();if(g-s.current>Zg){h("idle");return}if(g-i.current>ld){h("max_duration");return}},m=g=>{const w=Date.now(),N={...g,needsSetup:!g.name||g.needsSetup===!0};t(N),localStorage.setItem("safetyCheck_user",JSON.stringify(N)),localStorage.setItem("safetyCheck_session_start",w.toString()),localStorage.setItem("safetyCheck_last_activity",w.toString()),i.current=w,s.current=w,r(null),f()},h=g=>{u(),t(null),g&&r(g),["safetyCheck_user","safetyCheck_session_start","safetyCheck_last_activity","sc_validation_lists"].forEach(N=>localStorage.removeItem(N))};return{currentUser:e,setCurrentUser:t,handleLogin:m,handleLogout:h,sessionExpired:n,setSessionExpired:r}},tx=()=>{const[e,t]=_.useState(()=>{const p=Qg;return p.length>0?p:typeof window<"u"&&localStorage.getItem("safetyCheck_scriptUrl")||""}),[n,r]=_.useState(()=>{if(typeof window<"u"){const p=localStorage.getItem("safetyCheck_settings");if(p)try{return JSON.parse(p)}catch(m){console.error("Failed to parse local settings",m)}}return{companyName:"SafetyCheck Pro",managerEmail:""}}),[s,i]=_.useState(!1),l=_.useRef(!1),d=_.useRef(!1);_.useEffect(()=>{if(e&&e.startsWith("https://script.google.com")){f(e);const p=setInterval(()=>{d.current||f(e)},3e4);return()=>clearInterval(p)}},[e]);const f=async(p,m=!1)=>{if(!(!p||!p.startsWith("https://script.google.com"))&&!(!navigator.onLine||l.current&&!m)){l.current=!0;try{const h=`t=${new Date().getTime()}`,g=`${p}${p.includes("?")?"&":"?"}${h}`,w=await fetch(g,{method:"GET",mode:"cors",cache:"no-store"});if(!w.ok)return;const S=(await w.json()).System_Settings;if(S&&Array.isArray(S)&&S.length>1){const x=S[1];if(x&&x.length>=8){const y=String(x[7]).toUpperCase().trim()==="TRUE",C={companyName:x[0]||"SafetyCheck Pro",managerEmail:x[1]||"",companyLogo:x[4]&&String(x[4]).length>100?x[4]:void 0,mobileApkLink:x[5]||"",webAppUrl:x[6]||"",maintenanceMode:y,maintenanceMessage:x[8]||"System under scheduled maintenance."};r(b=>JSON.stringify(b)!==JSON.stringify(C)?(localStorage.setItem("safetyCheck_settings",JSON.stringify(C)),C):b)}}}catch{}finally{l.current=!1}}};return{settings:n,setSettings:r,appScriptUrl:e,setAppScriptUrl:t,isSavingSettings:s,handleSaveSettings:async()=>{i(!0),d.current=!0;try{localStorage.setItem("safetyCheck_settings",JSON.stringify(n)),localStorage.setItem("safetyCheck_scriptUrl",e),e&&e.startsWith("https")&&navigator.onLine&&await fetch(e,{method:"POST",body:JSON.stringify({action:"update_settings",...n}),mode:"no-cors"})}catch(p){console.error("Save Settings Failed",p)}finally{setTimeout(()=>{i(!1),d.current=!1},800)}},fetchSystemSettings:f}},ad=50,cd=12e4,dd=48*60*60*1e3,nx=(e,t,n)=>{const[r,s]=_.useState([]),[i,l]=_.useState([]),[d,f]=_.useState([]),[u,p]=_.useState([]),[m,h]=_.useState(!1),g=_.useRef([]),w=_.useRef([]),N=_.useRef(null);_.useEffect(()=>{g.current=d.map(T=>String(T))},[d]),_.useEffect(()=>{w.current=i.map(T=>String(T))},[i]),_.useEffect(()=>{if(!t){N.current&&window.clearInterval(N.current);return}const T=t.username.replace(/[^a-z0-9]/gi,"_")+"_",I=localStorage.getItem(`sc_read_notifications_${T}`),M=localStorage.getItem(`sc_dismissed_notifications_${T}`),L=(I?JSON.parse(I):[]).map(A=>String(A)),R=(M?JSON.parse(M):[]).map(A=>String(A));l(L),f(R),w.current=L,g.current=R,"Notification"in window&&Notification.permission==="granted"&&h(!0),v();const P=()=>{document.visibilityState==="visible"?(v(),N.current||(N.current=window.setInterval(v,cd))):N.current&&(window.clearInterval(N.current),N.current=null)};return document.addEventListener("visibilitychange",P),N.current=window.setInterval(v,cd),()=>{N.current&&window.clearInterval(N.current),document.removeEventListener("visibilitychange",P)}},[t,e]);const S=T=>{if(!t)return;const I=t.username.replace(/[^a-z0-9]/gi,"_")+"_";localStorage.setItem(`sc_read_notifications_${I}`,JSON.stringify(T)),l(T)},x=T=>{if(!t)return;const I=t.username.replace(/[^a-z0-9]/gi,"_")+"_";localStorage.setItem(`sc_dismissed_notifications_${I}`,JSON.stringify(T)),f(T)},v=async()=>{if(!(!e||!navigator.onLine||!t))try{const T=await fetch(`${e}?t=${Date.now()}`);if(!T.ok)return;const I=await T.text();if(!I||I.trim().startsWith("<"))return;const M=JSON.parse(I),L=(M.Acknowledgements||[]).map($=>String($)),R=Date.now();let P=[];const A=$=>g.current.includes(String($)),F=$=>w.current.includes(String($)),z=($,se)=>{if(!Array.isArray($)||$.length<=1)return[];const re=se==="General"?8:9,te=2,oe=[];return $.slice(Math.max(1,$.length-100)).forEach(Ne=>{const Ye=Number(Ne[re]),ve=String(Ne[te]||"Unknown").trim(),le=String(Ne[1]),In=Date.parse(le);if(isNaN(In)||R-In>dd)return;const rt=`INS_${se}_${In}_${ve.replace(/[^a-z0-9]/gi,"")}`;A(rt)||L.includes(rt)||(Ye<=2||Ye===3)&&oe.push({id:rt,title:Ye<=2?`Critical: ${ve}`:`Warning: ${ve}`,message:`${se} check rated ${Ye}/5.`,type:Ye<=2?"critical":"warning",timestamp:le,read:F(rt),module:se})}),oe},J=M.SystemNotification||[],j=t.username.toLowerCase().trim(),H=t.role.toLowerCase().trim();Array.isArray(J)&&J.length>1&&J.forEach($=>{const se=String($[0]);if(A(se))return;const re=String($[1]).trim().toLowerCase();!(String($[5]).toUpperCase()==="TRUE")&&(re===j||(re===H||H==="superadmin"&&re==="admin")||re==="all")&&P.push({id:se,title:"System Message",message:String($[3]),type:String($[2]).toLowerCase()||"info",timestamp:$[4],read:F(se),actionLink:$[6],isServerEvent:!0,module:"System"})});const q=M.Support_Tickets||[];Array.isArray(q)&&q.length>1&&q.slice(Math.max(1,q.length-30)).forEach($=>{const se=String($[0]),re=$[9],te=String($[8]),oe=Date.parse(te),O=`TKT_ALERT_${se}`;isNaN(oe)||R-oe>dd||A(O)||(H==="admin"||H==="superadmin")&&re==="Open"&&P.push({id:O,title:"New Ticket",message:`#${se}: ${$[2]}`,type:"info",timestamp:te,read:F(O),module:"Support",actionLink:"view:support"})}),M.General&&(P=[...P,...z(M.General,"General")]),M.Petroleum&&(P=[...P,...z(M.Petroleum,"Petroleum")]),M.Petroleum_V2&&(P=[...P,...z(M.Petroleum_V2,"Petroleum_V2")]),M.Acid&&(P=[...P,...z(M.Acid,"Acid")]),P.sort(($,se)=>new Date(se.timestamp).getTime()-new Date($.timestamp).getTime()),P.length>ad&&(P=P.slice(0,ad));const Z=P.filter($=>!u.includes($.id)&&!$.read&&!A($.id));if(Z.length>0){const $=Z[0];$.type==="critical"&&n($.message,"error"),p(se=>[...new Set([...se,...Z.map(re=>re.id)])])}s(P)}catch{}};return{notifications:r,fetchNotifications:v,handleMarkNotificationRead:async(T,I)=>{s(R=>R.map(P=>P.id===T?{...P,read:!0}:P));const M=[...new Set([...w.current,String(T)])];S(M);const L=r.find(R=>R.id===T);if(L!=null&&L.isServerEvent&&e&&navigator.onLine)try{await fetch(e,{method:"POST",body:JSON.stringify({action:"mark_notification_read",id:T}),mode:"no-cors"})}catch{}L!=null&&L.actionLink&&I&&I(L.actionLink)},handleDismissNotification:T=>{s(M=>M.filter(L=>L.id!==T));const I=[...new Set([...g.current,String(T)])];x(I)},handleGlobalAcknowledge:async T=>{if(!e||!navigator.onLine)return;s(M=>M.filter(L=>L.id!==T));const I=[...new Set([...g.current,String(T)])];x(I);try{await fetch(e,{method:"POST",body:JSON.stringify({action:"acknowledge_issue",issueId:T,user:t==null?void 0:t.name,role:t==null?void 0:t.role}),mode:"no-cors"}),n("Acknowledge recorded.","success")}catch{}},handleClearAllNotifications:()=>{const T=r.map(M=>String(M.id)),I=[...new Set([...g.current,...T])];x(I),s([])},requestPushPermission:async()=>{if(!("Notification"in window))return;await Notification.requestPermission()==="granted"&&h(!0)},pushEnabled:m}},rx=15e3,sx=(e,t,n)=>{const[r,s]=_.useState([]),[i,l]=_.useState(!1),[d,f]=_.useState(!1),u=_.useRef(0),[p,m]=_.useState({trucks:[],trailers:[],drivers:[],inspectors:[],locations:[],positions:[]});_.useEffect(()=>{e&&n&&h(!1)},[t,e,n==null?void 0:n.username]);const h=async(w=!1)=>{if(!e||typeof e!="string"||!e.startsWith("http"))return;const N=w===!0,S=Date.now(),v=`sc_history_${n?`${n.username}_`:"anon_"}${t}`,y=localStorage.getItem(v);let C=!1;if(y&&!N)try{const b=JSON.parse(y);if(b.data&&Array.isArray(b.data)){s(b.data),C=!0;const E=localStorage.getItem("sc_validation_lists");if(E&&m(JSON.parse(E)),S-b.timestamp<Xg){l(!1);return}}}catch(b){console.error("Cache parsing error",b)}if(N&&S-u.current<rx){console.debug("Fetch throttled to protect server.");return}if(C?f(!0):l(!0),!navigator.onLine){l(!1),f(!1);return}try{u.current=S;const b=await fetch(`${e}?t=${S}`);if(!b.ok)throw new Error("Network response was not ok");const E=await b.text();if(!E||E.trim().startsWith("<"))throw new Error("Invalid response format");const k=JSON.parse(E),T=k.Validation_Data;if(T){const P={trucks:T.Truck_Reg_No||[],trailers:T.Trailer_Reg_No||[],drivers:T.Driver_Name||[],inspectors:T.Inspector_Name||[],locations:T.Location||[],positions:T.Position||[]};m(P),localStorage.setItem("sc_validation_lists",JSON.stringify(P))}let I="General",M=lm;t==="petroleum"?(I="Petroleum",M=am):t==="petroleum_v2"?(I="Petroleum_V2",M=cm):t==="acid"&&(I="Acid",M=dm);const L=k[I];let R=[];L!==void 0&&Array.isArray(L)&&L.length>1&&(R=L.slice(1).map(P=>{const A={};return M.forEach((F,z)=>{A[F]=P[z]!==void 0?P[z]:null}),A}).reverse()),s(R),localStorage.setItem(v,JSON.stringify({timestamp:Date.now(),data:R}))}catch{}finally{l(!1),f(!1)}},g=_.useMemo(()=>{if(!r.length)return{total:0,avgRate:0,passRate:0};const w=r.length,S=(r.filter(x=>Number(x.rate)>=4).length/w*100).toFixed(0);return{total:w,avgRate:0,passRate:S}},[r]);return{historyList:r,isLoadingHistory:i,isBackgroundFetching:d,validationLists:p,stats:g,fetchHistory:h}},ox=(e,t,n)=>{const[r,s]=_.useState("idle"),[i,l]=_.useState([]),[d,f]=_.useState(!1),[u,p]=_.useState(!1);_.useEffect(()=>{const g=localStorage.getItem("safetycheck_offline_queue");if(g)try{l(JSON.parse(g))}catch{}const w=()=>{p(!1),t("Connection restored. Attempting background sync...","info"),m()},N=()=>{p(!1)};return window.addEventListener("online",w),window.addEventListener("offline",N),()=>{window.removeEventListener("online",w),window.removeEventListener("offline",N)}},[]);const m=async()=>{if(d)return;const g=JSON.parse(localStorage.getItem("safetycheck_offline_queue")||"[]");if(g.length===0)return;f(!0),p(!1);let w=0,N=[...g];N.length;try{for(;N.length>0;){const S=N[0];try{const x=new AbortController,v=setTimeout(()=>x.abort(),15e3),y=await fetch(e,{method:"POST",body:JSON.stringify(S),mode:"no-cors",headers:{"Content-Type":"text/plain"},signal:x.signal});clearTimeout(v),N.shift(),w++,l([...N]),localStorage.setItem("safetycheck_offline_queue",JSON.stringify(N)),await new Promise(C=>setTimeout(C,1e3))}catch(x){if(console.error("Sync failed for item",x),x.name==="AbortError"||x.message.includes("NetworkError")||x.message.includes("Failed to fetch")){p(!0);break}break}}}finally{f(!1),w>0?N.length===0?(t(`All ${w} offline records synced successfully!`,"success"),n()):t(`Synced ${w} items. ${N.length} remaining.`,"info"):u&&g.length>0}};return{submissionStatus:r,setSubmissionStatus:s,offlineQueue:i,isSyncing:d,isPoorConnection:u,syncOfflineQueue:m,addToQueue:g=>{const w=[...i,g];l(w),localStorage.setItem("safetycheck_offline_queue",JSON.stringify(w))}}},ix=(e,t)=>{const[n,r]=_.useState(null),[s,i]=_.useState([]),[l,d]=_.useState(!1),f=async()=>{if(!(!e||typeof e!="string"||!e.startsWith("http"))&&t){d(!0);try{const u=await fetch(`${e}?t=${new Date().getTime()}`);if(!u.ok)return;const p=await u.json();if(p.Subscription_Data){const m=p.Subscription_Data,h=m.current||m,g=m.history||[],w=String(h.expiryDate||"").trim();if(!w||w==="undefined"||w==="null"||w===""){r({status:"Expired",plan:"None",expiryDate:"",daysRemaining:0}),i(g);return}const N=w.split("T")[0],S=N.split("-");let x;if(S.length===3?x=new Date(parseInt(S[0]),parseInt(S[1])-1,parseInt(S[2]),23,59,59):(x=new Date(w),x.setHours(23,59,59,999)),isNaN(x.getTime())){r({status:"Expired",plan:"None",expiryDate:"",daysRemaining:0});return}const v=new Date,y=x.getTime()-v.getTime(),C=Math.ceil(y/(1e3*60*60*24)),b=C<=0;r({status:b?"Expired":h.status||"Active",plan:h.plan||"Standard",expiryDate:N,daysRemaining:Math.max(0,C)}),i(g)}else r({status:"Expired",plan:"None",expiryDate:"",daysRemaining:0})}catch(u){console.error("Subscription fetch error:",u)}finally{d(!1)}}};return _.useEffect(()=>{f()},[e,t]),{subscription:n,history:s,isLoading:l,refreshSubscription:f}};var lx={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let ax,cx;function dx(){return{geminiUrl:ax,vertexUrl:cx}}function ux(e,t,n,r){var s,i;if(!(e!=null&&e.baseUrl)){const l=dx();return t?(s=l.vertexUrl)!==null&&s!==void 0?s:n:(i=l.geminiUrl)!==null&&i!==void 0?i:r}return e.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ut{}function U(e,t){const n=/\{([^}]+)\}/g;return e.replace(n,(r,s)=>{if(Object.prototype.hasOwnProperty.call(t,s)){const i=t[s];return i!=null?String(i):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function c(e,t,n){for(let i=0;i<t.length-1;i++){const l=t[i];if(l.endsWith("[]")){const d=l.slice(0,-2);if(!(d in e))if(Array.isArray(n))e[d]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(e[d])){const f=e[d];if(Array.isArray(n))for(let u=0;u<f.length;u++){const p=f[u];c(p,t.slice(i+1),n[u])}else for(const u of f)c(u,t.slice(i+1),n)}return}else if(l.endsWith("[0]")){const d=l.slice(0,-3);d in e||(e[d]=[{}]);const f=e[d];c(f[0],t.slice(i+1),n);return}(!e[l]||typeof e[l]!="object")&&(e[l]={}),e=e[l]}const r=t[t.length-1],s=e[r];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(e,n):e[r]=n}function a(e,t,n=void 0){try{if(t.length===1&&t[0]==="_self")return e;for(let r=0;r<t.length;r++){if(typeof e!="object"||e===null)return n;const s=t[r];if(s.endsWith("[]")){const i=s.slice(0,-2);if(i in e){const l=e[i];return Array.isArray(l)?l.map(d=>a(d,t.slice(r+1),n)):n}else return n}else e=e[s]}return e}catch(r){if(r instanceof TypeError)return n;throw r}}function fx(e,t){for(const[n,r]of Object.entries(t)){const s=n.split("."),i=r.split("."),l=new Set;let d=-1;for(let f=0;f<s.length;f++)if(s[f]==="*"){d=f;break}if(d!==-1&&i.length>d)for(let f=d;f<i.length;f++){const u=i[f];u!=="*"&&!u.endsWith("[]")&&!u.endsWith("[0]")&&l.add(u)}Il(e,s,i,0,l)}}function Il(e,t,n,r,s){if(r>=t.length||typeof e!="object"||e===null)return;const i=t[r];if(i.endsWith("[]")){const l=i.slice(0,-2),d=e;if(l in d&&Array.isArray(d[l]))for(const f of d[l])Il(f,t,n,r+1,s)}else if(i==="*"){if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const l=e,d=Object.keys(l).filter(u=>!u.startsWith("_")&&!s.has(u)),f={};for(const u of d)f[u]=l[u];for(const[u,p]of Object.entries(f)){const m=[];for(const h of n.slice(r))h==="*"?m.push(u):m.push(h);c(l,m,p)}for(const u of d)delete l[u]}}else{const l=e;i in l&&Il(l[i],t,n,r+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fa(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function px(e){const t={},n=a(e,["operationName"]);n!=null&&c(t,["operationName"],n);const r=a(e,["resourceName"]);return r!=null&&c(t,["_url","resourceName"],r),t}function mx(e){const t={},n=a(e,["name"]);n!=null&&c(t,["name"],n);const r=a(e,["metadata"]);r!=null&&c(t,["metadata"],r);const s=a(e,["done"]);s!=null&&c(t,["done"],s);const i=a(e,["error"]);i!=null&&c(t,["error"],i);const l=a(e,["response","generateVideoResponse"]);return l!=null&&c(t,["response"],gx(l)),t}function hx(e){const t={},n=a(e,["name"]);n!=null&&c(t,["name"],n);const r=a(e,["metadata"]);r!=null&&c(t,["metadata"],r);const s=a(e,["done"]);s!=null&&c(t,["done"],s);const i=a(e,["error"]);i!=null&&c(t,["error"],i);const l=a(e,["response"]);return l!=null&&c(t,["response"],xx(l)),t}function gx(e){const t={},n=a(e,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>vx(l))),c(t,["generatedVideos"],i)}const r=a(e,["raiMediaFilteredCount"]);r!=null&&c(t,["raiMediaFilteredCount"],r);const s=a(e,["raiMediaFilteredReasons"]);return s!=null&&c(t,["raiMediaFilteredReasons"],s),t}function xx(e){const t={},n=a(e,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>yx(l))),c(t,["generatedVideos"],i)}const r=a(e,["raiMediaFilteredCount"]);r!=null&&c(t,["raiMediaFilteredCount"],r);const s=a(e,["raiMediaFilteredReasons"]);return s!=null&&c(t,["raiMediaFilteredReasons"],s),t}function vx(e){const t={},n=a(e,["video"]);return n!=null&&c(t,["video"],Ex(n)),t}function yx(e){const t={},n=a(e,["_self"]);return n!=null&&c(t,["video"],_x(n)),t}function wx(e){const t={},n=a(e,["operationName"]);return n!=null&&c(t,["_url","operationName"],n),t}function Nx(e){const t={},n=a(e,["operationName"]);return n!=null&&c(t,["_url","operationName"],n),t}function Sx(e){const t={},n=a(e,["name"]);n!=null&&c(t,["name"],n);const r=a(e,["metadata"]);r!=null&&c(t,["metadata"],r);const s=a(e,["done"]);s!=null&&c(t,["done"],s);const i=a(e,["error"]);i!=null&&c(t,["error"],i);const l=a(e,["response"]);return l!=null&&c(t,["response"],bx(l)),t}function bx(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["parent"]);r!=null&&c(t,["parent"],r);const s=a(e,["documentName"]);return s!=null&&c(t,["documentName"],s),t}function um(e){const t={},n=a(e,["name"]);n!=null&&c(t,["name"],n);const r=a(e,["metadata"]);r!=null&&c(t,["metadata"],r);const s=a(e,["done"]);s!=null&&c(t,["done"],s);const i=a(e,["error"]);i!=null&&c(t,["error"],i);const l=a(e,["response"]);return l!=null&&c(t,["response"],Cx(l)),t}function Cx(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["parent"]);r!=null&&c(t,["parent"],r);const s=a(e,["documentName"]);return s!=null&&c(t,["documentName"],s),t}function Ex(e){const t={},n=a(e,["uri"]);n!=null&&c(t,["uri"],n);const r=a(e,["encodedVideo"]);r!=null&&c(t,["videoBytes"],Fa(r));const s=a(e,["encoding"]);return s!=null&&c(t,["mimeType"],s),t}function _x(e){const t={},n=a(e,["gcsUri"]);n!=null&&c(t,["uri"],n);const r=a(e,["bytesBase64Encoded"]);r!=null&&c(t,["videoBytes"],Fa(r));const s=a(e,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ud;(function(e){e.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",e.OUTCOME_OK="OUTCOME_OK",e.OUTCOME_FAILED="OUTCOME_FAILED",e.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(ud||(ud={}));var fd;(function(e){e.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",e.PYTHON="PYTHON"})(fd||(fd={}));var pd;(function(e){e.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",e.SILENT="SILENT",e.WHEN_IDLE="WHEN_IDLE",e.INTERRUPT="INTERRUPT"})(pd||(pd={}));var Jt;(function(e){e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL"})(Jt||(Jt={}));var md;(function(e){e.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",e.SIMPLE_SEARCH="SIMPLE_SEARCH",e.ELASTIC_SEARCH="ELASTIC_SEARCH"})(md||(md={}));var hd;(function(e){e.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",e.NO_AUTH="NO_AUTH",e.API_KEY_AUTH="API_KEY_AUTH",e.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",e.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",e.OAUTH="OAUTH",e.OIDC_AUTH="OIDC_AUTH"})(hd||(hd={}));var gd;(function(e){e.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",e.HTTP_IN_QUERY="HTTP_IN_QUERY",e.HTTP_IN_HEADER="HTTP_IN_HEADER",e.HTTP_IN_PATH="HTTP_IN_PATH",e.HTTP_IN_BODY="HTTP_IN_BODY",e.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(gd||(gd={}));var xd;(function(e){e.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",e.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",e.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",e.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(xd||(xd={}));var vd;(function(e){e.UNSPECIFIED="UNSPECIFIED",e.BLOCKING="BLOCKING",e.NON_BLOCKING="NON_BLOCKING"})(vd||(vd={}));var yd;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(yd||(yd={}));var wd;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE",e.VALIDATED="VALIDATED"})(wd||(wd={}));var Nd;(function(e){e.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH",e.MINIMAL="MINIMAL"})(Nd||(Nd={}));var Sd;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",e.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",e.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",e.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",e.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Sd||(Sd={}));var bd;(function(e){e.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",e.SEVERITY="SEVERITY",e.PROBABILITY="PROBABILITY"})(bd||(bd={}));var Cd;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE",e.OFF="OFF"})(Cd||(Cd={}));var Ed;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.IMAGE_SAFETY="IMAGE_SAFETY",e.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",e.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",e.NO_IMAGE="NO_IMAGE",e.IMAGE_RECITATION="IMAGE_RECITATION",e.IMAGE_OTHER="IMAGE_OTHER"})(Ed||(Ed={}));var _d;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(_d||(_d={}));var kd;(function(e){e.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",e.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",e.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",e.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",e.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(kd||(kd={}));var Td;(function(e){e.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",e.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",e.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",e.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",e.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Td||(Td={}));var Id;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.IMAGE_SAFETY="IMAGE_SAFETY",e.MODEL_ARMOR="MODEL_ARMOR",e.JAILBREAK="JAILBREAK"})(Id||(Id={}));var Ad;(function(e){e.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",e.ON_DEMAND="ON_DEMAND",e.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Ad||(Ad={}));var Eo;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO"})(Eo||(Eo={}));var Rd;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Rd||(Rd={}));var Md;(function(e){e.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",e.TUNING_MODE_FULL="TUNING_MODE_FULL",e.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Md||(Md={}));var Pd;(function(e){e.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",e.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",e.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",e.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",e.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",e.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",e.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Pd||(Pd={}));var Al;(function(e){e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Al||(Al={}));var jd;(function(e){e.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",e.TUNING_TASK_I2V="TUNING_TASK_I2V",e.TUNING_TASK_T2V="TUNING_TASK_T2V",e.TUNING_TASK_R2V="TUNING_TASK_R2V"})(jd||(jd={}));var Ld;(function(e){e.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",e.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",e.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",e.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",e.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Ld||(Ld={}));var Dd;(function(e){e.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",e.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",e.BALANCED="BALANCED",e.PRIORITIZE_COST="PRIORITIZE_COST"})(Dd||(Dd={}));var Fd;(function(e){e.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",e.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Fd||(Fd={}));var Ud;(function(e){e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(Ud||(Ud={}));var Vd;(function(e){e.DONT_ALLOW="DONT_ALLOW",e.ALLOW_ADULT="ALLOW_ADULT",e.ALLOW_ALL="ALLOW_ALL"})(Vd||(Vd={}));var Hd;(function(e){e.auto="auto",e.en="en",e.ja="ja",e.ko="ko",e.hi="hi",e.zh="zh",e.pt="pt",e.es="es"})(Hd||(Hd={}));var Bd;(function(e){e.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",e.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",e.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",e.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",e.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Bd||(Bd={}));var Gd;(function(e){e.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",e.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",e.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",e.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Gd||(Gd={}));var Od;(function(e){e.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",e.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",e.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",e.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Od||(Od={}));var zd;(function(e){e.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",e.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",e.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",e.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",e.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",e.EDIT_MODE_STYLE="EDIT_MODE_STYLE",e.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",e.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(zd||(zd={}));var qd;(function(e){e.FOREGROUND="FOREGROUND",e.BACKGROUND="BACKGROUND",e.PROMPT="PROMPT",e.SEMANTIC="SEMANTIC",e.INTERACTIVE="INTERACTIVE"})(qd||(qd={}));var $d;(function(e){e.ASSET="ASSET",e.STYLE="STYLE"})($d||($d={}));var Wd;(function(e){e.INSERT="INSERT",e.REMOVE="REMOVE",e.REMOVE_STATIC="REMOVE_STATIC",e.OUTPAINT="OUTPAINT"})(Wd||(Wd={}));var Jd;(function(e){e.OPTIMIZED="OPTIMIZED",e.LOSSLESS="LOSSLESS"})(Jd||(Jd={}));var Kd;(function(e){e.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",e.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Kd||(Kd={}));var Yd;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.STATE_PENDING="STATE_PENDING",e.STATE_ACTIVE="STATE_ACTIVE",e.STATE_FAILED="STATE_FAILED"})(Yd||(Yd={}));var Qd;(function(e){e.STATE_UNSPECIFIED="STATE_UNSPECIFIED",e.PROCESSING="PROCESSING",e.ACTIVE="ACTIVE",e.FAILED="FAILED"})(Qd||(Qd={}));var Xd;(function(e){e.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",e.UPLOADED="UPLOADED",e.GENERATED="GENERATED",e.REGISTERED="REGISTERED"})(Xd||(Xd={}));var Zd;(function(e){e.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.RESPONSE_REJECTED="RESPONSE_REJECTED",e.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Zd||(Zd={}));var eu;(function(e){e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.DOCUMENT="DOCUMENT"})(eu||(eu={}));var tu;(function(e){e.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",e.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",e.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(tu||(tu={}));var nu;(function(e){e.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",e.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",e.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(nu||(nu={}));var ru;(function(e){e.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",e.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",e.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(ru||(ru={}));var su;(function(e){e.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",e.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",e.NO_INTERRUPTION="NO_INTERRUPTION"})(su||(su={}));var ou;(function(e){e.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",e.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",e.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(ou||(ou={}));var iu;(function(e){e.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",e.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",e.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",e.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",e.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",e.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",e.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",e.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",e.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",e.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",e.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",e.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",e.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(iu||(iu={}));var lu;(function(e){e.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",e.QUALITY="QUALITY",e.DIVERSITY="DIVERSITY",e.VOCALIZATION="VOCALIZATION"})(lu||(lu={}));var Wn;(function(e){e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT"})(Wn||(Wn={}));class Rl{constructor(t){const n={};for(const r of t.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}}class _r{get text(){var t,n,r,s,i,l,d,f;if(((s=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",p=!1;const m=[];for(const h of(f=(d=(l=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)!==null&&f!==void 0?f:[]){for(const[g,w]of Object.entries(h))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(w!==null||w!==void 0)&&m.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;p=!0,u+=h.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),p?u:void 0}get data(){var t,n,r,s,i,l,d,f;if(((s=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const p=[];for(const m of(f=(d=(l=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)!==null&&f!==void 0?f:[]){for(const[h,g]of Object.entries(m))h!=="inlineData"&&(g!==null||g!==void 0)&&p.push(h);m.inlineData&&typeof m.inlineData.data=="string"&&(u+=atob(m.inlineData.data))}return p.length>0&&console.warn(`there are non-data parts ${p} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var t,n,r,s,i,l,d,f;if(((s=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(f=(d=(l=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)===null||f===void 0?void 0:f.filter(p=>p.functionCall).map(p=>p.functionCall).filter(p=>p!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var t,n,r,s,i,l,d,f,u;if(((s=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const p=(f=(d=(l=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)===null||f===void 0?void 0:f.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((p==null?void 0:p.length)!==0)return(u=p==null?void 0:p[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var t,n,r,s,i,l,d,f,u;if(((s=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const p=(f=(d=(l=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)===null||f===void 0?void 0:f.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((p==null?void 0:p.length)!==0)return(u=p==null?void 0:p[0])===null||u===void 0?void 0:u.output}}class au{}class cu{}class kx{}class Tx{}class Ix{}class Ax{}class du{}class uu{}class fu{}class Rx{}class _o{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const r=new _o;let s;const i=t;return n?s=hx(i):s=mx(i),Object.assign(r,s),r}}class pu{}class mu{}class hu{}class gu{}class Mx{}class Px{}class jx{}class Ua{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const r=new Ua,i=Sx(t);return Object.assign(r,i),r}}class Lx{}class Dx{}class Fx{}class xu{}class Ux{get text(){var t,n,r;let s="",i=!1;const l=[];for(const d of(r=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[f,u]of Object.entries(d))f!=="text"&&f!=="thought"&&u!==null&&l.push(f);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;i=!0,s+=d.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?s:void 0}get data(){var t,n,r;let s="";const i=[];for(const l of(r=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[d,f]of Object.entries(l))d!=="inlineData"&&f!==null&&i.push(d);l.inlineData&&typeof l.inlineData.data=="string"&&(s+=atob(l.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class Vx{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Va{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){const r=new Va,i=um(t);return Object.assign(r,i),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ne(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function fm(e,t){const n=ne(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function pm(e){return Array.isArray(e)?e.map(t=>ko(t)):[ko(e)]}function ko(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function mm(e){const t=ko(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function hm(e){const t=ko(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function vu(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function gm(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>vu(t)):[vu(e)]}function Ml(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function yu(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function wu(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function Le(e){if(e==null)throw new Error("ContentUnion is required");return Ml(e)?e:{role:"user",parts:gm(e)}}function Ha(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{const r=Le(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(e.isVertexAI()){const n=Le(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>Le(n)):[Le(t)]}function at(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(yu(e)||wu(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Le(e)]}const t=[],n=[],r=Ml(e[0]);for(const s of e){const i=Ml(s);if(i!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)t.push(s);else{if(yu(s)||wu(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return r||t.push({role:"user",parts:gm(n)}),t}function Hx(e,t){e.includes("null")&&(t.nullable=!0);const n=e.filter(r=>r!=="null");if(n.length===1)t.type=Object.values(Jt).includes(n[0].toUpperCase())?n[0].toUpperCase():Jt.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const r of n)t.anyOf.push({type:Object.values(Jt).includes(r.toUpperCase())?r.toUpperCase():Jt.TYPE_UNSPECIFIED})}}function tr(e){const t={},n=["items"],r=["anyOf"],s=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=e.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(t.nullable=!0,e=i[1]):i[1].type==="null"&&(t.nullable=!0,e=i[0])),e.type instanceof Array&&Hx(e.type,t);for(const[l,d]of Object.entries(e))if(d!=null)if(l=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;t.type=Object.values(Jt).includes(d.toUpperCase())?d.toUpperCase():Jt.TYPE_UNSPECIFIED}else if(n.includes(l))t[l]=tr(d);else if(r.includes(l)){const f=[];for(const u of d){if(u.type=="null"){t.nullable=!0;continue}f.push(tr(u))}t[l]=f}else if(s.includes(l)){const f={};for(const[u,p]of Object.entries(d))f[u]=tr(p);t[l]=f}else{if(l==="additionalProperties")continue;t[l]=d}return t}function Ba(e){return tr(e)}function Ga(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function Oa(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function mr(e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=tr(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=tr(t.response));return e}function hr(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function Bx(e,t,n,r=1){const s=!t.startsWith(`${n}/`)&&t.split("/").length===r;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:s?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:s?`${n}/${t}`:t}function Vt(e,t){if(typeof t!="string")throw new Error("name must be a string");return Bx(e,t,"cachedContents")}function xm(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function cn(e){return Fa(e)}function Gx(e){return e!=null&&typeof e=="object"&&"name"in e}function Ox(e){return e!=null&&typeof e=="object"&&"video"in e}function zx(e){return e!=null&&typeof e=="object"&&"uri"in e}function vm(e){var t;let n;if(Gx(e)&&(n=e.name),!(zx(e)&&(n=e.uri,n===void 0))&&!(Ox(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function ym(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function wm(e){for(const t of["models","tunedModels","publisherModels"])if(qx(e,t))return e[t];return[]}function qx(e,t){return e!==null&&typeof e=="object"&&t in e}function $x(e,t={}){const n=e,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),t.behavior&&(r.behavior=t.behavior),{functionDeclarations:[r]}}function Wx(e,t={}){const n=[],r=new Set;for(const s of e){const i=s.name;if(r.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);r.add(i);const l=$x(s,t);l.functionDeclarations&&n.push(...l.functionDeclarations)}return{functionDeclarations:n}}function Nm(e,t){let n;if(typeof t=="string")if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))n={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))n={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,s=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(s>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function Jx(e){if(typeof e!="string")return e;const t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function Sm(e){if(typeof e!="object"||e===null)return{};const t=e,n=t.inlinedResponses;if(typeof n!="object"||n===null)return e;const s=n.inlinedResponses;if(!Array.isArray(s)||s.length===0)return e;let i=!1;for(const l of s){if(typeof l!="object"||l===null)continue;const f=l.response;if(typeof f!="object"||f===null)continue;if(f.embedding!==void 0){i=!0;break}}return i&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function gr(e,t){const n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function bm(e){const t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Kx(e){const t={},n=a(e,["responsesFile"]);n!=null&&c(t,["fileName"],n);const r=a(e,["inlinedResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>Iv(l))),c(t,["inlinedResponses"],i)}const s=a(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(l=>l)),c(t,["inlinedEmbedContentResponses"],i)}return t}function Yx(e){const t={},n=a(e,["predictionsFormat"]);n!=null&&c(t,["format"],n);const r=a(e,["gcsDestination","outputUriPrefix"]);r!=null&&c(t,["gcsUri"],r);const s=a(e,["bigqueryDestination","outputUri"]);return s!=null&&c(t,["bigqueryUri"],s),t}function Qx(e){const t={},n=a(e,["format"]);n!=null&&c(t,["predictionsFormat"],n);const r=a(e,["gcsUri"]);r!=null&&c(t,["gcsDestination","outputUriPrefix"],r);const s=a(e,["bigqueryUri"]);if(s!=null&&c(t,["bigqueryDestination","outputUri"],s),a(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(a(e,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function Qs(e){const t={},n=a(e,["name"]);n!=null&&c(t,["name"],n);const r=a(e,["metadata","displayName"]);r!=null&&c(t,["displayName"],r);const s=a(e,["metadata","state"]);s!=null&&c(t,["state"],bm(s));const i=a(e,["metadata","createTime"]);i!=null&&c(t,["createTime"],i);const l=a(e,["metadata","endTime"]);l!=null&&c(t,["endTime"],l);const d=a(e,["metadata","updateTime"]);d!=null&&c(t,["updateTime"],d);const f=a(e,["metadata","model"]);f!=null&&c(t,["model"],f);const u=a(e,["metadata","output"]);return u!=null&&c(t,["dest"],Kx(Sm(u))),t}function Pl(e){const t={},n=a(e,["name"]);n!=null&&c(t,["name"],n);const r=a(e,["displayName"]);r!=null&&c(t,["displayName"],r);const s=a(e,["state"]);s!=null&&c(t,["state"],bm(s));const i=a(e,["error"]);i!=null&&c(t,["error"],i);const l=a(e,["createTime"]);l!=null&&c(t,["createTime"],l);const d=a(e,["startTime"]);d!=null&&c(t,["startTime"],d);const f=a(e,["endTime"]);f!=null&&c(t,["endTime"],f);const u=a(e,["updateTime"]);u!=null&&c(t,["updateTime"],u);const p=a(e,["model"]);p!=null&&c(t,["model"],p);const m=a(e,["inputConfig"]);m!=null&&c(t,["src"],Xx(m));const h=a(e,["outputConfig"]);h!=null&&c(t,["dest"],Yx(Sm(h)));const g=a(e,["completionStats"]);return g!=null&&c(t,["completionStats"],g),t}function Xx(e){const t={},n=a(e,["instancesFormat"]);n!=null&&c(t,["format"],n);const r=a(e,["gcsSource","uris"]);r!=null&&c(t,["gcsUri"],r);const s=a(e,["bigquerySource","inputUri"]);return s!=null&&c(t,["bigqueryUri"],s),t}function Zx(e,t){const n={};if(a(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=a(t,["fileName"]);r!=null&&c(n,["fileName"],r);const s=a(t,["inlinedRequests"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(l=>Tv(e,l))),c(n,["requests","requests"],i)}return n}function ev(e){const t={},n=a(e,["format"]);n!=null&&c(t,["instancesFormat"],n);const r=a(e,["gcsUri"]);r!=null&&c(t,["gcsSource","uris"],r);const s=a(e,["bigqueryUri"]);if(s!=null&&c(t,["bigquerySource","inputUri"],s),a(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function tv(e){const t={},n=a(e,["data"]);if(n!=null&&c(t,["data"],n),a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(e,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}function nv(e,t){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],gr(e,r)),n}function rv(e,t){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],gr(e,r)),n}function sv(e){const t={},n=a(e,["content"]);n!=null&&c(t,["content"],n);const r=a(e,["citationMetadata"]);r!=null&&c(t,["citationMetadata"],ov(r));const s=a(e,["tokenCount"]);s!=null&&c(t,["tokenCount"],s);const i=a(e,["finishReason"]);i!=null&&c(t,["finishReason"],i);const l=a(e,["avgLogprobs"]);l!=null&&c(t,["avgLogprobs"],l);const d=a(e,["groundingMetadata"]);d!=null&&c(t,["groundingMetadata"],d);const f=a(e,["index"]);f!=null&&c(t,["index"],f);const u=a(e,["logprobsResult"]);u!=null&&c(t,["logprobsResult"],u);const p=a(e,["safetyRatings"]);if(p!=null){let h=p;Array.isArray(h)&&(h=h.map(g=>g)),c(t,["safetyRatings"],h)}const m=a(e,["urlContextMetadata"]);return m!=null&&c(t,["urlContextMetadata"],m),t}function ov(e){const t={},n=a(e,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),c(t,["citations"],r)}return t}function Cm(e){const t={},n=a(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>Dv(i))),c(t,["parts"],s)}const r=a(e,["role"]);return r!=null&&c(t,["role"],r),t}function iv(e,t){const n={},r=a(e,["displayName"]);if(t!==void 0&&r!=null&&c(t,["batch","displayName"],r),a(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function lv(e,t){const n={},r=a(e,["displayName"]);t!==void 0&&r!=null&&c(t,["displayName"],r);const s=a(e,["dest"]);return t!==void 0&&s!=null&&c(t,["outputConfig"],Qx(Jx(s))),n}function Nu(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["_url","model"],ne(e,r));const s=a(t,["src"]);s!=null&&c(n,["batch","inputConfig"],Zx(e,Nm(e,s)));const i=a(t,["config"]);return i!=null&&iv(i,n),n}function av(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["model"],ne(e,r));const s=a(t,["src"]);s!=null&&c(n,["inputConfig"],ev(Nm(e,s)));const i=a(t,["config"]);return i!=null&&lv(i,n),n}function cv(e,t){const n={},r=a(e,["displayName"]);return t!==void 0&&r!=null&&c(t,["batch","displayName"],r),n}function dv(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["_url","model"],ne(e,r));const s=a(t,["src"]);s!=null&&c(n,["batch","inputConfig"],xv(e,s));const i=a(t,["config"]);return i!=null&&cv(i,n),n}function uv(e,t){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],gr(e,r)),n}function fv(e,t){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],gr(e,r)),n}function pv(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["name"]);r!=null&&c(t,["name"],r);const s=a(e,["done"]);s!=null&&c(t,["done"],s);const i=a(e,["error"]);return i!=null&&c(t,["error"],i),t}function mv(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["name"]);r!=null&&c(t,["name"],r);const s=a(e,["done"]);s!=null&&c(t,["done"],s);const i=a(e,["error"]);return i!=null&&c(t,["error"],i),t}function hv(e,t){const n={},r=a(t,["contents"]);if(r!=null){let i=Ha(e,r);Array.isArray(i)&&(i=i.map(l=>l)),c(n,["requests[]","request","content"],i)}const s=a(t,["config"]);return s!=null&&(c(n,["_self"],gv(s,n)),fx(n,{"requests[].*":"requests[].request.*"})),n}function gv(e,t){const n={},r=a(e,["taskType"]);t!==void 0&&r!=null&&c(t,["requests[]","taskType"],r);const s=a(e,["title"]);t!==void 0&&s!=null&&c(t,["requests[]","title"],s);const i=a(e,["outputDimensionality"]);if(t!==void 0&&i!=null&&c(t,["requests[]","outputDimensionality"],i),a(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function xv(e,t){const n={},r=a(t,["fileName"]);r!=null&&c(n,["file_name"],r);const s=a(t,["inlinedRequests"]);return s!=null&&c(n,["requests"],hv(e,s)),n}function vv(e){const t={};if(a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(e,["fileUri"]);n!=null&&c(t,["fileUri"],n);const r=a(e,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}function yv(e){const t={},n=a(e,["id"]);n!=null&&c(t,["id"],n);const r=a(e,["args"]);r!=null&&c(t,["args"],r);const s=a(e,["name"]);if(s!=null&&c(t,["name"],s),a(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function wv(e){const t={},n=a(e,["allowedFunctionNames"]);n!=null&&c(t,["allowedFunctionNames"],n);const r=a(e,["mode"]);if(r!=null&&c(t,["mode"],r),a(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function Nv(e,t,n){const r={},s=a(t,["systemInstruction"]);n!==void 0&&s!=null&&c(n,["systemInstruction"],Cm(Le(s)));const i=a(t,["temperature"]);i!=null&&c(r,["temperature"],i);const l=a(t,["topP"]);l!=null&&c(r,["topP"],l);const d=a(t,["topK"]);d!=null&&c(r,["topK"],d);const f=a(t,["candidateCount"]);f!=null&&c(r,["candidateCount"],f);const u=a(t,["maxOutputTokens"]);u!=null&&c(r,["maxOutputTokens"],u);const p=a(t,["stopSequences"]);p!=null&&c(r,["stopSequences"],p);const m=a(t,["responseLogprobs"]);m!=null&&c(r,["responseLogprobs"],m);const h=a(t,["logprobs"]);h!=null&&c(r,["logprobs"],h);const g=a(t,["presencePenalty"]);g!=null&&c(r,["presencePenalty"],g);const w=a(t,["frequencyPenalty"]);w!=null&&c(r,["frequencyPenalty"],w);const N=a(t,["seed"]);N!=null&&c(r,["seed"],N);const S=a(t,["responseMimeType"]);S!=null&&c(r,["responseMimeType"],S);const x=a(t,["responseSchema"]);x!=null&&c(r,["responseSchema"],Ba(x));const v=a(t,["responseJsonSchema"]);if(v!=null&&c(r,["responseJsonSchema"],v),a(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const y=a(t,["safetySettings"]);if(n!==void 0&&y!=null){let P=y;Array.isArray(P)&&(P=P.map(A=>Fv(A))),c(n,["safetySettings"],P)}const C=a(t,["tools"]);if(n!==void 0&&C!=null){let P=hr(C);Array.isArray(P)&&(P=P.map(A=>Vv(mr(A)))),c(n,["tools"],P)}const b=a(t,["toolConfig"]);if(n!==void 0&&b!=null&&c(n,["toolConfig"],Uv(b)),a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const E=a(t,["cachedContent"]);n!==void 0&&E!=null&&c(n,["cachedContent"],Vt(e,E));const k=a(t,["responseModalities"]);k!=null&&c(r,["responseModalities"],k);const T=a(t,["mediaResolution"]);T!=null&&c(r,["mediaResolution"],T);const I=a(t,["speechConfig"]);if(I!=null&&c(r,["speechConfig"],Ga(I)),a(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=a(t,["thinkingConfig"]);M!=null&&c(r,["thinkingConfig"],M);const L=a(t,["imageConfig"]);L!=null&&c(r,["imageConfig"],kv(L));const R=a(t,["enableEnhancedCivicAnswers"]);return R!=null&&c(r,["enableEnhancedCivicAnswers"],R),r}function Sv(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(u=>sv(u))),c(t,["candidates"],f)}const s=a(e,["modelVersion"]);s!=null&&c(t,["modelVersion"],s);const i=a(e,["promptFeedback"]);i!=null&&c(t,["promptFeedback"],i);const l=a(e,["responseId"]);l!=null&&c(t,["responseId"],l);const d=a(e,["usageMetadata"]);return d!=null&&c(t,["usageMetadata"],d),t}function bv(e,t){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],gr(e,r)),n}function Cv(e,t){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],gr(e,r)),n}function Ev(e){const t={};if(a(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(e,["enableWidget"]);return n!=null&&c(t,["enableWidget"],n),t}function _v(e){const t={};if(a(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(e,["timeRangeFilter"]);return n!=null&&c(t,["timeRangeFilter"],n),t}function kv(e){const t={},n=a(e,["aspectRatio"]);n!=null&&c(t,["aspectRatio"],n);const r=a(e,["imageSize"]);if(r!=null&&c(t,["imageSize"],r),a(e,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(a(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function Tv(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["request","model"],ne(e,r));const s=a(t,["contents"]);if(s!=null){let d=at(s);Array.isArray(d)&&(d=d.map(f=>Cm(f))),c(n,["request","contents"],d)}const i=a(t,["metadata"]);i!=null&&c(n,["metadata"],i);const l=a(t,["config"]);return l!=null&&c(n,["request","generationConfig"],Nv(e,l,a(n,["request"],{}))),n}function Iv(e){const t={},n=a(e,["response"]);n!=null&&c(t,["response"],Sv(n));const r=a(e,["error"]);return r!=null&&c(t,["error"],r),t}function Av(e,t){const n={},r=a(e,["pageSize"]);t!==void 0&&r!=null&&c(t,["_query","pageSize"],r);const s=a(e,["pageToken"]);if(t!==void 0&&s!=null&&c(t,["_query","pageToken"],s),a(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Rv(e,t){const n={},r=a(e,["pageSize"]);t!==void 0&&r!=null&&c(t,["_query","pageSize"],r);const s=a(e,["pageToken"]);t!==void 0&&s!=null&&c(t,["_query","pageToken"],s);const i=a(e,["filter"]);return t!==void 0&&i!=null&&c(t,["_query","filter"],i),n}function Mv(e){const t={},n=a(e,["config"]);return n!=null&&Av(n,t),t}function Pv(e){const t={},n=a(e,["config"]);return n!=null&&Rv(n,t),t}function jv(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["nextPageToken"]);r!=null&&c(t,["nextPageToken"],r);const s=a(e,["operations"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(l=>Qs(l))),c(t,["batchJobs"],i)}return t}function Lv(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["nextPageToken"]);r!=null&&c(t,["nextPageToken"],r);const s=a(e,["batchPredictionJobs"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(l=>Pl(l))),c(t,["batchJobs"],i)}return t}function Dv(e){const t={},n=a(e,["mediaResolution"]);n!=null&&c(t,["mediaResolution"],n);const r=a(e,["codeExecutionResult"]);r!=null&&c(t,["codeExecutionResult"],r);const s=a(e,["executableCode"]);s!=null&&c(t,["executableCode"],s);const i=a(e,["fileData"]);i!=null&&c(t,["fileData"],vv(i));const l=a(e,["functionCall"]);l!=null&&c(t,["functionCall"],yv(l));const d=a(e,["functionResponse"]);d!=null&&c(t,["functionResponse"],d);const f=a(e,["inlineData"]);f!=null&&c(t,["inlineData"],tv(f));const u=a(e,["text"]);u!=null&&c(t,["text"],u);const p=a(e,["thought"]);p!=null&&c(t,["thought"],p);const m=a(e,["thoughtSignature"]);m!=null&&c(t,["thoughtSignature"],m);const h=a(e,["videoMetadata"]);return h!=null&&c(t,["videoMetadata"],h),t}function Fv(e){const t={},n=a(e,["category"]);if(n!=null&&c(t,["category"],n),a(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=a(e,["threshold"]);return r!=null&&c(t,["threshold"],r),t}function Uv(e){const t={},n=a(e,["retrievalConfig"]);n!=null&&c(t,["retrievalConfig"],n);const r=a(e,["functionCallingConfig"]);return r!=null&&c(t,["functionCallingConfig"],wv(r)),t}function Vv(e){const t={};if(a(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=a(e,["computerUse"]);n!=null&&c(t,["computerUse"],n);const r=a(e,["fileSearch"]);r!=null&&c(t,["fileSearch"],r);const s=a(e,["codeExecution"]);if(s!=null&&c(t,["codeExecution"],s),a(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=a(e,["functionDeclarations"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(m=>m)),c(t,["functionDeclarations"],p)}const l=a(e,["googleMaps"]);l!=null&&c(t,["googleMaps"],Ev(l));const d=a(e,["googleSearch"]);d!=null&&c(t,["googleSearch"],_v(d));const f=a(e,["googleSearchRetrieval"]);f!=null&&c(t,["googleSearchRetrieval"],f);const u=a(e,["urlContext"]);return u!=null&&c(t,["urlContext"],u),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Dt;(function(e){e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents",e.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",e.PAGED_ITEM_DOCUMENTS="documents"})(Dt||(Dt={}));class Tn{constructor(t,n,r,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,r,s)}init(t,n,r){var s,i;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!r||Object.keys(r).length===0?l={config:{}}:typeof r=="object"?l=Object.assign({},r):l=r,l.config&&(l.config.pageToken=n.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(i=(s=l.config)===null||s===void 0?void 0:s.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hv extends Ut{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Tn(Dt.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(t){const n=Nu(this.apiClient,t),r=n._url,s=U("{model}:batchGenerateContent",r),d=n.batch.inputConfig.requests,f=d.requests,u=[];for(const p of f){const m=Object.assign({},p);if(m.systemInstruction){const h=m.systemInstruction;delete m.systemInstruction;const g=m.request;g.systemInstruction=h,m.request=g}u.push(m)}return d.requests=u,delete n.config,delete n._url,delete n._query,{path:s,body:n}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,n){const r=n?Object.assign({},n):{},s=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${s}`),r.dest===void 0){const i=this.getGcsUri(t),l=this.getBigqueryUri(t);if(i)i.endsWith(".jsonl")?r.dest=`${i.slice(0,-6)}/dest`:r.dest=`${i}_dest_${s}`;else if(l)r.dest=`${l}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(t){var n,r,s,i;let l,d="",f={};if(this.apiClient.isVertexAI()){const u=av(this.apiClient,t);return d=U("batchPredictionJobs",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),l.then(p=>Pl(p))}else{const u=Nu(this.apiClient,t);return d=U("{model}:batchGenerateContent",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>Qs(p))}}async createEmbeddingsInternal(t){var n,r;let s,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=dv(this.apiClient,t);return i=U("{model}:asyncBatchEmbedContent",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>Qs(f))}}async get(t){var n,r,s,i;let l,d="",f={};if(this.apiClient.isVertexAI()){const u=Cv(this.apiClient,t);return d=U("batchPredictionJobs/{name}",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),l.then(p=>Pl(p))}else{const u=bv(this.apiClient,t);return d=U("batches/{name}",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>Qs(p))}}async cancel(t){var n,r,s,i;let l="",d={};if(this.apiClient.isVertexAI()){const f=rv(this.apiClient,t);l=U("batchPredictionJobs/{name}:cancel",f._url),d=f._query,delete f._url,delete f._query,await this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}else{const f=nv(this.apiClient,t);l=U("batches/{name}:cancel",f._url),d=f._query,delete f._url,delete f._query,await this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(t){var n,r,s,i;let l,d="",f={};if(this.apiClient.isVertexAI()){const u=Pv(t);return d=U("batchPredictionJobs",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=Lv(p),h=new xu;return Object.assign(h,m),h})}else{const u=Mv(t);return d=U("batches",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=jv(p),h=new xu;return Object.assign(h,m),h})}}async delete(t){var n,r,s,i;let l,d="",f={};if(this.apiClient.isVertexAI()){const u=fv(this.apiClient,t);return d=U("batchPredictionJobs/{name}",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>mv(p))}else{const u=uv(this.apiClient,t);return d=U("batches/{name}",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>pv(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bv(e){const t={},n=a(e,["data"]);if(n!=null&&c(t,["data"],n),a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(e,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}function Su(e){const t={},n=a(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>dy(i))),c(t,["parts"],s)}const r=a(e,["role"]);return r!=null&&c(t,["role"],r),t}function Gv(e,t){const n={},r=a(e,["ttl"]);t!==void 0&&r!=null&&c(t,["ttl"],r);const s=a(e,["expireTime"]);t!==void 0&&s!=null&&c(t,["expireTime"],s);const i=a(e,["displayName"]);t!==void 0&&i!=null&&c(t,["displayName"],i);const l=a(e,["contents"]);if(t!==void 0&&l!=null){let p=at(l);Array.isArray(p)&&(p=p.map(m=>Su(m))),c(t,["contents"],p)}const d=a(e,["systemInstruction"]);t!==void 0&&d!=null&&c(t,["systemInstruction"],Su(Le(d)));const f=a(e,["tools"]);if(t!==void 0&&f!=null){let p=f;Array.isArray(p)&&(p=p.map(m=>fy(m))),c(t,["tools"],p)}const u=a(e,["toolConfig"]);if(t!==void 0&&u!=null&&c(t,["toolConfig"],uy(u)),a(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Ov(e,t){const n={},r=a(e,["ttl"]);t!==void 0&&r!=null&&c(t,["ttl"],r);const s=a(e,["expireTime"]);t!==void 0&&s!=null&&c(t,["expireTime"],s);const i=a(e,["displayName"]);t!==void 0&&i!=null&&c(t,["displayName"],i);const l=a(e,["contents"]);if(t!==void 0&&l!=null){let m=at(l);Array.isArray(m)&&(m=m.map(h=>h)),c(t,["contents"],m)}const d=a(e,["systemInstruction"]);t!==void 0&&d!=null&&c(t,["systemInstruction"],Le(d));const f=a(e,["tools"]);if(t!==void 0&&f!=null){let m=f;Array.isArray(m)&&(m=m.map(h=>py(h))),c(t,["tools"],m)}const u=a(e,["toolConfig"]);t!==void 0&&u!=null&&c(t,["toolConfig"],u);const p=a(e,["kmsKeyName"]);return t!==void 0&&p!=null&&c(t,["encryption_spec","kmsKeyName"],p),n}function zv(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["model"],fm(e,r));const s=a(t,["config"]);return s!=null&&Gv(s,n),n}function qv(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["model"],fm(e,r));const s=a(t,["config"]);return s!=null&&Ov(s,n),n}function $v(e,t){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],Vt(e,r)),n}function Wv(e,t){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],Vt(e,r)),n}function Jv(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&c(t,["sdkHttpResponse"],n),t}function Kv(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&c(t,["sdkHttpResponse"],n),t}function Yv(e){const t={};if(a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(e,["fileUri"]);n!=null&&c(t,["fileUri"],n);const r=a(e,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}function Qv(e){const t={},n=a(e,["id"]);n!=null&&c(t,["id"],n);const r=a(e,["args"]);r!=null&&c(t,["args"],r);const s=a(e,["name"]);if(s!=null&&c(t,["name"],s),a(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function Xv(e){const t={},n=a(e,["allowedFunctionNames"]);n!=null&&c(t,["allowedFunctionNames"],n);const r=a(e,["mode"]);if(r!=null&&c(t,["mode"],r),a(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function Zv(e){const t={},n=a(e,["description"]);n!=null&&c(t,["description"],n);const r=a(e,["name"]);r!=null&&c(t,["name"],r);const s=a(e,["parameters"]);s!=null&&c(t,["parameters"],s);const i=a(e,["parametersJsonSchema"]);i!=null&&c(t,["parametersJsonSchema"],i);const l=a(e,["response"]);l!=null&&c(t,["response"],l);const d=a(e,["responseJsonSchema"]);if(d!=null&&c(t,["responseJsonSchema"],d),a(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function ey(e,t){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],Vt(e,r)),n}function ty(e,t){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],Vt(e,r)),n}function ny(e){const t={};if(a(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(e,["enableWidget"]);return n!=null&&c(t,["enableWidget"],n),t}function ry(e){const t={};if(a(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(e,["timeRangeFilter"]);return n!=null&&c(t,["timeRangeFilter"],n),t}function sy(e,t){const n={},r=a(e,["pageSize"]);t!==void 0&&r!=null&&c(t,["_query","pageSize"],r);const s=a(e,["pageToken"]);return t!==void 0&&s!=null&&c(t,["_query","pageToken"],s),n}function oy(e,t){const n={},r=a(e,["pageSize"]);t!==void 0&&r!=null&&c(t,["_query","pageSize"],r);const s=a(e,["pageToken"]);return t!==void 0&&s!=null&&c(t,["_query","pageToken"],s),n}function iy(e){const t={},n=a(e,["config"]);return n!=null&&sy(n,t),t}function ly(e){const t={},n=a(e,["config"]);return n!=null&&oy(n,t),t}function ay(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["nextPageToken"]);r!=null&&c(t,["nextPageToken"],r);const s=a(e,["cachedContents"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(l=>l)),c(t,["cachedContents"],i)}return t}function cy(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["nextPageToken"]);r!=null&&c(t,["nextPageToken"],r);const s=a(e,["cachedContents"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(l=>l)),c(t,["cachedContents"],i)}return t}function dy(e){const t={},n=a(e,["mediaResolution"]);n!=null&&c(t,["mediaResolution"],n);const r=a(e,["codeExecutionResult"]);r!=null&&c(t,["codeExecutionResult"],r);const s=a(e,["executableCode"]);s!=null&&c(t,["executableCode"],s);const i=a(e,["fileData"]);i!=null&&c(t,["fileData"],Yv(i));const l=a(e,["functionCall"]);l!=null&&c(t,["functionCall"],Qv(l));const d=a(e,["functionResponse"]);d!=null&&c(t,["functionResponse"],d);const f=a(e,["inlineData"]);f!=null&&c(t,["inlineData"],Bv(f));const u=a(e,["text"]);u!=null&&c(t,["text"],u);const p=a(e,["thought"]);p!=null&&c(t,["thought"],p);const m=a(e,["thoughtSignature"]);m!=null&&c(t,["thoughtSignature"],m);const h=a(e,["videoMetadata"]);return h!=null&&c(t,["videoMetadata"],h),t}function uy(e){const t={},n=a(e,["retrievalConfig"]);n!=null&&c(t,["retrievalConfig"],n);const r=a(e,["functionCallingConfig"]);return r!=null&&c(t,["functionCallingConfig"],Xv(r)),t}function fy(e){const t={};if(a(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=a(e,["computerUse"]);n!=null&&c(t,["computerUse"],n);const r=a(e,["fileSearch"]);r!=null&&c(t,["fileSearch"],r);const s=a(e,["codeExecution"]);if(s!=null&&c(t,["codeExecution"],s),a(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=a(e,["functionDeclarations"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(m=>m)),c(t,["functionDeclarations"],p)}const l=a(e,["googleMaps"]);l!=null&&c(t,["googleMaps"],ny(l));const d=a(e,["googleSearch"]);d!=null&&c(t,["googleSearch"],ry(d));const f=a(e,["googleSearchRetrieval"]);f!=null&&c(t,["googleSearchRetrieval"],f);const u=a(e,["urlContext"]);return u!=null&&c(t,["urlContext"],u),t}function py(e){const t={},n=a(e,["retrieval"]);n!=null&&c(t,["retrieval"],n);const r=a(e,["computerUse"]);if(r!=null&&c(t,["computerUse"],r),a(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=a(e,["codeExecution"]);s!=null&&c(t,["codeExecution"],s);const i=a(e,["enterpriseWebSearch"]);i!=null&&c(t,["enterpriseWebSearch"],i);const l=a(e,["functionDeclarations"]);if(l!=null){let m=l;Array.isArray(m)&&(m=m.map(h=>Zv(h))),c(t,["functionDeclarations"],m)}const d=a(e,["googleMaps"]);d!=null&&c(t,["googleMaps"],d);const f=a(e,["googleSearch"]);f!=null&&c(t,["googleSearch"],f);const u=a(e,["googleSearchRetrieval"]);u!=null&&c(t,["googleSearchRetrieval"],u);const p=a(e,["urlContext"]);return p!=null&&c(t,["urlContext"],p),t}function my(e,t){const n={},r=a(e,["ttl"]);t!==void 0&&r!=null&&c(t,["ttl"],r);const s=a(e,["expireTime"]);return t!==void 0&&s!=null&&c(t,["expireTime"],s),n}function hy(e,t){const n={},r=a(e,["ttl"]);t!==void 0&&r!=null&&c(t,["ttl"],r);const s=a(e,["expireTime"]);return t!==void 0&&s!=null&&c(t,["expireTime"],s),n}function gy(e,t){const n={},r=a(t,["name"]);r!=null&&c(n,["_url","name"],Vt(e,r));const s=a(t,["config"]);return s!=null&&my(s,n),n}function xy(e,t){const n={},r=a(t,["name"]);r!=null&&c(n,["_url","name"],Vt(e,r));const s=a(t,["config"]);return s!=null&&hy(s,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vy extends Ut{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Tn(Dt.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(t){var n,r,s,i;let l,d="",f={};if(this.apiClient.isVertexAI()){const u=qv(this.apiClient,t);return d=U("cachedContents",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const u=zv(this.apiClient,t);return d=U("cachedContents",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async get(t){var n,r,s,i;let l,d="",f={};if(this.apiClient.isVertexAI()){const u=ty(this.apiClient,t);return d=U("{name}",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const u=ey(this.apiClient,t);return d=U("{name}",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async delete(t){var n,r,s,i;let l,d="",f={};if(this.apiClient.isVertexAI()){const u=Wv(this.apiClient,t);return d=U("{name}",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=Kv(p),h=new hu;return Object.assign(h,m),h})}else{const u=$v(this.apiClient,t);return d=U("{name}",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=Jv(p),h=new hu;return Object.assign(h,m),h})}}async update(t){var n,r,s,i;let l,d="",f={};if(this.apiClient.isVertexAI()){const u=xy(this.apiClient,t);return d=U("{name}",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),l.then(p=>p)}else{const u=gy(this.apiClient,t);return d=U("{name}",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>p)}}async listInternal(t){var n,r,s,i;let l,d="",f={};if(this.apiClient.isVertexAI()){const u=ly(t);return d=U("cachedContents",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=cy(p),h=new gu;return Object.assign(h,m),h})}else{const u=iy(t);return d=U("cachedContents",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=ay(p),h=new gu;return Object.assign(h,m),h})}}}function To(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function bu(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function K(e){return this instanceof K?(this.v=e,this):new K(e)}function vt(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",l),s[Symbol.asyncIterator]=function(){return this},s;function l(g){return function(w){return Promise.resolve(w).then(g,m)}}function d(g,w){r[g]&&(s[g]=function(N){return new Promise(function(S,x){i.push([g,N,S,x])>1||f(g,N)})},w&&(s[g]=w(s[g])))}function f(g,w){try{u(r[g](w))}catch(N){h(i[0][3],N)}}function u(g){g.value instanceof K?Promise.resolve(g.value.v).then(p,m):h(i[0][2],g)}function p(g){f("next",g)}function m(g){f("throw",g)}function h(g,w){g(w),i.shift(),i.length&&f(i[0][0],i[0][1])}}function yt(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof bu=="function"?bu(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=e[i]&&function(l){return new Promise(function(d,f){l=e[i](l),s(d,f,l.done,l.value)})}}function s(i,l,d,f){Promise.resolve(f).then(function(u){i({value:u,done:d})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yy(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;const n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:Em(n)}function Em(e){if(e.parts===void 0||e.parts.length===0)return!1;for(const t of e.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function wy(e){if(e.length!==0){for(const t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function Cu(e){if(e===void 0||e.length===0)return[];const t=[],n=e.length;let r=0;for(;r<n;)if(e[r].role==="user")t.push(e[r]),r++;else{const s=[];let i=!0;for(;r<n&&e[r].role==="model";)s.push(e[r]),i&&!Em(e[r])&&(i=!1),r++;i?t.push(...s):t.pop()}return t}class Ny{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new Sy(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class Sy{constructor(t,n,r,s={},i=[]){this.apiClient=t,this.modelsModule=n,this.model=r,this.config=s,this.history=i,this.sendPromise=Promise.resolve(),wy(i)}async sendMessage(t){var n;await this.sendPromise;const r=Le(t.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var i,l,d;const f=await s,u=(l=(i=f.candidates)===null||i===void 0?void 0:i[0])===null||l===void 0?void 0:l.content,p=f.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let h=[];p!=null&&(h=(d=p.slice(m))!==null&&d!==void 0?d:[]);const g=u?[u]:[];this.recordHistory(r,g,h)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(t){var n;await this.sendPromise;const r=Le(t.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const i=await s;return this.processStreamResponse(i,r)}getHistory(t=!1){const n=t?Cu(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){return vt(this,arguments,function*(){var s,i,l,d,f,u;const p=[];try{for(var m=!0,h=yt(t),g;g=yield K(h.next()),s=g.done,!s;m=!0){d=g.value,m=!1;const w=d;if(yy(w)){const N=(u=(f=w.candidates)===null||f===void 0?void 0:f[0])===null||u===void 0?void 0:u.content;N!==void 0&&p.push(N)}yield yield K(w)}}catch(w){i={error:w}}finally{try{!m&&!s&&(l=h.return)&&(yield K(l.call(h)))}finally{if(i)throw i.error}}this.recordHistory(n,p)})}recordHistory(t,n,r){let s=[];n.length>0&&n.every(i=>i.role!==void 0)?s=n:s.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...Cu(r)):this.history.push(t),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Yo extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,Yo.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function by(e){const t={},n=a(e,["file"]);return n!=null&&c(t,["file"],n),t}function Cy(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&c(t,["sdkHttpResponse"],n),t}function Ey(e){const t={},n=a(e,["name"]);return n!=null&&c(t,["_url","file"],vm(n)),t}function _y(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&c(t,["sdkHttpResponse"],n),t}function ky(e){const t={},n=a(e,["name"]);return n!=null&&c(t,["_url","file"],vm(n)),t}function Ty(e,t){const n={},r=a(e,["pageSize"]);t!==void 0&&r!=null&&c(t,["_query","pageSize"],r);const s=a(e,["pageToken"]);return t!==void 0&&s!=null&&c(t,["_query","pageToken"],s),n}function Iy(e){const t={},n=a(e,["config"]);return n!=null&&Ty(n,t),t}function Ay(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["nextPageToken"]);r!=null&&c(t,["nextPageToken"],r);const s=a(e,["files"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(l=>l)),c(t,["files"],i)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ry extends Ut{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Tn(Dt.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>n)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var n,r;let s,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Iy(t);return i=U("files",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(u=>{const p=u;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const u=Ay(f),p=new Lx;return Object.assign(p,u),p})}}async createInternal(t){var n,r;let s,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=by(t);return i=U("upload/v1beta/files",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>{const u=Cy(f),p=new Dx;return Object.assign(p,u),p})}}async get(t){var n,r;let s,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=ky(t);return i=U("files/{file}",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(t){var n,r;let s,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Ey(t);return i=U("files/{file}",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(u=>{const p=u;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const u=_y(f),p=new Fx;return Object.assign(p,u),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xs(e){const t={},n=a(e,["data"]);if(n!=null&&c(t,["data"],n),a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(e,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}function My(e){const t={},n=a(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>Jy(i))),c(t,["parts"],s)}const r=a(e,["role"]);return r!=null&&c(t,["role"],r),t}function Py(e){const t={};if(a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(e,["fileUri"]);n!=null&&c(t,["fileUri"],n);const r=a(e,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}function jy(e){const t={},n=a(e,["id"]);n!=null&&c(t,["id"],n);const r=a(e,["args"]);r!=null&&c(t,["args"],r);const s=a(e,["name"]);if(s!=null&&c(t,["name"],s),a(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function Ly(e){const t={},n=a(e,["description"]);n!=null&&c(t,["description"],n);const r=a(e,["name"]);r!=null&&c(t,["name"],r);const s=a(e,["parameters"]);s!=null&&c(t,["parameters"],s);const i=a(e,["parametersJsonSchema"]);i!=null&&c(t,["parametersJsonSchema"],i);const l=a(e,["response"]);l!=null&&c(t,["response"],l);const d=a(e,["responseJsonSchema"]);if(d!=null&&c(t,["responseJsonSchema"],d),a(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function Dy(e){const t={},n=a(e,["modelSelectionConfig"]);n!=null&&c(t,["modelConfig"],n);const r=a(e,["responseJsonSchema"]);r!=null&&c(t,["responseJsonSchema"],r);const s=a(e,["audioTimestamp"]);s!=null&&c(t,["audioTimestamp"],s);const i=a(e,["candidateCount"]);i!=null&&c(t,["candidateCount"],i);const l=a(e,["enableAffectiveDialog"]);l!=null&&c(t,["enableAffectiveDialog"],l);const d=a(e,["frequencyPenalty"]);d!=null&&c(t,["frequencyPenalty"],d);const f=a(e,["logprobs"]);f!=null&&c(t,["logprobs"],f);const u=a(e,["maxOutputTokens"]);u!=null&&c(t,["maxOutputTokens"],u);const p=a(e,["mediaResolution"]);p!=null&&c(t,["mediaResolution"],p);const m=a(e,["presencePenalty"]);m!=null&&c(t,["presencePenalty"],m);const h=a(e,["responseLogprobs"]);h!=null&&c(t,["responseLogprobs"],h);const g=a(e,["responseMimeType"]);g!=null&&c(t,["responseMimeType"],g);const w=a(e,["responseModalities"]);w!=null&&c(t,["responseModalities"],w);const N=a(e,["responseSchema"]);N!=null&&c(t,["responseSchema"],N);const S=a(e,["routingConfig"]);S!=null&&c(t,["routingConfig"],S);const x=a(e,["seed"]);x!=null&&c(t,["seed"],x);const v=a(e,["speechConfig"]);v!=null&&c(t,["speechConfig"],v);const y=a(e,["stopSequences"]);y!=null&&c(t,["stopSequences"],y);const C=a(e,["temperature"]);C!=null&&c(t,["temperature"],C);const b=a(e,["thinkingConfig"]);b!=null&&c(t,["thinkingConfig"],b);const E=a(e,["topK"]);E!=null&&c(t,["topK"],E);const k=a(e,["topP"]);if(k!=null&&c(t,["topP"],k),a(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function Fy(e){const t={};if(a(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(e,["enableWidget"]);return n!=null&&c(t,["enableWidget"],n),t}function Uy(e){const t={};if(a(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(e,["timeRangeFilter"]);return n!=null&&c(t,["timeRangeFilter"],n),t}function Vy(e,t){const n={},r=a(e,["generationConfig"]);t!==void 0&&r!=null&&c(t,["setup","generationConfig"],r);const s=a(e,["responseModalities"]);t!==void 0&&s!=null&&c(t,["setup","generationConfig","responseModalities"],s);const i=a(e,["temperature"]);t!==void 0&&i!=null&&c(t,["setup","generationConfig","temperature"],i);const l=a(e,["topP"]);t!==void 0&&l!=null&&c(t,["setup","generationConfig","topP"],l);const d=a(e,["topK"]);t!==void 0&&d!=null&&c(t,["setup","generationConfig","topK"],d);const f=a(e,["maxOutputTokens"]);t!==void 0&&f!=null&&c(t,["setup","generationConfig","maxOutputTokens"],f);const u=a(e,["mediaResolution"]);t!==void 0&&u!=null&&c(t,["setup","generationConfig","mediaResolution"],u);const p=a(e,["seed"]);t!==void 0&&p!=null&&c(t,["setup","generationConfig","seed"],p);const m=a(e,["speechConfig"]);t!==void 0&&m!=null&&c(t,["setup","generationConfig","speechConfig"],Oa(m));const h=a(e,["thinkingConfig"]);t!==void 0&&h!=null&&c(t,["setup","generationConfig","thinkingConfig"],h);const g=a(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&c(t,["setup","generationConfig","enableAffectiveDialog"],g);const w=a(e,["systemInstruction"]);t!==void 0&&w!=null&&c(t,["setup","systemInstruction"],My(Le(w)));const N=a(e,["tools"]);if(t!==void 0&&N!=null){let E=hr(N);Array.isArray(E)&&(E=E.map(k=>Yy(mr(k)))),c(t,["setup","tools"],E)}const S=a(e,["sessionResumption"]);t!==void 0&&S!=null&&c(t,["setup","sessionResumption"],Ky(S));const x=a(e,["inputAudioTranscription"]);t!==void 0&&x!=null&&c(t,["setup","inputAudioTranscription"],x);const v=a(e,["outputAudioTranscription"]);t!==void 0&&v!=null&&c(t,["setup","outputAudioTranscription"],v);const y=a(e,["realtimeInputConfig"]);t!==void 0&&y!=null&&c(t,["setup","realtimeInputConfig"],y);const C=a(e,["contextWindowCompression"]);t!==void 0&&C!=null&&c(t,["setup","contextWindowCompression"],C);const b=a(e,["proactivity"]);if(t!==void 0&&b!=null&&c(t,["setup","proactivity"],b),a(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function Hy(e,t){const n={},r=a(e,["generationConfig"]);t!==void 0&&r!=null&&c(t,["setup","generationConfig"],Dy(r));const s=a(e,["responseModalities"]);t!==void 0&&s!=null&&c(t,["setup","generationConfig","responseModalities"],s);const i=a(e,["temperature"]);t!==void 0&&i!=null&&c(t,["setup","generationConfig","temperature"],i);const l=a(e,["topP"]);t!==void 0&&l!=null&&c(t,["setup","generationConfig","topP"],l);const d=a(e,["topK"]);t!==void 0&&d!=null&&c(t,["setup","generationConfig","topK"],d);const f=a(e,["maxOutputTokens"]);t!==void 0&&f!=null&&c(t,["setup","generationConfig","maxOutputTokens"],f);const u=a(e,["mediaResolution"]);t!==void 0&&u!=null&&c(t,["setup","generationConfig","mediaResolution"],u);const p=a(e,["seed"]);t!==void 0&&p!=null&&c(t,["setup","generationConfig","seed"],p);const m=a(e,["speechConfig"]);t!==void 0&&m!=null&&c(t,["setup","generationConfig","speechConfig"],Oa(m));const h=a(e,["thinkingConfig"]);t!==void 0&&h!=null&&c(t,["setup","generationConfig","thinkingConfig"],h);const g=a(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&c(t,["setup","generationConfig","enableAffectiveDialog"],g);const w=a(e,["systemInstruction"]);t!==void 0&&w!=null&&c(t,["setup","systemInstruction"],Le(w));const N=a(e,["tools"]);if(t!==void 0&&N!=null){let k=hr(N);Array.isArray(k)&&(k=k.map(T=>Qy(mr(T)))),c(t,["setup","tools"],k)}const S=a(e,["sessionResumption"]);t!==void 0&&S!=null&&c(t,["setup","sessionResumption"],S);const x=a(e,["inputAudioTranscription"]);t!==void 0&&x!=null&&c(t,["setup","inputAudioTranscription"],x);const v=a(e,["outputAudioTranscription"]);t!==void 0&&v!=null&&c(t,["setup","outputAudioTranscription"],v);const y=a(e,["realtimeInputConfig"]);t!==void 0&&y!=null&&c(t,["setup","realtimeInputConfig"],y);const C=a(e,["contextWindowCompression"]);t!==void 0&&C!=null&&c(t,["setup","contextWindowCompression"],C);const b=a(e,["proactivity"]);t!==void 0&&b!=null&&c(t,["setup","proactivity"],b);const E=a(e,["explicitVadSignal"]);return t!==void 0&&E!=null&&c(t,["setup","explicitVadSignal"],E),n}function By(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["setup","model"],ne(e,r));const s=a(t,["config"]);return s!=null&&c(n,["config"],Vy(s,n)),n}function Gy(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["setup","model"],ne(e,r));const s=a(t,["config"]);return s!=null&&c(n,["config"],Hy(s,n)),n}function Oy(e){const t={},n=a(e,["musicGenerationConfig"]);return n!=null&&c(t,["musicGenerationConfig"],n),t}function zy(e){const t={},n=a(e,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),c(t,["weightedPrompts"],r)}return t}function qy(e){const t={},n=a(e,["media"]);if(n!=null){let u=pm(n);Array.isArray(u)&&(u=u.map(p=>Xs(p))),c(t,["mediaChunks"],u)}const r=a(e,["audio"]);r!=null&&c(t,["audio"],Xs(hm(r)));const s=a(e,["audioStreamEnd"]);s!=null&&c(t,["audioStreamEnd"],s);const i=a(e,["video"]);i!=null&&c(t,["video"],Xs(mm(i)));const l=a(e,["text"]);l!=null&&c(t,["text"],l);const d=a(e,["activityStart"]);d!=null&&c(t,["activityStart"],d);const f=a(e,["activityEnd"]);return f!=null&&c(t,["activityEnd"],f),t}function $y(e){const t={},n=a(e,["media"]);if(n!=null){let u=pm(n);Array.isArray(u)&&(u=u.map(p=>p)),c(t,["mediaChunks"],u)}const r=a(e,["audio"]);r!=null&&c(t,["audio"],hm(r));const s=a(e,["audioStreamEnd"]);s!=null&&c(t,["audioStreamEnd"],s);const i=a(e,["video"]);i!=null&&c(t,["video"],mm(i));const l=a(e,["text"]);l!=null&&c(t,["text"],l);const d=a(e,["activityStart"]);d!=null&&c(t,["activityStart"],d);const f=a(e,["activityEnd"]);return f!=null&&c(t,["activityEnd"],f),t}function Wy(e){const t={},n=a(e,["setupComplete"]);n!=null&&c(t,["setupComplete"],n);const r=a(e,["serverContent"]);r!=null&&c(t,["serverContent"],r);const s=a(e,["toolCall"]);s!=null&&c(t,["toolCall"],s);const i=a(e,["toolCallCancellation"]);i!=null&&c(t,["toolCallCancellation"],i);const l=a(e,["usageMetadata"]);l!=null&&c(t,["usageMetadata"],Xy(l));const d=a(e,["goAway"]);d!=null&&c(t,["goAway"],d);const f=a(e,["sessionResumptionUpdate"]);f!=null&&c(t,["sessionResumptionUpdate"],f);const u=a(e,["voiceActivityDetectionSignal"]);return u!=null&&c(t,["voiceActivityDetectionSignal"],u),t}function Jy(e){const t={},n=a(e,["mediaResolution"]);n!=null&&c(t,["mediaResolution"],n);const r=a(e,["codeExecutionResult"]);r!=null&&c(t,["codeExecutionResult"],r);const s=a(e,["executableCode"]);s!=null&&c(t,["executableCode"],s);const i=a(e,["fileData"]);i!=null&&c(t,["fileData"],Py(i));const l=a(e,["functionCall"]);l!=null&&c(t,["functionCall"],jy(l));const d=a(e,["functionResponse"]);d!=null&&c(t,["functionResponse"],d);const f=a(e,["inlineData"]);f!=null&&c(t,["inlineData"],Xs(f));const u=a(e,["text"]);u!=null&&c(t,["text"],u);const p=a(e,["thought"]);p!=null&&c(t,["thought"],p);const m=a(e,["thoughtSignature"]);m!=null&&c(t,["thoughtSignature"],m);const h=a(e,["videoMetadata"]);return h!=null&&c(t,["videoMetadata"],h),t}function Ky(e){const t={},n=a(e,["handle"]);if(n!=null&&c(t,["handle"],n),a(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function Yy(e){const t={};if(a(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=a(e,["computerUse"]);n!=null&&c(t,["computerUse"],n);const r=a(e,["fileSearch"]);r!=null&&c(t,["fileSearch"],r);const s=a(e,["codeExecution"]);if(s!=null&&c(t,["codeExecution"],s),a(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=a(e,["functionDeclarations"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(m=>m)),c(t,["functionDeclarations"],p)}const l=a(e,["googleMaps"]);l!=null&&c(t,["googleMaps"],Fy(l));const d=a(e,["googleSearch"]);d!=null&&c(t,["googleSearch"],Uy(d));const f=a(e,["googleSearchRetrieval"]);f!=null&&c(t,["googleSearchRetrieval"],f);const u=a(e,["urlContext"]);return u!=null&&c(t,["urlContext"],u),t}function Qy(e){const t={},n=a(e,["retrieval"]);n!=null&&c(t,["retrieval"],n);const r=a(e,["computerUse"]);if(r!=null&&c(t,["computerUse"],r),a(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=a(e,["codeExecution"]);s!=null&&c(t,["codeExecution"],s);const i=a(e,["enterpriseWebSearch"]);i!=null&&c(t,["enterpriseWebSearch"],i);const l=a(e,["functionDeclarations"]);if(l!=null){let m=l;Array.isArray(m)&&(m=m.map(h=>Ly(h))),c(t,["functionDeclarations"],m)}const d=a(e,["googleMaps"]);d!=null&&c(t,["googleMaps"],d);const f=a(e,["googleSearch"]);f!=null&&c(t,["googleSearch"],f);const u=a(e,["googleSearchRetrieval"]);u!=null&&c(t,["googleSearchRetrieval"],u);const p=a(e,["urlContext"]);return p!=null&&c(t,["urlContext"],p),t}function Xy(e){const t={},n=a(e,["promptTokenCount"]);n!=null&&c(t,["promptTokenCount"],n);const r=a(e,["cachedContentTokenCount"]);r!=null&&c(t,["cachedContentTokenCount"],r);const s=a(e,["candidatesTokenCount"]);s!=null&&c(t,["responseTokenCount"],s);const i=a(e,["toolUsePromptTokenCount"]);i!=null&&c(t,["toolUsePromptTokenCount"],i);const l=a(e,["thoughtsTokenCount"]);l!=null&&c(t,["thoughtsTokenCount"],l);const d=a(e,["totalTokenCount"]);d!=null&&c(t,["totalTokenCount"],d);const f=a(e,["promptTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(w=>w)),c(t,["promptTokensDetails"],g)}const u=a(e,["cacheTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(w=>w)),c(t,["cacheTokensDetails"],g)}const p=a(e,["candidatesTokensDetails"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(w=>w)),c(t,["responseTokensDetails"],g)}const m=a(e,["toolUsePromptTokensDetails"]);if(m!=null){let g=m;Array.isArray(g)&&(g=g.map(w=>w)),c(t,["toolUsePromptTokensDetails"],g)}const h=a(e,["trafficType"]);return h!=null&&c(t,["trafficType"],h),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zy(e){const t={},n=a(e,["data"]);if(n!=null&&c(t,["data"],n),a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(e,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}function e1(e){const t={},n=a(e,["content"]);n!=null&&c(t,["content"],n);const r=a(e,["citationMetadata"]);r!=null&&c(t,["citationMetadata"],t1(r));const s=a(e,["tokenCount"]);s!=null&&c(t,["tokenCount"],s);const i=a(e,["finishReason"]);i!=null&&c(t,["finishReason"],i);const l=a(e,["avgLogprobs"]);l!=null&&c(t,["avgLogprobs"],l);const d=a(e,["groundingMetadata"]);d!=null&&c(t,["groundingMetadata"],d);const f=a(e,["index"]);f!=null&&c(t,["index"],f);const u=a(e,["logprobsResult"]);u!=null&&c(t,["logprobsResult"],u);const p=a(e,["safetyRatings"]);if(p!=null){let h=p;Array.isArray(h)&&(h=h.map(g=>g)),c(t,["safetyRatings"],h)}const m=a(e,["urlContextMetadata"]);return m!=null&&c(t,["urlContextMetadata"],m),t}function t1(e){const t={},n=a(e,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),c(t,["citations"],r)}return t}function n1(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["_url","model"],ne(e,r));const s=a(t,["contents"]);if(s!=null){let i=at(s);Array.isArray(i)&&(i=i.map(l=>l)),c(n,["contents"],i)}return n}function r1(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["tokensInfo"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>i)),c(t,["tokensInfo"],s)}return t}function s1(e){const t={},n=a(e,["values"]);n!=null&&c(t,["values"],n);const r=a(e,["statistics"]);return r!=null&&c(t,["statistics"],o1(r)),t}function o1(e){const t={},n=a(e,["truncated"]);n!=null&&c(t,["truncated"],n);const r=a(e,["token_count"]);return r!=null&&c(t,["tokenCount"],r),t}function Qo(e){const t={},n=a(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>mw(i))),c(t,["parts"],s)}const r=a(e,["role"]);return r!=null&&c(t,["role"],r),t}function i1(e){const t={},n=a(e,["controlType"]);n!=null&&c(t,["controlType"],n);const r=a(e,["enableControlImageComputation"]);return r!=null&&c(t,["computeControl"],r),t}function l1(e){const t={};if(a(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(a(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(a(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function a1(e,t){const n={},r=a(e,["systemInstruction"]);t!==void 0&&r!=null&&c(t,["systemInstruction"],Le(r));const s=a(e,["tools"]);if(t!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>Im(d))),c(t,["tools"],l)}const i=a(e,["generationConfig"]);return t!==void 0&&i!=null&&c(t,["generationConfig"],Z1(i)),n}function c1(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["_url","model"],ne(e,r));const s=a(t,["contents"]);if(s!=null){let l=at(s);Array.isArray(l)&&(l=l.map(d=>Qo(d))),c(n,["contents"],l)}const i=a(t,["config"]);return i!=null&&l1(i),n}function d1(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["_url","model"],ne(e,r));const s=a(t,["contents"]);if(s!=null){let l=at(s);Array.isArray(l)&&(l=l.map(d=>d)),c(n,["contents"],l)}const i=a(t,["config"]);return i!=null&&a1(i,n),n}function u1(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["totalTokens"]);r!=null&&c(t,["totalTokens"],r);const s=a(e,["cachedContentTokenCount"]);return s!=null&&c(t,["cachedContentTokenCount"],s),t}function f1(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["totalTokens"]);return r!=null&&c(t,["totalTokens"],r),t}function p1(e,t){const n={},r=a(t,["model"]);return r!=null&&c(n,["_url","name"],ne(e,r)),n}function m1(e,t){const n={},r=a(t,["model"]);return r!=null&&c(n,["_url","name"],ne(e,r)),n}function h1(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&c(t,["sdkHttpResponse"],n),t}function g1(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&c(t,["sdkHttpResponse"],n),t}function x1(e,t){const n={},r=a(e,["outputGcsUri"]);t!==void 0&&r!=null&&c(t,["parameters","storageUri"],r);const s=a(e,["negativePrompt"]);t!==void 0&&s!=null&&c(t,["parameters","negativePrompt"],s);const i=a(e,["numberOfImages"]);t!==void 0&&i!=null&&c(t,["parameters","sampleCount"],i);const l=a(e,["aspectRatio"]);t!==void 0&&l!=null&&c(t,["parameters","aspectRatio"],l);const d=a(e,["guidanceScale"]);t!==void 0&&d!=null&&c(t,["parameters","guidanceScale"],d);const f=a(e,["seed"]);t!==void 0&&f!=null&&c(t,["parameters","seed"],f);const u=a(e,["safetyFilterLevel"]);t!==void 0&&u!=null&&c(t,["parameters","safetySetting"],u);const p=a(e,["personGeneration"]);t!==void 0&&p!=null&&c(t,["parameters","personGeneration"],p);const m=a(e,["includeSafetyAttributes"]);t!==void 0&&m!=null&&c(t,["parameters","includeSafetyAttributes"],m);const h=a(e,["includeRaiReason"]);t!==void 0&&h!=null&&c(t,["parameters","includeRaiReason"],h);const g=a(e,["language"]);t!==void 0&&g!=null&&c(t,["parameters","language"],g);const w=a(e,["outputMimeType"]);t!==void 0&&w!=null&&c(t,["parameters","outputOptions","mimeType"],w);const N=a(e,["outputCompressionQuality"]);t!==void 0&&N!=null&&c(t,["parameters","outputOptions","compressionQuality"],N);const S=a(e,["addWatermark"]);t!==void 0&&S!=null&&c(t,["parameters","addWatermark"],S);const x=a(e,["labels"]);t!==void 0&&x!=null&&c(t,["labels"],x);const v=a(e,["editMode"]);t!==void 0&&v!=null&&c(t,["parameters","editMode"],v);const y=a(e,["baseSteps"]);return t!==void 0&&y!=null&&c(t,["parameters","editConfig","baseSteps"],y),n}function v1(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["_url","model"],ne(e,r));const s=a(t,["prompt"]);s!=null&&c(n,["instances[0]","prompt"],s);const i=a(t,["referenceImages"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(f=>ww(f))),c(n,["instances[0]","referenceImages"],d)}const l=a(t,["config"]);return l!=null&&x1(l,n),n}function y1(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>Xo(i))),c(t,["generatedImages"],s)}return t}function w1(e,t){const n={},r=a(e,["taskType"]);t!==void 0&&r!=null&&c(t,["requests[]","taskType"],r);const s=a(e,["title"]);t!==void 0&&s!=null&&c(t,["requests[]","title"],s);const i=a(e,["outputDimensionality"]);if(t!==void 0&&i!=null&&c(t,["requests[]","outputDimensionality"],i),a(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function N1(e,t){const n={},r=a(e,["taskType"]);t!==void 0&&r!=null&&c(t,["instances[]","task_type"],r);const s=a(e,["title"]);t!==void 0&&s!=null&&c(t,["instances[]","title"],s);const i=a(e,["outputDimensionality"]);t!==void 0&&i!=null&&c(t,["parameters","outputDimensionality"],i);const l=a(e,["mimeType"]);t!==void 0&&l!=null&&c(t,["instances[]","mimeType"],l);const d=a(e,["autoTruncate"]);return t!==void 0&&d!=null&&c(t,["parameters","autoTruncate"],d),n}function S1(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["_url","model"],ne(e,r));const s=a(t,["contents"]);if(s!=null){let d=Ha(e,s);Array.isArray(d)&&(d=d.map(f=>f)),c(n,["requests[]","content"],d)}const i=a(t,["config"]);i!=null&&w1(i,n);const l=a(t,["model"]);return l!==void 0&&c(n,["requests[]","model"],ne(e,l)),n}function b1(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["_url","model"],ne(e,r));const s=a(t,["contents"]);if(s!=null){let l=Ha(e,s);Array.isArray(l)&&(l=l.map(d=>d)),c(n,["instances[]","content"],l)}const i=a(t,["config"]);return i!=null&&N1(i,n),n}function C1(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["embeddings"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>l)),c(t,["embeddings"],i)}const s=a(e,["metadata"]);return s!=null&&c(t,["metadata"],s),t}function E1(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["predictions[]","embeddings"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>s1(l))),c(t,["embeddings"],i)}const s=a(e,["metadata"]);return s!=null&&c(t,["metadata"],s),t}function _1(e){const t={},n=a(e,["endpoint"]);n!=null&&c(t,["name"],n);const r=a(e,["deployedModelId"]);return r!=null&&c(t,["deployedModelId"],r),t}function k1(e){const t={};if(a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(e,["fileUri"]);n!=null&&c(t,["fileUri"],n);const r=a(e,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}function T1(e){const t={},n=a(e,["id"]);n!=null&&c(t,["id"],n);const r=a(e,["args"]);r!=null&&c(t,["args"],r);const s=a(e,["name"]);if(s!=null&&c(t,["name"],s),a(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function I1(e){const t={},n=a(e,["allowedFunctionNames"]);n!=null&&c(t,["allowedFunctionNames"],n);const r=a(e,["mode"]);if(r!=null&&c(t,["mode"],r),a(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function A1(e){const t={},n=a(e,["description"]);n!=null&&c(t,["description"],n);const r=a(e,["name"]);r!=null&&c(t,["name"],r);const s=a(e,["parameters"]);s!=null&&c(t,["parameters"],s);const i=a(e,["parametersJsonSchema"]);i!=null&&c(t,["parametersJsonSchema"],i);const l=a(e,["response"]);l!=null&&c(t,["response"],l);const d=a(e,["responseJsonSchema"]);if(d!=null&&c(t,["responseJsonSchema"],d),a(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function R1(e,t,n){const r={},s=a(t,["systemInstruction"]);n!==void 0&&s!=null&&c(n,["systemInstruction"],Qo(Le(s)));const i=a(t,["temperature"]);i!=null&&c(r,["temperature"],i);const l=a(t,["topP"]);l!=null&&c(r,["topP"],l);const d=a(t,["topK"]);d!=null&&c(r,["topK"],d);const f=a(t,["candidateCount"]);f!=null&&c(r,["candidateCount"],f);const u=a(t,["maxOutputTokens"]);u!=null&&c(r,["maxOutputTokens"],u);const p=a(t,["stopSequences"]);p!=null&&c(r,["stopSequences"],p);const m=a(t,["responseLogprobs"]);m!=null&&c(r,["responseLogprobs"],m);const h=a(t,["logprobs"]);h!=null&&c(r,["logprobs"],h);const g=a(t,["presencePenalty"]);g!=null&&c(r,["presencePenalty"],g);const w=a(t,["frequencyPenalty"]);w!=null&&c(r,["frequencyPenalty"],w);const N=a(t,["seed"]);N!=null&&c(r,["seed"],N);const S=a(t,["responseMimeType"]);S!=null&&c(r,["responseMimeType"],S);const x=a(t,["responseSchema"]);x!=null&&c(r,["responseSchema"],Ba(x));const v=a(t,["responseJsonSchema"]);if(v!=null&&c(r,["responseJsonSchema"],v),a(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const y=a(t,["safetySettings"]);if(n!==void 0&&y!=null){let P=y;Array.isArray(P)&&(P=P.map(A=>Nw(A))),c(n,["safetySettings"],P)}const C=a(t,["tools"]);if(n!==void 0&&C!=null){let P=hr(C);Array.isArray(P)&&(P=P.map(A=>Tw(mr(A)))),c(n,["tools"],P)}const b=a(t,["toolConfig"]);if(n!==void 0&&b!=null&&c(n,["toolConfig"],kw(b)),a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const E=a(t,["cachedContent"]);n!==void 0&&E!=null&&c(n,["cachedContent"],Vt(e,E));const k=a(t,["responseModalities"]);k!=null&&c(r,["responseModalities"],k);const T=a(t,["mediaResolution"]);T!=null&&c(r,["mediaResolution"],T);const I=a(t,["speechConfig"]);if(I!=null&&c(r,["speechConfig"],Ga(I)),a(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=a(t,["thinkingConfig"]);M!=null&&c(r,["thinkingConfig"],M);const L=a(t,["imageConfig"]);L!=null&&c(r,["imageConfig"],sw(L));const R=a(t,["enableEnhancedCivicAnswers"]);return R!=null&&c(r,["enableEnhancedCivicAnswers"],R),r}function M1(e,t,n){const r={},s=a(t,["systemInstruction"]);n!==void 0&&s!=null&&c(n,["systemInstruction"],Le(s));const i=a(t,["temperature"]);i!=null&&c(r,["temperature"],i);const l=a(t,["topP"]);l!=null&&c(r,["topP"],l);const d=a(t,["topK"]);d!=null&&c(r,["topK"],d);const f=a(t,["candidateCount"]);f!=null&&c(r,["candidateCount"],f);const u=a(t,["maxOutputTokens"]);u!=null&&c(r,["maxOutputTokens"],u);const p=a(t,["stopSequences"]);p!=null&&c(r,["stopSequences"],p);const m=a(t,["responseLogprobs"]);m!=null&&c(r,["responseLogprobs"],m);const h=a(t,["logprobs"]);h!=null&&c(r,["logprobs"],h);const g=a(t,["presencePenalty"]);g!=null&&c(r,["presencePenalty"],g);const w=a(t,["frequencyPenalty"]);w!=null&&c(r,["frequencyPenalty"],w);const N=a(t,["seed"]);N!=null&&c(r,["seed"],N);const S=a(t,["responseMimeType"]);S!=null&&c(r,["responseMimeType"],S);const x=a(t,["responseSchema"]);x!=null&&c(r,["responseSchema"],Ba(x));const v=a(t,["responseJsonSchema"]);v!=null&&c(r,["responseJsonSchema"],v);const y=a(t,["routingConfig"]);y!=null&&c(r,["routingConfig"],y);const C=a(t,["modelSelectionConfig"]);C!=null&&c(r,["modelConfig"],C);const b=a(t,["safetySettings"]);if(n!==void 0&&b!=null){let z=b;Array.isArray(z)&&(z=z.map(J=>J)),c(n,["safetySettings"],z)}const E=a(t,["tools"]);if(n!==void 0&&E!=null){let z=hr(E);Array.isArray(z)&&(z=z.map(J=>Im(mr(J)))),c(n,["tools"],z)}const k=a(t,["toolConfig"]);n!==void 0&&k!=null&&c(n,["toolConfig"],k);const T=a(t,["labels"]);n!==void 0&&T!=null&&c(n,["labels"],T);const I=a(t,["cachedContent"]);n!==void 0&&I!=null&&c(n,["cachedContent"],Vt(e,I));const M=a(t,["responseModalities"]);M!=null&&c(r,["responseModalities"],M);const L=a(t,["mediaResolution"]);L!=null&&c(r,["mediaResolution"],L);const R=a(t,["speechConfig"]);R!=null&&c(r,["speechConfig"],Ga(R));const P=a(t,["audioTimestamp"]);P!=null&&c(r,["audioTimestamp"],P);const A=a(t,["thinkingConfig"]);A!=null&&c(r,["thinkingConfig"],A);const F=a(t,["imageConfig"]);if(F!=null&&c(r,["imageConfig"],ow(F)),a(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function Eu(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["_url","model"],ne(e,r));const s=a(t,["contents"]);if(s!=null){let l=at(s);Array.isArray(l)&&(l=l.map(d=>Qo(d))),c(n,["contents"],l)}const i=a(t,["config"]);return i!=null&&c(n,["generationConfig"],R1(e,i,n)),n}function _u(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["_url","model"],ne(e,r));const s=a(t,["contents"]);if(s!=null){let l=at(s);Array.isArray(l)&&(l=l.map(d=>d)),c(n,["contents"],l)}const i=a(t,["config"]);return i!=null&&c(n,["generationConfig"],M1(e,i,n)),n}function ku(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(u=>e1(u))),c(t,["candidates"],f)}const s=a(e,["modelVersion"]);s!=null&&c(t,["modelVersion"],s);const i=a(e,["promptFeedback"]);i!=null&&c(t,["promptFeedback"],i);const l=a(e,["responseId"]);l!=null&&c(t,["responseId"],l);const d=a(e,["usageMetadata"]);return d!=null&&c(t,["usageMetadata"],d),t}function Tu(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(p=>p)),c(t,["candidates"],u)}const s=a(e,["createTime"]);s!=null&&c(t,["createTime"],s);const i=a(e,["modelVersion"]);i!=null&&c(t,["modelVersion"],i);const l=a(e,["promptFeedback"]);l!=null&&c(t,["promptFeedback"],l);const d=a(e,["responseId"]);d!=null&&c(t,["responseId"],d);const f=a(e,["usageMetadata"]);return f!=null&&c(t,["usageMetadata"],f),t}function P1(e,t){const n={};if(a(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=a(e,["numberOfImages"]);t!==void 0&&r!=null&&c(t,["parameters","sampleCount"],r);const s=a(e,["aspectRatio"]);t!==void 0&&s!=null&&c(t,["parameters","aspectRatio"],s);const i=a(e,["guidanceScale"]);if(t!==void 0&&i!=null&&c(t,["parameters","guidanceScale"],i),a(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=a(e,["safetyFilterLevel"]);t!==void 0&&l!=null&&c(t,["parameters","safetySetting"],l);const d=a(e,["personGeneration"]);t!==void 0&&d!=null&&c(t,["parameters","personGeneration"],d);const f=a(e,["includeSafetyAttributes"]);t!==void 0&&f!=null&&c(t,["parameters","includeSafetyAttributes"],f);const u=a(e,["includeRaiReason"]);t!==void 0&&u!=null&&c(t,["parameters","includeRaiReason"],u);const p=a(e,["language"]);t!==void 0&&p!=null&&c(t,["parameters","language"],p);const m=a(e,["outputMimeType"]);t!==void 0&&m!=null&&c(t,["parameters","outputOptions","mimeType"],m);const h=a(e,["outputCompressionQuality"]);if(t!==void 0&&h!=null&&c(t,["parameters","outputOptions","compressionQuality"],h),a(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=a(e,["imageSize"]);if(t!==void 0&&g!=null&&c(t,["parameters","sampleImageSize"],g),a(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function j1(e,t){const n={},r=a(e,["outputGcsUri"]);t!==void 0&&r!=null&&c(t,["parameters","storageUri"],r);const s=a(e,["negativePrompt"]);t!==void 0&&s!=null&&c(t,["parameters","negativePrompt"],s);const i=a(e,["numberOfImages"]);t!==void 0&&i!=null&&c(t,["parameters","sampleCount"],i);const l=a(e,["aspectRatio"]);t!==void 0&&l!=null&&c(t,["parameters","aspectRatio"],l);const d=a(e,["guidanceScale"]);t!==void 0&&d!=null&&c(t,["parameters","guidanceScale"],d);const f=a(e,["seed"]);t!==void 0&&f!=null&&c(t,["parameters","seed"],f);const u=a(e,["safetyFilterLevel"]);t!==void 0&&u!=null&&c(t,["parameters","safetySetting"],u);const p=a(e,["personGeneration"]);t!==void 0&&p!=null&&c(t,["parameters","personGeneration"],p);const m=a(e,["includeSafetyAttributes"]);t!==void 0&&m!=null&&c(t,["parameters","includeSafetyAttributes"],m);const h=a(e,["includeRaiReason"]);t!==void 0&&h!=null&&c(t,["parameters","includeRaiReason"],h);const g=a(e,["language"]);t!==void 0&&g!=null&&c(t,["parameters","language"],g);const w=a(e,["outputMimeType"]);t!==void 0&&w!=null&&c(t,["parameters","outputOptions","mimeType"],w);const N=a(e,["outputCompressionQuality"]);t!==void 0&&N!=null&&c(t,["parameters","outputOptions","compressionQuality"],N);const S=a(e,["addWatermark"]);t!==void 0&&S!=null&&c(t,["parameters","addWatermark"],S);const x=a(e,["labels"]);t!==void 0&&x!=null&&c(t,["labels"],x);const v=a(e,["imageSize"]);t!==void 0&&v!=null&&c(t,["parameters","sampleImageSize"],v);const y=a(e,["enhancePrompt"]);return t!==void 0&&y!=null&&c(t,["parameters","enhancePrompt"],y),n}function L1(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["_url","model"],ne(e,r));const s=a(t,["prompt"]);s!=null&&c(n,["instances[0]","prompt"],s);const i=a(t,["config"]);return i!=null&&P1(i,n),n}function D1(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["_url","model"],ne(e,r));const s=a(t,["prompt"]);s!=null&&c(n,["instances[0]","prompt"],s);const i=a(t,["config"]);return i!=null&&j1(i,n),n}function F1(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>K1(l))),c(t,["generatedImages"],i)}const s=a(e,["positivePromptSafetyAttributes"]);return s!=null&&c(t,["positivePromptSafetyAttributes"],km(s)),t}function U1(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>Xo(l))),c(t,["generatedImages"],i)}const s=a(e,["positivePromptSafetyAttributes"]);return s!=null&&c(t,["positivePromptSafetyAttributes"],Tm(s)),t}function V1(e,t){const n={},r=a(e,["numberOfVideos"]);if(t!==void 0&&r!=null&&c(t,["parameters","sampleCount"],r),a(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=a(e,["durationSeconds"]);if(t!==void 0&&s!=null&&c(t,["parameters","durationSeconds"],s),a(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=a(e,["aspectRatio"]);t!==void 0&&i!=null&&c(t,["parameters","aspectRatio"],i);const l=a(e,["resolution"]);t!==void 0&&l!=null&&c(t,["parameters","resolution"],l);const d=a(e,["personGeneration"]);if(t!==void 0&&d!=null&&c(t,["parameters","personGeneration"],d),a(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=a(e,["negativePrompt"]);t!==void 0&&f!=null&&c(t,["parameters","negativePrompt"],f);const u=a(e,["enhancePrompt"]);if(t!==void 0&&u!=null&&c(t,["parameters","enhancePrompt"],u),a(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const p=a(e,["lastFrame"]);t!==void 0&&p!=null&&c(t,["instances[0]","lastFrame"],Zo(p));const m=a(e,["referenceImages"]);if(t!==void 0&&m!=null){let h=m;Array.isArray(h)&&(h=h.map(g=>Bw(g))),c(t,["instances[0]","referenceImages"],h)}if(a(e,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(a(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function H1(e,t){const n={},r=a(e,["numberOfVideos"]);t!==void 0&&r!=null&&c(t,["parameters","sampleCount"],r);const s=a(e,["outputGcsUri"]);t!==void 0&&s!=null&&c(t,["parameters","storageUri"],s);const i=a(e,["fps"]);t!==void 0&&i!=null&&c(t,["parameters","fps"],i);const l=a(e,["durationSeconds"]);t!==void 0&&l!=null&&c(t,["parameters","durationSeconds"],l);const d=a(e,["seed"]);t!==void 0&&d!=null&&c(t,["parameters","seed"],d);const f=a(e,["aspectRatio"]);t!==void 0&&f!=null&&c(t,["parameters","aspectRatio"],f);const u=a(e,["resolution"]);t!==void 0&&u!=null&&c(t,["parameters","resolution"],u);const p=a(e,["personGeneration"]);t!==void 0&&p!=null&&c(t,["parameters","personGeneration"],p);const m=a(e,["pubsubTopic"]);t!==void 0&&m!=null&&c(t,["parameters","pubsubTopic"],m);const h=a(e,["negativePrompt"]);t!==void 0&&h!=null&&c(t,["parameters","negativePrompt"],h);const g=a(e,["enhancePrompt"]);t!==void 0&&g!=null&&c(t,["parameters","enhancePrompt"],g);const w=a(e,["generateAudio"]);t!==void 0&&w!=null&&c(t,["parameters","generateAudio"],w);const N=a(e,["lastFrame"]);t!==void 0&&N!=null&&c(t,["instances[0]","lastFrame"],Nt(N));const S=a(e,["referenceImages"]);if(t!==void 0&&S!=null){let y=S;Array.isArray(y)&&(y=y.map(C=>Gw(C))),c(t,["instances[0]","referenceImages"],y)}const x=a(e,["mask"]);t!==void 0&&x!=null&&c(t,["instances[0]","mask"],Hw(x));const v=a(e,["compressionQuality"]);return t!==void 0&&v!=null&&c(t,["parameters","compressionQuality"],v),n}function B1(e){const t={},n=a(e,["name"]);n!=null&&c(t,["name"],n);const r=a(e,["metadata"]);r!=null&&c(t,["metadata"],r);const s=a(e,["done"]);s!=null&&c(t,["done"],s);const i=a(e,["error"]);i!=null&&c(t,["error"],i);const l=a(e,["response","generateVideoResponse"]);return l!=null&&c(t,["response"],q1(l)),t}function G1(e){const t={},n=a(e,["name"]);n!=null&&c(t,["name"],n);const r=a(e,["metadata"]);r!=null&&c(t,["metadata"],r);const s=a(e,["done"]);s!=null&&c(t,["done"],s);const i=a(e,["error"]);i!=null&&c(t,["error"],i);const l=a(e,["response"]);return l!=null&&c(t,["response"],$1(l)),t}function O1(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["_url","model"],ne(e,r));const s=a(t,["prompt"]);s!=null&&c(n,["instances[0]","prompt"],s);const i=a(t,["image"]);i!=null&&c(n,["instances[0]","image"],Zo(i));const l=a(t,["video"]);l!=null&&c(n,["instances[0]","video"],Am(l));const d=a(t,["source"]);d!=null&&W1(d,n);const f=a(t,["config"]);return f!=null&&V1(f,n),n}function z1(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["_url","model"],ne(e,r));const s=a(t,["prompt"]);s!=null&&c(n,["instances[0]","prompt"],s);const i=a(t,["image"]);i!=null&&c(n,["instances[0]","image"],Nt(i));const l=a(t,["video"]);l!=null&&c(n,["instances[0]","video"],Rm(l));const d=a(t,["source"]);d!=null&&J1(d,n);const f=a(t,["config"]);return f!=null&&H1(f,n),n}function q1(e){const t={},n=a(e,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>Q1(l))),c(t,["generatedVideos"],i)}const r=a(e,["raiMediaFilteredCount"]);r!=null&&c(t,["raiMediaFilteredCount"],r);const s=a(e,["raiMediaFilteredReasons"]);return s!=null&&c(t,["raiMediaFilteredReasons"],s),t}function $1(e){const t={},n=a(e,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>X1(l))),c(t,["generatedVideos"],i)}const r=a(e,["raiMediaFilteredCount"]);r!=null&&c(t,["raiMediaFilteredCount"],r);const s=a(e,["raiMediaFilteredReasons"]);return s!=null&&c(t,["raiMediaFilteredReasons"],s),t}function W1(e,t){const n={},r=a(e,["prompt"]);t!==void 0&&r!=null&&c(t,["instances[0]","prompt"],r);const s=a(e,["image"]);t!==void 0&&s!=null&&c(t,["instances[0]","image"],Zo(s));const i=a(e,["video"]);return t!==void 0&&i!=null&&c(t,["instances[0]","video"],Am(i)),n}function J1(e,t){const n={},r=a(e,["prompt"]);t!==void 0&&r!=null&&c(t,["instances[0]","prompt"],r);const s=a(e,["image"]);t!==void 0&&s!=null&&c(t,["instances[0]","image"],Nt(s));const i=a(e,["video"]);return t!==void 0&&i!=null&&c(t,["instances[0]","video"],Rm(i)),n}function K1(e){const t={},n=a(e,["_self"]);n!=null&&c(t,["image"],iw(n));const r=a(e,["raiFilteredReason"]);r!=null&&c(t,["raiFilteredReason"],r);const s=a(e,["_self"]);return s!=null&&c(t,["safetyAttributes"],km(s)),t}function Xo(e){const t={},n=a(e,["_self"]);n!=null&&c(t,["image"],_m(n));const r=a(e,["raiFilteredReason"]);r!=null&&c(t,["raiFilteredReason"],r);const s=a(e,["_self"]);s!=null&&c(t,["safetyAttributes"],Tm(s));const i=a(e,["prompt"]);return i!=null&&c(t,["enhancedPrompt"],i),t}function Y1(e){const t={},n=a(e,["_self"]);n!=null&&c(t,["mask"],_m(n));const r=a(e,["labels"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>i)),c(t,["labels"],s)}return t}function Q1(e){const t={},n=a(e,["video"]);return n!=null&&c(t,["video"],Uw(n)),t}function X1(e){const t={},n=a(e,["_self"]);return n!=null&&c(t,["video"],Vw(n)),t}function Z1(e){const t={},n=a(e,["modelSelectionConfig"]);n!=null&&c(t,["modelConfig"],n);const r=a(e,["responseJsonSchema"]);r!=null&&c(t,["responseJsonSchema"],r);const s=a(e,["audioTimestamp"]);s!=null&&c(t,["audioTimestamp"],s);const i=a(e,["candidateCount"]);i!=null&&c(t,["candidateCount"],i);const l=a(e,["enableAffectiveDialog"]);l!=null&&c(t,["enableAffectiveDialog"],l);const d=a(e,["frequencyPenalty"]);d!=null&&c(t,["frequencyPenalty"],d);const f=a(e,["logprobs"]);f!=null&&c(t,["logprobs"],f);const u=a(e,["maxOutputTokens"]);u!=null&&c(t,["maxOutputTokens"],u);const p=a(e,["mediaResolution"]);p!=null&&c(t,["mediaResolution"],p);const m=a(e,["presencePenalty"]);m!=null&&c(t,["presencePenalty"],m);const h=a(e,["responseLogprobs"]);h!=null&&c(t,["responseLogprobs"],h);const g=a(e,["responseMimeType"]);g!=null&&c(t,["responseMimeType"],g);const w=a(e,["responseModalities"]);w!=null&&c(t,["responseModalities"],w);const N=a(e,["responseSchema"]);N!=null&&c(t,["responseSchema"],N);const S=a(e,["routingConfig"]);S!=null&&c(t,["routingConfig"],S);const x=a(e,["seed"]);x!=null&&c(t,["seed"],x);const v=a(e,["speechConfig"]);v!=null&&c(t,["speechConfig"],v);const y=a(e,["stopSequences"]);y!=null&&c(t,["stopSequences"],y);const C=a(e,["temperature"]);C!=null&&c(t,["temperature"],C);const b=a(e,["thinkingConfig"]);b!=null&&c(t,["thinkingConfig"],b);const E=a(e,["topK"]);E!=null&&c(t,["topK"],E);const k=a(e,["topP"]);if(k!=null&&c(t,["topP"],k),a(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function ew(e,t){const n={},r=a(t,["model"]);return r!=null&&c(n,["_url","name"],ne(e,r)),n}function tw(e,t){const n={},r=a(t,["model"]);return r!=null&&c(n,["_url","name"],ne(e,r)),n}function nw(e){const t={};if(a(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(e,["enableWidget"]);return n!=null&&c(t,["enableWidget"],n),t}function rw(e){const t={};if(a(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(e,["timeRangeFilter"]);return n!=null&&c(t,["timeRangeFilter"],n),t}function sw(e){const t={},n=a(e,["aspectRatio"]);n!=null&&c(t,["aspectRatio"],n);const r=a(e,["imageSize"]);if(r!=null&&c(t,["imageSize"],r),a(e,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(a(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function ow(e){const t={},n=a(e,["aspectRatio"]);n!=null&&c(t,["aspectRatio"],n);const r=a(e,["imageSize"]);r!=null&&c(t,["imageSize"],r);const s=a(e,["personGeneration"]);s!=null&&c(t,["personGeneration"],s);const i=a(e,["outputMimeType"]);i!=null&&c(t,["imageOutputOptions","mimeType"],i);const l=a(e,["outputCompressionQuality"]);return l!=null&&c(t,["imageOutputOptions","compressionQuality"],l),t}function iw(e){const t={},n=a(e,["bytesBase64Encoded"]);n!=null&&c(t,["imageBytes"],cn(n));const r=a(e,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}function _m(e){const t={},n=a(e,["gcsUri"]);n!=null&&c(t,["gcsUri"],n);const r=a(e,["bytesBase64Encoded"]);r!=null&&c(t,["imageBytes"],cn(r));const s=a(e,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function Zo(e){const t={};if(a(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=a(e,["imageBytes"]);n!=null&&c(t,["bytesBase64Encoded"],cn(n));const r=a(e,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}function Nt(e){const t={},n=a(e,["gcsUri"]);n!=null&&c(t,["gcsUri"],n);const r=a(e,["imageBytes"]);r!=null&&c(t,["bytesBase64Encoded"],cn(r));const s=a(e,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function lw(e,t,n){const r={},s=a(t,["pageSize"]);n!==void 0&&s!=null&&c(n,["_query","pageSize"],s);const i=a(t,["pageToken"]);n!==void 0&&i!=null&&c(n,["_query","pageToken"],i);const l=a(t,["filter"]);n!==void 0&&l!=null&&c(n,["_query","filter"],l);const d=a(t,["queryBase"]);return n!==void 0&&d!=null&&c(n,["_url","models_url"],ym(e,d)),r}function aw(e,t,n){const r={},s=a(t,["pageSize"]);n!==void 0&&s!=null&&c(n,["_query","pageSize"],s);const i=a(t,["pageToken"]);n!==void 0&&i!=null&&c(n,["_query","pageToken"],i);const l=a(t,["filter"]);n!==void 0&&l!=null&&c(n,["_query","filter"],l);const d=a(t,["queryBase"]);return n!==void 0&&d!=null&&c(n,["_url","models_url"],ym(e,d)),r}function cw(e,t){const n={},r=a(t,["config"]);return r!=null&&lw(e,r,n),n}function dw(e,t){const n={},r=a(t,["config"]);return r!=null&&aw(e,r,n),n}function uw(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["nextPageToken"]);r!=null&&c(t,["nextPageToken"],r);const s=a(e,["_self"]);if(s!=null){let i=wm(s);Array.isArray(i)&&(i=i.map(l=>jl(l))),c(t,["models"],i)}return t}function fw(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["nextPageToken"]);r!=null&&c(t,["nextPageToken"],r);const s=a(e,["_self"]);if(s!=null){let i=wm(s);Array.isArray(i)&&(i=i.map(l=>Ll(l))),c(t,["models"],i)}return t}function pw(e){const t={},n=a(e,["maskMode"]);n!=null&&c(t,["maskMode"],n);const r=a(e,["segmentationClasses"]);r!=null&&c(t,["maskClasses"],r);const s=a(e,["maskDilation"]);return s!=null&&c(t,["dilation"],s),t}function jl(e){const t={},n=a(e,["name"]);n!=null&&c(t,["name"],n);const r=a(e,["displayName"]);r!=null&&c(t,["displayName"],r);const s=a(e,["description"]);s!=null&&c(t,["description"],s);const i=a(e,["version"]);i!=null&&c(t,["version"],i);const l=a(e,["_self"]);l!=null&&c(t,["tunedModelInfo"],Iw(l));const d=a(e,["inputTokenLimit"]);d!=null&&c(t,["inputTokenLimit"],d);const f=a(e,["outputTokenLimit"]);f!=null&&c(t,["outputTokenLimit"],f);const u=a(e,["supportedGenerationMethods"]);u!=null&&c(t,["supportedActions"],u);const p=a(e,["temperature"]);p!=null&&c(t,["temperature"],p);const m=a(e,["maxTemperature"]);m!=null&&c(t,["maxTemperature"],m);const h=a(e,["topP"]);h!=null&&c(t,["topP"],h);const g=a(e,["topK"]);g!=null&&c(t,["topK"],g);const w=a(e,["thinking"]);return w!=null&&c(t,["thinking"],w),t}function Ll(e){const t={},n=a(e,["name"]);n!=null&&c(t,["name"],n);const r=a(e,["displayName"]);r!=null&&c(t,["displayName"],r);const s=a(e,["description"]);s!=null&&c(t,["description"],s);const i=a(e,["versionId"]);i!=null&&c(t,["version"],i);const l=a(e,["deployedModels"]);if(l!=null){let m=l;Array.isArray(m)&&(m=m.map(h=>_1(h))),c(t,["endpoints"],m)}const d=a(e,["labels"]);d!=null&&c(t,["labels"],d);const f=a(e,["_self"]);f!=null&&c(t,["tunedModelInfo"],Aw(f));const u=a(e,["defaultCheckpointId"]);u!=null&&c(t,["defaultCheckpointId"],u);const p=a(e,["checkpoints"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(h=>h)),c(t,["checkpoints"],m)}return t}function mw(e){const t={},n=a(e,["mediaResolution"]);n!=null&&c(t,["mediaResolution"],n);const r=a(e,["codeExecutionResult"]);r!=null&&c(t,["codeExecutionResult"],r);const s=a(e,["executableCode"]);s!=null&&c(t,["executableCode"],s);const i=a(e,["fileData"]);i!=null&&c(t,["fileData"],k1(i));const l=a(e,["functionCall"]);l!=null&&c(t,["functionCall"],T1(l));const d=a(e,["functionResponse"]);d!=null&&c(t,["functionResponse"],d);const f=a(e,["inlineData"]);f!=null&&c(t,["inlineData"],Zy(f));const u=a(e,["text"]);u!=null&&c(t,["text"],u);const p=a(e,["thought"]);p!=null&&c(t,["thought"],p);const m=a(e,["thoughtSignature"]);m!=null&&c(t,["thoughtSignature"],m);const h=a(e,["videoMetadata"]);return h!=null&&c(t,["videoMetadata"],h),t}function hw(e){const t={},n=a(e,["productImage"]);return n!=null&&c(t,["image"],Nt(n)),t}function gw(e,t){const n={},r=a(e,["numberOfImages"]);t!==void 0&&r!=null&&c(t,["parameters","sampleCount"],r);const s=a(e,["baseSteps"]);t!==void 0&&s!=null&&c(t,["parameters","baseSteps"],s);const i=a(e,["outputGcsUri"]);t!==void 0&&i!=null&&c(t,["parameters","storageUri"],i);const l=a(e,["seed"]);t!==void 0&&l!=null&&c(t,["parameters","seed"],l);const d=a(e,["safetyFilterLevel"]);t!==void 0&&d!=null&&c(t,["parameters","safetySetting"],d);const f=a(e,["personGeneration"]);t!==void 0&&f!=null&&c(t,["parameters","personGeneration"],f);const u=a(e,["addWatermark"]);t!==void 0&&u!=null&&c(t,["parameters","addWatermark"],u);const p=a(e,["outputMimeType"]);t!==void 0&&p!=null&&c(t,["parameters","outputOptions","mimeType"],p);const m=a(e,["outputCompressionQuality"]);t!==void 0&&m!=null&&c(t,["parameters","outputOptions","compressionQuality"],m);const h=a(e,["enhancePrompt"]);t!==void 0&&h!=null&&c(t,["parameters","enhancePrompt"],h);const g=a(e,["labels"]);return t!==void 0&&g!=null&&c(t,["labels"],g),n}function xw(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["_url","model"],ne(e,r));const s=a(t,["source"]);s!=null&&yw(s,n);const i=a(t,["config"]);return i!=null&&gw(i,n),n}function vw(e){const t={},n=a(e,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Xo(s))),c(t,["generatedImages"],r)}return t}function yw(e,t){const n={},r=a(e,["prompt"]);t!==void 0&&r!=null&&c(t,["instances[0]","prompt"],r);const s=a(e,["personImage"]);t!==void 0&&s!=null&&c(t,["instances[0]","personImage","image"],Nt(s));const i=a(e,["productImages"]);if(t!==void 0&&i!=null){let l=i;Array.isArray(l)&&(l=l.map(d=>hw(d))),c(t,["instances[0]","productImages"],l)}return n}function ww(e){const t={},n=a(e,["referenceImage"]);n!=null&&c(t,["referenceImage"],Nt(n));const r=a(e,["referenceId"]);r!=null&&c(t,["referenceId"],r);const s=a(e,["referenceType"]);s!=null&&c(t,["referenceType"],s);const i=a(e,["maskImageConfig"]);i!=null&&c(t,["maskImageConfig"],pw(i));const l=a(e,["controlImageConfig"]);l!=null&&c(t,["controlImageConfig"],i1(l));const d=a(e,["styleImageConfig"]);d!=null&&c(t,["styleImageConfig"],d);const f=a(e,["subjectImageConfig"]);return f!=null&&c(t,["subjectImageConfig"],f),t}function km(e){const t={},n=a(e,["safetyAttributes","categories"]);n!=null&&c(t,["categories"],n);const r=a(e,["safetyAttributes","scores"]);r!=null&&c(t,["scores"],r);const s=a(e,["contentType"]);return s!=null&&c(t,["contentType"],s),t}function Tm(e){const t={},n=a(e,["safetyAttributes","categories"]);n!=null&&c(t,["categories"],n);const r=a(e,["safetyAttributes","scores"]);r!=null&&c(t,["scores"],r);const s=a(e,["contentType"]);return s!=null&&c(t,["contentType"],s),t}function Nw(e){const t={},n=a(e,["category"]);if(n!=null&&c(t,["category"],n),a(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=a(e,["threshold"]);return r!=null&&c(t,["threshold"],r),t}function Sw(e){const t={},n=a(e,["image"]);return n!=null&&c(t,["image"],Nt(n)),t}function bw(e,t){const n={},r=a(e,["mode"]);t!==void 0&&r!=null&&c(t,["parameters","mode"],r);const s=a(e,["maxPredictions"]);t!==void 0&&s!=null&&c(t,["parameters","maxPredictions"],s);const i=a(e,["confidenceThreshold"]);t!==void 0&&i!=null&&c(t,["parameters","confidenceThreshold"],i);const l=a(e,["maskDilation"]);t!==void 0&&l!=null&&c(t,["parameters","maskDilation"],l);const d=a(e,["binaryColorThreshold"]);t!==void 0&&d!=null&&c(t,["parameters","binaryColorThreshold"],d);const f=a(e,["labels"]);return t!==void 0&&f!=null&&c(t,["labels"],f),n}function Cw(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["_url","model"],ne(e,r));const s=a(t,["source"]);s!=null&&_w(s,n);const i=a(t,["config"]);return i!=null&&bw(i,n),n}function Ew(e){const t={},n=a(e,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Y1(s))),c(t,["generatedMasks"],r)}return t}function _w(e,t){const n={},r=a(e,["prompt"]);t!==void 0&&r!=null&&c(t,["instances[0]","prompt"],r);const s=a(e,["image"]);t!==void 0&&s!=null&&c(t,["instances[0]","image"],Nt(s));const i=a(e,["scribbleImage"]);return t!==void 0&&i!=null&&c(t,["instances[0]","scribble"],Sw(i)),n}function kw(e){const t={},n=a(e,["retrievalConfig"]);n!=null&&c(t,["retrievalConfig"],n);const r=a(e,["functionCallingConfig"]);return r!=null&&c(t,["functionCallingConfig"],I1(r)),t}function Tw(e){const t={};if(a(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=a(e,["computerUse"]);n!=null&&c(t,["computerUse"],n);const r=a(e,["fileSearch"]);r!=null&&c(t,["fileSearch"],r);const s=a(e,["codeExecution"]);if(s!=null&&c(t,["codeExecution"],s),a(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=a(e,["functionDeclarations"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(m=>m)),c(t,["functionDeclarations"],p)}const l=a(e,["googleMaps"]);l!=null&&c(t,["googleMaps"],nw(l));const d=a(e,["googleSearch"]);d!=null&&c(t,["googleSearch"],rw(d));const f=a(e,["googleSearchRetrieval"]);f!=null&&c(t,["googleSearchRetrieval"],f);const u=a(e,["urlContext"]);return u!=null&&c(t,["urlContext"],u),t}function Im(e){const t={},n=a(e,["retrieval"]);n!=null&&c(t,["retrieval"],n);const r=a(e,["computerUse"]);if(r!=null&&c(t,["computerUse"],r),a(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=a(e,["codeExecution"]);s!=null&&c(t,["codeExecution"],s);const i=a(e,["enterpriseWebSearch"]);i!=null&&c(t,["enterpriseWebSearch"],i);const l=a(e,["functionDeclarations"]);if(l!=null){let m=l;Array.isArray(m)&&(m=m.map(h=>A1(h))),c(t,["functionDeclarations"],m)}const d=a(e,["googleMaps"]);d!=null&&c(t,["googleMaps"],d);const f=a(e,["googleSearch"]);f!=null&&c(t,["googleSearch"],f);const u=a(e,["googleSearchRetrieval"]);u!=null&&c(t,["googleSearchRetrieval"],u);const p=a(e,["urlContext"]);return p!=null&&c(t,["urlContext"],p),t}function Iw(e){const t={},n=a(e,["baseModel"]);n!=null&&c(t,["baseModel"],n);const r=a(e,["createTime"]);r!=null&&c(t,["createTime"],r);const s=a(e,["updateTime"]);return s!=null&&c(t,["updateTime"],s),t}function Aw(e){const t={},n=a(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&c(t,["baseModel"],n);const r=a(e,["createTime"]);r!=null&&c(t,["createTime"],r);const s=a(e,["updateTime"]);return s!=null&&c(t,["updateTime"],s),t}function Rw(e,t){const n={},r=a(e,["displayName"]);t!==void 0&&r!=null&&c(t,["displayName"],r);const s=a(e,["description"]);t!==void 0&&s!=null&&c(t,["description"],s);const i=a(e,["defaultCheckpointId"]);return t!==void 0&&i!=null&&c(t,["defaultCheckpointId"],i),n}function Mw(e,t){const n={},r=a(e,["displayName"]);t!==void 0&&r!=null&&c(t,["displayName"],r);const s=a(e,["description"]);t!==void 0&&s!=null&&c(t,["description"],s);const i=a(e,["defaultCheckpointId"]);return t!==void 0&&i!=null&&c(t,["defaultCheckpointId"],i),n}function Pw(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["_url","name"],ne(e,r));const s=a(t,["config"]);return s!=null&&Rw(s,n),n}function jw(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["_url","model"],ne(e,r));const s=a(t,["config"]);return s!=null&&Mw(s,n),n}function Lw(e,t){const n={},r=a(e,["outputGcsUri"]);t!==void 0&&r!=null&&c(t,["parameters","storageUri"],r);const s=a(e,["safetyFilterLevel"]);t!==void 0&&s!=null&&c(t,["parameters","safetySetting"],s);const i=a(e,["personGeneration"]);t!==void 0&&i!=null&&c(t,["parameters","personGeneration"],i);const l=a(e,["includeRaiReason"]);t!==void 0&&l!=null&&c(t,["parameters","includeRaiReason"],l);const d=a(e,["outputMimeType"]);t!==void 0&&d!=null&&c(t,["parameters","outputOptions","mimeType"],d);const f=a(e,["outputCompressionQuality"]);t!==void 0&&f!=null&&c(t,["parameters","outputOptions","compressionQuality"],f);const u=a(e,["enhanceInputImage"]);t!==void 0&&u!=null&&c(t,["parameters","upscaleConfig","enhanceInputImage"],u);const p=a(e,["imagePreservationFactor"]);t!==void 0&&p!=null&&c(t,["parameters","upscaleConfig","imagePreservationFactor"],p);const m=a(e,["labels"]);t!==void 0&&m!=null&&c(t,["labels"],m);const h=a(e,["numberOfImages"]);t!==void 0&&h!=null&&c(t,["parameters","sampleCount"],h);const g=a(e,["mode"]);return t!==void 0&&g!=null&&c(t,["parameters","mode"],g),n}function Dw(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["_url","model"],ne(e,r));const s=a(t,["image"]);s!=null&&c(n,["instances[0]","image"],Nt(s));const i=a(t,["upscaleFactor"]);i!=null&&c(n,["parameters","upscaleConfig","upscaleFactor"],i);const l=a(t,["config"]);return l!=null&&Lw(l,n),n}function Fw(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>Xo(i))),c(t,["generatedImages"],s)}return t}function Uw(e){const t={},n=a(e,["uri"]);n!=null&&c(t,["uri"],n);const r=a(e,["encodedVideo"]);r!=null&&c(t,["videoBytes"],cn(r));const s=a(e,["encoding"]);return s!=null&&c(t,["mimeType"],s),t}function Vw(e){const t={},n=a(e,["gcsUri"]);n!=null&&c(t,["uri"],n);const r=a(e,["bytesBase64Encoded"]);r!=null&&c(t,["videoBytes"],cn(r));const s=a(e,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}function Hw(e){const t={},n=a(e,["image"]);n!=null&&c(t,["_self"],Nt(n));const r=a(e,["maskMode"]);return r!=null&&c(t,["maskMode"],r),t}function Bw(e){const t={},n=a(e,["image"]);n!=null&&c(t,["image"],Zo(n));const r=a(e,["referenceType"]);return r!=null&&c(t,["referenceType"],r),t}function Gw(e){const t={},n=a(e,["image"]);n!=null&&c(t,["image"],Nt(n));const r=a(e,["referenceType"]);return r!=null&&c(t,["referenceType"],r),t}function Am(e){const t={},n=a(e,["uri"]);n!=null&&c(t,["uri"],n);const r=a(e,["videoBytes"]);r!=null&&c(t,["encodedVideo"],cn(r));const s=a(e,["mimeType"]);return s!=null&&c(t,["encoding"],s),t}function Rm(e){const t={},n=a(e,["uri"]);n!=null&&c(t,["gcsUri"],n);const r=a(e,["videoBytes"]);r!=null&&c(t,["bytesBase64Encoded"],cn(r));const s=a(e,["mimeType"]);return s!=null&&c(t,["mimeType"],s),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ow(e,t){const n={},r=a(e,["displayName"]);return t!==void 0&&r!=null&&c(t,["displayName"],r),n}function zw(e){const t={},n=a(e,["config"]);return n!=null&&Ow(n,t),t}function qw(e,t){const n={},r=a(e,["force"]);return t!==void 0&&r!=null&&c(t,["_query","force"],r),n}function $w(e){const t={},n=a(e,["name"]);n!=null&&c(t,["_url","name"],n);const r=a(e,["config"]);return r!=null&&qw(r,t),t}function Ww(e){const t={},n=a(e,["name"]);return n!=null&&c(t,["_url","name"],n),t}function Jw(e,t){const n={},r=a(e,["customMetadata"]);if(t!==void 0&&r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>l)),c(t,["customMetadata"],i)}const s=a(e,["chunkingConfig"]);return t!==void 0&&s!=null&&c(t,["chunkingConfig"],s),n}function Kw(e){const t={},n=a(e,["name"]);n!=null&&c(t,["name"],n);const r=a(e,["metadata"]);r!=null&&c(t,["metadata"],r);const s=a(e,["done"]);s!=null&&c(t,["done"],s);const i=a(e,["error"]);i!=null&&c(t,["error"],i);const l=a(e,["response"]);return l!=null&&c(t,["response"],Qw(l)),t}function Yw(e){const t={},n=a(e,["fileSearchStoreName"]);n!=null&&c(t,["_url","file_search_store_name"],n);const r=a(e,["fileName"]);r!=null&&c(t,["fileName"],r);const s=a(e,["config"]);return s!=null&&Jw(s,t),t}function Qw(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["parent"]);r!=null&&c(t,["parent"],r);const s=a(e,["documentName"]);return s!=null&&c(t,["documentName"],s),t}function Xw(e,t){const n={},r=a(e,["pageSize"]);t!==void 0&&r!=null&&c(t,["_query","pageSize"],r);const s=a(e,["pageToken"]);return t!==void 0&&s!=null&&c(t,["_query","pageToken"],s),n}function Zw(e){const t={},n=a(e,["config"]);return n!=null&&Xw(n,t),t}function eN(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["nextPageToken"]);r!=null&&c(t,["nextPageToken"],r);const s=a(e,["fileSearchStores"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(l=>l)),c(t,["fileSearchStores"],i)}return t}function Mm(e,t){const n={},r=a(e,["mimeType"]);t!==void 0&&r!=null&&c(t,["mimeType"],r);const s=a(e,["displayName"]);t!==void 0&&s!=null&&c(t,["displayName"],s);const i=a(e,["customMetadata"]);if(t!==void 0&&i!=null){let d=i;Array.isArray(d)&&(d=d.map(f=>f)),c(t,["customMetadata"],d)}const l=a(e,["chunkingConfig"]);return t!==void 0&&l!=null&&c(t,["chunkingConfig"],l),n}function tN(e){const t={},n=a(e,["fileSearchStoreName"]);n!=null&&c(t,["_url","file_search_store_name"],n);const r=a(e,["config"]);return r!=null&&Mm(r,t),t}function nN(e){const t={},n=a(e,["sdkHttpResponse"]);return n!=null&&c(t,["sdkHttpResponse"],n),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rN="Content-Type",sN="X-Server-Timeout",oN="User-Agent",Dl="x-goog-api-client",iN="1.35.0",lN=`google-genai-sdk/${iN}`,aN="v1beta1",cN="v1beta";class dN{constructor(t){var n,r;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:aN,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:cN,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const t=new Headers;return await this.clientOptions.auth.addAuthHeaders(t),t}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&r.push(t.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,r){const s=[this.getRequestUrlInternal(n)];return r&&s.push(this.getBaseResourcePath()),t!==""&&s.push(t),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const r=this.shouldPrependVertexProjectPath(t),s=this.constructUrl(t.path,n,r);if(t.queryParams)for(const[l,d]of Object.entries(t.queryParams))s.searchParams.append(l,String(d));let i={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=t.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,n,s.toString(),t.abortSignal),this.unaryApiCall(s,i,t.httpMethod)}patchHttpOptions(t,n){const r=JSON.parse(JSON.stringify(t));for(const[s,i]of Object.entries(n))typeof i=="object"?r[s]=Object.assign(Object.assign({},r[s]),i):i!==void 0&&(r[s]=i);return r}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const r=this.shouldPrependVertexProjectPath(t),s=this.constructUrl(t.path,n,r);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let i={};return i.body=t.body,i=await this.includeExtraHttpOptionsToRequestInit(i,n,s.toString(),t.abortSignal),this.streamApiCall(s,i,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,r,s){if(n&&n.timeout||s){const i=new AbortController,l=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const d=setTimeout(()=>i.abort(),n.timeout);d&&typeof d.unref=="function"&&d.unref()}s&&s.addEventListener("abort",()=>{i.abort()}),t.signal=l}return n&&n.extraBody!==null&&uN(t,n.extraBody),t.headers=await this.getHeadersInternal(n,r),t}async unaryApiCall(t,n,r){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await Iu(s),new Rl(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(t,n,r){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await Iu(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(t){return vt(this,arguments,function*(){var r;const s=(r=t==null?void 0:t.body)===null||r===void 0?void 0:r.getReader(),i=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let l="";const d="data:",f=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:u,value:p}=yield K(s.read());if(u){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=i.decode(p,{stream:!0});try{const w=JSON.parse(m);if("error"in w){const N=JSON.parse(JSON.stringify(w.error)),S=N.status,x=N.code,v=`got status: ${S}. ${JSON.stringify(w)}`;if(x>=400&&x<600)throw new Yo({message:v,status:x})}}catch(w){if(w.name==="ApiError")throw w}l+=m;let h=-1,g=0;for(;;){h=-1,g=0;for(const S of f){const x=l.indexOf(S);x!==-1&&(h===-1||x<h)&&(h=x,g=S.length)}if(h===-1)break;const w=l.substring(0,h);l=l.substring(h+g);const N=w.trim();if(N.startsWith(d)){const S=N.substring(d.length).trim();try{const x=new Response(S,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield K(new Rl(x))}catch(x){throw new Error(`exception parsing stream chunk ${S}. ${x}`)}}}}}finally{s.releaseLock()}})}async apiCall(t,n){return fetch(t,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const t={},n=lN+" "+this.clientOptions.userAgentExtra;return t[oN]=n,t[Dl]=n,t[rN]="application/json",t}async getHeadersInternal(t,n){const r=new Headers;if(t&&t.headers){for(const[s,i]of Object.entries(t.headers))r.append(s,i);t.timeout&&t.timeout>0&&r.append(sN,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(t){var n;let r="";return typeof t=="string"&&(r=t.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(t,n){var r;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const i=this.clientOptions.uploader,l=await i.stat(t);s.sizeBytes=String(l.size);const d=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:l.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=d;const f={file:s},u=this.getFileName(t),p=U("upload/v1beta/files",f._url),m=await this.fetchUploadUrl(p,s.sizeBytes,s.mimeType,u,f,n==null?void 0:n.httpOptions);return i.upload(t,m,this)}async uploadFileToFileSearchStore(t,n,r){var s;const i=this.clientOptions.uploader,l=await i.stat(n),d=String(l.size),f=(s=r==null?void 0:r.mimeType)!==null&&s!==void 0?s:l.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const u=`upload/v1beta/${t}:uploadToFileSearchStore`,p=this.getFileName(n),m={};r!=null&&Mm(r,m);const h=await this.fetchUploadUrl(u,d,f,p,m,r==null?void 0:r.httpOptions);return i.uploadToFileSearchStore(n,h,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n,r,s,i,l){var d;let f={};l?f=l:f={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},s?{"X-Goog-Upload-File-Name":s}:{})};const u=await this.request({path:t,body:JSON.stringify(i),httpMethod:"POST",httpOptions:f});if(!u||!(u!=null&&u.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const p=(d=u==null?void 0:u.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(p===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return p}}async function Iu(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){const n=e.status;let r;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?r=await e.json():r={error:{message:await e.text(),code:e.status,status:e.statusText}};const s=JSON.stringify(r);throw n>=400&&n<600?new Yo({message:s,status:n}):new Error(s)}}function uN(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof e.body=="string"&&e.body.length>0)try{const i=JSON.parse(e.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))n=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(i,l){const d=Object.assign({},i);for(const f in l)if(Object.prototype.hasOwnProperty.call(l,f)){const u=l[f],p=d[f];u&&typeof u=="object"&&!Array.isArray(u)&&p&&typeof p=="object"&&!Array.isArray(p)?d[f]=r(p,u):(p&&u&&typeof p!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${f}". Original type: ${typeof p}, New type: ${typeof u}. Overwriting.`),d[f]=u)}return d}const s=r(n,t);e.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fN="mcp_used/unknown";let pN=!1;function Pm(e){for(const t of e)if(mN(t)||typeof t=="object"&&"inputSchema"in t)return!0;return pN}function jm(e){var t;const n=(t=e[Dl])!==null&&t!==void 0?t:"";e[Dl]=(n+` ${fN}`).trimStart()}function mN(e){return e!==null&&typeof e=="object"&&e instanceof za}function hN(e){return vt(this,arguments,function*(n,r=100){let s,i=0;for(;i<r;){const l=yield K(n.listTools({cursor:s}));for(const d of l.tools)yield yield K(d),i++;if(!l.nextCursor)break;s=l.nextCursor}})}class za{constructor(t=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=n}static create(t,n){return new za(t,n)}async initialize(){var t,n,r,s;if(this.mcpTools.length>0)return;const i={},l=[];for(const p of this.mcpClients)try{for(var d=!0,f=(n=void 0,yt(hN(p))),u;u=await f.next(),t=u.done,!t;d=!0){s=u.value,d=!1;const m=s;l.push(m);const h=m.name;if(i[h])throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);i[h]=p}}catch(m){n={error:m}}finally{try{!d&&!t&&(r=f.return)&&await r.call(f)}finally{if(n)throw n.error}}this.mcpTools=l,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),Wx(this.mcpTools,this.config)}async callTool(t){await this.initialize();const n=[];for(const r of t)if(r.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[r.name];let i;this.config.timeout&&(i={timeout:this.config.timeout});const l=await s.callTool({name:r.name,arguments:r.args},void 0,i);n.push({functionResponse:{name:r.name,response:l.isError?{error:l}:l}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function gN(e,t,n){const r=new Vx;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data),Object.assign(r,s),t(r)}class xN{constructor(t,n,r){this.apiClient=t,this.auth=n,this.webSocketFactory=r}async connect(t){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),l=wN(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),f=`${s}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${d}`;let u=()=>{};const p=new Promise(y=>{u=y}),m=t.callbacks,h=function(){u({})},g=this.apiClient,w={onopen:h,onmessage:y=>{gN(g,m.onmessage,y)},onerror:(n=m==null?void 0:m.onerror)!==null&&n!==void 0?n:function(y){},onclose:(r=m==null?void 0:m.onclose)!==null&&r!==void 0?r:function(y){}},N=this.webSocketFactory.create(f,yN(l),w);N.connect(),await p;const v={setup:{model:ne(this.apiClient,t.model)}};return N.send(JSON.stringify(v)),new vN(N,this.apiClient)}}class vN{constructor(t,n){this.conn=t,this.apiClient=n}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=zy(t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const n=Oy(t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(t){const n={playbackControl:t};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Wn.PLAY)}pause(){this.sendPlaybackControl(Wn.PAUSE)}stop(){this.sendPlaybackControl(Wn.STOP)}resetContext(){this.sendPlaybackControl(Wn.RESET_CONTEXT)}close(){this.conn.close()}}function yN(e){const t={};return e.forEach((n,r)=>{t[r]=n}),t}function wN(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const NN="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function SN(e,t,n){const r=new Ux;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const i=JSON.parse(s);if(e.isVertexAI()){const l=Wy(i);Object.assign(r,l)}else Object.assign(r,i);t(r)}class bN{constructor(t,n,r){this.apiClient=t,this.auth=n,this.webSocketFactory=r,this.music=new xN(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var n,r,s,i,l,d;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const f=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let p;const m=this.apiClient.getHeaders();t.config&&t.config.tools&&Pm(t.config.tools)&&jm(m);const h=kN(m);if(this.apiClient.isVertexAI())p=`${f}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h,p);else{const I=this.apiClient.getApiKey();let M="BidiGenerateContent",L="key";I!=null&&I.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),M="BidiGenerateContentConstrained",L="access_token"),p=`${f}/ws/google.ai.generativelanguage.${u}.GenerativeService.${M}?${L}=${I}`}let g=()=>{};const w=new Promise(I=>{g=I}),N=t.callbacks,S=function(){var I;(I=N==null?void 0:N.onopen)===null||I===void 0||I.call(N),g({})},x=this.apiClient,v={onopen:S,onmessage:I=>{SN(x,N.onmessage,I)},onerror:(n=N==null?void 0:N.onerror)!==null&&n!==void 0?n:function(I){},onclose:(r=N==null?void 0:N.onclose)!==null&&r!==void 0?r:function(I){}},y=this.webSocketFactory.create(p,_N(h),v);y.connect(),await w;let C=ne(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&C.startsWith("publishers/")){const I=this.apiClient.getProject(),M=this.apiClient.getLocation();C=`projects/${I}/locations/${M}/`+C}let b={};this.apiClient.isVertexAI()&&((s=t.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[Eo.AUDIO]}:t.config.responseModalities=[Eo.AUDIO]),!((i=t.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const E=(d=(l=t.config)===null||l===void 0?void 0:l.tools)!==null&&d!==void 0?d:[],k=[];for(const I of E)if(this.isCallableTool(I)){const M=I;k.push(await M.tool())}else k.push(I);k.length>0&&(t.config.tools=k);const T={model:C,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?b=Gy(this.apiClient,T):b=By(this.apiClient,T),delete b.config,y.send(JSON.stringify(b)),new EN(y,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const CN={turnComplete:!0};class EN{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=at(n.turns),t.isVertexAI()||(r=r.map(s=>Qo(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const i of r){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!t.isVertexAI()&&!("id"in i))throw new Error(NN)}return{toolResponse:{functionResponses:r}}}sendClientContent(t){t=Object.assign(Object.assign({},CN),t);const n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:$y(t)}:n={realtimeInput:qy(t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function _N(e){const t={};return e.forEach((n,r)=>{t[r]=n}),t}function kN(e){const t=new Headers;for(const[n,r]of Object.entries(e))t.append(n,r);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Au=10;function Ru(e){var t,n,r;if(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let s=!1;for(const l of(n=e==null?void 0:e.tools)!==null&&n!==void 0?n:[])if(nr(l)){s=!0;break}if(!s)return!0;const i=(r=e==null?void 0:e.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function nr(e){return"callTool"in e&&typeof e.callTool=="function"}function TN(e){var t,n,r;return(r=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(s=>nr(s)))!==null&&r!==void 0?r:!1}function Mu(e){var t;const n=[];return!((t=e==null?void 0:e.config)===null||t===void 0)&&t.tools&&e.config.tools.forEach((r,s)=>{if(nr(r))return;const i=r;i.functionDeclarations&&i.functionDeclarations.length>0&&n.push(s)}),n}function Pu(e){var t;return!(!((t=e==null?void 0:e.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class IN extends Ut{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>{var r,s,i,l,d;const f=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!TN(n)||Ru(n.config))return await this.generateContentInternal(f);const u=Mu(n);if(u.length>0){const N=u.map(S=>`tools[${S}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${N}.`)}let p,m;const h=at(f.contents),g=(i=(s=(r=f.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&i!==void 0?i:Au;let w=0;for(;w<g&&(p=await this.generateContentInternal(f),!(!p.functionCalls||p.functionCalls.length===0));){const N=p.candidates[0].content,S=[];for(const x of(d=(l=n.config)===null||l===void 0?void 0:l.tools)!==null&&d!==void 0?d:[])if(nr(x)){const y=await x.callTool(p.functionCalls);S.push(...y)}w++,m={role:"user",parts:S},f.contents=at(f.contents),f.contents.push(N),f.contents.push(m),Pu(f.config)&&(h.push(N),h.push(m))}return Pu(f.config)&&(p.automaticFunctionCallingHistory=h),p},this.generateContentStream=async n=>{var r,s,i,l,d;if(this.maybeMoveToResponseJsonSchem(n),Ru(n.config)){const m=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(m)}const f=Mu(n);if(f.length>0){const m=f.map(h=>`tools[${h}]`).join(", ");throw new Error(`Incompatible tools found at ${m}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const u=(i=(s=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||i===void 0?void 0:i.streamFunctionCallArguments,p=(d=(l=n==null?void 0:n.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(u&&!p)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var s;let i;const l=[];if(r!=null&&r.generatedImages)for(const f of r.generatedImages)f&&(f!=null&&f.safetyAttributes)&&((s=f==null?void 0:f.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?i=f==null?void 0:f.safetyAttributes:l.push(f);let d;return i?d={generatedImages:l,positivePromptSafetyAttributes:i,sdkHttpResponse:r.sdkHttpResponse}:d={generatedImages:l,sdkHttpResponse:r.sdkHttpResponse},d}),this.list=async n=>{var r;const l={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((r=l.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new Tn(Dt.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(l),l)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>{var r,s,i,l,d,f;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((s=n.video)===null||s===void 0)&&s.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((l=(i=n.source)===null||i===void 0?void 0:i.video)===null||l===void 0)&&l.uri&&(!((f=(d=n.source)===null||d===void 0?void 0:d.video)===null||f===void 0)&&f.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var n,r,s;const i=(n=t.config)===null||n===void 0?void 0:n.tools;if(!i)return t;const l=await Promise.all(i.map(async f=>nr(f)?await f.tool():f)),d={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:l})};if(d.config.tools=l,t.config&&t.config.tools&&Pm(t.config.tools)){const f=(s=(r=t.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&s!==void 0?s:{};let u=Object.assign({},f);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),jm(u),d.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:u})}return d}async initAfcToolsMap(t){var n,r,s;const i=new Map;for(const l of(r=(n=t.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(nr(l)){const d=l,f=await d.tool();for(const u of(s=f.functionDeclarations)!==null&&s!==void 0?s:[]){if(!u.name)throw new Error("Function declaration name is required.");if(i.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);i.set(u.name,d)}}return i}async processAfcStream(t){var n,r,s;const i=(s=(r=(n=t.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&s!==void 0?s:Au;let l=!1,d=0;const f=await this.initAfcToolsMap(t);return function(u,p,m){return vt(this,arguments,function*(){for(var h,g,w,N,S,x;d<i;){l&&(d++,l=!1);const b=yield K(u.processParamsMaybeAddMcpUsage(m)),E=yield K(u.generateContentStreamInternal(b)),k=[],T=[];try{for(var v=!0,y=(g=void 0,yt(E)),C;C=yield K(y.next()),h=C.done,!h;v=!0){N=C.value,v=!1;const I=N;if(yield yield K(I),I.candidates&&(!((S=I.candidates[0])===null||S===void 0)&&S.content)){T.push(I.candidates[0].content);for(const M of(x=I.candidates[0].content.parts)!==null&&x!==void 0?x:[])if(d<i&&M.functionCall){if(!M.functionCall.name)throw new Error("Function call name was not returned by the model.");if(p.has(M.functionCall.name)){const L=yield K(p.get(M.functionCall.name).callTool([M.functionCall]));k.push(...L)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${p.keys()}, mising tool: ${M.functionCall.name}`)}}}}catch(I){g={error:I}}finally{try{!v&&!h&&(w=y.return)&&(yield K(w.call(y)))}finally{if(g)throw g.error}}if(k.length>0){l=!0;const I=new _r;I.candidates=[{content:{role:"user",parts:k}}],yield yield K(I);const M=[];M.push(...T),M.push({role:"user",parts:k});const L=at(m.contents).concat(M);m.contents=L}else break}})}(this,f,t)}async generateContentInternal(t){var n,r,s,i;let l,d="",f={};if(this.apiClient.isVertexAI()){const u=_u(this.apiClient,t);return d=U("{model}:generateContent",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=Tu(p),h=new _r;return Object.assign(h,m),h})}else{const u=Eu(this.apiClient,t);return d=U("{model}:generateContent",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=ku(p),h=new _r;return Object.assign(h,m),h})}}async generateContentStreamInternal(t){var n,r,s,i;let l,d="",f={};if(this.apiClient.isVertexAI()){const u=_u(this.apiClient,t);return d=U("{model}:streamGenerateContent?alt=sse",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.requestStream({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}),l.then(function(m){return vt(this,arguments,function*(){var h,g,w,N;try{for(var S=!0,x=yt(m),v;v=yield K(x.next()),h=v.done,!h;S=!0){N=v.value,S=!1;const y=N,C=Tu(yield K(y.json()));C.sdkHttpResponse={headers:y.headers};const b=new _r;Object.assign(b,C),yield yield K(b)}}catch(y){g={error:y}}finally{try{!S&&!h&&(w=x.return)&&(yield K(w.call(x)))}finally{if(g)throw g.error}}})})}else{const u=Eu(this.apiClient,t);return d=U("{model}:streamGenerateContent?alt=sse",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.requestStream({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}),l.then(function(m){return vt(this,arguments,function*(){var h,g,w,N;try{for(var S=!0,x=yt(m),v;v=yield K(x.next()),h=v.done,!h;S=!0){N=v.value,S=!1;const y=N,C=ku(yield K(y.json()));C.sdkHttpResponse={headers:y.headers};const b=new _r;Object.assign(b,C),yield yield K(b)}}catch(y){g={error:y}}finally{try{!S&&!h&&(w=x.return)&&(yield K(w.call(x)))}finally{if(g)throw g.error}}})})}}async embedContent(t){var n,r,s,i;let l,d="",f={};if(this.apiClient.isVertexAI()){const u=b1(this.apiClient,t);return d=U("{model}:predict",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=E1(p),h=new au;return Object.assign(h,m),h})}else{const u=S1(this.apiClient,t);return d=U("{model}:batchEmbedContents",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=C1(p),h=new au;return Object.assign(h,m),h})}}async generateImagesInternal(t){var n,r,s,i;let l,d="",f={};if(this.apiClient.isVertexAI()){const u=D1(this.apiClient,t);return d=U("{model}:predict",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=U1(p),h=new cu;return Object.assign(h,m),h})}else{const u=L1(this.apiClient,t);return d=U("{model}:predict",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=F1(p),h=new cu;return Object.assign(h,m),h})}}async editImageInternal(t){var n,r;let s,i="",l={};if(this.apiClient.isVertexAI()){const d=v1(this.apiClient,t);return i=U("{model}:predict",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(u=>{const p=u;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const u=y1(f),p=new kx;return Object.assign(p,u),p})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,r;let s,i="",l={};if(this.apiClient.isVertexAI()){const d=Dw(this.apiClient,t);return i=U("{model}:predict",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(u=>{const p=u;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const u=Fw(f),p=new Tx;return Object.assign(p,u),p})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var n,r;let s,i="",l={};if(this.apiClient.isVertexAI()){const d=xw(this.apiClient,t);return i=U("{model}:predict",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>{const u=vw(f),p=new Ix;return Object.assign(p,u),p})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var n,r;let s,i="",l={};if(this.apiClient.isVertexAI()){const d=Cw(this.apiClient,t);return i=U("{model}:predict",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>{const u=Ew(f),p=new Ax;return Object.assign(p,u),p})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,r,s,i;let l,d="",f={};if(this.apiClient.isVertexAI()){const u=tw(this.apiClient,t);return d=U("{name}",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),l.then(p=>Ll(p))}else{const u=ew(this.apiClient,t);return d=U("{name}",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>jl(p))}}async listInternal(t){var n,r,s,i;let l,d="",f={};if(this.apiClient.isVertexAI()){const u=dw(this.apiClient,t);return d=U("{models_url}",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=fw(p),h=new du;return Object.assign(h,m),h})}else{const u=cw(this.apiClient,t);return d=U("{models_url}",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=uw(p),h=new du;return Object.assign(h,m),h})}}async update(t){var n,r,s,i;let l,d="",f={};if(this.apiClient.isVertexAI()){const u=jw(this.apiClient,t);return d=U("{model}",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),l.then(p=>Ll(p))}else{const u=Pw(this.apiClient,t);return d=U("{name}",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>jl(p))}}async delete(t){var n,r,s,i;let l,d="",f={};if(this.apiClient.isVertexAI()){const u=m1(this.apiClient,t);return d=U("{name}",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=g1(p),h=new uu;return Object.assign(h,m),h})}else{const u=p1(this.apiClient,t);return d=U("{name}",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=h1(p),h=new uu;return Object.assign(h,m),h})}}async countTokens(t){var n,r,s,i;let l,d="",f={};if(this.apiClient.isVertexAI()){const u=d1(this.apiClient,t);return d=U("{model}:countTokens",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=f1(p),h=new fu;return Object.assign(h,m),h})}else{const u=c1(this.apiClient,t);return d=U("{model}:countTokens",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=u1(p),h=new fu;return Object.assign(h,m),h})}}async computeTokens(t){var n,r;let s,i="",l={};if(this.apiClient.isVertexAI()){const d=n1(this.apiClient,t);return i=U("{model}:computeTokens",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(u=>{const p=u;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const u=r1(f),p=new Rx;return Object.assign(p,u),p})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var n,r,s,i;let l,d="",f={};if(this.apiClient.isVertexAI()){const u=z1(this.apiClient,t);return d=U("{model}:predictLongRunning",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),l.then(p=>{const m=G1(p),h=new _o;return Object.assign(h,m),h})}else{const u=O1(this.apiClient,t);return d=U("{model}:predictLongRunning",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l.then(p=>{const m=B1(p),h=new _o;return Object.assign(h,m),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AN extends Ut{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const n=t.operation,r=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let i;r&&"httpOptions"in r&&(i=r.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(t){const n=t.operation,r=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let i;r&&"httpOptions"in r&&(i=r.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(t){var n,r,s,i;let l,d="",f={};if(this.apiClient.isVertexAI()){const u=Nx(t);return d=U("{operationName}",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),l}else{const u=wx(t);return d=U("{operationName}",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),l}}async fetchPredictVideosOperationInternal(t){var n,r;let s,i="",l={};if(this.apiClient.isVertexAI()){const d=px(t);return i=U("{resourceName}:fetchPredictOperation",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RN(e){const t={},n=a(e,["data"]);if(n!=null&&c(t,["data"],n),a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(e,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}function MN(e){const t={},n=a(e,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(i=>BN(i))),c(t,["parts"],s)}const r=a(e,["role"]);return r!=null&&c(t,["role"],r),t}function PN(e,t,n){const r={},s=a(t,["expireTime"]);n!==void 0&&s!=null&&c(n,["expireTime"],s);const i=a(t,["newSessionExpireTime"]);n!==void 0&&i!=null&&c(n,["newSessionExpireTime"],i);const l=a(t,["uses"]);n!==void 0&&l!=null&&c(n,["uses"],l);const d=a(t,["liveConnectConstraints"]);n!==void 0&&d!=null&&c(n,["bidiGenerateContentSetup"],HN(e,d));const f=a(t,["lockAdditionalFields"]);return n!==void 0&&f!=null&&c(n,["fieldMask"],f),r}function jN(e,t){const n={},r=a(t,["config"]);return r!=null&&c(n,["config"],PN(e,r,n)),n}function LN(e){const t={};if(a(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(e,["fileUri"]);n!=null&&c(t,["fileUri"],n);const r=a(e,["mimeType"]);return r!=null&&c(t,["mimeType"],r),t}function DN(e){const t={},n=a(e,["id"]);n!=null&&c(t,["id"],n);const r=a(e,["args"]);r!=null&&c(t,["args"],r);const s=a(e,["name"]);if(s!=null&&c(t,["name"],s),a(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function FN(e){const t={};if(a(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(e,["enableWidget"]);return n!=null&&c(t,["enableWidget"],n),t}function UN(e){const t={};if(a(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(e,["timeRangeFilter"]);return n!=null&&c(t,["timeRangeFilter"],n),t}function VN(e,t){const n={},r=a(e,["generationConfig"]);t!==void 0&&r!=null&&c(t,["setup","generationConfig"],r);const s=a(e,["responseModalities"]);t!==void 0&&s!=null&&c(t,["setup","generationConfig","responseModalities"],s);const i=a(e,["temperature"]);t!==void 0&&i!=null&&c(t,["setup","generationConfig","temperature"],i);const l=a(e,["topP"]);t!==void 0&&l!=null&&c(t,["setup","generationConfig","topP"],l);const d=a(e,["topK"]);t!==void 0&&d!=null&&c(t,["setup","generationConfig","topK"],d);const f=a(e,["maxOutputTokens"]);t!==void 0&&f!=null&&c(t,["setup","generationConfig","maxOutputTokens"],f);const u=a(e,["mediaResolution"]);t!==void 0&&u!=null&&c(t,["setup","generationConfig","mediaResolution"],u);const p=a(e,["seed"]);t!==void 0&&p!=null&&c(t,["setup","generationConfig","seed"],p);const m=a(e,["speechConfig"]);t!==void 0&&m!=null&&c(t,["setup","generationConfig","speechConfig"],Oa(m));const h=a(e,["thinkingConfig"]);t!==void 0&&h!=null&&c(t,["setup","generationConfig","thinkingConfig"],h);const g=a(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&c(t,["setup","generationConfig","enableAffectiveDialog"],g);const w=a(e,["systemInstruction"]);t!==void 0&&w!=null&&c(t,["setup","systemInstruction"],MN(Le(w)));const N=a(e,["tools"]);if(t!==void 0&&N!=null){let E=hr(N);Array.isArray(E)&&(E=E.map(k=>ON(mr(k)))),c(t,["setup","tools"],E)}const S=a(e,["sessionResumption"]);t!==void 0&&S!=null&&c(t,["setup","sessionResumption"],GN(S));const x=a(e,["inputAudioTranscription"]);t!==void 0&&x!=null&&c(t,["setup","inputAudioTranscription"],x);const v=a(e,["outputAudioTranscription"]);t!==void 0&&v!=null&&c(t,["setup","outputAudioTranscription"],v);const y=a(e,["realtimeInputConfig"]);t!==void 0&&y!=null&&c(t,["setup","realtimeInputConfig"],y);const C=a(e,["contextWindowCompression"]);t!==void 0&&C!=null&&c(t,["setup","contextWindowCompression"],C);const b=a(e,["proactivity"]);if(t!==void 0&&b!=null&&c(t,["setup","proactivity"],b),a(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function HN(e,t){const n={},r=a(t,["model"]);r!=null&&c(n,["setup","model"],ne(e,r));const s=a(t,["config"]);return s!=null&&c(n,["config"],VN(s,n)),n}function BN(e){const t={},n=a(e,["mediaResolution"]);n!=null&&c(t,["mediaResolution"],n);const r=a(e,["codeExecutionResult"]);r!=null&&c(t,["codeExecutionResult"],r);const s=a(e,["executableCode"]);s!=null&&c(t,["executableCode"],s);const i=a(e,["fileData"]);i!=null&&c(t,["fileData"],LN(i));const l=a(e,["functionCall"]);l!=null&&c(t,["functionCall"],DN(l));const d=a(e,["functionResponse"]);d!=null&&c(t,["functionResponse"],d);const f=a(e,["inlineData"]);f!=null&&c(t,["inlineData"],RN(f));const u=a(e,["text"]);u!=null&&c(t,["text"],u);const p=a(e,["thought"]);p!=null&&c(t,["thought"],p);const m=a(e,["thoughtSignature"]);m!=null&&c(t,["thoughtSignature"],m);const h=a(e,["videoMetadata"]);return h!=null&&c(t,["videoMetadata"],h),t}function GN(e){const t={},n=a(e,["handle"]);if(n!=null&&c(t,["handle"],n),a(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function ON(e){const t={};if(a(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=a(e,["computerUse"]);n!=null&&c(t,["computerUse"],n);const r=a(e,["fileSearch"]);r!=null&&c(t,["fileSearch"],r);const s=a(e,["codeExecution"]);if(s!=null&&c(t,["codeExecution"],s),a(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=a(e,["functionDeclarations"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(m=>m)),c(t,["functionDeclarations"],p)}const l=a(e,["googleMaps"]);l!=null&&c(t,["googleMaps"],FN(l));const d=a(e,["googleSearch"]);d!=null&&c(t,["googleSearch"],UN(d));const f=a(e,["googleSearchRetrieval"]);f!=null&&c(t,["googleSearchRetrieval"],f);const u=a(e,["urlContext"]);return u!=null&&c(t,["urlContext"],u),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zN(e){const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const r=e[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const s=Object.keys(r).map(i=>`${n}.${i}`);t.push(...s)}else t.push(n)}return t.join(",")}function qN(e,t){let n=null;const r=e.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const i=r.setup;typeof i=="object"&&i!==null?(e.bidiGenerateContentSetup=i,n=i):delete e.bidiGenerateContentSetup}else r!==void 0&&delete e.bidiGenerateContentSetup;const s=e.fieldMask;if(n){const i=zN(n);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)i?e.fieldMask=i:delete e.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];s.length>0&&(d=s.map(u=>l.includes(u)?`generationConfig.${u}`:u));const f=[];i&&f.push(i),d.length>0&&f.push(...d),f.length>0?e.fieldMask=f.join(","):delete e.fieldMask}else delete e.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?e.fieldMask=s.join(","):delete e.fieldMask;return e}class $N extends Ut{constructor(t){super(),this.apiClient=t}async create(t){var n,r;let s,i="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=jN(this.apiClient,t);i=U("auth_tokens",d._url),l=d._query,delete d.config,delete d._url,delete d._query;const f=qN(d,t.config);return s=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>u)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WN(e,t){const n={},r=a(e,["force"]);return t!==void 0&&r!=null&&c(t,["_query","force"],r),n}function JN(e){const t={},n=a(e,["name"]);n!=null&&c(t,["_url","name"],n);const r=a(e,["config"]);return r!=null&&WN(r,t),t}function KN(e){const t={},n=a(e,["name"]);return n!=null&&c(t,["_url","name"],n),t}function YN(e,t){const n={},r=a(e,["pageSize"]);t!==void 0&&r!=null&&c(t,["_query","pageSize"],r);const s=a(e,["pageToken"]);return t!==void 0&&s!=null&&c(t,["_query","pageToken"],s),n}function QN(e){const t={},n=a(e,["parent"]);n!=null&&c(t,["_url","parent"],n);const r=a(e,["config"]);return r!=null&&YN(r,t),t}function XN(e){const t={},n=a(e,["sdkHttpResponse"]);n!=null&&c(t,["sdkHttpResponse"],n);const r=a(e,["nextPageToken"]);r!=null&&c(t,["nextPageToken"],r);const s=a(e,["documents"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(l=>l)),c(t,["documents"],i)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZN extends Ut{constructor(t){super(),this.apiClient=t,this.list=async n=>new Tn(Dt.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(t){var n,r;let s,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=KN(t);return i=U("{name}",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(t){var n,r;let s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=JN(t);s=U("{name}",l._url),i=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(t){var n,r;let s,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=QN(t);return i=U("{parent}/documents",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>{const u=XN(f),p=new Mx;return Object.assign(p,u),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class e2 extends Ut{constructor(t,n=new ZN(t)){super(),this.apiClient=t,this.documents=n,this.list=async(r={})=>new Tn(Dt.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(r),r)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var n,r;let s,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=zw(t);return i=U("fileSearchStores",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async get(t){var n,r;let s,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Ww(t);return i=U("{name}",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(t){var n,r;let s="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=$w(t);s=U("{name}",l._url),i=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:i,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(t){var n,r;let s,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Zw(t);return i=U("fileSearchStores",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>{const u=eN(f),p=new Px;return Object.assign(p,u),p})}}async uploadToFileSearchStoreInternal(t){var n,r;let s,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=tN(t);return i=U("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>{const u=nN(f),p=new jx;return Object.assign(p,u),p})}}async importFile(t){var n,r;let s,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Yw(t);return i=U("{file_search_store_name}:importFile",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>{const u=Kw(f),p=new Ua;return Object.assign(p,u),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Lm=function(){const{crypto:e}=globalThis;if(e!=null&&e.randomUUID)return Lm=e.randomUUID.bind(e),e.randomUUID();const t=new Uint8Array(1),n=e?()=>e.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const t2=()=>Lm();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fl(e){return typeof e=="object"&&e!==null&&("name"in e&&e.name==="AbortError"||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}const Ul=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null){try{if(Object.prototype.toString.call(e)==="[object Error]"){const t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return new Error(JSON.stringify(e))}catch{}}return new Error(e)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ut extends Error{}class Ge extends ut{constructor(t,n,r,s){super(`${Ge.makeMessage(t,n,r)}`),this.status=t,this.headers=s,this.error=n}static makeMessage(t,n,r){const s=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return t&&s?`${t} ${s}`:t?`${t} status code (no body)`:s||"(no status code or body)"}static generate(t,n,r,s){if(!t||!s)return new ei({message:r,cause:Ul(n)});const i=n;return t===400?new Fm(t,i,r,s):t===401?new Um(t,i,r,s):t===403?new Vm(t,i,r,s):t===404?new Hm(t,i,r,s):t===409?new Bm(t,i,r,s):t===422?new Gm(t,i,r,s):t===429?new Om(t,i,r,s):t>=500?new zm(t,i,r,s):new Ge(t,i,r,s)}}class Vl extends Ge{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class ei extends Ge{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),n&&(this.cause=n)}}class Dm extends ei{constructor({message:t}={}){super({message:t??"Request timed out."})}}class Fm extends Ge{}class Um extends Ge{}class Vm extends Ge{}class Hm extends Ge{}class Bm extends Ge{}class Gm extends Ge{}class Om extends Ge{}class zm extends Ge{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const n2=/^[a-z][a-z0-9+.-]*:/i,r2=e=>n2.test(e);let Hl=e=>(Hl=Array.isArray,Hl(e));const s2=Hl;let o2=s2;const ju=o2;function i2(e){if(!e)return!0;for(const t in e)return!1;return!0}function l2(e,t){return Object.prototype.hasOwnProperty.call(e,t)}const a2=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new ut(`${e} must be an integer`);if(t<0)throw new ut(`${e} must be a positive integer`);return t},c2=e=>{try{return JSON.parse(e)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const d2=e=>new Promise(t=>setTimeout(t,e));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jn="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function u2(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const f2=()=>{var e,t,n,r,s;const i=u2();if(i==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jn,"X-Stainless-OS":Du(Deno.build.os),"X-Stainless-Arch":Lu(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(e=Deno.version)===null||e===void 0?void 0:e.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(i==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jn,"X-Stainless-OS":Du((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":Lu((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(s=globalThis.process.version)!==null&&s!==void 0?s:"unknown"};const l=p2();return l?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${l.browser}`,"X-Stainless-Runtime-Version":l.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jn,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function p2(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const r=n.exec(navigator.userAgent);if(r){const s=r[1]||0,i=r[2]||0,l=r[3]||0;return{browser:t,version:`${s}.${i}.${l}`}}}return null}const Lu=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",Du=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let Is;const m2=()=>Is??(Is=f2());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function h2(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function qm(...e){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function g2(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return qm({start(){},async pull(n){const{done:r,value:s}=await t.next();r?n.close():n.enqueue(s)},async cancel(){var n;await((n=t.return)===null||n===void 0?void 0:n.call(t))}})}function $m(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const n=await t.read();return n!=null&&n.done&&t.releaseLock(),n}catch(n){throw t.releaseLock(),n}},async return(){const n=t.cancel();return t.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function x2(e){var t,n;if(e===null||typeof e!="object")return;if(e[Symbol.asyncIterator]){await((n=(t=e[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(t));return}const r=e.getReader(),s=r.cancel();r.releaseLock(),await s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const v2=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wm=()=>{var e;if(typeof File>"u"){const{process:t}=globalThis,n=typeof((e=t==null?void 0:t.versions)===null||e===void 0?void 0:e.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Li(e,t,n){return Wm(),new File(e,t??"unknown_file",n)}function y2(e){return(typeof e=="object"&&e!==null&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}const w2=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Jm=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",N2=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&Jm(e),S2=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function";async function b2(e,t,n){if(Wm(),e=await e,N2(e))return e instanceof File?e:Li([await e.arrayBuffer()],e.name);if(S2(e)){const s=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),Li(await Bl(s),t,n)}const r=await Bl(e);if(t||(t=y2(e)),!(n!=null&&n.type)){const s=r.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof s=="string"&&(n=Object.assign(Object.assign({},n),{type:s}))}return Li(r,t,n)}async function Bl(e){var t,n,r,s,i;let l=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)l.push(e);else if(Jm(e))l.push(e instanceof Blob?e:await e.arrayBuffer());else if(w2(e))try{for(var d=!0,f=yt(e),u;u=await f.next(),t=u.done,!t;d=!0){s=u.value,d=!1;const p=s;l.push(...await Bl(p))}}catch(p){n={error:p}}finally{try{!d&&!t&&(r=f.return)&&await r.call(f)}finally{if(n)throw n.error}}else{const p=(i=e==null?void 0:e.constructor)===null||i===void 0?void 0:i.name;throw new Error(`Unexpected data type: ${typeof e}${p?`; constructor: ${p}`:""}${C2(e)}`)}return l}function C2(e){return typeof e!="object"||e===null?"":`; props: [${Object.getOwnPropertyNames(e).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Km{constructor(t){this._client=t}}Km._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ym(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Fu=Object.freeze(Object.create(null)),E2=(e=Ym)=>function(n,...r){if(n.length===1)return n[0];let s=!1;const i=[],l=n.reduce((p,m,h)=>{var g,w,N;/[?#]/.test(m)&&(s=!0);const S=r[h];let x=(s?encodeURIComponent:e)(""+S);return h!==r.length&&(S==null||typeof S=="object"&&S.toString===((N=Object.getPrototypeOf((w=Object.getPrototypeOf((g=S.hasOwnProperty)!==null&&g!==void 0?g:Fu))!==null&&w!==void 0?w:Fu))===null||N===void 0?void 0:N.toString))&&(x=S+"",i.push({start:p.length+m.length,length:x.length,error:`Value of type ${Object.prototype.toString.call(S).slice(8,-1)} is not a valid path parameter`})),p+m+(h===r.length?"":x)},""),d=l.split(/[?#]/,1)[0],f=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let u;for(;(u=f.exec(d))!==null;)i.push({start:u.index,length:u[0].length,error:`Value "${u[0]}" can't be safely passed as a path parameter`});if(i.sort((p,m)=>p.start-m.start),i.length>0){let p=0;const m=i.reduce((h,g)=>{const w=" ".repeat(g.start-p),N="^".repeat(g.length);return p=g.start+g.length,h+w+N},"");throw new ut(`Path parameters result in path with invalid segments:
${i.map(h=>h.error).join(`
`)}
${l}
${m}`)}return l},As=E2(Ym);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qm extends Km{create(t,n){var r;const{api_version:s=this._client.apiVersion}=t,i=To(t,["api_version"]);if("model"in i&&"agent_config"in i)throw new ut("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in i&&"generation_config"in i)throw new ut("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(As`/${s}/interactions`,Object.assign(Object.assign({body:i},n),{stream:(r=t.stream)!==null&&r!==void 0?r:!1}))}delete(t,n={},r){const{api_version:s=this._client.apiVersion}=n??{};return this._client.delete(As`/${s}/interactions/${t}`,r)}cancel(t,n={},r){const{api_version:s=this._client.apiVersion}=n??{};return this._client.post(As`/${s}/interactions/${t}/cancel`,r)}get(t,n={},r){var s;const i=n??{},{api_version:l=this._client.apiVersion}=i,d=To(i,["api_version"]);return this._client.get(As`/${l}/interactions/${t}`,Object.assign(Object.assign({query:d},r),{stream:(s=n==null?void 0:n.stream)!==null&&s!==void 0?s:!1}))}}Qm._key=Object.freeze(["interactions"]);class Xm extends Qm{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _2(e){let t=0;for(const s of e)t+=s.length;const n=new Uint8Array(t);let r=0;for(const s of e)n.set(s,r),r+=s.length;return n}let Rs;function qa(e){let t;return(Rs??(t=new globalThis.TextEncoder,Rs=t.encode.bind(t)))(e)}let Ms;function Uu(e){let t;return(Ms??(t=new globalThis.TextDecoder,Ms=t.decode.bind(t)))(e)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ti{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];const n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?qa(t):t;this.buffer=_2([this.buffer,n]);const r=[];let s;for(;(s=k2(this.buffer,this.carriageReturnIndex))!=null;){if(s.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=s.index;continue}if(this.carriageReturnIndex!=null&&(s.index!==this.carriageReturnIndex+1||s.carriage)){r.push(Uu(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const i=this.carriageReturnIndex!==null?s.preceding-1:s.preceding,l=Uu(this.buffer.subarray(0,i));r.push(l),this.buffer=this.buffer.subarray(s.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}ti.NEWLINE_CHARS=new Set([`
`,"\r"]);ti.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function k2(e,t){for(let s=t??0;s<e.length;s++){if(e[s]===10)return{preceding:s,index:s+1,carriage:!1};if(e[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function T2(e){for(let r=0;r<e.length-1;r++){if(e[r]===10&&e[r+1]===10||e[r]===13&&e[r+1]===13)return r+2;if(e[r]===13&&e[r+1]===10&&r+3<e.length&&e[r+2]===13&&e[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Io={off:0,error:200,warn:300,info:400,debug:500},Vu=(e,t,n)=>{if(e){if(l2(Io,e))return e;Ve(n).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(Io))}`)}};function Mr(){}function Ps(e,t,n){return!t||Io[e]>Io[n]?Mr:t[e].bind(t)}const I2={error:Mr,warn:Mr,info:Mr,debug:Mr};let Hu=new WeakMap;function Ve(e){var t;const n=e.logger,r=(t=e.logLevel)!==null&&t!==void 0?t:"off";if(!n)return I2;const s=Hu.get(n);if(s&&s[0]===r)return s[1];const i={error:Ps("error",n,r),warn:Ps("warn",n,r),info:Ps("info",n,r),debug:Ps("debug",n,r)};return Hu.set(n,[r,i]),i}const pn=e=>(e.options&&(e.options=Object.assign({},e.options),delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([t,n])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jn{constructor(t,n,r){this.iterator=t,this.controller=n,this.client=r}static fromSSEResponse(t,n,r){let s=!1;const i=r?Ve(r):console;function l(){return vt(this,arguments,function*(){var f,u,p,m;if(s)throw new ut("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let h=!1;try{try{for(var g=!0,w=yt(A2(t,n)),N;N=yield K(w.next()),f=N.done,!f;g=!0){m=N.value,g=!1;const S=m;if(!h)if(S.data.startsWith("[DONE]")){h=!0;continue}else try{yield yield K(JSON.parse(S.data))}catch(x){throw i.error("Could not parse message into JSON:",S.data),i.error("From chunk:",S.raw),x}}}catch(S){u={error:S}}finally{try{!g&&!f&&(p=w.return)&&(yield K(p.call(w)))}finally{if(u)throw u.error}}h=!0}catch(S){if(Fl(S))return yield K(void 0);throw S}finally{h||n.abort()}})}return new Jn(l,n,r)}static fromReadableStream(t,n,r){let s=!1;function i(){return vt(this,arguments,function*(){var f,u,p,m;const h=new ti,g=$m(t);try{for(var w=!0,N=yt(g),S;S=yield K(N.next()),f=S.done,!f;w=!0){m=S.value,w=!1;const x=m;for(const v of h.decode(x))yield yield K(v)}}catch(x){u={error:x}}finally{try{!w&&!f&&(p=N.return)&&(yield K(p.call(N)))}finally{if(u)throw u.error}}for(const x of h.flush())yield yield K(x)})}function l(){return vt(this,arguments,function*(){var f,u,p,m;if(s)throw new ut("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let h=!1;try{try{for(var g=!0,w=yt(i()),N;N=yield K(w.next()),f=N.done,!f;g=!0){m=N.value,g=!1;const S=m;h||S&&(yield yield K(JSON.parse(S)))}}catch(S){u={error:S}}finally{try{!g&&!f&&(p=w.return)&&(yield K(p.call(w)))}finally{if(u)throw u.error}}h=!0}catch(S){if(Fl(S))return yield K(void 0);throw S}finally{h||n.abort()}})}return new Jn(l,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],n=[],r=this.iterator(),s=i=>({next:()=>{if(i.length===0){const l=r.next();t.push(l),n.push(l)}return i.shift()}});return[new Jn(()=>s(t),this.controller,this.client),new Jn(()=>s(n),this.controller,this.client)]}toReadableStream(){const t=this;let n;return qm({async start(){n=t[Symbol.asyncIterator]()},async pull(r){try{const{value:s,done:i}=await n.next();if(i)return r.close();const l=qa(JSON.stringify(s)+`
`);r.enqueue(l)}catch(s){r.error(s)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}}function A2(e,t){return vt(this,arguments,function*(){var r,s,i,l;if(!e.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new ut("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new ut("Attempted to iterate over a response with no body");const d=new M2,f=new ti,u=$m(e.body);try{for(var p=!0,m=yt(R2(u)),h;h=yield K(m.next()),r=h.done,!r;p=!0){l=h.value,p=!1;const g=l;for(const w of f.decode(g)){const N=d.decode(w);N&&(yield yield K(N))}}}catch(g){s={error:g}}finally{try{!p&&!r&&(i=m.return)&&(yield K(i.call(m)))}finally{if(s)throw s.error}}for(const g of f.flush()){const w=d.decode(g);w&&(yield yield K(w))}})}function R2(e){return vt(this,arguments,function*(){var n,r,s,i;let l=new Uint8Array;try{for(var d=!0,f=yt(e),u;u=yield K(f.next()),n=u.done,!n;d=!0){i=u.value,d=!1;const p=i;if(p==null)continue;const m=p instanceof ArrayBuffer?new Uint8Array(p):typeof p=="string"?qa(p):p;let h=new Uint8Array(l.length+m.length);h.set(l),h.set(m,l.length),l=h;let g;for(;(g=T2(l))!==-1;)yield yield K(l.slice(0,g)),l=l.slice(g)}}catch(p){r={error:p}}finally{try{!d&&!n&&(s=f.return)&&(yield K(s.call(f)))}finally{if(r)throw r.error}}l.length>0&&(yield yield K(l))})}class M2{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,r,s]=P2(t,":");return s.startsWith(" ")&&(s=s.substring(1)),n==="event"?this.event=s:n==="data"&&this.data.push(s),null}}function P2(e,t){const n=e.indexOf(t);return n!==-1?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function j2(e,t){const{response:n,requestLogID:r,retryOfRequestLogID:s,startTime:i}=t,l=await(async()=>{var d;if(t.options.stream)return Ve(e).debug("response",n.status,n.url,n.headers,n.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(n,t.controller,e):Jn.fromSSEResponse(n,t.controller,e);if(n.status===204)return null;if(t.options.__binaryResponse)return n;const f=n.headers.get("content-type"),u=(d=f==null?void 0:f.split(";")[0])===null||d===void 0?void 0:d.trim();return(u==null?void 0:u.includes("application/json"))||(u==null?void 0:u.endsWith("+json"))?await n.json():await n.text()})();return Ve(e).debug(`[${r}] response parsed`,pn({retryOfRequestLogID:s,url:n.url,status:n.status,body:l,durationMs:Date.now()-i})),l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $a extends Promise{constructor(t,n,r=j2){super(s=>{s(null)}),this.responsePromise=n,this.parseResponse=r,this.client=t}_thenUnwrap(t){return new $a(this.client,this.responsePromise,async(n,r)=>t(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zm=Symbol("brand.privateNullableHeaders");function*L2(e){if(!e)return;if(Zm in e){const{values:r,nulls:s}=e;yield*r.entries();for(const i of s)yield[i,null];return}let t=!1,n;e instanceof Headers?n=e.entries():ju(e)?n=e:(t=!0,n=Object.entries(e??{}));for(let r of n){const s=r[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const i=ju(r[1])?r[1]:[r[1]];let l=!1;for(const d of i)d!==void 0&&(t&&!l&&(l=!0,yield[s,null]),yield[s,d])}}const kr=e=>{const t=new Headers,n=new Set;for(const r of e){const s=new Set;for(const[i,l]of L2(r)){const d=i.toLowerCase();s.has(d)||(t.delete(i),s.add(d)),l===null?(t.delete(i),n.add(d)):(t.append(i,l),n.delete(d))}}return{[Zm]:!0,values:t,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Di=e=>{var t,n,r,s,i,l;if(typeof globalThis.process<"u")return(r=(n=(t=lx)===null||t===void 0?void 0:t[e])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(l=(i=(s=globalThis.Deno.env)===null||s===void 0?void 0:s.get)===null||i===void 0?void 0:i.call(s,e))===null||l===void 0?void 0:l.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var eh;class ni{constructor(t){var n,r,s,i,l,d,f,{baseURL:u=Di("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:p=(n=Di("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:m="v1beta"}=t,h=To(t,["baseURL","apiKey","apiVersion"]);const g=Object.assign(Object.assign({apiKey:p,apiVersion:m},h),{baseURL:u||"https://generativelanguage.googleapis.com"});this.baseURL=g.baseURL,this.timeout=(r=g.timeout)!==null&&r!==void 0?r:ni.DEFAULT_TIMEOUT,this.logger=(s=g.logger)!==null&&s!==void 0?s:console;const w="warn";this.logLevel=w,this.logLevel=(l=(i=Vu(g.logLevel,"ClientOptions.logLevel",this))!==null&&i!==void 0?i:Vu(Di("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&l!==void 0?l:w,this.fetchOptions=g.fetchOptions,this.maxRetries=(d=g.maxRetries)!==null&&d!==void 0?d:2,this.fetch=(f=g.fetch)!==null&&f!==void 0?f:h2(),this.encoder=v2,this._options=g,this.apiKey=p,this.apiVersion=m,this.clientAdapter=g.clientAdapter}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:n}){if(!(t.has("authorization")||t.has("x-goog-api-key"))&&!(this.apiKey&&t.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){const n=kr([t.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return kr([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return kr([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(t){return Object.entries(t).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new ut(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${jn}`}defaultIdempotencyKey(){return`stainless-node-retry-${t2()}`}makeStatusError(t,n,r,s){return Ge.generate(t,n,r,s)}buildURL(t,n,r){const s=!this.baseURLOverridden()&&r||this.baseURL,i=r2(t)?new URL(t):new URL(s+(s.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),l=this.defaultQuery();return i2(l)||(n=Object.assign(Object.assign({},l),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(i.search=this.stringifyQuery(n)),i.toString()}async prepareOptions(t){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!t.path.startsWith(`/${this.apiVersion}/projects/`)){const n=t.path.slice(this.apiVersion.length+1);t.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(t,{url:n,options:r}){}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,r){return this.request(Promise.resolve(r).then(s=>Object.assign({method:t,path:n},s)))}request(t,n=null){return new $a(this,this.makeRequest(t,n,void 0))}async makeRequest(t,n,r){var s,i,l;const d=await t,f=(s=d.maxRetries)!==null&&s!==void 0?s:this.maxRetries;n==null&&(n=f),await this.prepareOptions(d);const{req:u,url:p,timeout:m}=await this.buildRequest(d,{retryCount:f-n});await this.prepareRequest(u,{url:p,options:d});const h="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),g=r===void 0?"":`, retryOf: ${r}`,w=Date.now();if(Ve(this).debug(`[${h}] sending request`,pn({retryOfRequestLogID:r,method:d.method,url:p,options:d,headers:u.headers})),!((i=d.signal)===null||i===void 0)&&i.aborted)throw new Vl;const N=new AbortController,S=await this.fetchWithTimeout(p,u,m,N).catch(Ul),x=Date.now();if(S instanceof globalThis.Error){const y=`retrying, ${n} attempts remaining`;if(!((l=d.signal)===null||l===void 0)&&l.aborted)throw new Vl;const C=Fl(S)||/timed? ?out/i.test(String(S)+("cause"in S?String(S.cause):""));if(n)return Ve(this).info(`[${h}] connection ${C?"timed out":"failed"} - ${y}`),Ve(this).debug(`[${h}] connection ${C?"timed out":"failed"} (${y})`,pn({retryOfRequestLogID:r,url:p,durationMs:x-w,message:S.message})),this.retryRequest(d,n,r??h);throw Ve(this).info(`[${h}] connection ${C?"timed out":"failed"} - error; no more retries left`),Ve(this).debug(`[${h}] connection ${C?"timed out":"failed"} (error; no more retries left)`,pn({retryOfRequestLogID:r,url:p,durationMs:x-w,message:S.message})),C?new Dm:new ei({cause:S})}const v=`[${h}${g}] ${u.method} ${p} ${S.ok?"succeeded":"failed"} with status ${S.status} in ${x-w}ms`;if(!S.ok){const y=await this.shouldRetry(S);if(n&&y){const I=`retrying, ${n} attempts remaining`;return await x2(S.body),Ve(this).info(`${v} - ${I}`),Ve(this).debug(`[${h}] response error (${I})`,pn({retryOfRequestLogID:r,url:S.url,status:S.status,headers:S.headers,durationMs:x-w})),this.retryRequest(d,n,r??h,S.headers)}const C=y?"error; no more retries left":"error; not retryable";Ve(this).info(`${v} - ${C}`);const b=await S.text().catch(I=>Ul(I).message),E=c2(b),k=E?void 0:b;throw Ve(this).debug(`[${h}] response error (${C})`,pn({retryOfRequestLogID:r,url:S.url,status:S.status,headers:S.headers,message:k,durationMs:Date.now()-w})),this.makeStatusError(S.status,E,k,S.headers)}return Ve(this).info(v),Ve(this).debug(`[${h}] response start`,pn({retryOfRequestLogID:r,url:S.url,status:S.status,headers:S.headers,durationMs:x-w})),{response:S,options:d,controller:N,requestLogID:h,retryOfRequestLogID:r,startTime:w}}async fetchWithTimeout(t,n,r,s){const i=n||{},{signal:l,method:d}=i,f=To(i,["signal","method"]);l&&l.addEventListener("abort",()=>s.abort());const u=setTimeout(()=>s.abort(),r),p=globalThis.ReadableStream&&f.body instanceof globalThis.ReadableStream||typeof f.body=="object"&&f.body!==null&&Symbol.asyncIterator in f.body,m=Object.assign(Object.assign(Object.assign({signal:s.signal},p?{duplex:"half"}:{}),{method:"GET"}),f);d&&(m.method=d.toUpperCase());try{return await this.fetch.call(void 0,t,m)}finally{clearTimeout(u)}}async shouldRetry(t){const n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,n,r,s){var i;let l;const d=s==null?void 0:s.get("retry-after-ms");if(d){const u=parseFloat(d);Number.isNaN(u)||(l=u)}const f=s==null?void 0:s.get("retry-after");if(f&&!l){const u=parseFloat(f);Number.isNaN(u)?l=Date.parse(f)-Date.now():l=u*1e3}if(!(l&&0<=l&&l<60*1e3)){const u=(i=t.maxRetries)!==null&&i!==void 0?i:this.maxRetries;l=this.calculateDefaultRetryTimeoutMillis(n,u)}return await d2(l),this.makeRequest(t,n-1,r)}calculateDefaultRetryTimeoutMillis(t,n){const i=n-t,l=Math.min(.5*Math.pow(2,i),8),d=1-Math.random()*.25;return l*d*1e3}async buildRequest(t,{retryCount:n=0}={}){var r,s,i;const l=Object.assign({},t),{method:d,path:f,query:u,defaultBaseURL:p}=l,m=this.buildURL(f,u,p);"timeout"in l&&a2("timeout",l.timeout),l.timeout=(r=l.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:h,body:g}=this.buildBody({options:l}),w=await this.buildHeaders({options:t,method:d,bodyHeaders:h,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:d,headers:w},l.signal&&{signal:l.signal}),globalThis.ReadableStream&&g instanceof globalThis.ReadableStream&&{duplex:"half"}),g&&{body:g}),(s=this.fetchOptions)!==null&&s!==void 0?s:{}),(i=l.fetchOptions)!==null&&i!==void 0?i:{}),url:m,timeout:l.timeout}}async buildHeaders({options:t,method:n,bodyHeaders:r,retryCount:s}){let i={};this.idempotencyHeader&&n!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=t.idempotencyKey);const l=await this.authHeaders(t);let d=kr([i,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),m2()),this._options.defaultHeaders,r,t.headers,l]);return this.validateHeaders(d),d.values}buildBody({options:{body:t,headers:n}}){if(!t)return{bodyHeaders:void 0,body:void 0};const r=kr([n]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&r.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:g2(t)}:this.encoder({body:t,headers:r})}}ni.DEFAULT_TIMEOUT=6e4;class ke extends ni{constructor(){super(...arguments),this.interactions=new Xm(this)}}eh=ke;ke.GeminiNextGenAPIClient=eh;ke.GeminiNextGenAPIClientError=ut;ke.APIError=Ge;ke.APIConnectionError=ei;ke.APIConnectionTimeoutError=Dm;ke.APIUserAbortError=Vl;ke.NotFoundError=Hm;ke.ConflictError=Bm;ke.RateLimitError=Om;ke.BadRequestError=Fm;ke.AuthenticationError=Um;ke.InternalServerError=zm;ke.PermissionDeniedError=Vm;ke.UnprocessableEntityError=Gm;ke.toFile=b2;ke.Interactions=Xm;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function D2(e,t){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],r),n}function F2(e,t){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],r),n}function U2(e,t){const n={},r=a(e,["sdkHttpResponse"]);return r!=null&&c(n,["sdkHttpResponse"],r),n}function V2(e,t){const n={},r=a(e,["sdkHttpResponse"]);return r!=null&&c(n,["sdkHttpResponse"],r),n}function H2(e,t,n){const r={};if(a(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=a(e,["tunedModelDisplayName"]);if(t!==void 0&&s!=null&&c(t,["displayName"],s),a(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=a(e,["epochCount"]);t!==void 0&&i!=null&&c(t,["tuningTask","hyperparameters","epochCount"],i);const l=a(e,["learningRateMultiplier"]);if(l!=null&&c(r,["tuningTask","hyperparameters","learningRateMultiplier"],l),a(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(a(e,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(a(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=a(e,["batchSize"]);t!==void 0&&d!=null&&c(t,["tuningTask","hyperparameters","batchSize"],d);const f=a(e,["learningRate"]);if(t!==void 0&&f!=null&&c(t,["tuningTask","hyperparameters","learningRate"],f),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(a(e,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function B2(e,t,n){const r={};let s=a(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const g=a(e,["validationDataset"]);t!==void 0&&g!=null&&c(t,["supervisedTuningSpec"],Bu(g))}else if(s==="PREFERENCE_TUNING"){const g=a(e,["validationDataset"]);t!==void 0&&g!=null&&c(t,["preferenceOptimizationSpec"],Bu(g))}const i=a(e,["tunedModelDisplayName"]);t!==void 0&&i!=null&&c(t,["tunedModelDisplayName"],i);const l=a(e,["description"]);t!==void 0&&l!=null&&c(t,["description"],l);let d=a(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const g=a(e,["epochCount"]);t!==void 0&&g!=null&&c(t,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(d==="PREFERENCE_TUNING"){const g=a(e,["epochCount"]);t!==void 0&&g!=null&&c(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let f=a(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const g=a(e,["learningRateMultiplier"]);t!==void 0&&g!=null&&c(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(f==="PREFERENCE_TUNING"){const g=a(e,["learningRateMultiplier"]);t!==void 0&&g!=null&&c(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let u=a(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const g=a(e,["exportLastCheckpointOnly"]);t!==void 0&&g!=null&&c(t,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(u==="PREFERENCE_TUNING"){const g=a(e,["exportLastCheckpointOnly"]);t!==void 0&&g!=null&&c(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let p=a(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const g=a(e,["adapterSize"]);t!==void 0&&g!=null&&c(t,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(p==="PREFERENCE_TUNING"){const g=a(e,["adapterSize"]);t!==void 0&&g!=null&&c(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(a(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(a(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const m=a(e,["labels"]);t!==void 0&&m!=null&&c(t,["labels"],m);const h=a(e,["beta"]);return t!==void 0&&h!=null&&c(t,["preferenceOptimizationSpec","hyperParameters","beta"],h),r}function G2(e,t){const n={},r=a(e,["baseModel"]);r!=null&&c(n,["baseModel"],r);const s=a(e,["preTunedModel"]);s!=null&&c(n,["preTunedModel"],s);const i=a(e,["trainingDataset"]);i!=null&&Z2(i);const l=a(e,["config"]);return l!=null&&H2(l,n),n}function O2(e,t){const n={},r=a(e,["baseModel"]);r!=null&&c(n,["baseModel"],r);const s=a(e,["preTunedModel"]);s!=null&&c(n,["preTunedModel"],s);const i=a(e,["trainingDataset"]);i!=null&&eS(i,n,t);const l=a(e,["config"]);return l!=null&&B2(l,n,t),n}function z2(e,t){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],r),n}function q2(e,t){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],r),n}function $2(e,t,n){const r={},s=a(e,["pageSize"]);t!==void 0&&s!=null&&c(t,["_query","pageSize"],s);const i=a(e,["pageToken"]);t!==void 0&&i!=null&&c(t,["_query","pageToken"],i);const l=a(e,["filter"]);return t!==void 0&&l!=null&&c(t,["_query","filter"],l),r}function W2(e,t,n){const r={},s=a(e,["pageSize"]);t!==void 0&&s!=null&&c(t,["_query","pageSize"],s);const i=a(e,["pageToken"]);t!==void 0&&i!=null&&c(t,["_query","pageToken"],i);const l=a(e,["filter"]);return t!==void 0&&l!=null&&c(t,["_query","filter"],l),r}function J2(e,t){const n={},r=a(e,["config"]);return r!=null&&$2(r,n),n}function K2(e,t){const n={},r=a(e,["config"]);return r!=null&&W2(r,n),n}function Y2(e,t){const n={},r=a(e,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const s=a(e,["nextPageToken"]);s!=null&&c(n,["nextPageToken"],s);const i=a(e,["tunedModels"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(d=>th(d))),c(n,["tuningJobs"],l)}return n}function Q2(e,t){const n={},r=a(e,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const s=a(e,["nextPageToken"]);s!=null&&c(n,["nextPageToken"],s);const i=a(e,["tuningJobs"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(d=>Gl(d))),c(n,["tuningJobs"],l)}return n}function X2(e,t){const n={},r=a(e,["name"]);r!=null&&c(n,["model"],r);const s=a(e,["name"]);return s!=null&&c(n,["endpoint"],s),n}function Z2(e,t){const n={};if(a(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=a(e,["examples"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(i=>i)),c(n,["examples","examples"],s)}return n}function eS(e,t,n){const r={};let s=a(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const l=a(e,["gcsUri"]);t!==void 0&&l!=null&&c(t,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(s==="PREFERENCE_TUNING"){const l=a(e,["gcsUri"]);t!==void 0&&l!=null&&c(t,["preferenceOptimizationSpec","trainingDatasetUri"],l)}let i=a(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const l=a(e,["vertexDatasetResource"]);t!==void 0&&l!=null&&c(t,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(i==="PREFERENCE_TUNING"){const l=a(e,["vertexDatasetResource"]);t!==void 0&&l!=null&&c(t,["preferenceOptimizationSpec","trainingDatasetUri"],l)}if(a(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function th(e,t){const n={},r=a(e,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const s=a(e,["name"]);s!=null&&c(n,["name"],s);const i=a(e,["state"]);i!=null&&c(n,["state"],xm(i));const l=a(e,["createTime"]);l!=null&&c(n,["createTime"],l);const d=a(e,["tuningTask","startTime"]);d!=null&&c(n,["startTime"],d);const f=a(e,["tuningTask","completeTime"]);f!=null&&c(n,["endTime"],f);const u=a(e,["updateTime"]);u!=null&&c(n,["updateTime"],u);const p=a(e,["description"]);p!=null&&c(n,["description"],p);const m=a(e,["baseModel"]);m!=null&&c(n,["baseModel"],m);const h=a(e,["_self"]);return h!=null&&c(n,["tunedModel"],X2(h)),n}function Gl(e,t){const n={},r=a(e,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const s=a(e,["name"]);s!=null&&c(n,["name"],s);const i=a(e,["state"]);i!=null&&c(n,["state"],xm(i));const l=a(e,["createTime"]);l!=null&&c(n,["createTime"],l);const d=a(e,["startTime"]);d!=null&&c(n,["startTime"],d);const f=a(e,["endTime"]);f!=null&&c(n,["endTime"],f);const u=a(e,["updateTime"]);u!=null&&c(n,["updateTime"],u);const p=a(e,["error"]);p!=null&&c(n,["error"],p);const m=a(e,["description"]);m!=null&&c(n,["description"],m);const h=a(e,["baseModel"]);h!=null&&c(n,["baseModel"],h);const g=a(e,["tunedModel"]);g!=null&&c(n,["tunedModel"],g);const w=a(e,["preTunedModel"]);w!=null&&c(n,["preTunedModel"],w);const N=a(e,["supervisedTuningSpec"]);N!=null&&c(n,["supervisedTuningSpec"],N);const S=a(e,["preferenceOptimizationSpec"]);S!=null&&c(n,["preferenceOptimizationSpec"],S);const x=a(e,["tuningDataStats"]);x!=null&&c(n,["tuningDataStats"],x);const v=a(e,["encryptionSpec"]);v!=null&&c(n,["encryptionSpec"],v);const y=a(e,["partnerModelTuningSpec"]);y!=null&&c(n,["partnerModelTuningSpec"],y);const C=a(e,["customBaseModel"]);C!=null&&c(n,["customBaseModel"],C);const b=a(e,["experiment"]);b!=null&&c(n,["experiment"],b);const E=a(e,["labels"]);E!=null&&c(n,["labels"],E);const k=a(e,["outputUri"]);k!=null&&c(n,["outputUri"],k);const T=a(e,["pipelineJob"]);T!=null&&c(n,["pipelineJob"],T);const I=a(e,["serviceAccount"]);I!=null&&c(n,["serviceAccount"],I);const M=a(e,["tunedModelDisplayName"]);M!=null&&c(n,["tunedModelDisplayName"],M);const L=a(e,["veoTuningSpec"]);return L!=null&&c(n,["veoTuningSpec"],L),n}function tS(e,t){const n={},r=a(e,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const s=a(e,["name"]);s!=null&&c(n,["name"],s);const i=a(e,["metadata"]);i!=null&&c(n,["metadata"],i);const l=a(e,["done"]);l!=null&&c(n,["done"],l);const d=a(e,["error"]);return d!=null&&c(n,["error"],d),n}function Bu(e,t){const n={},r=a(e,["gcsUri"]);r!=null&&c(n,["validationDatasetUri"],r);const s=a(e,["vertexDatasetResource"]);return s!=null&&c(n,["validationDatasetUri"],s),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nS extends Ut{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new Tn(Dt.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const s={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(s.checkpointId=n.config.preTunedModelCheckpointId);const i=Object.assign(Object.assign({},n),{preTunedModel:s});return i.baseModel=void 0,await this.tuneInternal(i)}else{const s=Object.assign({},n);return await this.tuneInternal(s)}else{const s=Object.assign({},n),i=await this.tuneMldevInternal(s);let l="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?l=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(l=i.name.split("/operations/")[0]),{name:l,state:Al.JOB_STATE_QUEUED}}}}async getInternal(t){var n,r,s,i;let l,d="",f={};if(this.apiClient.isVertexAI()){const u=q2(t);return d=U("{name}",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>Gl(p))}else{const u=z2(t);return d=U("{name}",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>th(p))}}async listInternal(t){var n,r,s,i;let l,d="",f={};if(this.apiClient.isVertexAI()){const u=K2(t);return d=U("tuningJobs",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=Q2(p),h=new pu;return Object.assign(h,m),h})}else{const u=J2(t);return d=U("tunedModels",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=Y2(p),h=new pu;return Object.assign(h,m),h})}}async cancel(t){var n,r,s,i;let l,d="",f={};if(this.apiClient.isVertexAI()){const u=F2(t);return d=U("{name}:cancel",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=V2(p),h=new mu;return Object.assign(h,m),h})}else{const u=D2(t);return d=U("{name}:cancel",u._url),f=u._query,delete u._url,delete u._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const h=m;return h.sdkHttpResponse={headers:p.headers},h})),l.then(p=>{const m=U2(p),h=new mu;return Object.assign(h,m),h})}}async tuneInternal(t){var n,r;let s,i="",l={};if(this.apiClient.isVertexAI()){const d=O2(t,t);return i=U("tuningJobs",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(u=>{const p=u;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>Gl(f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,r;let s,i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=G2(t);return i=U("tunedModels",d._url),l=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(u=>{const p=u;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>tS(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rS{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const sS=1024*1024*8,oS=3,iS=1e3,lS=2,Ao="x-goog-upload-status";async function aS(e,t,n){var r;const s=await nh(e,t,n),i=await(s==null?void 0:s.json());if(((r=s==null?void 0:s.headers)===null||r===void 0?void 0:r[Ao])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return i.file}async function cS(e,t,n){var r;const s=await nh(e,t,n),i=await(s==null?void 0:s.json());if(((r=s==null?void 0:s.headers)===null||r===void 0?void 0:r[Ao])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const l=um(i),d=new Va;return Object.assign(d,l),d}async function nh(e,t,n){var r,s;let i=0,l=0,d=new Rl(new Response),f="upload";for(i=e.size;l<i;){const u=Math.min(sS,i-l),p=e.slice(l,l+u);l+u>=i&&(f+=", finalize");let m=0,h=iS;for(;m<oS&&(d=await n.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(l),"Content-Length":String(u)}}}),!(!((r=d==null?void 0:d.headers)===null||r===void 0)&&r[Ao]));)m++,await uS(h),h=h*lS;if(l+=u,((s=d==null?void 0:d.headers)===null||s===void 0?void 0:s[Ao])!=="active")break;if(i<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function dS(e){return{size:e.size,type:e.type}}function uS(e){return new Promise(t=>setTimeout(t,e))}class fS{async upload(t,n,r){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await aS(t,n,r)}async uploadToFileSearchStore(t,n,r){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await cS(t,n,r)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await dS(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pS{create(t,n,r){return new mS(t,n,r)}}class mS{constructor(t,n,r){this.url=t,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Gu="x-goog-api-key";class hS{constructor(t){this.apiKey=t}async addAuthHeaders(t,n){if(t.get(Gu)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(Gu,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gS="gl-node/";class xS{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const t=this.httpOptions;t!=null&&t.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new ke({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t==null?void 0:t.timeout});return this._interactions=n.interactions,this._interactions}constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;const r=ux(t.httpOptions,t.vertexai,void 0,void 0);r&&(t.httpOptions?t.httpOptions.baseUrl=r:t.httpOptions={baseUrl:r}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;const s=new hS(this.apiKey);this.apiClient=new dN({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:gS+"web",uploader:new fS,downloader:new rS}),this.models=new IN(this.apiClient),this.live=new bN(this.apiClient,s,new pS),this.batches=new Hv(this.apiClient),this.chats=new Ny(this.models,this.apiClient),this.caches=new vy(this.apiClient),this.files=new Ry(this.apiClient),this.operations=new AN(this.apiClient),this.authTokens=new $N(this.apiClient),this.tunings=new nS(this.apiClient),this.fileSearchStores=new e2(this.apiClient)}}const vS=async e=>{const t=new xS({apiKey:"PLACEHOLDER_FOR_NOW"});try{const n=dr.filter(d=>e[d.id]===de.BAD),r=dr.filter(d=>e[d.id]===de.ATTENTION);let s=`You are a Senior Fleet Safety Manager. Review the following truck inspection report.
`;s+=`Truck No: ${e.truckNo}, Trailer: ${e.trailerNo}, Odometer: ${e.odometer}
`,s+=`
BAD / FAILED ITEMS (${n.length}):
`,n.length===0?s+=`None.
`:n.forEach(d=>{s+=`- ${d.label} (Status: Critical Failure)
`}),s+=`
ITEMS NEEDING ATTENTION (${r.length}):
`,r.length===0?s+=`None.
`:r.forEach(d=>{s+=`- ${d.label} (Status: Needs Attention)
`}),s+=`
REMARKS from Inspector: ${e.remarks||"No remarks provided."}
`,s+=`
Overall Rating given by inspector: ${e.rate}/5
`,s+=`
Task:
`,s+=`1. Summarize the condition of the vehicle in 2 sentences.
`,s+=`2. Provide a "Safety Risk Score" from 1 (Safe) to 10 (Critical).
`,s+=`3. List 3 immediate prioritized actions for the maintenance team.
`,s+=`
Format the output as professional, concise text.`;const i=[{text:s}];if(e.photoDamage){const d=e.photoDamage.split(",")[1];d&&(i.push({inlineData:{mimeType:"image/jpeg",data:d}}),i.push({text:"Also analyze the attached photo of the reported damage for severity."}))}return(await t.models.generateContent({model:"gemini-3-flash-preview",contents:{parts:i}})).text||"Analysis complete but no text returned."}catch(n){return console.error("Gemini Analysis Failed:",n),"AI Safety Analysis currently unavailable. Please review the manual report."}},Ou=({message:e,type:t,onClose:n})=>{const r={success:"bg-green-600",error:"bg-red-600",info:"bg-blue-600",warning:"bg-amber-500"};return o.jsxs("div",{className:`fixed top-4 right-4 z-50 ${r[t]} text-white px-6 py-4 rounded-xl shadow-2xl flex items-center gap-4 animate-fadeIn max-w-sm`,children:[o.jsx("div",{className:"flex-1 font-medium",children:e}),o.jsx("button",{onClick:n,className:"opacity-80 hover:opacity-100",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})},yS=({onClose:e,onPrint:t,children:n,title:r})=>{const[s,i]=_.useState(!1),l=()=>{i(!0);const d=document.getElementById("printable-report-content");if(!d){console.error("Report content not found"),i(!1);return}const u={margin:0,filename:`${r.replace(/[^a-zA-Z0-9]/g,"_")}_${new Date().toISOString().split("T")[0]}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,letterRendering:!0,scrollY:0},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}},p=window.html2pdf;p?p().set(u).from(d).save().then(()=>{i(!1)}).catch(m=>{console.error("PDF Generation Error",m),i(!1),alert("Failed to generate PDF. You can use the Print button as a fallback.")}):(t(),i(!1))};return o.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-md animate-fadeIn no-print",children:o.jsxs("div",{className:"bg-white w-full max-w-5xl h-[94vh] rounded-3xl shadow-2xl flex flex-col overflow-hidden border border-white/20",children:[o.jsxs("div",{className:"px-6 py-4 border-b flex justify-between items-center bg-slate-50 border-slate-200",children:[o.jsx("div",{className:"flex items-center gap-6",children:o.jsxs("button",{onClick:e,className:"text-sm font-bold text-slate-500 hover:text-slate-800 transition-colors uppercase tracking-wider flex items-center gap-2",children:[o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),"Close"]})}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("button",{onClick:l,disabled:s,className:"px-5 py-2.5 text-xs font-bold text-white bg-slate-900 hover:bg-black rounded-xl shadow-lg flex items-center gap-2 transition-all active:scale-95 disabled:bg-slate-400",children:[s?o.jsxs("svg",{className:"animate-spin w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:o.jsx("path",{d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download PDF"]}),o.jsxs("button",{onClick:t,className:"hidden sm:flex px-5 py-2.5 text-xs font-bold text-slate-700 bg-white border border-slate-200 rounded-xl hover:bg-slate-50 transition-all items-center gap-2",children:[o.jsx("svg",{className:"w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:o.jsx("path",{d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Print"]})]})]}),o.jsx("div",{className:"flex-1 overflow-auto bg-slate-100 p-4 sm:p-10 flex justify-center relative",children:o.jsx("div",{className:"origin-top transform scale-[0.9] lg:scale-100 transition-transform duration-500",children:o.jsx("div",{id:"printable-report-content",className:"bg-white shadow-2xl min-h-[297mm] relative z-10 w-[210mm] print:shadow-none",children:n})})})]})})},wS=({status:e,onClose:t,onViewReport:n,aiAnalysis:r})=>e==="idle"?null:o.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center overflow-y-auto py-10",children:[o.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-md transition-all duration-300"}),o.jsxs("div",{className:"relative bg-white rounded-3xl shadow-2xl p-6 sm:p-8 w-full mx-4 text-center transform transition-all duration-300 scale-100 animate-fadeIn border border-white/20 max-w-xl my-auto",children:[e==="submitting"&&o.jsxs("div",{className:"flex flex-col items-center gap-4 py-10",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-16 h-16 border-4 border-blue-100 border-t-blue-600 rounded-full animate-spin"}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-gray-900 uppercase tracking-tight",children:"Uploading Inspection"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1 font-medium uppercase tracking-widest opacity-60",children:"Syncing with Fleet Database..."})]})]}),e==="success"&&o.jsxs("div",{className:"flex flex-col items-center gap-6 py-4 animate-fadeIn",children:[o.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center shadow-inner",children:o.jsx("svg",{className:"w-8 h-8 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-black text-gray-900 uppercase tracking-tighter",children:"Submission Successful"}),o.jsx("p",{className:"text-xs text-slate-500 mt-1 font-medium uppercase tracking-widest",children:"Fleet repository updated"})]}),o.jsxs("div",{className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-5 text-left relative overflow-hidden",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx("div",{className:"w-6 h-6 bg-indigo-600 rounded-lg flex items-center justify-center text-white",children:o.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),o.jsx("h4",{className:"text-[10px] font-black text-indigo-600 uppercase tracking-[0.2em]",children:"Safety AI Insights"})]}),r?o.jsx("div",{className:"animate-fadeIn",children:o.jsx("p",{className:"text-xs font-medium text-slate-700 leading-relaxed whitespace-pre-wrap",children:r})}):o.jsxs("div",{className:"flex flex-col items-center py-6 gap-3",children:[o.jsxs("svg",{className:"animate-spin h-5 w-5 text-indigo-400",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),o.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest animate-pulse",children:"Analyzing Vehicle Condition..."})]})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 w-full",children:[o.jsxs("button",{onClick:n,className:"w-full py-4 bg-white border border-slate-200 text-slate-700 font-bold rounded-xl shadow-sm hover:bg-slate-50 transition-all flex items-center justify-center gap-2 text-[10px] uppercase tracking-widest",children:[o.jsxs("svg",{className:"w-4 h-4 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Digital PDF"]}),o.jsx("button",{onClick:t,className:"w-full py-4 bg-slate-900 text-white font-black rounded-xl shadow-lg hover:bg-black transition-all flex items-center justify-center gap-2 text-[10px] uppercase tracking-widest active:scale-95",children:"Return Home"})]})]}),e==="offline_saved"&&o.jsxs("div",{className:"flex flex-col items-center gap-4 py-10",children:[o.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center shadow-inner",children:o.jsx("svg",{className:"w-10 h-10 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-black text-gray-900 uppercase tracking-tighter",children:"Offline Saved"}),o.jsx("p",{className:"text-sm text-gray-500 mt-2 leading-relaxed font-medium",children:"Data stored on-device. Sync will resume automatically when internet returns."})]}),o.jsx("button",{onClick:t,className:"w-full mt-4 py-4 bg-slate-100 text-slate-600 font-bold rounded-xl hover:bg-slate-200 transition-all text-[10px] uppercase tracking-widest",children:"Got It"})]})]})]}),NS=({user:e,settings:t,appScriptUrl:n,onClose:r,showToast:s,onUpdateSuccess:i,onLogout:l})=>{const d=(e.name||"").split(" "),f=d[0]||"",u=d.slice(1).join(" ")||"",[p,m]=_.useState(""),[h,g]=_.useState(""),[w,N]=_.useState(!1),[S,x]=_.useState(e.preferences||{emailNotifications:!0,notifyGeneral:!0,notifyPetroleum:!0,notifyPetroleumV2:!0,notifyAcid:!0}),[v,y]=_.useState(!1),C=async()=>{if(!p){s("Please enter a new password.","warning");return}if(p!==h){s("Passwords do not match.","error");return}N(!0);try{const T=await(await fetch(n,{method:"POST",body:JSON.stringify({action:"update_user",originalUsername:e.username,password:p})})).json();T.status==="success"?(s("Security updated!","success"),m(""),g("")):s(T.message||"Failed to update.","error")}catch{s("Sync failed.","error")}finally{N(!1)}},b=async k=>{x(k),y(!0);try{(await(await fetch(n,{method:"POST",body:JSON.stringify({action:"update_user",originalUsername:e.username,preferences:k})})).json()).status==="success"&&(i({...e,preferences:k}),s("Preferences synced.","success"))}catch{s("Sync failed.","error")}finally{y(!1)}},E=k=>{const T={...S,[k]:!S[k]};b(T)};return o.jsxs("div",{className:"fixed inset-0 z-[100] bg-white flex flex-col animate-fadeIn overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-100 px-4 py-3 flex items-center shrink-0 z-10 shadow-sm",children:[o.jsx("button",{onClick:r,className:"p-2 text-blue-500 hover:bg-blue-50 rounded-full transition-all",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})}),o.jsx("h1",{className:"flex-1 text-center font-bold text-slate-800 text-sm uppercase tracking-widest",children:"My Workspace"}),o.jsx("div",{className:"w-10"})]}),o.jsxs("div",{className:"max-w-2xl mx-auto w-full px-6 py-10 space-y-12 pb-24",children:[o.jsxs("section",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-800 border-b border-gray-100 pb-2 uppercase tracking-tight",children:"Identity Profile"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between items-center text-sm py-1",children:[o.jsx("span",{className:"font-semibold text-slate-600",children:"Organization"}),o.jsx("span",{className:"text-slate-400 font-medium",children:t.companyName||"Transport Pro"})]}),o.jsxs("div",{className:"flex justify-between items-center text-sm py-1",children:[o.jsx("span",{className:"font-semibold text-slate-600",children:"First Name"}),o.jsx("span",{className:"text-slate-400 font-medium",children:f})]}),o.jsxs("div",{className:"flex justify-between items-center text-sm py-1",children:[o.jsx("span",{className:"font-semibold text-slate-600",children:"Last Name"}),o.jsx("span",{className:"text-slate-400 font-medium",children:u})]}),o.jsxs("div",{className:"flex justify-between items-center text-sm py-1",children:[o.jsx("span",{className:"font-semibold text-slate-600",children:"Login ID"}),o.jsx("span",{className:"text-slate-400 font-medium",children:e.username})]})]})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-800 border-b border-gray-100 pb-2 uppercase tracking-tight",children:"Security Access"}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("input",{type:"password",placeholder:"Set New Password",className:"w-full p-3.5 border border-gray-200 rounded-xl text-sm bg-slate-50 focus:bg-white focus:ring-2 focus:ring-blue-100 outline-none transition-all font-semibold",value:p,onChange:k=>m(k.target.value)}),o.jsx("input",{type:"password",placeholder:"Confirm Password",className:"w-full p-3.5 border border-gray-200 rounded-xl text-sm bg-slate-50 focus:bg-white focus:ring-2 focus:ring-blue-100 outline-none transition-all font-semibold",value:h,onChange:k=>g(k.target.value)}),o.jsx("button",{onClick:C,disabled:w,className:"w-full py-4 bg-slate-900 hover:bg-black text-white font-bold rounded-xl shadow-lg transition-all active:scale-95 flex items-center justify-center gap-2 text-xs uppercase tracking-widest",children:w?o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Verifying..."]}):"Update Security"})]})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between border-b border-gray-100 pb-2",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-800 uppercase tracking-tight",children:"Alert Preferences"}),v&&o.jsxs("svg",{className:"animate-spin h-4 w-4 text-blue-500",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"flex items-center justify-between p-4 rounded-2xl bg-slate-50 border border-slate-100 cursor-pointer group",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-bold text-slate-800",children:"Master Email Alert"}),o.jsx("p",{className:"text-[10px] text-slate-400 font-semibold uppercase tracking-wider",children:"Automated system triggers"})]}),o.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:S.emailNotifications,onChange:()=>E("emailNotifications")})]}),o.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 gap-3 pt-2 transition-opacity duration-300 ${!S.emailNotifications&&"opacity-40 pointer-events-none"}`,children:[{key:"notifyGeneral",label:"General Fleet"},{key:"notifyPetroleum",label:"Petroleum V1"},{key:"notifyPetroleumV2",label:"Petroleum V2"},{key:"notifyAcid",label:"Acid Tankers"}].map(k=>o.jsxs("label",{className:"flex items-center justify-between px-4 py-3.5 rounded-xl border border-gray-100 bg-white hover:bg-gray-50 cursor-pointer transition-colors shadow-sm",children:[o.jsx("span",{className:"text-[11px] font-bold text-slate-500 uppercase tracking-widest",children:k.label}),o.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-gray-300 text-blue-600",checked:S[k.key],onChange:()=>E(k.key)})]},k.key))})]})]}),o.jsx("section",{className:"pt-8",children:o.jsxs("button",{onClick:l,className:"w-full py-4 bg-white border-2 border-red-500 text-red-500 hover:bg-red-50 font-bold rounded-xl transition-all flex items-center justify-center gap-3 uppercase tracking-[0.2em] active:scale-95 text-xs",children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H5a3 3-0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign Out"]})})]})]})},SS=({id:e,notifications:t,onMarkAsRead:n,onDismiss:r,onClearAll:s,onAcknowledge:i,canAcknowledge:l=!1})=>{const[d,f]=_.useState(!1),[u,p]=_.useState("all"),[m,h]=_.useState(null),g=_.useRef(null);_.useEffect(()=>{function b(E){g.current&&!g.current.contains(E.target)&&f(!1)}return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[g]);const w=t.filter(b=>!b.read).length,N=t.filter(b=>!b.read&&b.type==="critical").length,S=_.useMemo(()=>{let b=[...t];return u==="unread"?b=b.filter(E=>!E.read):u==="critical"&&(b=b.filter(E=>E.type==="critical")),b.sort((E,k)=>E.type==="critical"&&!E.read&&(k.type!=="critical"||k.read)?-1:k.type==="critical"&&!k.read&&(E.type!=="critical"||E.read)?1:new Date(k.timestamp).getTime()-new Date(E.timestamp).getTime())},[t,u]),x=b=>{const E=new Date(b),T=Math.floor((new Date().getTime()-E.getTime())/1e3);return T<60?"Just now":T<3600?`${Math.floor(T/60)}m ago`:T<86400?`${Math.floor(T/3600)}h ago`:T<172800?"Yesterday":E.toLocaleDateString()},v=b=>{switch(b){case"critical":return o.jsx("div",{className:"w-9 h-9 rounded-full bg-red-100 text-red-600 flex items-center justify-center shrink-0 shadow-sm border border-red-200",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})});case"warning":return o.jsx("div",{className:"w-9 h-9 rounded-full bg-amber-100 text-amber-600 flex items-center justify-center shrink-0 shadow-sm border border-amber-200",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})});case"success":return o.jsx("div",{className:"w-9 h-9 rounded-full bg-green-100 text-green-600 flex items-center justify-center shrink-0 shadow-sm border border-green-200",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})});default:return o.jsx("div",{className:"w-9 h-9 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center shrink-0 shadow-sm border border-blue-200",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}},y=(b,E)=>{b.stopPropagation(),i&&(h(E),i(E))},C=(b,E)=>{b.stopPropagation(),n(E)};return o.jsxs("div",{className:"relative",ref:g,children:[o.jsxs("button",{id:e,onClick:()=>f(!d),className:`relative p-2 transition-colors rounded-full transition-all duration-300
                    ${d?"bg-blue-800 text-white":"text-blue-200 hover:text-white hover:bg-blue-800"}
                `,children:[o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),w>0&&o.jsxs("span",{className:"absolute top-1 right-1 flex h-4 w-4",children:[o.jsx("span",{className:`animate-ping absolute inline-flex h-full w-full rounded-full opacity-75 ${N>0?"bg-red-400":"bg-blue-400"}`}),o.jsx("span",{className:`relative inline-flex rounded-full h-4 w-4 text-[9px] font-bold text-white items-center justify-center ${N>0?"bg-red-500":"bg-blue-500"}`,children:w>9?"9+":w})]})]}),d&&o.jsxs("div",{className:"absolute right-0 mt-3 w-80 md:w-96 bg-white rounded-2xl shadow-2xl ring-1 ring-black ring-opacity-5 z-[100] overflow-hidden animate-fadeIn origin-top-right",children:[o.jsxs("div",{className:"px-5 py-4 bg-white border-b border-gray-100 flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:"Notifications"}),N>0&&o.jsxs("p",{className:"text-xs text-red-600 font-bold mt-0.5 flex items-center gap-1",children:[o.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-600"}),N," Critical Issues Found"]})]}),t.length>0&&o.jsxs("button",{onClick:s,className:"text-xs font-bold text-slate-500 hover:text-red-600 bg-slate-100 hover:bg-red-50 px-3 py-1.5 rounded-lg transition-colors flex items-center gap-1",children:[o.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Dismiss All"]})]}),o.jsxs("div",{className:"flex border-b border-gray-100 bg-gray-50/50",children:[o.jsx("button",{onClick:()=>p("all"),className:`flex-1 py-2.5 text-xs font-bold text-center border-b-2 transition-colors ${u==="all"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"All"}),o.jsx("button",{onClick:()=>p("unread"),className:`flex-1 py-2.5 text-xs font-bold text-center border-b-2 transition-colors ${u==="unread"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Unread"}),o.jsx("button",{onClick:()=>p("critical"),className:`flex-1 py-2.5 text-xs font-bold text-center border-b-2 transition-colors ${u==="critical"?"border-red-500 text-red-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Critical"})]}),o.jsx("div",{className:"max-h-[60vh] overflow-y-auto bg-gray-50",children:S.length===0?o.jsxs("div",{className:"p-10 text-center text-gray-400 flex flex-col items-center",children:[o.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-3",children:o.jsx("svg",{className:"w-8 h-8 opacity-40",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"You're all caught up!"}),o.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["No ",u==="all"?"new":u," notifications."]})]}):o.jsx("div",{className:"divide-y divide-gray-100",children:S.map(b=>{var E;return o.jsxs("div",{className:`p-4 transition-all relative group cursor-pointer 
                                            ${b.read?"bg-gray-50 hover:bg-gray-100":"bg-white hover:bg-blue-50/30"}
                                            ${b.type==="critical"&&!b.read?"border-l-4 border-red-500 pl-3":"border-l-4 border-transparent pl-3"}
                                        `,onClick:()=>n(b.id),children:[o.jsxs("div",{className:"flex gap-3",children:[v(b.type),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex justify-between items-start mb-0.5",children:[o.jsx("h4",{className:`text-sm font-bold truncate pr-6 ${b.type==="critical"?"text-red-700":b.read?"text-gray-600":"text-gray-900"}`,children:b.title}),o.jsx("span",{className:"text-[10px] text-gray-400 whitespace-nowrap font-medium",children:x(b.timestamp)})]}),o.jsx("p",{className:`text-xs leading-relaxed mb-1.5 line-clamp-2 ${b.read?"text-gray-500":"text-gray-700"}`,children:b.message}),o.jsxs("div",{className:"flex items-center gap-2",children:[b.module&&o.jsx("span",{className:"inline-block px-1.5 py-0.5 rounded text-[9px] font-bold uppercase tracking-wider bg-slate-200 text-slate-600",children:b.module}),!b.read&&o.jsx("span",{className:"text-[9px] font-bold text-blue-600 bg-blue-50 px-1.5 py-0.5 rounded",children:"NEW"})]}),b.actionLink&&b.actionLink.startsWith("request:start_inspection")&&o.jsx("div",{className:"mt-3 flex items-center justify-start",children:o.jsxs("button",{onClick:k=>C(k,b.id),className:"flex items-center gap-1.5 px-4 py-2 rounded-lg text-xs font-bold bg-indigo-600 hover:bg-indigo-700 text-white transition-all shadow-md active:scale-95 w-full justify-center sm:w-auto",children:[o.jsxs("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),"Start Inspection"]})}),(b.type==="critical"||b.type==="warning")&&l&&i&&!((E=b.actionLink)!=null&&E.startsWith("request:"))&&o.jsx("div",{className:"mt-3 flex items-center justify-start",children:o.jsx("button",{onClick:k=>y(k,b.id),disabled:m===b.id,className:`flex items-center gap-1 px-3 py-1.5 rounded-lg text-xs font-bold transition-all
                                                                ${m===b.id?"bg-gray-100 text-gray-400":"bg-green-50 text-green-700 hover:bg-green-100 border border-green-200 shadow-sm"}
                                                            `,children:m===b.id?o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"animate-spin w-3 h-3",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Resolving..."]}):o.jsxs(o.Fragment,{children:[o.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),"Acknowledge & Resolve"]})})})]})]}),o.jsx("button",{onClick:k=>{k.stopPropagation(),r(b.id)},className:"absolute top-2 right-2 p-1.5 text-gray-300 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-all opacity-0 group-hover:opacity-100",title:"Dismiss locally",children:o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]},b.id)})})})]})]})},bS=({isOpen:e,onClose:t,onStartNew:n,onResume:r,hasDraft:s,moduleName:i})=>e?o.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-slate-900/70 backdrop-blur-sm animate-fadeIn",children:o.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-2xl overflow-hidden transform transition-all scale-100",children:[o.jsxs("div",{className:"bg-gradient-to-r from-emerald-900 to-emerald-800 p-6 text-white",children:[o.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[o.jsx("svg",{className:"w-6 h-6 text-emerald-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Start ",i," Inspection"]}),o.jsx("p",{className:"text-emerald-100 text-sm mt-1",children:"Select how you would like to proceed."})]}),o.jsxs("div",{className:"p-6 space-y-4",children:[s&&o.jsxs("div",{className:"bg-amber-50 border border-amber-100 rounded-xl p-4 mb-2",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-amber-100 text-amber-600 flex items-center justify-center shrink-0 mt-1",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-amber-800 text-sm",children:"Unsaved Draft Found"}),o.jsx("p",{className:"text-xs text-amber-700 mt-0.5",children:"You have an inspection in progress. Would you like to continue where you left off?"})]})]}),o.jsx("button",{onClick:r,className:"w-full mt-3 py-3 bg-amber-500 hover:bg-amber-600 text-white font-bold rounded-lg shadow-md transition flex items-center justify-center gap-2",children:"Resume Draft"})]}),o.jsxs("button",{onClick:n,className:"w-full py-4 bg-emerald-600 hover:bg-emerald-700 text-white font-bold rounded-xl shadow-lg hover:shadow-xl transition flex items-center justify-center gap-3 group",children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-emerald-500/50 flex items-center justify-center group-hover:scale-110 transition-transform",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})}),o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"text-sm font-black uppercase tracking-wide",children:"Start New Inspection"}),s&&o.jsx("div",{className:"text-[10px] font-medium text-emerald-100 opacity-80",children:"This will discard the current draft"})]})]}),o.jsx("button",{onClick:t,className:"w-full py-3 bg-white border border-gray-200 text-gray-500 hover:bg-gray-50 hover:text-gray-700 font-bold rounded-xl transition",children:"Cancel"})]})]})}):null,CS=({subscription:e,user:t,onManage:n})=>{if(!t)return null;const r=t.role==="SuperAdmin";if(e===null)return o.jsxs("div",{className:"w-full px-4 py-3 flex items-center justify-center gap-3 bg-slate-800 text-white shadow-md relative z-[100] animate-fadeIn",children:[o.jsxs("svg",{className:"animate-spin h-4 w-4 text-slate-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),o.jsx("span",{className:"text-[10px] font-bold uppercase tracking-[0.2em] text-slate-400",children:"Verifying System License Validation..."})]});const s=e.status==="Expired"||!e.expiryDate||e.daysRemaining<=0,i=!s&&e.status==="Active"&&e.daysRemaining>0&&e.daysRemaining<=7;return!s&&!i?null:o.jsxs("div",{className:`w-full px-4 py-3 flex items-center justify-between shadow-md relative z-[100] animate-fadeIn
            ${s?"bg-red-600 text-white":"bg-amber-500 text-white"}
        `,children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-1.5 bg-white/20 rounded-full",children:s?o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}):o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-bold uppercase tracking-wide",children:s?"SYSTEM LICENSE EXPIRED":"LICENSE EXPIRING SOON"}),o.jsx("p",{className:"text-xs font-medium opacity-90",children:s?"Access to core features is restricted. Renew to restore modification access.":`${e==null?void 0:e.daysRemaining} days remaining. Please renew soon.`})]})]}),r&&o.jsx("button",{onClick:n,className:"px-4 py-2 bg-white text-gray-900 rounded-lg text-xs font-bold uppercase tracking-wider hover:bg-gray-100 transition-colors shadow-sm",children:"Manage License"})]})},ES=({isOpen:e,onClose:t,onSubmit:n,validationLists:r,currentUserRole:s})=>{if(!e)return null;const[i,l]=_.useState(""),[d,f]=_.useState(""),[u,p]=_.useState("General"),[m,h]=_.useState("Normal"),[g,w]=_.useState(""),[N,S]=_.useState(""),[x,v]=_.useState(!1),[y,C]=_.useState({}),[b,E]=_.useState(!1),[k,T]=_.useState(!1);_.useEffect(()=>{E(!!i)},[i]),_.useEffect(()=>{T(!!N)},[N]);const I=async L=>{L.preventDefault();const R={};if(i||(R.truckNo="Required"),g.trim()||(R.reason="Required"),Object.keys(R).length>0){C(R);return}v(!0);try{await n({truckNo:i,trailerNo:d,type:u,priority:m,reason:g,assignedInspector:N}),t()}finally{v(!1)}},M=({label:L,value:R,onChange:P,options:A,placeholder:F="Select...",error:z,isVerified:J,isOptional:j=!1})=>{const[H,q]=_.useState(!1),[Z,$]=_.useState(""),se=_.useRef(null);_.useEffect(()=>{function te(oe){se.current&&!se.current.contains(oe.target)&&q(!1)}return document.addEventListener("mousedown",te),()=>document.removeEventListener("mousedown",te)},[se]);const re=A.filter(te=>String(te).toLowerCase().includes(Z.toLowerCase()));return o.jsxs("div",{className:"relative",ref:se,children:[o.jsx("div",{className:"flex justify-between items-center mb-1 px-1",children:o.jsxs("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-wider",children:[L," ",j&&o.jsx("span",{className:"text-slate-300 font-normal",children:"(Optional)"})]})}),o.jsxs("div",{onClick:()=>{A.length>0&&q(!H)},className:`relative w-full p-3 bg-slate-50 border rounded-xl outline-none text-xs font-semibold text-slate-700 transition-all cursor-pointer flex items-center justify-between
                        ${z?"border-red-200 bg-red-50 text-red-900 shadow-sm":H?"border-indigo-400 ring-2 ring-indigo-50 bg-white":"border-slate-100 hover:border-slate-200 hover:bg-slate-100/50"}
                        ${A.length===0?"opacity-60 cursor-not-allowed":""}
                    `,children:[o.jsx("span",{className:`truncate mr-4 ${!R&&"text-slate-400 font-medium"}`,children:R||(A.length===0?"Empty":F)}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[J&&R&&!z&&o.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 shadow-[0_0_4px_rgba(16,185,129,0.5)]"}),o.jsx("svg",{className:`w-3.5 h-3.5 text-slate-300 transition-transform ${H?"rotate-180 text-indigo-400":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M19 9l-7 7-7-7"})})]})]}),H&&A.length>0&&o.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-slate-100 rounded-xl shadow-xl overflow-hidden flex flex-col max-h-40",children:[o.jsx("div",{className:"p-2 border-b border-slate-50 bg-slate-50 sticky top-0 shrink-0",children:o.jsx("input",{type:"text",autoFocus:!0,className:"w-full px-3 py-1.5 text-[11px] border border-slate-200 rounded-lg focus:outline-none focus:border-indigo-400 placeholder-slate-300 font-medium",placeholder:"Filter...",value:Z,onChange:te=>$(te.target.value),onClick:te=>te.stopPropagation()})}),o.jsx("div",{className:"overflow-y-auto scrollbar-hide flex-1",children:re.length===0?o.jsx("div",{className:"p-4 text-center text-[10px] text-slate-400 uppercase",children:"No results"}):re.map((te,oe)=>o.jsx("div",{onClick:()=>{P(te),q(!1)},className:`px-4 py-2 text-xs cursor-pointer transition-all flex items-center justify-between border-b border-slate-50 last:border-0 
                                            ${R===te?"bg-indigo-600 text-white":"text-slate-600 hover:bg-indigo-50"}
                                        `,children:te},oe))})]}),z&&o.jsx("p",{className:"text-[8px] text-red-500 font-bold mt-0.5 ml-1 uppercase tracking-wide",children:z})]})};return o.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 sm:p-6 bg-slate-900/80 backdrop-blur-sm animate-fadeIn overflow-y-auto",children:o.jsxs("div",{className:"bg-white w-full max-w-lg rounded-[1.5rem] shadow-2xl overflow-hidden transform transition-all border border-slate-100 my-auto",children:[o.jsxs("div",{className:"bg-indigo-600 px-6 py-5 flex justify-between items-center text-white",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-black uppercase tracking-tight",children:"Request Inspection"}),o.jsx("p",{className:"text-indigo-100 text-[10px] font-bold uppercase tracking-widest leading-none",children:"Fleet Maintenance"})]})]}),o.jsx("button",{onClick:t,className:"text-white/60 hover:text-white transition-colors p-1.5 hover:bg-white/10 rounded-lg",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsx("div",{className:"p-6",children:o.jsxs("form",{onSubmit:I,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsx(M,{label:"Truck Number *",value:i,onChange:L=>{l(L),C(R=>({...R,truckNo:""}))},options:r.trucks,placeholder:"Select Reg...",error:y.truckNo,isVerified:b}),o.jsx(M,{label:"Trailer Number",value:d,onChange:L=>{f(L),C(R=>({...R,trailerNo:""}))},options:r.trailers,placeholder:"Link Trailer...",isOptional:!0})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsx(M,{label:"Type of Check",value:u,onChange:p,options:["General","Petroleum","Petroleum_V2","Acid"]}),o.jsx(M,{label:"Priority",value:m,onChange:h,options:["Normal","Urgent","Safety Concern"]})]}),o.jsx(M,{label:"Assign to Inspector",value:N,onChange:L=>{S(L),C(R=>({...R,inspector:""}))},options:r.inspectors,placeholder:"Optional",isVerified:k,isOptional:!0}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-1 px-1",children:"Notes / Instructions *"}),o.jsx("textarea",{className:`w-full p-4 bg-slate-50 border rounded-xl outline-none focus:ring-2 focus:ring-indigo-100 text-xs font-semibold h-20 placeholder-slate-300 resize-none transition-all
                                    ${y.reason?"border-red-200 bg-red-50 text-red-900":"border-slate-100 focus:border-indigo-400"}
                                `,placeholder:"Details for the inspector...",value:g,onChange:L=>{w(L.target.value),C(R=>({...R,reason:""}))},required:!0}),y.reason&&o.jsx("p",{className:"text-[8px] text-red-500 font-bold mt-0.5 ml-1 uppercase tracking-wide",children:y.reason})]}),o.jsx("div",{className:"pt-2",children:o.jsx("button",{type:"submit",disabled:x,className:`w-full py-4 rounded-xl font-bold text-white shadow-lg transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-widest active:scale-95
                                    ${x?"bg-slate-400 cursor-wait":"bg-indigo-600 hover:bg-indigo-700"}
                                `,children:x?o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):o.jsxs(o.Fragment,{children:["Submit Request",o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"3",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})})})]})})]})})},_S=({user:e,appScriptUrl:t,onComplete:n})=>{const[r,s]=_.useState(0),[i,l]=_.useState(!1),[d,f]=_.useState(e.name||""),[u,p]=_.useState(e.username||""),[m,h]=_.useState(""),[g,w]=_.useState(""),[N,S]=_.useState(""),[x,v]=_.useState({emailNotifications:!0,notifyGeneral:!0,notifyPetroleum:!0,notifyPetroleumV2:!0,notifyAcid:!0}),y=()=>{S(""),s(E=>E+1)},C=async E=>{if(E.preventDefault(),r===0){if(!d.trim()){S("Please enter your name.");return}if(!u.trim()||!u.includes("@")){S("Please enter a valid email.");return}}if(r===1){if(m.length<4){S("Password must be at least 4 characters.");return}if(m!==g){S("Passwords do not match.");return}}y()},b=async()=>{l(!0),S("");try{const E={action:"update_user",originalUsername:e.username,username:u,name:d,password:m,preferences:{...x,hasCompletedTour:!1}},T=await(await fetch(t,{method:"POST",body:JSON.stringify(E)})).json();T.status==="success"?s(3):S(T.message||"Something went wrong. Please try again.")}catch{S("Connection error. Check your internet.")}finally{l(!1)}};return o.jsx("div",{className:"fixed inset-0 z-[200] bg-slate-900 flex items-center justify-center p-4 animate-fadeIn",children:o.jsxs("div",{className:"max-w-4xl w-full bg-white rounded-3xl shadow-2xl overflow-hidden flex flex-col md:flex-row min-h-[500px]",children:[o.jsxs("div",{className:"md:w-5/12 bg-slate-900 p-10 flex flex-col justify-between text-white relative",children:[o.jsxs("div",{className:"relative z-10",children:[o.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-2xl flex items-center justify-center mb-8",children:o.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:o.jsx("path",{d:"M12 11c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),o.jsxs("h1",{className:"text-3xl font-black mb-2 uppercase tracking-tight leading-none",children:["Welcome to",o.jsx("br",{}),"SafetyCheck"]}),o.jsx("p",{className:"text-blue-400 text-[10px] font-bold uppercase tracking-widest opacity-60",children:"Account Setup"})]}),o.jsx("div",{className:"relative z-10 space-y-6",children:[{s:0,l:"Your Details"},{s:1,l:"Password"},{s:2,l:"Notifications"}].map(E=>o.jsxs("div",{className:`flex items-center gap-4 transition-all duration-500 ${r>=E.s?"opacity-100":"opacity-20"}`,children:[o.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center border-2 ${r>E.s?"bg-emerald-500 border-emerald-500 text-white":r===E.s?"border-blue-400 text-blue-400":"border-slate-700 text-slate-700"} font-bold text-xs`,children:r>E.s?"":E.s+1}),o.jsx("span",{className:"font-bold text-[10px] uppercase tracking-[0.2em]",children:E.l})]},E.s))})]}),o.jsxs("div",{className:"md:w-7/12 p-8 md:p-14 bg-white flex flex-col justify-center relative",children:[r===0&&o.jsxs("div",{className:"animate-fadeIn",children:[o.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-2 uppercase",children:"Your Profile"}),o.jsx("p",{className:"text-slate-500 text-sm mb-8",children:"Confirm your name and email to start using the app."}),o.jsxs("form",{onSubmit:C,className:"space-y-5",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-black uppercase text-slate-400 mb-2 tracking-widest ml-1",children:"Full Name"}),o.jsx("input",{type:"text",autoFocus:!0,required:!0,className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-xl outline-none font-bold text-slate-800",value:d,onChange:E=>f(E.target.value),placeholder:"e.g. John Smith"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-black uppercase text-slate-400 mb-2 tracking-widest ml-1",children:"Login Email"}),o.jsx("input",{type:"email",required:!0,className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-xl outline-none font-bold text-slate-800",value:u,onChange:E=>p(E.target.value.toLowerCase()),placeholder:"email@company.com"})]}),N&&o.jsx("div",{className:"p-3 bg-red-50 text-red-600 text-xs font-bold rounded-lg",children:N}),o.jsx("button",{type:"submit",className:"w-full py-4 bg-slate-900 text-white font-black rounded-xl uppercase tracking-widest text-xs mt-4",children:"Next Step"})]})]}),r===1&&o.jsxs("div",{className:"animate-fadeIn",children:[o.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-2 uppercase",children:"Secure Your Account"}),o.jsx("p",{className:"text-slate-500 text-sm mb-8",children:"Create a password you will use to log in next time."}),o.jsxs("form",{onSubmit:C,className:"space-y-4",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsx("input",{type:"password",autoFocus:!0,required:!0,className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-xl outline-none font-bold text-slate-800",value:m,onChange:E=>h(E.target.value),placeholder:"New Password"}),o.jsx("input",{type:"password",required:!0,className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-xl outline-none font-bold text-slate-800",value:g,onChange:E=>w(E.target.value),placeholder:"Repeat Password"})]}),N&&o.jsx("div",{className:"text-red-600 text-xs font-bold bg-red-50 p-3 rounded-lg",children:N}),o.jsx("button",{type:"submit",className:"w-full py-4 bg-slate-900 text-white font-black rounded-xl uppercase tracking-widest text-xs mt-4",children:"Continue"})]})]}),r===2&&o.jsxs("div",{className:"animate-fadeIn",children:[o.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-2 uppercase",children:"Email Settings"}),o.jsx("p",{className:"text-slate-500 text-sm mb-8",children:"Choose which inspections you want to be notified about."}),o.jsxs("div",{className:"space-y-4 mb-8",children:[o.jsxs("label",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl border border-slate-200 cursor-pointer",children:[o.jsx("span",{className:"text-sm font-bold text-slate-800",children:"Send Email Alerts"}),o.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded text-blue-600",checked:x.emailNotifications,onChange:()=>v(E=>({...E,emailNotifications:!E.emailNotifications}))})]}),o.jsx("div",{className:`grid grid-cols-2 gap-3 ${!x.emailNotifications&&"opacity-30 pointer-events-none"}`,children:[{k:"notifyGeneral",l:"General"},{k:"notifyPetroleum",l:"Petro V1"},{k:"notifyPetroleumV2",l:"Petro V2"},{k:"notifyAcid",l:"Acid"}].map(E=>o.jsxs("label",{className:"flex items-center justify-between p-3 bg-white border border-slate-100 rounded-lg cursor-pointer",children:[o.jsx("span",{className:"text-[10px] font-bold text-slate-500 uppercase",children:E.l}),o.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-blue-600",checked:x[E.k],onChange:()=>v(k=>({...k,[E.k]:!k[E.k]}))})]},E.k))})]}),N&&o.jsx("div",{className:"p-3 bg-red-50 text-red-600 text-xs font-bold rounded-lg mb-4",children:N}),o.jsx("button",{onClick:b,disabled:i,className:"w-full py-4 bg-blue-600 text-white font-black rounded-xl uppercase tracking-widest text-xs flex items-center justify-center gap-2",children:i?"Saving...":"Finish Setup"})]}),r===3&&o.jsxs("div",{className:"text-center animate-fadeIn",children:[o.jsx("div",{className:"w-20 h-20 bg-emerald-50 rounded-full flex items-center justify-center mx-auto mb-8 border border-emerald-100 text-emerald-600",children:o.jsx("svg",{className:"w-10 h-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"3",children:o.jsx("path",{d:"M5 13l4 4L19 7"})})}),o.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-2 uppercase",children:"Account Ready"}),o.jsx("p",{className:"text-slate-500 text-sm mb-10",children:"Your profile is all set. You can now access the fleet portal."}),o.jsx("button",{onClick:()=>n({...e,username:u,name:d,preferences:x,needsSetup:!1}),className:"w-full py-5 bg-slate-900 text-white font-black rounded-2xl uppercase tracking-[0.2em] text-[11px]",children:"Open Dashboard"})]})]})]})})},Pn=[{targetId:"sidebar-toggle",title:"Navigation Menu",description:"Access all inspection modules, settings, and support from here.",position:"top-left"},{targetId:"start-inspection-btn",title:"Start Inspection",description:"Click here to begin a new vehicle check. The system will guide you through all required steps.",position:"center"},{targetId:"notification-bell",title:"Alerts Center",description:"Stay updated with critical vehicle failures and system broadcasts.",position:"top-right"},{targetId:"sync-status-btn",title:"Offline Sync",description:"Works offline! When internet is restored, click here to sync pending reports.",position:"top-right"},{targetId:"support",title:"Help & Support",description:"Need assistance? Report issues, request features, or contact admins here.",position:"bottom-left"}],kS=({onComplete:e})=>{const[t,n]=_.useState(0),[r,s]=_.useState({}),[i,l]=_.useState({});_.useEffect(()=>{const u=()=>{const m=Pn[t],h=document.getElementById(m.targetId);if(h){const g=h.getBoundingClientRect();s({position:"fixed",top:g.top,left:g.left,width:g.width,height:g.height,borderRadius:"8px",boxShadow:"0 0 0 9999px rgba(15, 23, 42, 0.75)",zIndex:100,pointerEvents:"none",transition:"all 0.4s ease-out"});const w=320;let N=g.bottom+15,S=g.left;m.position==="top-right"?S=Math.max(10,g.right-w):m.position==="bottom-left"&&N+200>window.innerHeight&&(N=g.top-200),S+w>window.innerWidth&&(S=window.innerWidth-w-20),S<10&&(S=10),l({position:"fixed",top:N,left:S,zIndex:101,transition:"all 0.4s ease-out"})}else s({display:"none"}),l({position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:101})},p=setTimeout(u,100);return window.addEventListener("resize",u),()=>{window.removeEventListener("resize",u),clearTimeout(p)}},[t]);const d=()=>{t<Pn.length-1?n(u=>u+1):e()},f=Pn[t];return o.jsxs("div",{className:"fixed inset-0 z-[200]",children:[o.jsx("div",{style:r,className:"ring-4 ring-white/20 animate-pulse"}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-6 w-80 animate-fadeIn border border-slate-100",style:i,children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsxs("span",{className:"text-[10px] font-bold text-white bg-indigo-600 px-2 py-1 rounded uppercase tracking-wide shadow-sm",children:["Tip ",t+1," / ",Pn.length]}),o.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors p-1 hover:bg-gray-100 rounded",children:o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-2",children:f.title}),o.jsx("p",{className:"text-sm text-slate-600 leading-relaxed mb-6 font-medium",children:f.description}),o.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-slate-100",children:[o.jsx("div",{className:"flex gap-1.5",children:Pn.map((u,p)=>o.jsx("div",{className:`w-2 h-2 rounded-full transition-all duration-300 ${p===t?"bg-indigo-600 w-4":"bg-gray-200"}`},p))}),o.jsxs("button",{onClick:d,className:"px-5 py-2.5 bg-slate-900 hover:bg-slate-800 text-white text-xs font-bold rounded-xl shadow-lg transition-transform active:scale-95 flex items-center gap-2",children:[t===Pn.length-1?"Finish":"Next",o.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]})]})]})]})},TS=()=>{const[e,t]=_.useState(null),[n,r]=_.useState(!1),[s,i]=_.useState(!1);_.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone)return;const u=localStorage.getItem("sc_install_dismissed");if(u){const h=new Date(parseInt(u)),w=Math.abs(new Date().getTime()-h.getTime());if(Math.ceil(w/(1e3*60*60*24))<7)return}const p=window.navigator.userAgent.toLowerCase(),m=/iphone|ipad|ipod/.test(p);if(i(m),m)setTimeout(()=>r(!0),3e3);else{const h=g=>{g.preventDefault(),t(g),r(!0)};return window.addEventListener("beforeinstallprompt",h),()=>{window.removeEventListener("beforeinstallprompt",h)}}},[]);const l=async()=>{if(!e)return;e.prompt();const{outcome:f}=await e.userChoice;f==="accepted"&&r(!1),t(null)},d=()=>{r(!1),localStorage.setItem("sc_install_dismissed",Date.now().toString())};return n?o.jsx("div",{className:"fixed bottom-4 left-4 right-4 z-[9999] md:left-auto md:right-4 md:w-96 animate-fadeIn",children:o.jsxs("div",{className:"bg-slate-900/95 backdrop-blur-md text-white p-4 rounded-2xl shadow-2xl border border-slate-700 flex flex-col gap-4",children:[o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:"bg-white/10 p-2.5 rounded-xl shrink-0",children:o.jsx("img",{src:"https://cdn-icons-png.flaticon.com/512/716/716766.png",alt:"Logo",className:"w-8 h-8 object-contain"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"font-bold text-sm",children:"Install SafetyCheck Pro"}),o.jsx("p",{className:"text-xs text-slate-300 mt-1 leading-relaxed",children:"Add to your home screen for offline access, full-screen view, and faster performance."})]}),o.jsx("button",{onClick:d,className:"text-slate-400 hover:text-white p-1",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),s?o.jsxs("div",{className:"bg-white/10 rounded-lg p-3 text-xs text-slate-300 flex items-center gap-3",children:[o.jsx("span",{className:"text-xl",children:""}),o.jsxs("span",{children:["Tap the ",o.jsx("span",{className:"font-bold text-white",children:"Share"})," button below and select ",o.jsx("span",{className:"font-bold text-white",children:'"Add to Home Screen"'})," [+]"]})]}):o.jsxs("button",{onClick:l,className:"w-full py-2.5 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl text-sm transition-colors shadow-lg flex items-center justify-center gap-2",children:[o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Install App"]})]})}):null},IS=({onLogin:e,appScriptUrl:t,setAppScriptUrl:n,settings:r})=>{const[s,i]=_.useState(""),[l,d]=_.useState(""),[f,u]=_.useState(!1),[p,m]=_.useState(!1),[h,g]=_.useState(""),[w,N]=_.useState(!1),[S,x]=_.useState(""),[v,y]=_.useState(""),[C,b]=_.useState(!1),[E,k]=_.useState(!1),[T,I]=_.useState(t);_.useEffect(()=>{const P=localStorage.getItem("sc_remembered_creds");if(P)try{const{u:A,p:F}=JSON.parse(atob(P));i(A),d(F),u(!0)}catch{localStorage.removeItem("sc_remembered_creds")}},[]);const M=async P=>{if(P.preventDefault(),!t||!t.startsWith("https://script.google.com")){g("System connection not configured. Please click the setup icon below."),k(!0);return}g(""),m(!0);try{const z=await(await fetch(t,{method:"POST",body:JSON.stringify(w?{action:"register_user",username:s,password:l,name:S,position:v,role:"SuperAdmin"}:{action:"login",username:s,password:l})})).json();if(z.status==="success"){const J=z.user;if(f&&l){const j=btoa(JSON.stringify({u:s,p:l}));localStorage.setItem("sc_remembered_creds",j)}else localStorage.removeItem("sc_remembered_creds");if(w)g("Admin account created. Log in now."),N(!1),x(""),y(""),d("");else{let j="Inspector";const H=J.role?String(J.role).trim().toLowerCase():"";H==="superadmin"?j="SuperAdmin":H==="admin"?j="Admin":H==="operations"?j="Operations":H==="maintenance"?j="Maintenance":H==="secretary"?j="Secretary":H==="other"&&(j="Other"),e({...J,role:j,position:J.position||"",needsSetup:!J.name})}}else z.code==="NO_USERS"?(g("Initial setup needed. Create Master Admin."),N(!0)):g(z.message||"Authentication failed.")}catch{g("Unable to reach server. Check your Internet and Engine URL.")}finally{m(!1)}},L=()=>{T.startsWith("https://script.google.com")?(n(T),localStorage.setItem("safetyCheck_scriptUrl",T),k(!1),g("")):alert("Please enter a valid Google Apps Script Executable URL.")},R=t&&t.startsWith("https://script.google.com");return o.jsxs("div",{className:"h-screen w-full bg-slate-50 flex flex-col md:flex-row font-sans text-slate-700 overflow-hidden",children:[o.jsxs("div",{className:"w-full md:w-[35%] lg:w-[30%] bg-emerald-950 p-4 sm:p-6 md:p-12 flex flex-col justify-between relative overflow-hidden shrink-0 border-b md:border-b-0 border-emerald-900 shadow-xl z-10",children:[o.jsx("div",{className:"absolute top-0 left-0 w-full h-full pointer-events-none opacity-10",children:o.jsx("div",{className:"absolute -top-10 -left-10 w-64 h-64 bg-emerald-400 rounded-full blur-[80px]"})}),o.jsxs("div",{className:"relative z-10 flex md:block items-center justify-between",children:[o.jsx("div",{className:"bg-white p-1.5 rounded-xl inline-block shadow-lg",children:r.companyLogo&&!C?o.jsx("img",{src:r.companyLogo,alt:"Logo",className:"h-6 sm:h-8 md:h-12 w-auto object-contain",onError:()=>b(!0)}):o.jsxs("div",{className:"flex items-center gap-1.5 px-1",children:[o.jsx("svg",{className:"w-5 h-5 text-emerald-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),o.jsx("span",{className:"font-black text-emerald-950 text-sm md:text-xl tracking-tight uppercase",children:"SafetyPro"})]})}),o.jsxs("div",{className:"md:mt-8 text-right md:text-left",children:[o.jsx("h1",{className:"text-sm sm:text-lg md:text-3xl font-black text-white leading-tight uppercase",children:r.companyName||"SafetyPro Fleet"}),o.jsx("p",{className:"text-emerald-400 font-bold uppercase tracking-widest text-[7px] sm:text-[9px] mt-0.5 opacity-60",children:"fleet inspection portal"})]})]}),o.jsxs("div",{className:"relative z-10 mt-2 sm:mt-4 space-y-2 sm:space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2 animate-fadeIn group",onClick:()=>k(!0),children:[o.jsx("div",{className:`w-[3px] h-4 rounded-full transition-all duration-500 
                    ${p?"bg-blue-400 animate-pulse":R?"bg-emerald-500 shadow-sm":"bg-red-500 shadow-[0_0_10px_rgba(239,68,68,0.5)]"}`}),o.jsx("div",{className:"flex flex-col",children:o.jsx("span",{className:`text-[8px] sm:text-[9px] font-black tracking-widest leading-none uppercase 
                        ${p?"text-blue-200":R?"text-white":"text-red-300"}`,children:p?"Processing":R?"Engine Online":"Server Offline"})})]}),o.jsx("div",{className:"hidden sm:block border-t border-white/5 pt-2 sm:pt-4",children:o.jsx("span",{className:"text-[7px] sm:text-[8px] text-emerald-100/30 font-medium uppercase tracking-[0.2em]",children:" SCBC FLEET SOLUTIONS 2026"})})]})]}),o.jsxs("div",{className:"flex-1 flex flex-col bg-white overflow-hidden relative",children:[o.jsx("div",{className:"flex-1 px-6 flex items-center justify-center",children:o.jsxs("div",{className:"w-full max-w-sm mx-auto",children:[o.jsxs("div",{className:"mb-4 sm:mb-8 text-center md:text-left",children:[o.jsx("h2",{className:"text-xl sm:text-2xl font-black text-slate-800 tracking-tight",children:w?"Admin Setup":"Login"}),o.jsx("p",{className:"text-slate-400 text-xs sm:text-sm mt-0.5 font-medium",children:w?"Create system owner account.":"Sign in to access inspections."})]}),h&&o.jsx("div",{className:`mb-4 p-3 rounded-lg text-[11px] font-medium border animate-fadeIn
                ${h.includes("created")?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-100"}`,children:h}),o.jsxs("form",{onSubmit:M,className:"space-y-4 sm:space-y-5",children:[w&&o.jsxs("div",{className:"space-y-3 bg-slate-50/50 p-4 rounded-xl border border-slate-100 mb-2",children:[o.jsx("input",{type:"text",required:!0,className:"w-full px-4 py-2.5 bg-white border border-slate-200 rounded-lg outline-none text-xs sm:text-sm font-bold",value:S,onChange:P=>x(P.target.value),placeholder:"Full Name"}),o.jsx("input",{type:"text",required:!0,className:"w-full px-4 py-2.5 bg-white border border-slate-200 rounded-lg outline-none text-xs sm:text-sm font-bold",value:v,onChange:P=>y(P.target.value),placeholder:"Job Title"})]}),o.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[o.jsx("input",{type:"email",required:!0,className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-lg focus:bg-white focus:border-emerald-500 outline-none font-bold text-xs sm:text-sm",value:s,onChange:P=>i(P.target.value),placeholder:"Email Address"}),!w&&o.jsxs("div",{className:"space-y-1",children:[o.jsx("input",{type:"password",className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-lg focus:bg-white focus:border-emerald-500 outline-none font-bold text-xs sm:text-sm",value:l,onChange:P=>d(P.target.value),placeholder:"Password"}),o.jsx("p",{className:"text-[9px] sm:text-[10px] text-slate-400 px-1",children:"First-time login? Leave blank if invited."})]}),w&&o.jsx("input",{type:"password",required:!0,className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-lg outline-none font-bold text-xs sm:text-sm",value:l,onChange:P=>d(P.target.value),placeholder:"Setup Password"})]}),o.jsx("div",{className:"flex items-center justify-between px-1",children:o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group select-none",children:[o.jsx("input",{type:"checkbox",className:"w-3.5 h-3.5 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500",checked:f,onChange:P=>u(P.target.checked)}),o.jsx("span",{className:"text-[11px] text-slate-400 font-medium group-hover:text-slate-600",children:"Stay signed in"})]})}),o.jsx("div",{className:"pt-2 sm:pt-4",children:o.jsxs("button",{type:"submit",disabled:p||!R,className:`w-full h-12 sm:h-14 rounded-xl font-bold text-white shadow-lg transition-all text-[11px] uppercase tracking-widest active:scale-[0.98] flex items-center justify-center gap-3
                    ${R?p?"bg-emerald-900 cursor-wait":"bg-slate-900 hover:bg-black":"bg-slate-200 cursor-not-allowed text-slate-400 shadow-none"}`,children:[p?o.jsxs("svg",{className:"animate-spin h-5 w-5 text-emerald-400",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):null,p?"Verifying...":w?"Create Admin":"Sign In"]})})]})]})}),o.jsx("button",{onClick:()=>k(!E),className:"absolute bottom-6 right-6 p-3 text-slate-300 hover:text-indigo-600 transition-colors",title:"Engine Configuration",children:o.jsxs("svg",{className:`w-5 h-5 ${R?"":"text-red-400 animate-pulse"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),o.jsx("circle",{cx:"12",cy:"12",r:"3"})]})}),E&&o.jsx("div",{className:"absolute inset-0 bg-white/95 backdrop-blur-sm z-20 flex flex-col items-center justify-center p-8 animate-fadeIn",children:o.jsxs("div",{className:"w-full max-w-sm space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-black text-slate-800 uppercase tracking-tight",children:"System Infrastructure"}),o.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Configure your private Google Apps Script backend URL to connect the fleet database."})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Script Deployment URL"}),o.jsx("input",{type:"text",className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-xl text-xs font-mono outline-none focus:ring-4 focus:ring-indigo-50",placeholder:"https://script.google.com/macros/s/...",value:T,onChange:P=>I(P.target.value)})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:()=>k(!1),className:"flex-1 py-3 border border-slate-200 rounded-xl text-[10px] font-black uppercase tracking-widest text-slate-400 hover:bg-slate-50 transition-all",children:"Cancel"}),o.jsx("button",{onClick:L,className:"flex-1 py-3 bg-indigo-600 text-white rounded-xl text-[10px] font-black uppercase tracking-widest shadow-lg shadow-indigo-100 hover:bg-indigo-700 active:scale-95 transition-all",children:"Apply Connection"})]})]})}),o.jsx("div",{className:"sm:hidden text-center pb-4",children:o.jsx("span",{className:"text-[7px] text-slate-300 font-medium uppercase tracking-[0.2em]",children:" SCBC FLEET SOLUTIONS 2026"})})]})]})},AS=({settings:e,setSettings:t,handleSaveSettings:n,isSavingSettings:r,user:s})=>{const[i,l]=_.useState(!1);_.useEffect(()=>{l(!1)},[e.companyLogo]);const d=(s==null?void 0:s.role)==="SuperAdmin"||(s==null?void 0:s.role)==="Admin";return o.jsxs("div",{className:"max-w-4xl mx-auto animate-fadeIn space-y-8 pb-12 font-sans",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-black text-slate-800 uppercase tracking-tight",children:"Account Settings"}),o.jsx("p",{className:"text-slate-400 text-[10px] font-bold uppercase tracking-[0.3em] mt-1",children:"Workspace & Brand Identity"})]}),o.jsxs("div",{className:"bg-white p-10 rounded-3xl shadow-sm border border-slate-100 space-y-8",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-800 uppercase tracking-tight",children:"Organization Profile"}),!d&&o.jsx("span",{className:"text-[10px] font-bold text-amber-600 bg-amber-50 px-3 py-1.5 rounded-full border border-amber-100 uppercase tracking-widest",children:"Read Only Access"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase tracking-[0.2em] ml-1",children:"Company Name"}),o.jsx("input",{type:"text",disabled:!d,value:e.companyName,onChange:f=>t(u=>({...u,companyName:f.target.value})),className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl font-bold text-slate-700 focus:ring-2 focus:ring-indigo-500/20 outline-none transition-all disabled:opacity-50"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase tracking-[0.2em] ml-1",children:"Support/Admin Email"}),o.jsx("input",{type:"email",disabled:!d,value:e.managerEmail,onChange:f=>t(u=>({...u,managerEmail:f.target.value})),className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl font-bold text-slate-700 focus:ring-2 focus:ring-indigo-500/20 outline-none transition-all disabled:opacity-50"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase tracking-[0.2em] ml-1",children:"Public Portal URL (Sharing Link)"}),o.jsx("input",{type:"url",disabled:!d,value:e.webAppUrl||"",onChange:f=>t(u=>({...u,webAppUrl:f.target.value})),placeholder:"https://yourcompany.github.io/safetycheck/",className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl font-bold text-slate-700 focus:ring-2 focus:ring-indigo-500/20 outline-none transition-all disabled:opacity-50"}),o.jsx("p",{className:"text-[9px] text-slate-400 ml-1",children:"This link is used when sharing the app via the Support Center."})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase tracking-[0.2em] ml-1",children:"Brand Logo (Base64/URL)"}),o.jsx("textarea",{disabled:!d,value:e.companyLogo,onChange:f=>t(u=>({...u,companyLogo:f.target.value})),className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl font-mono text-[10px] text-slate-500 h-24 outline-none focus:ring-2 focus:ring-indigo-500/20 disabled:opacity-50",placeholder:"Paste logo image string here..."})]}),d&&o.jsx("div",{className:"flex justify-end pt-4 border-t border-slate-50",children:o.jsxs("button",{onClick:n,disabled:r,className:"px-10 py-4 bg-slate-900 hover:bg-black text-white rounded-2xl font-black shadow-xl shadow-slate-200 flex items-center justify-center gap-3 transition-all active:scale-95 disabled:opacity-50 uppercase tracking-[0.2em] text-xs",children:[r&&o.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Synchronize Profile"]})})]})]})},RS=({isLocked:e,children:t,isSuperAdmin:n,onUnlock:r,lockReason:s="license",maintenanceMessage:i})=>o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:`transition-all duration-500 ${e?"opacity-40 pointer-events-none select-none grayscale":""}`,children:t}),e&&o.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white/95 border border-slate-200 rounded-2xl shadow-2xl p-6 max-w-sm w-full text-center transform scale-100 animate-fadeIn",children:[o.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mx-auto mb-4 shadow-inner ${s==="maintenance"?"bg-amber-100":"bg-red-100"}`,children:s==="maintenance"?o.jsx("svg",{className:"w-7 h-7 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}):o.jsx("svg",{className:"w-7 h-7 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),o.jsx("h2",{className:"text-xl font-black text-slate-800 mb-1",children:"Action Restricted"}),o.jsx("div",{className:"text-[11px] text-slate-500 mb-4 leading-relaxed",children:s==="maintenance"?o.jsxs("p",{children:["System is in ",o.jsx("strong",{children:"View-Only"})," mode for scheduled maintenance.",o.jsx("br",{}),o.jsxs("span",{className:"text-slate-400 mt-1 block italic",children:['"',i||"Updating core services...",'"']})]}):o.jsxs("p",{children:["System is in ",o.jsx("strong",{children:"View-Only"})," mode because the license has expired. No new records or updates can be added."]})}),n&&s==="license"?o.jsx("button",{onClick:r,className:"w-full py-3 bg-red-600 hover:bg-red-700 text-white font-bold rounded-xl transition-all shadow-lg shadow-red-200 flex items-center justify-center gap-2 text-xs uppercase tracking-widest",children:"Manage License"}):n&&s==="maintenance"?o.jsx("button",{onClick:r,className:"w-full py-3 bg-slate-900 hover:bg-black text-white font-bold rounded-xl transition-all shadow-lg flex items-center justify-center gap-2 text-xs uppercase tracking-widest",children:"Security Console"}):o.jsx("div",{className:"bg-slate-50 border border-slate-100 rounded-xl p-3",children:o.jsx("p",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest leading-normal",children:s==="maintenance"?"Please check back later once maintenance is complete.":"Please notify your supervisor to restore full administrative access."})})]})})]}),ri=({title:e,description:t,icon:n,colorTheme:r,stats:s,startNewInspection:i,fetchHistory:l,isLoadingHistory:d,historyList:f,onViewReport:u,onPrint:p,userRole:m,titlePrefix:h="INSPECTION",isLocked:g=!1,lockReason:w="license",maintenanceMessage:N})=>{const[S,x]=_.useState(""),v=_.useMemo(()=>{let E=f;if(S.trim()){const k=S.toLowerCase();E=E.filter(T=>T.truckNo&&T.truckNo.toLowerCase().includes(k)||T.driverName&&T.driverName.toLowerCase().includes(k)||T.inspectedBy&&T.inspectedBy.toLowerCase().includes(k))}else E=E.slice(0,10);return E},[f,S]),y=m==="SuperAdmin",C=(m==="Admin"||m==="Inspector"||m==="SuperAdmin")&&!g,b={text:"text-slate-600",bg:"bg-slate-50"};return o.jsxs("div",{className:"max-w-5xl mx-auto space-y-6 animate-fadeIn py-1",children:[o.jsx(RS,{isLocked:g,lockReason:w,maintenanceMessage:N,isSuperAdmin:y,children:o.jsxs("div",{className:"bg-white rounded-[2rem] p-8 border border-slate-100 shadow-sm flex flex-col md:flex-row justify-between items-center gap-8",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("span",{className:`p-2.5 rounded-2xl ${b.bg} ${b.text} shadow-inner`,children:n}),o.jsx("h2",{className:"text-2xl font-medium text-slate-800 tracking-tight uppercase",children:e})]}),t&&o.jsx("p",{className:"text-slate-500 text-xs leading-relaxed max-w-md font-normal mb-6",children:t}),o.jsxs("div",{className:"flex flex-wrap gap-4",children:[C&&o.jsxs("button",{onClick:i,className:"relative px-7 py-3 bg-slate-900 hover:bg-slate-800 text-white text-[11px] font-black rounded-2xl transition-all flex items-center gap-3 uppercase tracking-[0.2em] shadow-[0_10px_20px_-5px_rgba(15,23,42,0.3)] hover:shadow-[0_15px_25px_-5px_rgba(15,23,42,0.4)] active:scale-[0.96] group/btn border-t border-white/10",children:[o.jsx("div",{className:"w-5 h-5 bg-white/10 rounded-lg flex items-center justify-center group-hover/btn:scale-110 group-hover/btn:rotate-90 transition-all duration-300",children:o.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"3",children:o.jsx("path",{d:"M12 4v16m8-8H4"})})}),"New Check"]}),o.jsxs("button",{onClick:()=>l(!0),disabled:d,className:"px-6 py-3 bg-white border border-slate-200 text-slate-500 text-[10px] font-bold rounded-2xl hover:bg-slate-50 hover:text-slate-800 transition-all flex items-center gap-2.5 uppercase tracking-widest active:scale-95 shadow-sm disabled:opacity-50 disabled:cursor-wait",children:[o.jsx("svg",{className:`w-4 h-4 ${d?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:o.jsx("path",{d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh History"]})]})]}),o.jsxs("div",{className:"flex gap-5",children:[o.jsxs("div",{className:"bg-slate-50 rounded-[1.5rem] p-5 text-center min-w-[100px] border border-slate-100 shadow-inner",children:[o.jsx("div",{className:"text-3xl font-medium text-slate-800 leading-none",children:s.total}),o.jsx("div",{className:"text-[9px] text-slate-400 uppercase font-medium tracking-[0.2em] mt-3",children:"Verified"})]}),o.jsxs("div",{className:"bg-emerald-50 rounded-[1.5rem] p-5 text-center min-w-[100px] border border-emerald-100 shadow-inner",children:[o.jsxs("div",{className:"text-3xl font-medium text-emerald-600 leading-none",children:[s.passRate,"%"]}),o.jsx("div",{className:"text-[9px] text-slate-400 uppercase font-medium tracking-[0.2em] mt-3",children:"Pass Rate"})]})]})]})}),o.jsxs("div",{className:"bg-white rounded-[2rem] border border-slate-100 overflow-hidden shadow-sm",children:[o.jsxs("div",{className:"px-8 py-5 border-b border-slate-50 flex justify-between items-center bg-slate-50/30",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("h3",{className:"text-[10px] font-medium text-slate-400 uppercase tracking-[0.3em]",children:"Audit History"}),g&&o.jsx("span",{className:"text-[9px] font-black text-red-600 bg-red-50 px-2 py-0.5 rounded border border-red-100 uppercase tracking-tighter",children:w==="maintenance"?"Maintenance Access":"Read Only Access"})]}),o.jsxs("div",{className:"relative",children:[o.jsx("svg",{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-slate-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),o.jsx("input",{type:"text",placeholder:"Search assets...",value:S,onChange:E=>x(E.target.value),className:"w-44 pl-10 pr-4 py-2 bg-white border border-slate-200 rounded-xl text-[11px] outline-none font-normal focus:ring-2 focus:ring-indigo-500/10 focus:border-indigo-500 transition-all placeholder:text-slate-300"})]})]}),d?o.jsxs("div",{className:"py-24 text-center",children:[o.jsx("div",{className:"w-10 h-10 border-4 border-slate-100 border-t-slate-900 rounded-full animate-spin mx-auto mb-5"}),o.jsx("p",{className:"text-[10px] font-medium text-slate-400 uppercase tracking-[0.3em]",children:"Syncing Records"})]}):v.length===0?o.jsx("div",{className:"py-24 text-center text-[11px] font-medium text-slate-300 uppercase tracking-[0.3em]",children:"Vault is empty"}):o.jsxs("div",{className:"w-full",children:[o.jsxs("div",{className:"hidden md:grid grid-cols-12 px-8 py-5 border-b border-slate-50 bg-slate-50/10 text-[10px] font-medium text-slate-400 uppercase tracking-[0.25em]",children:[o.jsx("div",{className:"col-span-1",children:"Rate"}),o.jsx("div",{className:"col-span-3",children:"Vehicle Asset"}),o.jsx("div",{className:"col-span-3",children:"Audit Date"}),o.jsx("div",{className:"col-span-3",children:"Personnel"}),o.jsx("div",{className:"col-span-2 text-right",children:"Document"})]}),o.jsx("div",{className:"divide-y divide-slate-50",children:v.map((E,k)=>o.jsxs("div",{className:"md:grid md:grid-cols-12 flex flex-col md:items-center px-8 py-6 hover:bg-slate-50/30 transition-colors gap-4 md:gap-0 relative group",children:[o.jsx("div",{className:"col-span-1",children:o.jsx("span",{className:`inline-flex items-center justify-center w-8 h-8 rounded-xl text-[12px] font-medium text-white shadow-sm
                                          ${Number(E.rate)>=4?"bg-emerald-500":Number(E.rate)===3?"bg-amber-500":"bg-rose-500"}
                                      `,children:E.rate})}),o.jsxs("div",{className:"col-span-3 min-w-0",children:[o.jsx("div",{className:"md:hidden text-[9px] font-medium text-slate-300 uppercase tracking-widest mb-1",children:"Vehicle Asset"}),o.jsx("div",{className:"font-medium text-slate-800 text-base leading-tight truncate uppercase tracking-tight",children:E.truckNo}),E.trailerNo&&o.jsx("div",{className:"text-[10px] text-slate-400 font-normal uppercase tracking-wide mt-0.5",children:E.trailerNo})]}),o.jsxs("div",{className:"col-span-3",children:[o.jsx("div",{className:"md:hidden text-[9px] font-medium text-slate-300 uppercase tracking-widest mb-1",children:"Audit Date"}),o.jsx("div",{className:"text-xs font-normal text-slate-700",children:new Date(E.timestamp).toLocaleDateString()}),o.jsx("div",{className:"text-[9px] text-slate-400 font-normal uppercase mt-0.5",children:new Date(E.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),o.jsxs("div",{className:"col-span-3",children:[o.jsx("div",{className:"md:hidden text-[9px] font-medium text-slate-300 uppercase tracking-widest mb-1",children:"Personnel"}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"hidden md:flex w-8 h-8 rounded-xl bg-slate-100 items-center justify-center text-[10px] font-medium text-slate-400 border border-slate-200 uppercase shadow-sm",children:String(E.inspectedBy||"?").charAt(0)}),o.jsx("span",{className:"text-slate-600 font-normal text-xs truncate",children:E.inspectedBy})]})]}),o.jsx("div",{className:"col-span-2 text-right border-t md:border-none pt-4 md:pt-0",children:o.jsxs("button",{onClick:()=>u(E),className:"w-full md:w-auto inline-flex items-center justify-center gap-2 px-5 py-2.5 text-[10px] font-bold text-indigo-600 bg-indigo-50 hover:bg-indigo-600 hover:text-white rounded-xl transition-all uppercase tracking-widest border border-indigo-100 shadow-sm active:scale-95 group/btn",children:[o.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:[o.jsx("path",{d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),o.jsx("path",{d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View Report"]})})]},k))})]})]})]})},MS=e=>o.jsx(ri,{...e,title:"General Inspection",description:"",icon:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),colorTheme:"slate",titlePrefix:"VEHICLE INSPECTION"}),PS=e=>o.jsx(ri,{...e,title:"Petroleum V1 Inspection",description:"",icon:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),colorTheme:"orange",titlePrefix:"PETROLEUM INSPECTION"}),jS=e=>o.jsx(ri,{...e,title:"Petroleum V2 Inspection",description:"",icon:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),colorTheme:"rose",titlePrefix:"PETROLEUM V2 INSPECTION"}),LS=e=>o.jsx(ri,{...e,title:"Acid Inspection",description:"",icon:o.jsxs("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("path",{d:"M12 2l-5.5 9h11z"}),o.jsx("path",{d:"M10 13v6h4v-6z"})]}),colorTheme:"purple",titlePrefix:"ACID TANKER INSPECTION"}),mn=({label:e,value:t,onChange:n,options:r=[],placeholder:s,isRegNo:i,isTitleCase:l,readOnly:d,error:f})=>{const[u,p]=_.useState(!1),[m,h]=_.useState(-1),g=_.useRef(null),w=_.useRef(null),N=r.filter(y=>y!=null&&String(y).toLowerCase().includes((t||"").toLowerCase()));_.useEffect(()=>{function y(C){g.current&&!g.current.contains(C.target)&&p(!1)}return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[g]);const S=y=>{if(d)return;let C=y.target.value;if(i){C=C.toUpperCase();let b=C.replace(/[^A-Z0-9]/g,"");b=b.replace(/([A-Z])(\d)/g,"$1 $2"),b=b.replace(/(\d)([A-Z])/g,"$1 $2"),C=b}l&&!i&&(C=C.replace(/\b\w/g,b=>b.toUpperCase())),n(C),p(!0),h(-1)},x=y=>{d||(n(String(y)),p(!1),h(-1))},v=y=>{d||(y.key==="ArrowDown"?(y.preventDefault(),h(C=>Math.min(C+1,N.length-1))):y.key==="ArrowUp"?(y.preventDefault(),h(C=>Math.max(C-1,0))):y.key==="Enter"?(y.preventDefault(),m>=0&&N[m]?x(N[m]):x(t)):y.key==="Escape"&&p(!1))};return o.jsxs("div",{className:"relative",ref:g,children:[o.jsxs("label",{className:`block text-xs font-bold uppercase mb-1.5 tracking-wide flex justify-between ${f?"text-red-600":"text-gray-500"}`,children:[e,d&&o.jsxs("span",{className:"text-[10px] bg-gray-100 text-gray-500 px-1.5 py-0.5 rounded flex items-center gap-1",children:[o.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"Verified"]})]}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{ref:w,type:"text",value:t,onChange:S,onFocus:()=>!d&&p(!0),onKeyDown:v,placeholder:s,readOnly:d,className:`w-full p-3.5 border rounded-lg transition-all font-medium 
             ${d?"bg-gray-100 border-gray-200 text-gray-500 cursor-not-allowed focus:outline-none":f?"bg-red-50 border-red-300 focus:ring-2 focus:ring-red-200 text-red-900 placeholder-red-300":"bg-gray-50 border-gray-200 focus:ring-2 focus:ring-blue-500 focus:bg-white text-gray-800 placeholder-gray-400"}
          `}),o.jsx("div",{className:`absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none ${f?"text-red-400":"text-gray-400"}`,children:d?o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}):f?o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}):o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),f&&o.jsx("p",{className:"text-[10px] text-red-500 font-bold mt-1 ml-1 animate-fadeIn",children:"This field is required"}),!d&&u&&(t.length>0||N.length>0)&&o.jsx("ul",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-xl max-h-60 overflow-y-auto",children:N.length>0?N.map((y,C)=>o.jsxs("li",{onClick:()=>x(y),className:`px-4 py-2.5 text-sm cursor-pointer transition-colors border-b border-gray-50 last:border-none flex justify-between items-center
                  ${C===m?"bg-blue-50 text-blue-700 font-medium":"text-gray-700 hover:bg-gray-50"}
                `,children:[y,i&&o.jsx("span",{className:"text-[10px] bg-gray-100 text-gray-500 px-1.5 py-0.5 rounded border border-gray-200",children:"EXISTING"})]},C)):o.jsxs("li",{onMouseDown:y=>{y.preventDefault(),x(t)},className:"px-4 py-3 text-sm text-blue-600 bg-blue-50 cursor-pointer font-medium flex items-center gap-2 hover:bg-blue-100 transition-colors",children:[o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),'Add New Entry: "',t,'"']})})]})},DS=({currentUser:e,appScriptUrl:t,showToast:n,validationLists:r,settings:s})=>{const[i,l]=_.useState([]),[d,f]=_.useState(!1),[u,p]=_.useState("list"),[m,h]=_.useState(!1),[g,w]=_.useState(""),[N,S]=_.useState({name:"",username:"",password:"",role:"Inspector",position:""}),[x,v]=_.useState(!1),y=e.role==="SuperAdmin",C=e.role==="Admin"||y;if(_.useEffect(()=>{C&&b()},[C]),!C)return o.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center font-sans",children:[o.jsx("div",{className:"w-16 h-16 bg-red-50 text-red-500 rounded-full flex items-center justify-center mb-4",children:o.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),o.jsx("h3",{className:"text-xl font-medium text-slate-800 tracking-tight",children:"Access Restricted"}),o.jsx("p",{className:"text-slate-500 max-w-xs mt-2 text-sm font-normal",children:"You do not have the required permissions to access Staff Management."})]});const b=async(R=!1)=>{if(t){f(!0);try{const A=await(await fetch(t,{method:"POST",body:JSON.stringify({action:"get_users"})})).json();A.status==="success"&&Array.isArray(A.users)&&l(A.users)}catch{n("Failed to load users","error")}finally{f(!1)}}},E=async R=>{if(window.confirm(`Remove user "${R}"?`)){f(!0);try{const A=await(await fetch(t,{method:"POST",body:JSON.stringify({action:"delete_user",username:R})})).json();A.status==="success"?(n("User removed successfully","success"),b()):n(A.message||"Delete failed","error")}catch{n("Connection failed","error")}finally{f(!1)}}},k=async R=>{if(R.username===e.username){n("You cannot restrict your own access.","warning");return}if(R.role==="SuperAdmin"){n("SuperAdmin access cannot be restricted.","error");return}const P=!R.isActive;l(A=>A.map(F=>F.username===R.username?{...F,isActive:P}:F));try{(await(await fetch(t,{method:"POST",body:JSON.stringify({action:"update_user",username:R.username,isActive:P})})).json()).status!=="success"?(l(z=>z.map(J=>J.username===R.username?{...J,isActive:!P}:J)),n("Failed to sync access state.","error")):n(`Access ${P?"restored":"restricted"} for ${R.name||R.username}`,"info")}catch{l(F=>F.map(z=>z.username===R.username?{...z,isActive:!P}:z)),n("Connection failed.","error")}},T=R=>{S({name:R.name||"",username:R.username,role:R.role,position:R.position||"",password:""}),w(R.username),h(!0),p("form")},I=async R=>{const A=`*${((s==null?void 0:s.companyName)||"Fleet Operations").toUpperCase()} - STAFF IDENTITY*

*Name:* ${R.name||"Setup Pending"}
*Role:* ${R.role}
*Job Title:* ${R.position||"N/A"}
*Login Email:* ${R.username}

_Security Notice: This confirms identity mapping in the Fleet Portal._`;if(navigator.share)try{await navigator.share({title:"Staff Identity Detail",text:A})}catch(F){F instanceof Error&&F.name!=="AbortError"&&M(A)}else M(A)},M=R=>{navigator.clipboard.writeText(R).then(()=>{n("Professional details copied to clipboard","success")}).catch(()=>{n("Failed to share details","error")})},L=async R=>{if(R.preventDefault(),!N.username){n("Login Email is required.","error");return}v(!0);try{const P={action:m?"update_user":"register_user",...N,preferences:{...m?{}:{mustChangePassword:!0}}};m&&(P.originalUsername=g);const F=await(await fetch(t,{method:"POST",body:JSON.stringify(P)})).json();F.status==="success"?(n(m?"Staff details updated":"Invite sent to new staff member","success"),p("list"),b()):n(F.message||"Operation failed","error")}catch{n("Connection failed","error")}finally{v(!1)}};return u==="form"?o.jsxs("div",{className:"max-w-lg mx-auto animate-fadeIn py-4 px-4 font-sans",children:[o.jsxs("button",{onClick:()=>p("list"),className:"mb-6 text-[10px] font-medium text-slate-400 hover:text-slate-800 flex items-center gap-2 transition-colors group uppercase tracking-widest",children:[o.jsx("svg",{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),"Back to Directory"]}),o.jsxs("div",{className:"bg-white rounded-3xl shadow-xl border border-slate-100 overflow-hidden p-6 sm:p-10",children:[o.jsx("h2",{className:"text-2xl font-normal text-slate-800 mb-2 uppercase tracking-tight leading-none",children:m?"Edit Profile":"Invite Staff"}),o.jsx("p",{className:"text-slate-400 text-[10px] font-normal mb-10 uppercase tracking-[0.2em]",children:"Configure workspace permissions"}),o.jsxs("form",{onSubmit:L,className:"space-y-6",children:[o.jsxs("div",{className:"space-y-5",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-normal uppercase text-slate-400 mb-2 tracking-[0.15em]",children:"Login Identity (Email) *"}),o.jsx("input",{type:"email",required:!0,className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl focus:ring-2 focus:ring-indigo-500 outline-none transition font-normal text-slate-700",value:N.username,onChange:R=>S({...N,username:R.target.value}),placeholder:"e.g. staff@company.com"})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-normal uppercase text-slate-400 mb-2 tracking-[0.15em]",children:"System Role"}),o.jsxs("select",{className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl text-sm font-normal text-slate-700 focus:ring-2 focus:ring-indigo-500 outline-none h-[58px] appearance-none",value:N.role,onChange:R=>S({...N,role:R.target.value}),children:[o.jsx("option",{value:"Inspector",children:"Inspector"}),o.jsx("option",{value:"Operations",children:"Operations"}),o.jsx("option",{value:"Maintenance",children:"Maintenance"}),o.jsx("option",{value:"Admin",children:"Admin"}),y&&o.jsx("option",{value:"SuperAdmin",children:"SuperAdmin"})]})]}),o.jsx(mn,{label:"Job Title",value:N.position,onChange:R=>S({...N,position:R}),options:r.positions,isTitleCase:!0,placeholder:"Optional"})]})]}),!m&&o.jsxs("div",{className:"p-4 bg-indigo-50 border border-indigo-100 rounded-2xl flex items-start gap-3",children:[o.jsx("svg",{className:"w-5 h-5 text-indigo-500 shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),o.jsxs("p",{className:"text-[10px] text-indigo-800 font-normal leading-relaxed uppercase tracking-wider",children:[o.jsx("strong",{children:"Security Notice:"})," New users will be prompted to establish their credentials upon first access via the invite email."]})]}),m&&o.jsx("div",{className:"pt-4 border-t border-slate-100",children:o.jsx(mn,{label:"Full Name",value:N.name,onChange:R=>S({...N,name:R}),options:r.inspectors,isTitleCase:!0})}),o.jsxs("button",{type:"submit",disabled:x,className:"w-full py-5 bg-slate-900 hover:bg-black text-white font-normal rounded-2xl shadow-xl transition-all active:scale-95 flex items-center justify-center gap-3 mt-4 uppercase tracking-[0.2em] text-xs",children:[x?o.jsxs("svg",{className:"animate-spin h-5 w-5 text-indigo-400",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):null,x?"Processing":m?"Update Profile":"Dispatch Invite"]})]})]})]}):o.jsxs("div",{className:"max-w-6xl mx-auto space-y-10 animate-fadeIn px-4 md:px-0 font-sans",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-normal text-slate-800 uppercase tracking-tight leading-none flex items-center gap-3",children:"Staff Directory"}),o.jsx("p",{className:"text-[10px] text-slate-400 font-normal uppercase tracking-[0.25em] mt-2",children:"Access Control & Identity Center"})]}),o.jsxs("button",{onClick:()=>{S({name:"",username:"",password:"",role:"Inspector",position:""}),h(!1),p("form")},className:"w-full sm:w-auto px-8 py-4 bg-slate-900 hover:bg-black text-white font-normal rounded-2xl shadow-xl transition-all flex items-center justify-center gap-2 group text-xs uppercase tracking-[0.2em]",children:[o.jsx("svg",{className:"w-5 h-5 group-hover:rotate-90 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),"New Member"]})]}),o.jsx("div",{className:"bg-white rounded-[2rem] shadow-sm border border-slate-100 overflow-hidden",children:o.jsxs("table",{className:"w-full text-left text-sm border-collapse block md:table",children:[o.jsx("thead",{className:"bg-slate-50 text-[10px] font-normal text-slate-400 uppercase tracking-[0.25em] border-b border-slate-100 hidden md:table-header-group",children:o.jsxs("tr",{className:"md:table-row",children:[o.jsx("th",{className:"px-10 py-6 md:table-cell",children:"Identity"}),o.jsx("th",{className:"px-10 py-6 md:table-cell",children:"Role"}),o.jsx("th",{className:"px-10 py-6 md:table-cell",children:"Access Control"}),o.jsx("th",{className:"px-10 py-6 text-right md:table-cell",children:"Actions"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-50 block md:table-row-group",children:i.map((R,P)=>{const A=R.role==="SuperAdmin",F=A&&!y;return o.jsxs("tr",{className:`hover:bg-slate-50/50 transition-colors group block md:table-row relative p-8 md:p-0 ${!R.isActive&&"opacity-60"}`,children:[o.jsx("td",{className:"md:px-10 md:py-6 block md:table-cell mb-6 md:mb-0",children:o.jsxs("div",{className:"flex items-center gap-5",children:[o.jsx("div",{className:"w-12 h-12 rounded-2xl bg-white border border-slate-100 shadow-sm flex items-center justify-center font-normal text-slate-300 text-sm tracking-tighter",children:R.name?R.name.substring(0,2).toUpperCase():"??"}),o.jsxs("div",{className:"min-w-0",children:[o.jsxs("div",{className:"font-normal text-slate-800 text-base leading-tight truncate flex items-center gap-2",children:[R.name||"Setup Pending",!R.isActive&&o.jsx("span",{className:"text-[7px] bg-red-100 text-red-600 px-1.5 py-0.5 rounded uppercase font-black",children:"Restricted"})]}),o.jsx("div",{className:"text-[11px] text-slate-400 font-normal tracking-tight truncate",children:F?" (Protected Identity)":R.username})]})]})}),o.jsxs("td",{className:"md:px-10 md:py-6 block md:table-cell mb-6 md:mb-0",children:[o.jsx("div",{className:"md:hidden text-[9px] font-normal text-slate-300 uppercase tracking-widest mb-2",children:"Access Role"}),o.jsx("span",{className:`px-4 py-2 rounded-xl text-[10px] font-normal uppercase tracking-widest
                                            ${R.role==="Admin"||A?"bg-indigo-50 text-indigo-600 border border-indigo-100 shadow-sm":"bg-slate-50 text-slate-500 border border-slate-100"}
                                        `,children:R.role})]}),o.jsxs("td",{className:"md:px-10 md:py-6 block md:table-cell mb-6 md:mb-0",children:[o.jsx("div",{className:"md:hidden text-[9px] font-normal text-slate-300 uppercase tracking-widest mb-2",children:"Login Access"}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:()=>!F&&k(R),disabled:F,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-all duration-300 ${F?"opacity-20 cursor-not-allowed":""} ${R.isActive?"bg-emerald-500 shadow-[0_0_10px_rgba(16,185,129,0.3)]":"bg-slate-200"}`,title:F?"Restricted":R.isActive?"Disable Access":"Enable Access",children:o.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform duration-300 ${R.isActive?"translate-x-6":"translate-x-1"}`})}),o.jsx("span",{className:`text-[10px] font-normal uppercase tracking-widest ${R.isActive?"text-emerald-600":"text-slate-400"}`,children:R.isActive?"Active":"Locked"})]})]}),o.jsx("td",{className:"md:px-10 md:py-6 md:text-right block md:table-cell",children:o.jsx("div",{className:"flex justify-start md:justify-end gap-3 md:opacity-0 group-hover:opacity-100 transition-all border-t md:border-0 pt-6 md:pt-0 mt-6 md:mt-0",children:F?o.jsx("span",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-widest p-3",children:"Immutable"}):o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>I(R),className:"p-3 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-2xl transition-all border md:border-0 bg-white md:bg-transparent shadow-sm md:shadow-none",title:"Share Identity",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})})}),o.jsx("button",{onClick:()=>T(R),className:"p-3 text-blue-500 hover:bg-blue-50 rounded-2xl transition-all border md:border-0 bg-white md:bg-transparent shadow-sm md:shadow-none",title:"Edit Profile",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),o.jsx("button",{onClick:()=>E(R.username),className:"p-3 text-red-400 hover:bg-red-50 rounded-2xl transition-all border md:border-0 bg-white md:bg-transparent shadow-sm md:shadow-none",title:"Remove User",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})})]},P)})})]})})]})},Fe=({children:e})=>o.jsx("div",{className:"w-16 h-16 sm:w-24 sm:h-24 flex items-center justify-center text-slate-900 transition-all duration-300 group-hover:scale-110",children:Zs.isValidElement(e)?Zs.cloneElement(e,{className:"w-full h-full",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"}):e}),js=()=>o.jsx(Fe,{children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[o.jsx("path",{d:"M12 2a1.5 1.5 0 100 3 1.5 1.5 0 000-3z",fill:"currentColor",stroke:"none"}),o.jsx("path",{d:"M9 3.5h6",strokeWidth:"1.5"}),o.jsx("rect",{x:"6",y:"5",width:"12",height:"15",rx:"1",ry:"1"}),o.jsx("rect",{x:"8",y:"8",width:"2.5",height:"2.5",rx:"0.5"}),o.jsx("path",{d:"M11.5 9h4"}),o.jsx("rect",{x:"8",y:"12",width:"2.5",height:"2.5",rx:"0.5"}),o.jsx("path",{d:"M11.5 13h4"}),o.jsx("rect",{x:"8",y:"16",width:"2.5",height:"2.5",rx:"0.5"}),o.jsx("path",{d:"M11.5 17h2"}),o.jsx("circle",{cx:"17.5",cy:"17.5",r:"5",fill:"white",stroke:"currentColor",strokeWidth:"1.2"}),o.jsx("path",{d:"M15.5 17.5l1.5 1.5 3-3",strokeWidth:"1.4"})]})}),FS=()=>o.jsx(Fe,{children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[o.jsx("path",{d:"M2 17h20",strokeWidth:"1.5"}),o.jsx("path",{d:"M4 17V9a2 2 0 012-2h4a2 2 0 012 2v8"}),o.jsx("rect",{x:"12",y:"11",width:"10",height:"6",rx:"1"}),o.jsx("circle",{cx:"6",cy:"18",r:"2",fill:"currentColor",stroke:"none"}),o.jsx("circle",{cx:"10",cy:"18",r:"2",fill:"currentColor",stroke:"none"}),o.jsx("circle",{cx:"15",cy:"18",r:"2",fill:"currentColor",stroke:"none"}),o.jsx("circle",{cx:"19",cy:"18",r:"2",fill:"currentColor",stroke:"none"}),o.jsx("path",{d:"M12 7l4-4h6v4h-6",opacity:"0.4"})]})}),US=()=>o.jsx(Fe,{children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[o.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",strokeWidth:"1.2"}),o.jsx("circle",{cx:"12",cy:"11",r:"2.5",fill:"currentColor",stroke:"none"}),o.jsx("rect",{x:"11",y:"12",width:"2",height:"4",rx:"0.5",fill:"currentColor",stroke:"none"}),o.jsx("path",{d:"M12 11v5",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round"}),o.jsx("path",{d:"M9 11a3 3 0 116 0",strokeWidth:"1",opacity:"0.3"})]})}),VS=()=>o.jsx(Fe,{children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",children:[o.jsx("circle",{cx:"12",cy:"12",r:"10.5"}),o.jsx("circle",{cx:"12",cy:"10",r:"2.8",fill:"currentColor",stroke:"none"}),o.jsx("path",{d:"M7 18.5c0-2.8 2.2-5 5-5s5 2.2 5 5",fill:"currentColor",stroke:"none"}),o.jsx("circle",{cx:"7.5",cy:"12",r:"2.2",fill:"currentColor",stroke:"none",opacity:"0.6"}),o.jsx("path",{d:"M4 17.5c0-1.8 1.5-3.2 3.5-3.2s3.5 1.4 3.5 3.2",fill:"currentColor",stroke:"none",opacity:"0.6"}),o.jsx("circle",{cx:"16.5",cy:"12",r:"2.2",fill:"currentColor",stroke:"none",opacity:"0.6"}),o.jsx("path",{d:"M13 17.5c0-1.8 1.5-3.2 3.5-3.2s3.5 1.4 3.5 3.2",fill:"currentColor",stroke:"none",opacity:"0.6"})]})}),HS=()=>o.jsx(Fe,{children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.8",children:[o.jsx("circle",{cx:"12",cy:"12",r:"3.5"}),o.jsx("path",{d:"M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"})]})}),BS=()=>o.jsx(Fe,{children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.2",children:[o.jsx("rect",{x:"3",y:"4",width:"18",height:"16",rx:"2"}),o.jsx("path",{d:"M7 8h10M7 12h10M7 16h6",opacity:"0.3"}),o.jsx("circle",{cx:"17",cy:"16",r:"3",strokeWidth:"1.5"}),o.jsx("path",{d:"M17 14.5v3"})]})}),GS=()=>o.jsx(Fe,{children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.2",children:[o.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"}),o.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13",strokeWidth:"2"}),o.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17",strokeWidth:"3"})]})}),OS=()=>o.jsx(Fe,{children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.2",children:[o.jsx("path",{d:"M3 6h18"}),o.jsx("path",{d:"M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"}),o.jsx("path",{d:"M10 11v6"}),o.jsx("path",{d:"M14 11v6"})]})}),zS=()=>o.jsx(Fe,{children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.2",children:[o.jsx("path",{d:"M12 2L3 7v10l9 5 9-5V7l-9-5z"}),o.jsx("path",{d:"M12 22V12"}),o.jsx("path",{d:"M12 12l9-5"}),o.jsx("path",{d:"M12 12L3 7"}),o.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"white",stroke:"currentColor"})]})}),qS=()=>o.jsx(Fe,{children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.2",children:[o.jsx("circle",{cx:"12",cy:"12",r:"9"}),o.jsx("circle",{cx:"12",cy:"12",r:"5"}),o.jsx("path",{d:"M12 3v4M12 17v4M3 12h4M17 12h4M5.6 5.6l2.8 2.8M15.6 15.6l2.8 2.8M5.6 18.4l2.8-2.8M15.6 8.4l2.8-2.8"})]})}),$S=()=>o.jsx(Fe,{children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.2",children:[o.jsx("path",{d:"M3 19V5a2 2 0 012-2h11a2 2 0 012 2v14a2 2 0 01-2 2H5a2 2 0 01-2-2z"}),o.jsx("path",{d:"M18 7h3a1 1 0 011 1v3a4 4 0 01-4 4"}),o.jsx("rect",{x:"6",y:"6",width:"8",height:"5",rx:"1"}),o.jsx("circle",{cx:"10",cy:"16",r:"2"})]})}),WS=()=>o.jsx(Fe,{children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.2",children:[o.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",strokeOpacity:"0.2"}),o.jsx("path",{d:"M7 16V12M12 16V8M17 16V14",strokeWidth:"2"}),o.jsx("circle",{cx:"17",cy:"7",r:"3"}),o.jsx("path",{d:"M17 5v2h2",opacity:"0.5"})]})}),JS=()=>o.jsx(Fe,{children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.2",children:[o.jsx("path",{d:"M8 2v3M16 2v3",strokeWidth:"1.5"}),o.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),o.jsx("path",{d:"M7 10h10M7 14h10M7 18h5",opacity:"0.4"}),o.jsx("circle",{cx:"18",cy:"18",r:"4",fill:"white",stroke:"currentColor"}),o.jsx("path",{d:"M18 16v2h2",strokeWidth:"1.5"})]})}),KS=()=>o.jsx(Fe,{children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.2",children:[o.jsx("path",{d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),o.jsx("circle",{cx:"12",cy:"12",r:"3",strokeOpacity:"0.3"}),o.jsx("path",{d:"M12 3v18M3 12h18",strokeOpacity:"0.1"}),o.jsx("path",{d:"M9 12l2 2 4-4",strokeWidth:"1.5"})]})}),YS=()=>o.jsx(Fe,{children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.2",children:[o.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),o.jsx("path",{d:"M3 10h18M8 2v4M16 2v4",strokeWidth:"1.5"}),o.jsx("path",{d:"M7 14h.01M12 14h.01M17 14h.01M7 18h.01M12 18h.01",strokeWidth:"2",strokeLinecap:"round"}),o.jsx("circle",{cx:"18",cy:"18",r:"4",fill:"white",stroke:"currentColor"}),o.jsx("path",{d:"M17 18l1 1 2-2",strokeWidth:"1.5"})]})}),QS=()=>o.jsx(Fe,{children:o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.2",children:[o.jsx("path",{d:"M22 10L12 5 2 10l10 5 10-5z"}),o.jsx("path",{d:"M6 12v5c0 2 3 3 6 3s6-1 6-3v-5"}),o.jsx("path",{d:"M12 15v5",opacity:"0.3"}),o.jsx("circle",{cx:"12",cy:"10",r:"2",fill:"currentColor",stroke:"none"})]})}),Se=({id:e,label:t,icon:n,isForcedLock:r=!1,badgeCount:s=0,badgeColor:i="bg-slate-900",isInspectionModule:l=!1,isLocked:d,isPro:f=!1,isEnterprise:u=!1,onNavigate:p})=>{const m=r||l&&d;return o.jsxs("button",{onClick:()=>!m&&p(e),className:`flex flex-col items-center justify-center p-4 transition-all w-full group ${m?"opacity-25 cursor-not-allowed":"hover:opacity-60 active:scale-95"}`,children:[o.jsxs("div",{className:"relative mb-5",children:[n,m&&o.jsx("div",{className:"absolute -top-1 -right-1 bg-slate-900 text-white rounded-full p-1 shadow-sm border border-white",children:o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2",children:o.jsx("path",{d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),s>0&&!m&&o.jsx("div",{className:`absolute -top-1.5 -right-1.5 ${i} text-white text-[9px] font-black w-5 h-5 rounded-full flex items-center justify-center border-2 border-white shadow-sm z-20 animate-fadeIn`,children:s}),u&&!m&&o.jsx("div",{className:"absolute -top-1 -right-1 bg-indigo-600 text-white text-[7px] font-black px-1.5 py-0.5 rounded border border-white shadow-sm italic uppercase tracking-tighter",children:"enterprise"}),f&&!u&&!m&&o.jsx("div",{className:"absolute -top-1 -right-1 bg-blue-600 text-white text-[8px] font-bold px-2 py-0.5 rounded border border-white shadow-sm italic",children:"pro"})]}),o.jsx("span",{className:`text-[10px] sm:text-[12px] font-medium text-center tracking-wider leading-tight transition-colors w-full ${m?"text-slate-300":"text-slate-900 group-hover:text-blue-600"}`,children:t})]})},Ls=({label:e})=>o.jsxs("div",{className:"w-full flex items-center gap-4 mb-10 px-8",children:[o.jsx("span",{className:"text-[11px] font-bold text-slate-400 tracking-[0.3em] whitespace-nowrap uppercase",children:e}),o.jsx("div",{className:"h-px flex-1 bg-slate-100"})]}),XS=({onNavigate:e,userRole:t,isLocked:n=!1,pendingAlertsCount:r=0})=>{const s=t==="Admin"||t==="SuperAdmin",i=t==="SuperAdmin";return o.jsx("div",{className:"max-w-5xl mx-auto py-8 sm:py-12 flex flex-col items-center justify-center min-h-[calc(100vh-140px)] overflow-hidden",children:o.jsxs("div",{className:"w-full space-y-24 sm:space-y-32",children:[o.jsxs("section",{className:"w-full animate-fadeIn",children:[o.jsx(Ls,{label:"System Management"}),o.jsxs("div",{className:"grid grid-cols-4 gap-x-4 gap-y-16 sm:gap-y-20",children:[o.jsx(Se,{id:"maintenance",label:"Security",isLocked:n,isForcedLock:!i,onNavigate:e,icon:o.jsx(US,{})}),o.jsx(Se,{id:"users",label:"Staff",isLocked:n,isForcedLock:!s,onNavigate:e,icon:o.jsx(VS,{})}),o.jsx(Se,{id:"registry",label:"Fleet Registry",isLocked:n,isForcedLock:!s,onNavigate:e,icon:o.jsx(BS,{})}),o.jsx(Se,{id:"settings",label:"Settings",isLocked:n,isForcedLock:!s,onNavigate:e,icon:o.jsx(HS,{})})]})]}),o.jsxs("section",{className:"w-full animate-fadeIn",children:[o.jsx(Ls,{label:"Inspection Forms"}),o.jsxs("div",{className:"grid grid-cols-4 sm:grid-cols-5 gap-x-4 gap-y-16 sm:gap-y-20",children:[o.jsx(Se,{id:"general",label:"General Inspection",isInspectionModule:!0,isLocked:n,onNavigate:e,icon:o.jsx(js,{})}),o.jsx(Se,{id:"petroleum",label:"Petroleum V1 Inspection",isInspectionModule:!0,isLocked:n,onNavigate:e,icon:o.jsx(js,{})}),o.jsx(Se,{id:"petroleum_v2",label:"Petroleum V2 Inspection",isInspectionModule:!0,isLocked:n,onNavigate:e,icon:o.jsx(js,{})}),o.jsx(Se,{id:"acid",label:"Acid Tank Inspection",isInspectionModule:!0,isLocked:n,onNavigate:e,icon:o.jsx(js,{})}),o.jsx(Se,{id:"heavy_haulage",label:"Heavy Haulage & Specialized Audit",isInspectionModule:!0,isLocked:!0,isForcedLock:!0,isEnterprise:!0,onNavigate:e,icon:o.jsx(FS,{})})]})]}),o.jsxs("section",{className:"w-full animate-fadeIn",children:[o.jsx(Ls,{label:"Operations & Support"}),o.jsxs("div",{className:"grid grid-cols-4 sm:grid-cols-5 gap-x-4 gap-y-16 sm:gap-y-20",children:[o.jsx(Se,{id:"analytics",label:"Fleet Analysis",isLocked:n,onNavigate:e,icon:o.jsx(WS,{}),badgeCount:r,badgeColor:"bg-rose-500"}),o.jsx(Se,{id:"track_requests",label:"Inspection Requests",isLocked:n,onNavigate:e,icon:o.jsx(JS,{})}),o.jsx(Se,{id:"service_schedule",label:"Maintenance Scheduler",isLocked:n,isForcedLock:!0,isPro:!0,onNavigate:e,icon:o.jsx(YS,{})}),o.jsx(Se,{id:"personnel_training",label:"Training & Induction",isLocked:n,isForcedLock:!0,isPro:!0,onNavigate:e,icon:o.jsx(QS,{})}),o.jsx(Se,{id:"support",label:"Help & Support",isLocked:n,onNavigate:e,icon:o.jsx(KS,{})})]})]}),o.jsxs("section",{className:"w-full animate-fadeIn",children:[o.jsx(Ls,{label:"Enterprise Operations"}),o.jsxs("div",{className:"grid grid-cols-4 sm:grid-cols-5 gap-x-4 gap-y-16 sm:gap-y-20",children:[o.jsx(Se,{id:"incident_report",label:"Incident Reporting",isLocked:n,isForcedLock:!0,isEnterprise:!0,onNavigate:e,icon:o.jsx(GS,{})}),o.jsx(Se,{id:"waste_mgmt",label:"Scrap & Waste",isLocked:n,isForcedLock:!0,isEnterprise:!0,onNavigate:e,icon:o.jsx(OS,{})}),o.jsx(Se,{id:"journey_mgmt",label:"Journey Management",isLocked:n,isForcedLock:!0,isEnterprise:!0,onNavigate:e,icon:o.jsx(zS,{})}),o.jsx(Se,{id:"tyre_mgmt",label:"Tyre Lifecycle",isLocked:n,isForcedLock:!0,isEnterprise:!0,onNavigate:e,icon:o.jsx(qS,{})}),o.jsx(Se,{id:"fuel_intel",label:"Fuel Intelligence",isLocked:n,isForcedLock:!0,isEnterprise:!0,onNavigate:e,icon:o.jsx($S,{})})]})]})]})})},Ds=({label:e,onCapture:t,existingImage:n})=>{const r=_.useRef(null),[s,i]=_.useState(n),l=d=>{var u;const f=(u=d.target.files)==null?void 0:u[0];if(f){const p=new FileReader;p.onloadend=()=>{const m=p.result;i(m),t(m)},p.readAsDataURL(f)}};return o.jsxs("div",{className:"flex flex-col gap-2 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[o.jsx("span",{className:"text-sm font-semibold text-gray-700",children:e}),o.jsx("div",{className:"relative w-full aspect-video bg-gray-200 rounded-md overflow-hidden flex items-center justify-center border-2 border-dashed border-gray-300",children:s?o.jsx("img",{src:s,alt:"Capture",className:"w-full h-full object-cover"}):o.jsxs("div",{className:"text-gray-400 flex flex-col items-center",children:[o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"}),o.jsx("circle",{cx:"12",cy:"13",r:"3"})]}),o.jsx("span",{className:"text-xs mt-1",children:"No Image"})]})}),o.jsx("input",{type:"file",accept:"image/*",capture:"environment",ref:r,onChange:l,className:"hidden"}),o.jsxs("button",{type:"button",onClick:()=>{var d;return(d=r.current)==null?void 0:d.click()},className:"w-full py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700 transition flex items-center justify-center gap-2",children:[o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),o.jsx("circle",{cx:"12",cy:"13",r:"4"})]}),s?"Retake Photo":"Take Photo"]})]})},zu=({label:e,onSave:t,existingSignature:n})=>{const r=_.useRef(null),s=_.useRef(null),[i,l]=_.useState(!1),d=_.useRef(!1);_.useEffect(()=>{const g=r.current,w=s.current;if(!g||!w)return;const N=()=>{const x=g.toDataURL(),v=w.getBoundingClientRect();g.width=v.width,g.height=160;const y=g.getContext("2d");if(d.current||n){const C=new Image;C.src=d.current?x:n||"",C.onload=()=>{y==null||y.drawImage(C,0,0,g.width,g.height),d.current=!0}}};N();const S=new ResizeObserver(()=>{N()});return S.observe(w),()=>S.disconnect()},[n]);const f=g=>{const w=r.current;if(!w)return{x:0,y:0};const N=w.getBoundingClientRect();let S,x;return"touches"in g?(S=g.touches[0].clientX,x=g.touches[0].clientY):(S=g.clientX,x=g.clientY),{x:S-N.left,y:x-N.top}},u=g=>{"touches"in g&&g.preventDefault();const w=r.current;if(!w)return;const N=w.getContext("2d");if(!N)return;l(!0);const{x:S,y:x}=f(g);N.beginPath(),N.moveTo(S,x),N.lineWidth=2,N.lineCap="round",N.strokeStyle="#000"},p=g=>{if("touches"in g&&g.preventDefault(),!i)return;const w=r.current;if(!w)return;const N=w.getContext("2d");if(!N)return;const{x:S,y:x}=f(g);N.lineTo(S,x),N.stroke()},m=g=>{"touches"in g&&g.preventDefault(),i&&(l(!1),r.current&&t(r.current.toDataURL()))},h=()=>{const g=r.current;if(g){const w=g.getContext("2d");w==null||w.clearRect(0,0,g.width,g.height),t(""),d.current=!1}};return o.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[o.jsxs("div",{className:"flex justify-between items-end",children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:e}),o.jsx("button",{type:"button",onClick:h,className:"text-[10px] text-rose-500 hover:text-rose-700 font-bold uppercase tracking-widest",children:"Clear"})]}),o.jsxs("div",{ref:s,className:"w-full border border-slate-200 rounded-2xl bg-white overflow-hidden relative shadow-sm h-[160px]",children:[o.jsx("canvas",{ref:r,className:"w-full h-full bg-white cursor-crosshair touch-none block",onMouseDown:u,onMouseMove:p,onMouseUp:m,onMouseLeave:m,onTouchStart:u,onTouchMove:p,onTouchEnd:m}),o.jsx("div",{className:"absolute bottom-3 right-4 text-[9px] font-black text-slate-200 pointer-events-none select-none uppercase tracking-[0.2em]",children:"Authentication Required"})]})]})},Fs=({label:e,status:t,current:n,onClick:r,colorClass:s})=>{const i=t===n,l={green:i?"bg-emerald-600 text-white border-emerald-600 shadow-lg shadow-emerald-100":"bg-white text-emerald-700 border-emerald-100 hover:bg-emerald-50",red:i?"bg-rose-600 text-white border-rose-600 shadow-lg shadow-rose-100":"bg-white text-rose-700 border-rose-100 hover:bg-rose-50",yellow:i?"bg-amber-500 text-white border-amber-500 shadow-lg shadow-amber-100":"bg-white text-amber-600 border-amber-100 hover:bg-amber-50",gray:i?"bg-slate-700 text-white border-slate-700 shadow-lg shadow-slate-100":"bg-white text-slate-500 border-slate-200 hover:bg-slate-50"};return o.jsxs("button",{onClick:r,className:`relative py-3 px-1 rounded-xl border font-black text-[9px] sm:text-[10px] transition-all flex flex-col items-center gap-1.5 flex-1 min-w-0 ${l[s]} ${i?"z-10 scale-[1.02]":"shadow-sm opacity-80 hover:opacity-100"}`,children:[o.jsxs("div",{className:"h-4 flex items-center justify-center",children:[t===de.GOOD&&o.jsx("span",{className:"text-sm",children:""}),t===de.BAD&&o.jsx("span",{className:"text-sm",children:""}),t===de.ATTENTION&&o.jsx("span",{className:"text-sm",children:"!"}),t===de.NIL&&o.jsx("span",{className:"text-sm",children:""})]}),o.jsx("span",{className:"uppercase tracking-widest truncate w-full px-1",children:e})]})},qu=({label:e,value:t,onChange:n,type:r="text",placeholder:s,error:i})=>o.jsxs("div",{children:[o.jsx("label",{className:`block text-xs font-bold uppercase mb-1.5 tracking-wide ${i?"text-red-600":"text-gray-500"}`,children:e}),o.jsx("input",{type:r,value:t,onChange:l=>n(l.target.value),placeholder:s,className:`w-full p-3.5 border rounded-lg focus:ring-2 focus:outline-none transition-all font-medium placeholder-gray-400
        ${i?"bg-red-50 border-red-300 focus:ring-red-200 text-red-900":"bg-gray-50 border-gray-200 focus:ring-blue-500 focus:bg-white text-gray-800"}
      `}),i&&o.jsx("p",{className:"text-[10px] text-red-500 font-bold mt-1 ml-1 animate-fadeIn",children:"This field is required"})]}),ZS=({initialData:e,activeModule:t,validationLists:n,settings:r,onSaveDraft:s,onSubmit:i,onExit:l,submissionStatus:d,onViewReport:f})=>{const[u,p]=_.useState(e),[m,h]=_.useState(0),[g,w]=_.useState({}),[N,S]=_.useState(!1),x=(A,F)=>{p(z=>({...z,[A]:F})),g[A]&&w(z=>{const J={...z};return delete J[A],J})},v=()=>{s(u),S(!0),setTimeout(()=>S(!1),2e3)},y=A=>{let F=[],z=[];return t==="general"?z=dr:t==="petroleum"?z=Wo:t==="petroleum_v2"?z=Jo:t==="acid"&&(z=vn),t==="general"?(A===2&&(F=[Q.PPE,Q.DOCUMENTATION]),A===3&&(F=[Q.VEHICLE_EXTERIOR,Q.LIGHTS_ELECTRICAL]),A===4&&(F=[Q.MECHANICAL,Q.TRAILER])):t==="petroleum"?(A===2&&(F=[B.TRUCK_EQUIPMENT]),A===3&&(F=[B.TYRES,B.PPE_ID]),A===4&&(F=[B.DOCUMENTS,B.ONBOARD])):t==="petroleum_v2"?(A===2&&(F=[G.PRIME_MOVER]),A===3&&(F=[G.TRAILER_TANKS]),A===4&&(F=[G.DRIVER,G.SAFETY_SIGNS,G.DOCUMENTS])):t==="acid"&&(A===2&&(F=[Y.PPE]),A===3&&(F=[Y.VEHICLE]),A===4&&(F=[Y.SPILL_KIT,Y.DOCUMENTATION])),z.filter(J=>F.includes(J.category))},C=A=>{const F={};return A===0&&(u.truckNo||(F.truckNo=!0),u.trailerNo||(F.trailerNo=!0),u.driverName||(F.driverName=!0),u.location||(F.location=!0),u.odometer||(F.odometer=!0),t!=="general"&&!u.jobCard&&(F.jobCard=!0)),A>=2&&A<=4&&y(A).forEach(J=>{u[J.id]||(F[J.id]=!0)}),A===5&&((!u.remarks||u.remarks.trim()==="")&&(F.remarks=!0),(!u.rate||u.rate===0)&&(F.rate=!0),u.inspectorSignature||(F.inspectorSignature=!0),u.driverSignature||(F.driverSignature=!0)),Object.keys(F).length>0?(w(F),window.scrollTo({top:0,behavior:"smooth"}),!1):(w({}),!0)},b=()=>{for(let A=0;A<=5;A++)if(!C(A))return h(A),!1;return!0},E=()=>{C(m)&&(window.scrollTo({top:0,behavior:"smooth"}),h(A=>Math.min(A+1,Ts.length-1)))},k=()=>{m===0?l():(window.scrollTo({top:0,behavior:"smooth"}),h(A=>Math.max(A-1,0)))},T=()=>{b()&&i(u)},I=()=>o.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[u.requestId&&o.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-indigo-800 p-5 rounded-2xl shadow-xl flex items-center justify-between text-white border border-indigo-400/30",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"p-2.5 bg-white/10 rounded-xl backdrop-blur-md",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-indigo-200",children:"Active Mission"}),o.jsxs("p",{className:"text-base font-black tracking-tight uppercase",children:["Request ID: ",u.requestId]})]})]})}),o.jsxs("div",{className:"bg-white p-6 sm:p-8 rounded-3xl shadow-sm border border-slate-100",children:[o.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-8 uppercase tracking-tight",children:"Vehicle Identity"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-y-8 gap-x-10",children:[o.jsx(mn,{label:"Truck Reg No *",value:u.truckNo,onChange:A=>x("truckNo",A),options:n.trucks,placeholder:"e.g. ABC 123",isRegNo:!0,error:g.truckNo}),o.jsx(mn,{label:"Trailer No *",value:u.trailerNo,onChange:A=>x("trailerNo",A),options:n.trailers,placeholder:"e.g. T-100",isRegNo:!0,error:g.trailerNo}),o.jsx(qu,{label:"Job Card Reference",value:u.jobCard||"",onChange:A=>x("jobCard",A),error:g.jobCard}),o.jsx(mn,{label:"Primary Inspector",value:u.inspectedBy,onChange:A=>x("inspectedBy",A),options:n.inspectors,isTitleCase:!0,readOnly:!0}),o.jsx(mn,{label:"Driver Name *",value:u.driverName,onChange:A=>x("driverName",A),options:n.drivers,placeholder:"Verified Identity",isTitleCase:!0,error:g.driverName}),o.jsx(mn,{label:"Station Location *",value:u.location,onChange:A=>x("location",A),options:n.locations,placeholder:"Hub",isTitleCase:!0,error:g.location}),o.jsx(qu,{label:"Odometer Readout (km) *",type:"number",value:u.odometer,onChange:A=>x("odometer",A),error:g.odometer})]})]})]}),M=()=>o.jsx("div",{className:"space-y-6 animate-fadeIn",children:o.jsxs("div",{className:"bg-white p-6 sm:p-8 rounded-3xl shadow-sm border border-slate-100",children:[o.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-8 uppercase tracking-tight",children:"Visual Documentation"}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[o.jsx(Ds,{label:"Horse: Front",existingImage:u.photoFront,onCapture:A=>x("photoFront",A)}),o.jsx(Ds,{label:"Horse: Left Profile",existingImage:u.photoLS,onCapture:A=>x("photoLS",A)}),o.jsx(Ds,{label:"Horse: Right Profile",existingImage:u.photoRS,onCapture:A=>x("photoRS",A)}),o.jsx(Ds,{label:"Trailer: Rear Aspect",existingImage:u.photoBack,onCapture:A=>x("photoBack",A)})]})]})}),L=A=>{const F=y(m).filter(J=>A.includes(J.category)),z={};return A.forEach(J=>{z[J]=F.filter(j=>j.category===J)}),o.jsx("div",{className:"space-y-10 animate-fadeIn",children:A.map(J=>o.jsxs("div",{className:"bg-white rounded-[2rem] shadow-sm border border-slate-100 overflow-hidden",children:[o.jsxs("div",{className:"bg-slate-50 px-8 py-5 border-b border-slate-100 flex justify-between items-center",children:[o.jsx("h3",{className:"text-[11px] font-black text-slate-500 uppercase tracking-[0.25em]",children:J}),o.jsx("span",{className:"text-[8px] font-black bg-rose-50 text-rose-500 px-2 py-1 rounded uppercase tracking-widest border border-rose-100",children:"Verification Req."})]}),o.jsx("div",{className:"divide-y divide-slate-50",children:z[J].map(j=>o.jsxs("div",{className:`p-6 sm:p-8 transition-colors ${g[j.id]?"bg-rose-50/40":"hover:bg-slate-50/30"}`,children:[o.jsx("div",{className:"mb-5",children:o.jsx("span",{className:`font-bold text-sm leading-tight uppercase tracking-tight ${g[j.id]?"text-rose-800":"text-slate-700"}`,children:j.label})}),o.jsxs("div",{className:"flex gap-2 sm:gap-4 max-w-xl",children:[o.jsx(Fs,{label:"Compliant",status:de.GOOD,current:u[j.id],onClick:()=>x(j.id,de.GOOD),colorClass:"green"}),o.jsx(Fs,{label:"Fault",status:de.BAD,current:u[j.id],onClick:()=>x(j.id,de.BAD),colorClass:"red"}),o.jsx(Fs,{label:"Review",status:de.ATTENTION,current:u[j.id],onClick:()=>x(j.id,de.ATTENTION),colorClass:"yellow"}),o.jsx(Fs,{label:"N/A",status:de.NIL,current:u[j.id],onClick:()=>x(j.id,de.NIL),colorClass:"gray"})]})]},j.id))})]},J))})},R=()=>o.jsx("div",{className:"space-y-6 animate-fadeIn",children:o.jsxs("div",{className:"bg-white p-6 sm:p-8 rounded-3xl shadow-sm border border-slate-100",children:[o.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-8 uppercase tracking-tight",children:"Authorization"}),o.jsxs("div",{className:"mb-10",children:[o.jsx("label",{className:`block text-[10px] font-black uppercase mb-3 tracking-[0.2em] ${g.remarks?"text-rose-600":"text-slate-400"}`,children:"Inspector Findings & Remarks *"}),o.jsx("textarea",{className:"w-full p-6 border rounded-2xl h-44 outline-none font-medium text-sm border-slate-200 focus:ring-4 focus:ring-indigo-50 bg-slate-50 transition-all resize-none",placeholder:"Detailed vehicle condition summary...",value:u.remarks,onChange:A=>x("remarks",A.target.value)})]}),o.jsxs("div",{className:"mb-12",children:[o.jsx("label",{className:"block text-[10px] font-black uppercase mb-5 tracking-[0.2em] text-slate-400",children:"Final Health Grade *"}),o.jsx("div",{className:"flex gap-3 sm:gap-5 flex-wrap",children:[1,2,3,4,5].map(A=>o.jsx("button",{type:"button",onClick:()=>x("rate",A),className:`w-14 h-14 rounded-2xl font-black text-xl transition-all active:scale-90 ${u.rate===A?"bg-slate-900 text-white shadow-2xl scale-110":"bg-slate-100 text-slate-400 hover:bg-slate-200"}`,children:A},A))})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-10 pt-10 border-t border-slate-100",children:[o.jsx(zu,{label:"Inspector Authentication",existingSignature:u.inspectorSignature,onSave:A=>x("inspectorSignature",A)}),o.jsx(zu,{label:"Driver Confirmation",existingSignature:u.driverSignature,onSave:A=>x("driverSignature",A)})]})]})}),P=()=>o.jsxs("div",{className:"space-y-6 animate-fadeIn pb-12",children:[o.jsxs("div",{className:"bg-white p-10 rounded-[2.5rem] shadow-sm border border-slate-100 text-center",children:[o.jsx("div",{className:"w-20 h-20 bg-emerald-50 rounded-full flex items-center justify-center mx-auto mb-8 border border-emerald-100",children:o.jsx("svg",{className:"w-10 h-10 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),o.jsx("h2",{className:"text-3xl font-black text-slate-800 mb-3 uppercase tracking-tight",children:"Audit Ready"}),o.jsx("p",{className:"text-slate-400 font-medium text-sm max-w-md mx-auto",children:"Please perform a final data review. Submitting will permanently log this record into the corporate fleet repository."})]}),o.jsxs("div",{className:"mt-8 bg-slate-900 rounded-[2.5rem] p-10 text-white shadow-2xl relative overflow-hidden group",children:[o.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-emerald-500/10 rounded-full -mr-20 -mt-20 blur-3xl"}),o.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-center justify-between gap-10",children:[o.jsxs("div",{className:"text-center md:text-left",children:[o.jsx("h3",{className:"text-2xl font-black mb-1 text-white uppercase tracking-tight",children:"Synchronize Records"}),o.jsx("p",{className:"text-emerald-400 text-xs font-black uppercase tracking-[0.25em] opacity-80",children:"Transmit to HQ Database"})]}),o.jsxs("button",{onClick:T,disabled:d!=="idle",className:`w-full md:w-auto px-12 py-5 text-white rounded-2xl font-black text-lg shadow-2xl transition-all flex items-center justify-center gap-4 active:scale-95 border-2 border-white/10 uppercase tracking-[0.2em] ${d!=="idle"?"bg-slate-700":"bg-emerald-600 hover:bg-emerald-500"}`,children:[d==="submitting"?"Uploading...":d==="offline_saved"?"Stored Locally":"Submit Inspection",d==="idle"&&o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})]})]})]})]});return o.jsxs("div",{className:"flex flex-col min-h-[calc(100vh-56px)] bg-slate-50/50 overflow-x-hidden",children:[o.jsx("div",{className:"bg-white border-b border-slate-100 sticky top-14 z-30 shadow-sm",children:o.jsx("div",{className:"w-full",children:o.jsx("div",{className:"flex px-4 py-5 justify-between md:justify-center items-center overflow-x-hidden",children:Ts.map((A,F)=>{const z=F===m,J=F<m;return o.jsxs("div",{className:"flex items-center flex-1 md:flex-none",children:[o.jsxs("div",{className:"flex flex-col items-center gap-2 transition-all w-full",children:[o.jsx("div",{className:`
                                    w-7 h-7 sm:w-9 sm:h-9 rounded-xl flex items-center justify-center text-[10px] sm:text-xs font-black transition-all duration-500
                                    ${z?"bg-slate-900 text-white shadow-xl scale-110":J?"bg-emerald-500 text-white":"bg-slate-100 text-slate-300"}
                                `,children:J?"":F+1}),o.jsx("span",{className:`hidden sm:block text-[8px] uppercase font-black tracking-[0.2em] ${z?"text-slate-900":"text-slate-300"}`,children:A.title})]}),F<Ts.length-1&&o.jsx("div",{className:`h-0.5 flex-1 md:w-12 mx-1 sm:mx-4 rounded-full ${J?"bg-emerald-500":"bg-slate-100"}`})]},A.id)})})})}),o.jsxs("div",{className:"flex-1 p-4 sm:p-8 md:p-12 w-full max-w-5xl mx-auto overflow-x-hidden",children:[m===0&&I(),m===1&&M(),t==="general"&&m===2&&L([Q.PPE,Q.DOCUMENTATION]),t==="general"&&m===3&&L([Q.VEHICLE_EXTERIOR,Q.LIGHTS_ELECTRICAL]),t==="general"&&m===4&&L([Q.MECHANICAL,Q.TRAILER]),t==="petroleum"&&m===2&&L([B.TRUCK_EQUIPMENT]),t==="petroleum"&&m===3&&L([B.TYRES,B.PPE_ID]),t==="petroleum"&&m===4&&L([B.DOCUMENTS,B.ONBOARD]),t==="petroleum_v2"&&m===2&&L([G.PRIME_MOVER]),t==="petroleum_v2"&&m===3&&L([G.TRAILER_TANKS]),t==="petroleum_v2"&&m===4&&L([G.DRIVER,G.SAFETY_SIGNS,G.DOCUMENTS]),t==="acid"&&m===2&&L([Y.PPE]),t==="acid"&&m===3&&L([Y.VEHICLE]),t==="acid"&&m===4&&L([Y.SPILL_KIT,Y.DOCUMENTATION]),m===5&&R(),m===6&&P()]}),o.jsx("footer",{className:"bg-white border-t border-slate-100 p-5 sm:p-8 sticky bottom-0 z-30 shadow-2xl backdrop-blur-md bg-white/90",children:o.jsxs("div",{className:"max-w-5xl mx-auto flex justify-between gap-4",children:[o.jsx("button",{onClick:k,className:"px-8 py-4 rounded-2xl border border-slate-200 font-black text-slate-400 hover:text-slate-800 hover:bg-slate-50 transition-all text-[10px] uppercase tracking-widest active:scale-95",children:m===0?"Exit":"Previous"}),o.jsxs("div",{className:"flex gap-3 flex-1 justify-end",children:[o.jsx("button",{onClick:v,className:"flex px-8 py-4 rounded-2xl border border-indigo-100 bg-indigo-50 text-indigo-600 font-black hover:bg-indigo-100 transition-all items-center justify-center gap-3 text-[10px] uppercase tracking-widest active:scale-95 relative overflow-hidden",children:N?o.jsxs(o.Fragment,{children:[o.jsx("svg",{className:"w-4 h-4 text-emerald-500 animate-bounce",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"3",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),o.jsx("span",{className:"animate-fadeIn",children:"Draft Saved"})]}):o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"}),o.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),o.jsx("polyline",{points:"7 3 7 8 15 8"})]}),"Save Draft"]})}),m<Ts.length-1&&o.jsxs("button",{onClick:E,className:"flex-1 sm:flex-none px-10 py-4 rounded-2xl bg-slate-900 text-white font-black hover:bg-black shadow-xl transition-all flex items-center justify-center gap-3 text-[10px] uppercase tracking-[0.2em] active:scale-95",children:["Next",o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"3",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})]})]})})]})},eb=({tickets:e,isLoading:t,onRefresh:n,onSelect:r,filterStatus:s})=>{const i=_.useMemo(()=>s==="OPEN"?e.filter(l=>l.status==="Open"||l.status==="In Progress"):s==="CLOSED"?e.filter(l=>l.status==="Resolved"||l.status==="Closed"):e,[e,s]);return o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden min-h-[300px]",children:[o.jsxs("div",{className:"p-4 bg-gray-50 border-b border-gray-100 flex justify-between items-center",children:[o.jsxs("span",{className:"font-bold text-sm text-gray-700",children:["Help History (",i.length,")"]}),o.jsx("button",{onClick:n,className:"text-[10px] text-indigo-600 font-black uppercase tracking-widest bg-white px-3 py-1.5 rounded-lg border border-indigo-100 hover:bg-indigo-50 transition-colors shadow-sm",children:"Refresh List"})]}),o.jsx("div",{className:"divide-y divide-gray-100",children:t?o.jsx("div",{className:"p-12 text-center text-gray-400 font-medium",children:"Checking for updates..."}):i.length===0?o.jsx("div",{className:"p-16 text-center text-gray-400 italic font-medium",children:"No help requests found yet."}):i.map(l=>o.jsxs("div",{onClick:()=>r(l),className:"p-5 hover:bg-slate-50 cursor-pointer transition-colors group",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsxs("span",{className:"font-bold text-sm text-slate-800 group-hover:text-indigo-600 transition-colors",children:["Request #",l.ticketId,": ",l.subject]}),o.jsx("span",{className:`text-[9px] font-black px-2.5 py-1 rounded-full uppercase tracking-tighter border ${l.status==="Resolved"?"bg-emerald-50 text-emerald-600 border-emerald-100":"bg-indigo-50 text-indigo-600 border-indigo-100"}`,children:l.status})]}),o.jsx("p",{className:"text-xs text-slate-500 truncate font-medium",children:l.description}),o.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[o.jsx("span",{className:"text-[9px] font-bold text-slate-300 uppercase",children:new Date(l.timestamp).toLocaleDateString()}),o.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-200"}),o.jsx("span",{className:"text-[9px] font-bold text-slate-300 uppercase",children:l.user})]})]},l.ticketId))})]})},tb=({ticket:e,currentUser:t,isAdmin:n,onClose:r,onReply:s,isSendingReply:i,isLocked:l})=>{var p;const[d,f]=_.useState(""),u=()=>{!d.trim()||l||(s(d),f(""))};return o.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 overflow-hidden flex flex-col h-[600px] animate-fadeIn",children:[o.jsxs("div",{className:"p-4 bg-slate-50 border-b flex justify-between items-center",children:[o.jsxs("button",{onClick:r,className:"text-[10px] font-black text-slate-500 hover:text-indigo-600 transition-colors uppercase tracking-widest flex items-center gap-2 bg-white px-3 py-2 rounded-xl border border-slate-200 shadow-sm",children:[o.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"3",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),"Go Back"]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"font-black text-slate-800 uppercase tracking-tight text-sm",children:e.subject}),l&&o.jsx("span",{className:"text-[8px] font-black text-amber-600 bg-amber-50 px-2.5 py-1 rounded-full border border-amber-200 uppercase",children:"View Only"})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6 bg-slate-50/20",children:[o.jsxs("div",{className:"p-5 rounded-2xl bg-white border border-slate-100 shadow-sm mb-4",children:[o.jsx("p",{className:"text-[10px] font-black text-indigo-500 uppercase tracking-widest mb-2",children:"Original Problem"}),o.jsx("p",{className:"text-sm font-medium text-slate-700 leading-relaxed",children:e.description})]}),(p=e.comments)==null?void 0:p.map((m,h)=>{var S;const g=((S=m.role)==null?void 0:S.toLowerCase())||"",w=g==="admin"||g==="superadmin",N=w?"Support":m.user;return o.jsxs("div",{className:`p-4 rounded-2xl shadow-sm border ${m.user===(t==null?void 0:t.name)?"bg-indigo-600 text-white ml-auto border-indigo-500":"bg-white text-gray-700 mr-auto border-slate-100"} max-w-[90%] md:max-w-[80%]`,children:[o.jsxs("div",{className:"flex justify-between items-center mb-1.5 gap-6",children:[o.jsxs("p",{className:"text-[9px] font-black uppercase tracking-widest opacity-70",children:[N," ",!w&&m.role&&`(${m.role})`]}),o.jsxs("p",{className:"text-[8px] font-bold opacity-50 uppercase",children:[new Date(m.timestamp).toLocaleDateString()," ",new Date(m.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),o.jsx("p",{className:"text-sm font-semibold leading-relaxed",children:m.message})]},h)})]}),!l&&o.jsxs("div",{className:"p-4 border-t bg-white flex gap-3 items-center",children:[o.jsx("input",{className:"flex-1 border border-slate-200 rounded-xl px-5 py-4 text-sm font-medium focus:ring-4 focus:ring-indigo-50 outline-none transition-all placeholder:text-slate-300",placeholder:"Type your reply here...",value:d,onChange:m=>f(m.target.value)}),o.jsxs("button",{onClick:u,disabled:i||!d.trim(),className:"h-[52px] px-8 bg-indigo-600 hover:bg-indigo-700 text-white font-black rounded-xl flex items-center justify-center gap-2 transition-all active:scale-95 shadow-lg shadow-indigo-100 disabled:bg-slate-300 disabled:shadow-none uppercase tracking-[0.2em] text-[10px]",children:[i?o.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):null,i?"Sending":"Send"]})]})]})},nb=({appScriptUrl:e,currentUser:t,showToast:n,settings:r})=>{const s=window.isSubscriptionLocked||!1,[i,l]=_.useState(s?"list":"create"),[d,f]=_.useState([]),[u,p]=_.useState(null),[m,h]=_.useState(!1),[g,w]=_.useState(!1),[N,S]=_.useState(!1),[x,v]=_.useState({subject:"",description:"",priority:"Medium"}),y=async()=>{if(!(!e||!t)){h(!0);try{const T=await(await fetch(e,{method:"POST",body:JSON.stringify({action:"get_tickets",email:t.username,role:t.role})})).json();T.status==="success"&&f(T.tickets)}finally{h(!1)}}};_.useEffect(()=>{y()},[]);const C=async k=>{if(k.preventDefault(),s){n("Action restricted: License expired.","error");return}w(!0);try{const T={action:"submit_support_ticket",type:"Issue",...x,user:t==null?void 0:t.name,email:t==null?void 0:t.username,role:t==null?void 0:t.role};(await(await fetch(e,{method:"POST",body:JSON.stringify(T)})).json()).status==="success"&&(n("Your request has been sent to the team.","success"),v({subject:"",description:"",priority:"Medium"}),l("list"),y())}catch{n("Sending failed. Check connection.","error")}finally{w(!1)}},b=async k=>{if(!(!u||s)){S(!0);try{const T={user:t==null?void 0:t.name,role:t==null?void 0:t.role,message:k,timestamp:new Date().toISOString()};await fetch(e,{method:"POST",body:JSON.stringify({action:"update_ticket",ticketId:u.ticketId,comment:T}),mode:"no-cors"});const I={...u,comments:[...u.comments,T]};p(I),f(M=>M.map(L=>L.ticketId===I.ticketId?I:L)),n("Reply sent.","success")}finally{S(!1)}}},E=async()=>{if(!r)return;const k={title:r.companyName||"SafetyCheck Pro",text:`Access the ${r.companyName||"Fleet"} Inspection Portal here:`,url:r.webAppUrl||window.location.href};try{navigator.share?await navigator.share(k):(await navigator.clipboard.writeText(k.url),n("Portal link copied to clipboard.","info"))}catch(T){console.error("Error sharing:",T)}};return o.jsxs("div",{className:"max-w-6xl mx-auto space-y-10 animate-fadeIn pb-24 px-4 md:px-0 font-sans",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-8",children:[o.jsxs("div",{className:"flex items-center gap-5",children:[o.jsx("div",{className:"p-3 bg-amber-100 text-amber-600 rounded-2xl shrink-0 shadow-sm border border-amber-50",children:o.jsx("svg",{className:"w-10 h-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"1.5",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"})})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-black text-slate-800 uppercase tracking-tight leading-none",children:"Help & Support"}),o.jsx("p",{className:"text-[11px] text-slate-400 font-bold uppercase tracking-[0.25em] mt-3",children:"Get help with the app or report a problem"})]})]}),s&&o.jsx("span",{className:"px-5 py-2.5 bg-amber-50 text-amber-700 border border-amber-100 rounded-2xl text-[10px] font-black uppercase tracking-[0.2em] animate-pulse",children:"View-Only Mode"})]}),o.jsxs("div",{className:"flex gap-3 bg-slate-100/50 p-2 rounded-2xl w-fit border border-slate-200/50 shadow-inner",children:[o.jsx("button",{onClick:()=>!s&&l("create"),disabled:s,className:`px-8 py-3 rounded-xl font-black text-[11px] uppercase tracking-widest transition-all ${i==="create"?"bg-white text-indigo-600 shadow-sm border border-slate-200":"text-slate-400"} ${s?"opacity-30 cursor-not-allowed grayscale":"hover:text-indigo-500"}`,children:"Ask for Help"}),o.jsx("button",{onClick:()=>l("list"),className:`px-8 py-3 rounded-xl font-black text-[11px] uppercase tracking-widest transition-all ${i==="list"?"bg-white text-indigo-600 shadow-sm border border-slate-200":"text-slate-400"} hover:text-indigo-500`,children:"See My Requests"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[o.jsx("div",{className:"lg:col-span-2 space-y-10",children:i==="create"?o.jsxs("div",{className:"bg-white p-8 sm:p-12 rounded-[2.5rem] border border-slate-100 shadow-2xl shadow-slate-100/50 animate-fadeIn",children:[o.jsx("h3",{className:"text-2xl font-black text-slate-800 uppercase tracking-tight mb-3",children:"Send a Help Request"}),o.jsx("p",{className:"text-slate-400 text-sm font-medium mb-10 leading-relaxed",children:"Tell us what's wrong and we'll look into it as soon as possible."}),o.jsxs("form",{onSubmit:C,className:"space-y-8",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] ml-1",children:"What is the problem? (Short Title)"}),o.jsx("input",{className:"w-full p-5 bg-slate-50 border border-slate-200 rounded-2xl text-sm font-bold text-slate-700 outline-none focus:ring-4 focus:ring-indigo-50 transition-all placeholder:font-normal",placeholder:"e.g. Can't sync my reports",value:x.subject,onChange:k=>v({...x,subject:k.target.value}),required:!0})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] ml-1",children:"Explain the problem in detail"}),o.jsx("textarea",{className:"w-full p-5 bg-slate-50 border border-slate-200 rounded-2xl text-sm font-medium text-slate-600 h-44 outline-none focus:ring-4 focus:ring-indigo-50 transition-all resize-none placeholder:font-normal",placeholder:"Describe what happened...",value:x.description,onChange:k=>v({...x,description:k.target.value}),required:!0})]}),o.jsx("button",{type:"submit",disabled:g,className:"w-full py-6 bg-slate-900 hover:bg-black text-white font-black rounded-2xl flex items-center justify-center gap-4 shadow-2xl shadow-slate-200 active:scale-95 transition-all text-xs uppercase tracking-[0.3em]",children:g?o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"animate-spin h-5 w-5 text-indigo-400",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):o.jsxs(o.Fragment,{children:["Send Help Request",o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"3",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})})]})]}):u?o.jsx(tb,{ticket:u,currentUser:t,isAdmin:(t==null?void 0:t.role)==="Admin"||(t==null?void 0:t.role)==="SuperAdmin",onClose:()=>p(null),onReply:b,isSendingReply:N,isLocked:s}):o.jsx(eb,{tickets:d,isLoading:m,onRefresh:y,onSelect:p,isAdmin:(t==null?void 0:t.role)==="Admin"||(t==null?void 0:t.role)==="SuperAdmin",filterStatus:"ALL"})}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white p-8 rounded-[2rem] border border-slate-100 shadow-lg animate-fadeIn",children:[o.jsx("h3",{className:"text-lg font-black text-slate-800 uppercase tracking-tight mb-2",children:"Share Application"}),o.jsx("p",{className:"text-xs text-slate-500 font-medium leading-relaxed mb-6",children:"Invite colleagues or save the link to your device for quick access."}),o.jsxs("button",{onClick:E,className:"w-full py-4 bg-emerald-600 hover:bg-emerald-700 text-white font-black rounded-xl shadow-lg transition-all active:scale-95 flex items-center justify-center gap-3 text-[10px] uppercase tracking-[0.2em]",children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})}),"Share Access Link"]})]}),o.jsxs("div",{className:"bg-indigo-50 p-8 rounded-[2rem] border border-indigo-100",children:[o.jsx("h4",{className:"text-xs font-black text-indigo-900 uppercase tracking-widest mb-4",children:"Support Hours"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between text-[11px] font-bold",children:[o.jsx("span",{className:"text-indigo-400 uppercase tracking-tighter",children:"Mon - Fri"}),o.jsx("span",{className:"text-indigo-900",children:"08:00 - 17:00"})]}),o.jsxs("div",{className:"flex justify-between text-[11px] font-bold",children:[o.jsx("span",{className:"text-indigo-400 uppercase tracking-tighter",children:"Saturday"}),o.jsx("span",{className:"text-indigo-900",children:"09:00 - 13:00"})]}),o.jsx("div",{className:"pt-4 border-t border-indigo-200/50",children:o.jsx("p",{className:"text-[10px] text-indigo-700 leading-relaxed font-medium",children:"Critical system outages are monitored 24/7 by our technical response team."})})]})]})]})]})]})},rb=({user:e,appScriptUrl:t,settings:n,onSettingsUpdate:r,showToast:s,onRefreshSubscription:i,subscription:l,history:d=[]})=>{const[f,u]=_.useState("info"),[p,m]=_.useState(""),[h,g]=_.useState(!1),[w,N]=_.useState(n.maintenanceMode||!1),[S,x]=_.useState(n.maintenanceMessage||"System under scheduled maintenance."),[v,y]=_.useState(!1),[C,b]=_.useState(new Date().toISOString().split("T")[0]),[E,k]=_.useState(1),[T,I]=_.useState("month"),[M,L]=_.useState("Enterprise"),[R,P]=_.useState(!1),A=_.useMemo(()=>{const O=new Date(C);return T==="month"?O.setMonth(O.getMonth()+Number(E)):O.setFullYear(O.getFullYear()+Number(E)),O.toISOString().split("T")[0]},[C,E,T]);_.useEffect(()=>{N(n.maintenanceMode||!1),x(n.maintenanceMessage||"System under scheduled maintenance.")},[n.maintenanceMode,n.maintenanceMessage]);const F=async()=>{if(!p.trim()){s("Please enter a message.","error");return}g(!0);try{await fetch(t,{method:"POST",body:JSON.stringify({action:"broadcast",type:f,message:p}),mode:"no-cors"}),s("Broadcast sent successfully!","success"),m("")}catch{s("Failed to send broadcast.","error")}finally{g(!1)}},z=async()=>{y(!0);try{await fetch(t,{method:"POST",body:JSON.stringify({action:"update_settings",...n,maintenanceMode:w,maintenanceMessage:S}),mode:"no-cors"}),r({maintenanceMode:w,maintenanceMessage:S}),s(w?"SYSTEM LOCKDOWN ACTIVATED":"System Access Restored","success")}catch{s("Failed to update status.","error")}finally{y(!1)}},J=async()=>{P(!0);try{const Ne=await(await fetch(t,{method:"POST",body:JSON.stringify({action:"extend_subscription",expiryDate:A,plan:M,processedBy:e.name})})).json();if(Ne.status==="success")s(`${M} license extended until ${A}`,"success"),i&&i();else throw new Error(Ne.message)}catch{s("Failed to update license on server.","error")}finally{P(!1)}},[j,H]=_.useState("1_Controller.gs"),[q,Z]=_.useState(null),[$,se]=_.useState(t),re=()=>{const O=Ys[j];O&&navigator.clipboard.writeText(O).then(()=>{Z(j),s(`${j} copied`,"success"),setTimeout(()=>Z(null),2e3)})},te=()=>{localStorage.setItem("safetyCheck_scriptUrl",$),window.location.reload()},oe=_.useMemo(()=>[...d].reverse(),[d]);return o.jsxs("div",{className:"max-w-6xl mx-auto animate-fadeIn pb-24 space-y-8 px-4 sm:px-0 font-sans",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 text-center sm:text-left",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl sm:text-4xl font-black text-slate-900 uppercase tracking-tight",children:"System Security & Core"}),o.jsx("p",{className:"text-slate-400 text-[9px] sm:text-[10px] font-bold uppercase tracking-[0.3em] mt-1",children:"Master Administrator Console"})]}),o.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-slate-100 rounded-2xl border border-slate-200",children:[o.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),o.jsx("span",{className:"text-[10px] font-black text-slate-600 uppercase tracking-widest",children:"Active Security Session"})]})]}),o.jsxs("section",{className:"bg-white rounded-[2rem] shadow-sm border border-slate-100 overflow-hidden",children:[o.jsxs("div",{className:"bg-slate-900 px-8 py-6 text-white flex flex-col sm:flex-row justify-between items-center gap-4",children:[o.jsxs("div",{className:"text-center sm:text-left",children:[o.jsx("h3",{className:"font-bold text-xl uppercase tracking-tight",children:"Subscription & Licensing"}),o.jsx("p",{className:"text-slate-400 text-[10px] font-bold uppercase tracking-widest mt-0.5",children:"Manage enterprise access duration"})]}),o.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-2xl flex items-center justify-center border border-white/5",children:o.jsx("svg",{className:"w-7 h-7 text-emerald-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})})]}),o.jsxs("div",{className:"p-6 sm:p-10 grid grid-cols-1 lg:grid-cols-12 gap-10",children:[o.jsx("div",{className:"lg:col-span-5 space-y-8",children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("h4",{className:"text-[11px] font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[o.jsx("span",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full"}),"New License Calculator"]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-widest ml-1",children:"Start Date"}),o.jsx("input",{type:"date",value:C,onChange:O=>b(O.target.value),className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl font-bold text-slate-700 outline-none focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-400 transition-all"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-widest ml-1",children:"Plan Type"}),o.jsxs("select",{value:M,onChange:O=>L(O.target.value),className:"w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl font-bold text-slate-700 outline-none h-[58px]",children:[o.jsx("option",{value:"Standard",children:"Standard"}),o.jsx("option",{value:"Professional",children:"Professional"}),o.jsx("option",{value:"Enterprise",children:"Enterprise"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-widest ml-1",children:"Renewal Duration"}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("input",{type:"number",min:"1",value:E,onChange:O=>k(Math.max(1,parseInt(O.target.value)||1)),className:"w-24 p-4 bg-slate-50 border border-slate-200 rounded-2xl font-bold text-slate-700 outline-none"}),o.jsxs("select",{value:T,onChange:O=>I(O.target.value),className:"flex-1 p-4 bg-slate-50 border border-slate-200 rounded-2xl font-bold text-slate-700 outline-none",children:[o.jsx("option",{value:"month",children:"Month(s)"}),o.jsx("option",{value:"year",children:"Year(s)"})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-white rounded-3xl p-8 border border-indigo-100 shadow-inner relative overflow-hidden group",children:[o.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-indigo-500/5 rounded-full -mr-10 -mt-10 group-hover:scale-110 transition-transform duration-500"}),o.jsxs("div",{className:"relative z-10 space-y-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-[10px] font-bold text-indigo-400 uppercase tracking-widest",children:"Calculated Expiry"}),o.jsx("p",{className:"text-3xl font-black text-indigo-900 tracking-tighter",children:new Date(A).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"})})]}),o.jsxs("button",{onClick:J,disabled:R,className:"w-full py-5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-2xl font-black text-xs uppercase tracking-[0.2em] shadow-xl shadow-indigo-200 transition-all active:scale-95 flex items-center justify-center gap-3 disabled:opacity-50",children:[R&&o.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Commit System Renewal"]})]})]})]})}),o.jsxs("div",{className:"lg:col-span-7 space-y-6",children:[o.jsxs("h4",{className:"text-[11px] font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[o.jsx("span",{className:"w-1.5 h-1.5 bg-slate-300 rounded-full"}),"License Registry History"]}),o.jsxs("div",{className:"bg-slate-50/50 rounded-3xl border border-slate-100 overflow-hidden",children:[o.jsx("div",{className:"hidden sm:block",children:o.jsxs("table",{className:"w-full text-left",children:[o.jsx("thead",{className:"bg-slate-100/80 text-slate-500 font-bold text-[10px] uppercase tracking-widest border-b border-slate-200",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-4",children:"Processor"}),o.jsx("th",{className:"px-6 py-4",children:"Tier"}),o.jsx("th",{className:"px-6 py-4",children:"Coverage Date"}),o.jsx("th",{className:"px-6 py-4 text-right",children:"Integrity"})]})}),o.jsx("tbody",{className:"divide-y divide-slate-100",children:oe.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:4,className:"p-16 text-center text-slate-300 font-bold italic uppercase tracking-widest text-[11px]",children:"Database empty / connection pending"})}):oe.map((O,Ne)=>{const ve=String(O.expiryDate||"").trim().split("T")[0],le=(l==null?void 0:l.expiryDate)===ve;return o.jsxs("tr",{className:`transition-colors ${le?"bg-indigo-50/40":"hover:bg-white"}`,children:[o.jsx("td",{className:"px-6 py-5",children:o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-slate-400 text-[8px] font-black uppercase mb-0.5",children:String(O.timestamp||"2026-01-01").split("T")[0]}),o.jsx("span",{className:"text-slate-700 font-bold text-xs truncate max-w-[120px]",children:O.processedBy})]})}),o.jsx("td",{className:"px-6 py-5",children:o.jsx("span",{className:"text-slate-500 font-black text-[10px] uppercase tracking-tighter",children:O.plan})}),o.jsx("td",{className:"px-6 py-5",children:o.jsx("span",{className:`font-black uppercase tracking-tight text-sm ${le?"text-indigo-600":"text-slate-400"}`,children:ve})}),o.jsx("td",{className:"px-6 py-5 text-right",children:le?o.jsx("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 bg-indigo-600 text-white rounded-full text-[8px] font-black uppercase tracking-widest shadow-sm",children:"Active"}):o.jsx("span",{className:"text-[9px] font-bold text-slate-300 uppercase tracking-widest",children:"Legacy"})})]},Ne)})})]})}),o.jsx("div",{className:"sm:hidden divide-y divide-slate-100 p-4",children:oe.length===0?o.jsx("div",{className:"p-10 text-center text-slate-300 font-bold italic uppercase tracking-widest text-[10px]",children:"No records found"}):oe.map((O,Ne)=>o.jsxs("div",{className:"py-5 first:pt-0 last:pb-0 space-y-3",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-[8px] font-black text-slate-400 uppercase",children:String(O.timestamp||"").split("T")[0]}),o.jsx("p",{className:"text-xs font-bold text-slate-800",children:O.processedBy})]}),(l==null?void 0:l.expiryDate)===String(O.expiryDate).split("T")[0]?o.jsx("span",{className:"px-2 py-0.5 bg-indigo-600 text-white rounded-full text-[7px] font-black uppercase tracking-widest",children:"Active"}):o.jsx("span",{className:"text-[7px] font-bold text-slate-300 uppercase",children:"Legacy"})]}),o.jsxs("div",{className:"flex justify-between items-center bg-white p-3 rounded-xl border border-slate-100",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-[8px] font-bold text-slate-400 uppercase",children:"Tier"}),o.jsx("span",{className:"text-[10px] font-black text-slate-600",children:O.plan})]}),o.jsxs("div",{className:"flex flex-col text-right",children:[o.jsx("span",{className:"text-[8px] font-bold text-slate-400 uppercase",children:"Expires"}),o.jsx("span",{className:"text-[11px] font-black text-slate-800 tracking-tight",children:String(O.expiryDate).split("T")[0]})]})]})]},Ne))})]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"bg-white rounded-[2rem] shadow-sm border border-slate-100 p-8 space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-blue-50 text-blue-600 rounded-xl flex items-center justify-center border border-blue-100/50",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"})})}),o.jsx("h3",{className:"font-bold text-slate-800 uppercase tracking-tight text-lg",children:"Global Broadcast"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase tracking-widest ml-1",children:"Message Body"}),o.jsx("textarea",{className:"w-full p-5 bg-slate-50 border border-slate-200 rounded-2xl h-36 outline-none focus:ring-4 focus:ring-blue-500/10 focus:border-blue-400 text-sm font-medium transition-all",placeholder:"Type important fleet-wide announcement...",value:p,onChange:O=>m(O.target.value)})]}),o.jsxs("button",{onClick:F,disabled:h,className:"w-full py-5 bg-blue-600 hover:bg-blue-700 text-white font-black rounded-2xl shadow-xl shadow-blue-100 transition-all flex items-center justify-center gap-3 uppercase tracking-widest text-[11px] active:scale-[0.98] disabled:opacity-50",children:[h?"Broadcasting...":"Dispatch Fleet Alert",!h&&o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})]}),o.jsxs("div",{className:"bg-rose-50 rounded-[2rem] border border-rose-100 p-8 space-y-6 flex flex-col justify-between",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx("div",{className:"w-10 h-10 bg-rose-100 text-rose-600 rounded-xl flex items-center justify-center border border-rose-200",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),o.jsx("h3",{className:"font-bold text-rose-800 uppercase tracking-tight text-lg",children:"System Lockdown"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between p-5 bg-white border border-rose-100 rounded-2xl shadow-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-black text-rose-900 uppercase tracking-tighter",children:"Maintenance Mode"}),o.jsx("p",{className:"text-[10px] text-rose-400 font-bold uppercase tracking-widest mt-0.5",children:"Restrict all non-admin access"})]}),o.jsx("button",{onClick:()=>N(!w),className:`relative inline-flex h-7 w-12 items-center rounded-full transition-colors ${w?"bg-rose-600":"bg-slate-200"}`,children:o.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white transition shadow-sm ${w?"translate-x-6":"translate-x-1"}`})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-[10px] font-bold text-rose-400 uppercase tracking-widest ml-1",children:"Lockdown Message"}),o.jsx("input",{type:"text",value:S,onChange:O=>x(O.target.value),className:"w-full p-4 bg-white border border-rose-100 rounded-2xl font-bold text-rose-800 outline-none placeholder:text-rose-200 focus:ring-4 focus:ring-rose-500/10"})]})]})]}),o.jsxs("button",{onClick:z,disabled:v,className:"w-full py-5 bg-rose-600 hover:bg-rose-700 text-white font-black rounded-2xl shadow-xl shadow-rose-200 transition-all flex items-center justify-center gap-3 uppercase tracking-widest text-[11px] active:scale-[0.98] disabled:opacity-50 mt-4",children:[v?"Updating...":"Apply System Status",!v&&o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})]})]})]}),o.jsxs("section",{className:"bg-white rounded-[2rem] shadow-sm border border-slate-100 p-6 sm:p-10 space-y-8",children:[o.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-slate-800 uppercase tracking-tight",children:"Backend Architecture"}),o.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest mt-0.5",children:"Deployment modules for Google Apps Script"})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[o.jsx("select",{value:j,onChange:O=>H(O.target.value),className:"p-4 bg-slate-50 border border-slate-200 rounded-2xl text-xs font-black text-slate-700 outline-none min-w-[200px] h-[54px]",children:Object.keys(Ys).map(O=>o.jsx("option",{value:O,children:O},O))}),o.jsxs("button",{onClick:re,className:"px-8 py-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-2xl font-black text-[11px] uppercase tracking-widest transition-all active:scale-[0.98] shadow-lg shadow-indigo-100 h-[54px] flex items-center justify-center gap-2",children:[q===j?o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})}):o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})}),q===j?"Copied to Clipboard":"Source Code"]})]})]}),o.jsxs("div",{className:"relative group",children:[o.jsx("div",{className:"absolute top-4 right-4 text-[9px] font-bold text-slate-300 uppercase tracking-widest pointer-events-none group-hover:opacity-0 transition-opacity",children:"Read Only"}),o.jsx("textarea",{readOnly:!0,value:Ys[j]||"",className:"w-full min-h-[400px] p-8 bg-slate-50 border border-slate-200 rounded-[2rem] font-mono text-[11px] leading-relaxed text-slate-500 focus:ring-0 outline-none resize-none scrollbar-hide border-dashed"})]}),o.jsxs("div",{className:"p-4 bg-amber-50 border border-amber-100 rounded-2xl flex items-center gap-3",children:[o.jsx("svg",{className:"w-5 h-5 text-amber-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),o.jsx("p",{className:"text-[10px] text-amber-700 font-bold uppercase tracking-widest leading-relaxed",children:"Deployment Note: Copy this module into your Google Apps Script editor and deploy as a new version to sync updates."})]})]}),o.jsxs("section",{className:"bg-white rounded-[2rem] shadow-sm border border-slate-100 p-8 sm:p-10 space-y-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-slate-800 uppercase tracking-tight flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-slate-100 text-slate-600 rounded-xl flex items-center justify-center border border-slate-200",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),"Google Apps Script URL"]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[o.jsx("input",{type:"text",value:$,onChange:O=>se(O.target.value),className:"flex-1 p-5 bg-slate-50 border border-slate-200 rounded-2xl font-mono text-xs text-slate-600 outline-none focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-400 transition-all",placeholder:"https://script.google.com/macros/s/..."}),o.jsx("button",{onClick:te,className:"px-8 py-5 bg-slate-900 hover:bg-black text-white rounded-2xl font-black text-[11px] uppercase tracking-[0.2em] active:scale-[0.98] shadow-2xl transition-all h-[60px]",children:"Save & Reload"})]}),o.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest text-center",children:"Caution: Changing this URL will reset the connection to your data storage."})]})]})},sb=({appScriptUrl:e,currentUser:t,showToast:n,onRequestNew:r})=>{const[s,i]=_.useState([]),[l,d]=_.useState(!1),f=window.isSubscriptionLocked||!1;_.useEffect(()=>{u();const g=setInterval(u,6e4);return()=>clearInterval(g)},[t==null?void 0:t.username,e]);const u=async()=>{if(!(!e||!t)){s.length===0&&d(!0);try{const N=(await(await fetch(`${e}?t=${new Date().getTime()}`)).json()).Inspection_Requests;if(N&&Array.isArray(N)&&N.length>1){const x=N.slice(1).map(v=>({id:v[0],requester:v[1],truck:v[3],trailer:v[4],type:v[5],reason:v[6],priority:v[7],assignedTo:v[8],status:v[9]||"Pending",timestamp:v[10]})).filter(v=>{const y=t.role.toLowerCase();if(y==="admin"||y==="superadmin")return!0;const C=String(t.name||"").toLowerCase(),b=String(v.requester).toLowerCase()===C,E=String(v.assignedTo).toLowerCase()===C,k=String(v.assignedTo).toLowerCase()==="unassigned";return y==="inspector"&&(E||k)||b}).sort((v,y)=>new Date(y.timestamp).getTime()-new Date(v.timestamp).getTime());i(x)}else i([])}catch(g){console.error("Failed to fetch requests",g),s.length===0&&n("Failed to load requests.","error")}finally{d(!1)}}},p=s.filter(g=>g.status==="Pending").length,m=s.filter(g=>g.status==="Completed").length,h=s.length>0?Math.round(m/s.length*100):0;return o.jsxs("div",{className:"max-w-6xl mx-auto space-y-8 animate-fadeIn px-4 md:px-0",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-4",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"text-3xl font-black text-gray-800 flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-indigo-100 text-indigo-700 rounded-xl shrink-0",children:o.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),"Inspection Requests & Tracking"]}),o.jsx("p",{className:"text-gray-500 font-medium mt-1 uppercase tracking-widest text-[10px]",children:"Fleet Request Pipeline Summary"})]}),o.jsx("div",{className:"flex gap-3 w-full md:w-auto",children:r&&o.jsxs("button",{onClick:r,disabled:f,className:`flex-1 md:flex-none px-6 py-3 text-white font-bold rounded-xl shadow-lg transition-all transform flex items-center justify-center gap-2 text-xs uppercase tracking-widest
                                ${f?"bg-slate-300 cursor-not-allowed grayscale":"bg-indigo-600 hover:bg-indigo-700 active:scale-95 shadow-indigo-200"}
                            `,children:[o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M12 4v16m8-8H4"})}),f?"Locked":"New Request"]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-wide",children:"Queue"}),o.jsx("h3",{className:"text-3xl font-black text-amber-500",children:p})]}),o.jsx("div",{className:"w-10 h-10 rounded-xl bg-amber-50 flex items-center justify-center text-amber-500",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),o.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-wide",children:"Finished"}),o.jsx("h3",{className:"text-3xl font-black text-emerald-600",children:m})]}),o.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-50 flex items-center justify-center text-emerald-600",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})})]}),o.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-wide",children:"Fulfillment"}),o.jsxs("h3",{className:"text-3xl font-black text-indigo-600",children:[h,"%"]})]}),o.jsx("div",{className:"w-10 h-10 rounded-xl bg-indigo-50 flex items-center justify-center text-indigo-600",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})]})]}),o.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden",children:o.jsxs("div",{className:"block md:table w-full",children:[o.jsx("div",{className:"bg-gray-50 text-[10px] font-bold text-slate-400 uppercase tracking-[0.2em] border-b border-gray-100 hidden md:table-header-group",children:o.jsxs("div",{className:"md:table-row",children:[o.jsx("div",{className:"md:table-cell px-8 py-5",children:"Status"}),o.jsx("div",{className:"md:table-cell px-8 py-5",children:"Vehicle"}),o.jsx("div",{className:"md:table-cell px-8 py-5",children:"Order Detail"}),o.jsx("div",{className:"md:table-cell px-8 py-5",children:"Personnel"}),o.jsx("div",{className:"md:table-cell px-8 py-5 text-right",children:"Requested"})]})}),o.jsx("div",{className:"block md:table-row-group divide-y divide-gray-100",children:l?o.jsxs("div",{className:"p-12 text-center text-gray-400 flex flex-col items-center",children:[o.jsx("div",{className:"w-8 h-8 border-4 border-gray-200 border-t-indigo-500 rounded-full animate-spin mb-4"}),o.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest",children:"Updating Pipeline..."})]}):s.length===0?o.jsxs("div",{className:"p-16 text-center",children:[o.jsx("h3",{className:"text-gray-800 font-bold mb-1",children:"Queue Empty"}),o.jsx("p",{className:"text-sm text-gray-400",children:"No active inspection requests found."})]}):s.map(g=>o.jsxs("div",{className:"hover:bg-gray-50 transition block md:table-row p-6 md:p-0 relative",children:[o.jsx("div",{className:"md:table-cell md:px-8 md:py-6 block mb-4 md:mb-0",children:g.status==="Completed"?o.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-xl text-[10px] font-bold bg-emerald-50 text-emerald-600 border border-emerald-100 uppercase tracking-widest",children:[o.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})}),"Fulfilled"]}):o.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-xl text-[10px] font-bold bg-amber-50 text-amber-700 border border-amber-100 animate-pulse uppercase tracking-widest",children:[o.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-amber-500"}),"Active"]})}),o.jsxs("div",{className:"md:table-cell md:px-8 md:py-6 block mb-4 md:mb-0",children:[o.jsx("div",{className:"md:hidden text-[9px] font-black text-slate-300 uppercase tracking-widest mb-1",children:"Vehicle Asset"}),o.jsx("div",{className:"font-bold text-gray-800 text-base uppercase",children:g.truck}),o.jsx("div",{className:"text-[10px] text-gray-400 font-bold",children:g.trailer||"Stand-alone Unit"})]}),o.jsxs("div",{className:"md:table-cell md:px-8 md:py-6 block mb-4 md:mb-0",children:[o.jsx("div",{className:"md:hidden text-[9px] font-black text-slate-300 uppercase tracking-widest mb-1",children:"Classification"}),o.jsxs("div",{className:"text-xs font-bold text-gray-700",children:[g.type," Check"]}),o.jsxs("div",{className:`text-[10px] font-black uppercase mt-0.5 tracking-wider ${g.priority==="Critical"||g.priority==="Urgent"||g.priority==="Safety Concern"?"text-red-600":"text-slate-400"}`,children:[g.priority," Priority"]})]}),o.jsxs("div",{className:"md:table-cell md:px-8 md:py-6 block mb-4 md:mb-0",children:[o.jsx("div",{className:"md:hidden text-[9px] font-black text-slate-300 uppercase tracking-widest mb-1",children:"Assigned Resource"}),g.assignedTo&&g.assignedTo!=="Unassigned"?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-7 h-7 rounded-lg bg-slate-100 flex items-center justify-center text-[10px] font-black text-slate-500 border border-slate-200 shadow-sm",children:g.assignedTo.charAt(0).toUpperCase()}),o.jsx("span",{className:"text-gray-600 font-bold text-xs",children:g.assignedTo})]}):o.jsx("span",{className:"text-gray-400 italic text-[11px] font-medium tracking-wide",children:"Pending Dispatch"})]}),o.jsxs("div",{className:"md:table-cell md:px-8 md:py-6 md:text-right block text-slate-400 font-mono text-[11px] pt-4 md:pt-6 border-t md:border-0 border-gray-50",children:[o.jsx("div",{className:"md:hidden text-[9px] font-black text-slate-300 uppercase tracking-widest mb-1",children:"Order Date"}),new Date(g.timestamp).toLocaleDateString(),o.jsx("div",{className:"text-[9px] opacity-60 uppercase font-black",children:new Date(g.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},g.id))})]})})]})},ob=({historyList:e,isLoading:t})=>{const[n,r]=_.useState(!1),[s,i]=_.useState(null),l=_.useMemo(()=>{if(!e.length)return null;const f=e.length,u=e.filter(b=>Number(b.rate)<=2).length,p=e.filter(b=>Number(b.rate)===3).length,m=e.filter(b=>Number(b.rate)>=4).length,h=m/f*100,g=h.toFixed(1),w={},N={},S={"Mechanical & Braking":0,"Tyres & Wheels":0,"Documentation & PPE":0,"Electrical & Lights":0,"Visibility & Body":0,"Fluid Leaks & Environmental":0};e.forEach(b=>{const E=Number(b.rate);if(E<=3&&(w[b.truckNo]=(w[b.truckNo]||0)+1),Object.entries(b).forEach(([k,T])=>{if(T==="Bad"||T==="Needs Attention"){const I=k.toLowerCase();I.includes("brake")||I.includes("mech")||I.includes("fifth")||I.includes("landing")?S["Mechanical & Braking"]++:I.includes("tyre")||I.includes("wheel")||I.includes("nut")?S["Tyres & Wheels"]++:I.includes("road")||I.includes("doc")||I.includes("suit")||I.includes("gear")||I.includes("ppe")||I.includes("manual")?S["Documentation & PPE"]++:I.includes("light")||I.includes("lamp")||I.includes("indica")||I.includes("horn")||I.includes("elec")||I.includes("ignit")?S["Electrical & Lights"]++:I.includes("wind")||I.includes("mirror")||I.includes("screen")||I.includes("cab")||I.includes("body")?S["Visibility & Body"]++:(I.includes("leak")||I.includes("spill")||I.includes("fluid")||I.includes("oil"))&&S["Fluid Leaks & Environmental"]++}}),b.driverName){const k=E===5?10:E===4?5:E===3?-5:-20;N[b.driverName]=(N[b.driverName]||0)+k}});const x=Object.values(S).reduce((b,E)=>b+E,0),v=Object.entries(S).map(([b,E])=>({label:b,count:E,pct:x>0?E/x*100:0})).sort((b,E)=>E.count-b.count),y=Object.entries(N).sort(([,b],[,E])=>E-b).slice(0,3),C=[{label:"Exemplary (5/5)",count:e.filter(b=>Number(b.rate)===5).length,color:"bg-emerald-600"},{label:"Good (4/5)",count:e.filter(b=>Number(b.rate)===4).length,color:"bg-emerald-400"},{label:"Serviceable (3/5)",count:p,color:"bg-amber-400"},{label:"Immediate Action (1-2/5)",count:u,color:"bg-rose-500"}];return{total:f,criticalCount:u,warningCount:p,goodCount:m,passRate:g,passRateNum:h,sortedRisks:v,leaderboard:y,conditionDistribution:C,totalFaults:x}},[e]),d=()=>{l&&(r(!0),setTimeout(()=>{const f=l.passRateNum,u=l.sortedRisks[0];let p="";f>=90?p="The fleet is operating at peak safety compliance.":f>=75?p="Overall fleet health is stable, though minor maintenance trends are emerging.":p="CRITICAL: The fleet safety rating has fallen below acceptable thresholds.";const m=u&&u.count>0?`The systemic analysis identifies '${u.label}' as the primary source of safety downgrades, accounting for ${u.pct.toFixed(0)}% of all recorded faults.`:"No significant systemic failure patterns detected.",h=`EXECUTIVE BRIEFING:
${p} Out of ${l.total} audits, ${l.goodCount} were satisfactory.

SYSTEMIC ANALYSIS:
${m}

STRATEGY:
1. Prioritize preventative maintenance on ${(u==null?void 0:u.label)||"critical systems"}.
2. Reinforce compliance standards for underperforming domains.
3. Review driver pre-trip inspection diligence for high-frequency fault areas.`;i(h),r(!1)},600))};return t?o.jsxs("div",{className:"flex flex-col items-center justify-center py-24 gap-4",children:[o.jsx("div",{className:"w-12 h-12 border-4 border-slate-100 border-t-indigo-600 rounded-full animate-spin"}),o.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Compiling Fleet Intelligence..."})]}):l?o.jsxs("div",{className:"max-w-6xl mx-auto space-y-10 animate-fadeIn font-sans pb-24 px-4 md:px-0",children:[o.jsxs("div",{className:"flex justify-between items-end px-2",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-black text-slate-900 uppercase tracking-tight leading-none",children:"Fleet Insights"}),o.jsx("p",{className:"text-slate-400 text-[10px] font-bold uppercase tracking-[0.3em] mt-3",children:"Safety & Risk Intelligence"})]}),o.jsx("div",{className:"text-right hidden sm:block",children:o.jsx("span",{className:"text-[10px] font-black text-slate-300 uppercase tracking-widest",children:"Analytics Engine v3.0"})})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6",children:[o.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-slate-100 shadow-sm",children:[o.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-4",children:"Total Audits"}),o.jsx("h3",{className:"text-4xl font-black text-slate-900",children:l.total})]}),o.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-slate-100 shadow-sm",children:[o.jsx("p",{className:"text-[10px] font-black text-emerald-500 uppercase tracking-widest mb-4",children:"Pass Rate"}),o.jsxs("h3",{className:"text-4xl font-black text-emerald-600",children:[l.passRate,"%"]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-slate-100 shadow-sm",children:[o.jsx("p",{className:"text-[10px] font-black text-amber-500 uppercase tracking-widest mb-4",children:"Warnings"}),o.jsx("h3",{className:"text-4xl font-black text-amber-600",children:l.warningCount})]}),o.jsxs("div",{className:"bg-rose-50 p-6 rounded-3xl border border-rose-100 shadow-sm",children:[o.jsx("p",{className:"text-[10px] font-black text-rose-500 uppercase tracking-widest mb-4",children:"Grounded"}),o.jsx("h3",{className:"text-4xl font-black text-rose-600",children:l.criticalCount})]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-indigo-900 via-slate-900 to-black p-10 rounded-[2.5rem] text-white shadow-2xl relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-indigo-500/10 rounded-full -mr-32 -mt-32 blur-3xl"}),o.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-center justify-between gap-12",children:[o.jsxs("div",{className:"max-w-md text-center md:text-left",children:[o.jsx("h4",{className:"text-sm font-black text-indigo-300 uppercase tracking-[0.2em] mb-4",children:"Safety Excellence Leaderboard"}),o.jsx("p",{className:"text-slate-400 text-sm font-medium leading-relaxed",children:"Recognizing outstanding safety standards. Points are aggregated from deterministic vehicle health scores."})]}),o.jsxs("div",{className:"flex items-end gap-2 sm:gap-6 pt-10",children:[l.leaderboard[1]&&o.jsxs("div",{className:"flex flex-col items-center group",children:[o.jsx("div",{className:"w-12 h-12 bg-slate-400/20 rounded-full border border-slate-400/30 flex items-center justify-center font-black text-slate-300 mb-2 group-hover:scale-110 transition-transform",children:"2"}),o.jsxs("div",{className:"w-20 sm:w-28 h-20 sm:h-24 bg-gradient-to-t from-slate-400/20 to-slate-400/40 rounded-t-2xl border-x border-t border-slate-400/20 p-4 text-center",children:[o.jsx("p",{className:"text-[8px] font-black text-slate-400 uppercase truncate",children:l.leaderboard[1][0]}),o.jsxs("p",{className:"text-xs font-black text-white mt-1",children:[l.leaderboard[1][1]," pts"]})]})]}),l.leaderboard[0]&&o.jsxs("div",{className:"flex flex-col items-center group",children:[o.jsx("div",{className:"w-16 h-16 bg-amber-500/20 rounded-full border border-amber-500/40 flex items-center justify-center font-black text-amber-400 mb-2 shadow-[0_0_20px_rgba(245,158,11,0.2)] group-hover:scale-110 transition-transform",children:"1"}),o.jsxs("div",{className:"w-24 sm:w-32 h-28 sm:h-36 bg-gradient-to-t from-amber-500/20 to-amber-500/40 rounded-t-2xl border-x border-t border-amber-500/30 p-4 text-center",children:[o.jsx("p",{className:"text-[10px] font-black text-amber-300 uppercase truncate",children:l.leaderboard[0][0]}),o.jsxs("p",{className:"text-lg font-black text-white mt-1",children:[l.leaderboard[0][1]," pts"]}),o.jsx("div",{className:"mt-3 flex justify-center",children:o.jsx("svg",{className:"w-4 h-4 text-amber-400 animate-bounce",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})})]})]}),l.leaderboard[2]&&o.jsxs("div",{className:"flex flex-col items-center group",children:[o.jsx("div",{className:"w-12 h-12 bg-orange-800/20 rounded-full border border-orange-800/30 flex items-center justify-center font-black text-orange-400 mb-2 group-hover:scale-110 transition-transform",children:"3"}),o.jsxs("div",{className:"w-20 sm:w-28 h-16 sm:h-20 bg-gradient-to-t from-orange-800/20 to-orange-800/40 rounded-t-2xl border-x border-t border-orange-800/20 p-4 text-center",children:[o.jsx("p",{className:"text-[8px] font-black text-orange-300 uppercase truncate",children:l.leaderboard[2][0]}),o.jsxs("p",{className:"text-xs font-black text-white mt-1",children:[l.leaderboard[2][1]," pts"]})]})]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"bg-white p-6 sm:p-10 rounded-[2.5rem] border border-slate-100 shadow-sm",children:[o.jsxs("h4",{className:"text-sm font-black text-slate-800 uppercase tracking-widest mb-8 flex items-center gap-2",children:[o.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-500"}),"Asset Condition Profile"]}),o.jsx("div",{className:"space-y-6",children:l.conditionDistribution.map((f,u)=>{const p=(f.count/l.total*100).toFixed(0);return o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-[11px] font-bold text-slate-500 uppercase tracking-tighter",children:[o.jsx("span",{children:f.label}),o.jsxs("span",{className:"text-slate-900",children:[f.count," Units (",p,"%)"]})]}),o.jsx("div",{className:"h-3 bg-slate-50 rounded-lg overflow-hidden border border-slate-100",children:o.jsx("div",{className:`h-full ${f.color} transition-all duration-1000`,style:{width:`${p}%`}})})]},u)})})]}),o.jsxs("div",{className:"bg-slate-900 p-6 sm:p-10 rounded-[2.5rem] text-white shadow-2xl relative overflow-hidden flex flex-col",children:[o.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-500/10 rounded-full -mr-20 -mt-20 blur-3xl"}),o.jsxs("div",{className:"flex justify-between items-start mb-8 relative z-10",children:[o.jsx("h4",{className:"text-sm font-black text-indigo-400 uppercase tracking-widest",children:"Systemic Risk Profile"}),o.jsx("span",{className:"text-[8px] font-black bg-white/10 px-2 py-1 rounded text-slate-400 uppercase tracking-widest",children:"Fault Frequency"})]}),o.jsx("div",{className:"flex-1 space-y-6 relative z-10 overflow-y-auto pr-2 scrollbar-hide",children:l.totalFaults>0?l.sortedRisks.map((f,u)=>o.jsxs("div",{className:"space-y-2 group",children:[o.jsxs("div",{className:"flex justify-between items-end",children:[o.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-300 group-hover:text-white transition-colors",children:f.label}),o.jsxs("p",{className:"text-[10px] font-bold text-indigo-400",children:[f.count," Faults"]})]}),o.jsx("div",{className:"h-2 bg-white/5 rounded-full overflow-hidden border border-white/5",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-600 to-indigo-400 transition-all duration-1000 ease-out",style:{width:`${f.pct}%`}})})]},u)):o.jsx("div",{className:"h-40 flex items-center justify-center",children:o.jsx("p",{className:"text-slate-500 italic text-sm text-center px-6",children:"No systemic safety failures identified in active registry."})})}),o.jsx("p",{className:"text-[8px] text-slate-500 font-bold uppercase tracking-[0.2em] mt-6 border-t border-white/5 pt-4",children:"Root-Cause Intelligence Hub v3.0 (Pattern Logic)"})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white p-8 sm:p-10 rounded-[2.5rem] border border-slate-100 shadow-sm flex flex-col md:flex-row items-center justify-between gap-6",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-black text-lg uppercase tracking-tight leading-none",children:"Management Briefing"}),o.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mt-1",children:"Cross-Fleet Logic Aggregator"})]}),o.jsx("button",{onClick:d,disabled:n,className:"w-full md:w-auto px-8 py-3 bg-slate-900 text-white rounded-xl font-black text-[11px] uppercase tracking-widest hover:bg-black transition-all shadow-lg active:scale-95 disabled:bg-slate-200",children:n?"Analyzing Patterns...":"Generate Executive Brief"})]}),s&&o.jsx("div",{className:"bg-white p-10 rounded-[2.5rem] border border-slate-100 shadow-2xl animate-fadeIn",children:o.jsx("div",{className:"prose prose-slate max-w-none",children:o.jsx("p",{className:"text-slate-700 font-medium whitespace-pre-wrap leading-relaxed text-sm",children:s})})})]})]}):o.jsx("div",{className:"py-24 text-center",children:o.jsx("p",{className:"text-slate-400 font-medium text-sm italic",children:"Insufficient data to generate analytics report."})})},ib=({historyList:e,isLoading:t,onClose:n})=>{const r=_.useMemo(()=>{if(!e.length)return null;const s={};e.forEach(p=>{(!s[p.truckNo]||new Date(p.timestamp)>new Date(s[p.truckNo].timestamp))&&(s[p.truckNo]=p)});const i=Object.values(s),l=i.filter(p=>Number(p.rate)<=2),d=i.filter(p=>Number(p.rate)===3),f=i.filter(p=>Number(p.rate)>=4),u=[...e].sort((p,m)=>new Date(m.timestamp).getTime()-new Date(p.timestamp).getTime()).slice(0,12);return{grounded:l,warning:d,active:f,recentLogs:u,totalAssets:i.length}},[e]);return t?o.jsxs("div",{className:"fixed inset-0 z-[200] bg-slate-950 flex flex-col items-center justify-center gap-6",children:[o.jsx("div",{className:"w-16 h-16 border-4 border-slate-900 border-t-emerald-500 rounded-full animate-spin"}),o.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Waking Operations Monitor..."})]}):r?o.jsxs("div",{className:"fixed inset-0 z-[200] bg-slate-950 text-white overflow-hidden flex flex-col font-sans",children:[o.jsxs("div",{className:"h-20 border-b border-white/5 flex items-center justify-between px-10 shrink-0 bg-slate-900/50 backdrop-blur-md",children:[o.jsxs("div",{className:"flex items-center gap-6",children:[o.jsx("div",{className:"w-10 h-10 bg-indigo-600 rounded-lg flex items-center justify-center font-black text-xl italic shadow-[0_0_20px_rgba(79,70,229,0.4)]",children:"S"}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-black uppercase tracking-tighter leading-none",children:"Fleet Control Center"}),o.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-[0.3em] mt-1",children:"Live Telemetry Interface"})]})]}),o.jsxs("div",{className:"hidden lg:flex gap-10",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-1",children:"Fleet Deployment"}),o.jsx("p",{className:"text-2xl font-black tracking-tight",children:r.totalAssets})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-[9px] font-bold text-emerald-500 uppercase tracking-widest mb-1",children:"Operational"}),o.jsx("p",{className:"text-2xl font-black text-emerald-400 tracking-tight",children:r.active.length})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-[9px] font-bold text-rose-500 uppercase tracking-widest mb-1",children:"Grounded"}),o.jsx("p",{className:"text-2xl font-black text-rose-400 tracking-tight",children:r.grounded.length})]})]}),o.jsxs("button",{onClick:n,className:"px-6 py-2.5 bg-white/5 hover:bg-white/10 border border-white/10 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all flex items-center gap-2 group",children:[o.jsx("svg",{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M15 19l-7-7 7-7"})}),"Exit Monitor"]})]}),o.jsxs("div",{className:"flex-1 grid grid-cols-12 gap-px bg-white/5 overflow-hidden",children:[o.jsxs("div",{className:"col-span-12 md:col-span-3 bg-slate-950 flex flex-col",children:[o.jsx("div",{className:"p-6 border-b border-white/5",children:o.jsxs("h3",{className:"text-xs font-black text-rose-500 uppercase tracking-[0.2em] flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 rounded-full bg-rose-500 animate-ping"}),"Safety Exceptions"]})}),o.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-hide p-4 space-y-3",children:r.grounded.length===0?o.jsx("div",{className:"h-full flex items-center justify-center text-slate-600 text-[10px] font-bold uppercase tracking-widest italic text-center px-4",children:"No critical exceptions detected in active fleet."}):r.grounded.map((s,i)=>o.jsxs("div",{className:"bg-rose-500/10 border border-rose-500/20 rounded-2xl p-5 animate-pulse",children:[o.jsxs("div",{className:"flex justify-between items-start mb-3",children:[o.jsx("span",{className:"text-lg font-black text-white tracking-tighter uppercase",children:s.truckNo}),o.jsx("span",{className:"text-[10px] font-bold text-rose-400 bg-rose-950 px-2 py-0.5 rounded border border-rose-800",children:"GROUNDED"})]}),o.jsxs("p",{className:"text-[10px] text-rose-200/60 font-medium leading-relaxed italic line-clamp-2",children:['"',s.remarks,'"']}),o.jsxs("div",{className:"mt-4 pt-4 border-t border-rose-500/10 flex justify-between items-end",children:[o.jsx("span",{className:"text-[8px] font-bold text-rose-300 uppercase",children:s.inspectedBy}),o.jsx("span",{className:"text-[8px] font-black text-slate-500 uppercase",children:new Date(s.timestamp).toLocaleDateString()})]})]},i))})]}),o.jsxs("div",{className:"hidden md:flex md:col-span-5 bg-slate-900/20 flex-col border-x border-white/5",children:[o.jsxs("div",{className:"p-6 border-b border-white/5 flex justify-between items-center",children:[o.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-[0.2em]",children:"Activity Stream"}),o.jsx("span",{className:"text-[8px] text-indigo-400 font-black animate-pulse uppercase",children:"Syncing Now"})]}),o.jsxs("div",{className:"flex-1 overflow-hidden p-6 relative",children:[o.jsx("div",{className:"space-y-4",children:r.recentLogs.map((s,i)=>o.jsxs("div",{className:"flex items-center gap-6 p-4 bg-white/5 rounded-2xl border border-white/5 hover:bg-white/10 transition-all duration-500 group",children:[o.jsx("div",{className:`w-3 h-3 rounded-full shrink-0 shadow-[0_0_10px_currentColor] ${Number(s.rate)>=4?"text-emerald-500":Number(s.rate)===3?"text-amber-500":"text-rose-500"} bg-current`}),o.jsxs("div",{className:"flex-1 flex items-center justify-between min-w-0",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-black uppercase tracking-tight group-hover:text-indigo-300 transition-colors",children:s.truckNo}),o.jsx("p",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-widest",children:s.inspectedBy})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("p",{className:"text-xs font-black text-slate-300",children:[s.rate,"/5"]}),o.jsx("p",{className:"text-[8px] font-medium text-slate-600 uppercase mt-1",children:new Date(s.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})]},i))}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-slate-950 to-transparent"})]})]}),o.jsxs("div",{className:"hidden lg:flex lg:col-span-4 bg-slate-950 flex flex-col",children:[o.jsx("div",{className:"p-6 border-b border-white/5",children:o.jsx("h3",{className:"text-xs font-black text-indigo-400 uppercase tracking-[0.2em]",children:"Asset Inventory Status"})}),o.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-hide p-6",children:o.jsx("div",{className:"grid grid-cols-2 gap-3",children:[...r.active,...r.warning,...r.grounded].map((s,i)=>o.jsxs("div",{className:"p-3 rounded-xl bg-white/5 border border-white/5 flex items-center justify-between",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("p",{className:"text-[11px] font-black uppercase truncate",children:s.truckNo}),o.jsx("p",{className:"text-[8px] text-slate-500 font-bold uppercase mt-0.5",children:s.location})]}),o.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${Number(s.rate)>=4?"bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.4)]":Number(s.rate)===3?"bg-amber-500 shadow-[0_0_8px_rgba(245,158,11,0.4)]":"bg-rose-500 shadow-[0_0_8px_rgba(244,63,94,0.4)]"}`})]},i))})}),o.jsx("div",{className:"p-6 border-t border-white/5 bg-slate-900/30 text-center",children:o.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:" SCBC Operations Desk 2026"})})]})]})]}):null},lb=[{id:"1",title:"Tire Inspection SOP",category:"SOP",url:"#",description:"Standard protocol for multi-point tire wear and pressure auditing."},{id:"2",title:"Acid Handling Safety",category:"Safety",url:"#",description:"Emergency protocols for sulfuric and hydrochloric acid transport."},{id:"3",title:"Petroleum V2 Guidelines",category:"Manual",url:"#",description:"Detailed walkthrough of the updated Petroleum V2 checklist."},{id:"4",title:"Brake Testing Video",category:"Video",url:"#",description:"Instructional video on conducting static and dynamic brake tests."},{id:"5",title:"PPE Compliance 2026",category:"Safety",url:"#",description:"Latest requirements for protective gear in high-risk zones."},{id:"6",title:"Electronic Logging Manual",category:"Manual",url:"#",description:"Guide for using the electronic on-board recording system."}],ab=()=>{const[e,t]=_.useState(""),[n,r]=_.useState("All"),s=lb.filter(i=>{const l=i.title.toLowerCase().includes(e.toLowerCase())||i.description.toLowerCase().includes(e.toLowerCase()),d=n==="All"||i.category===n;return l&&d});return o.jsxs("div",{className:"max-w-6xl mx-auto space-y-10 animate-fadeIn font-sans pb-24",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-6 px-2",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-black text-slate-900 uppercase tracking-tight leading-none",children:"Resource Vault"}),o.jsx("p",{className:"text-slate-400 text-[10px] font-bold uppercase tracking-[0.3em] mt-3",children:"SOPs, Manuals & Compliance Media"})]}),o.jsx("div",{className:"flex gap-2 w-full md:w-auto overflow-x-auto pb-1 scrollbar-hide",children:["All","SOP","Manual","Safety","Video"].map(i=>o.jsx("button",{onClick:()=>r(i),className:`px-6 py-2 rounded-full text-[10px] font-black uppercase tracking-widest transition-all whitespace-nowrap
                                ${n===i?"bg-indigo-600 text-white shadow-lg shadow-indigo-100":"bg-slate-100 text-slate-500 hover:bg-slate-200"}
                            `,children:i},i))})]}),o.jsxs("div",{className:"relative",children:[o.jsx("svg",{className:"w-5 h-5 absolute left-5 top-1/2 -translate-y-1/2 text-slate-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),o.jsx("input",{type:"text",placeholder:"Search documentation library...",className:"w-full pl-14 pr-6 py-5 bg-white border border-slate-100 rounded-3xl shadow-sm outline-none focus:ring-4 focus:ring-indigo-50 transition-all font-medium text-slate-700",value:e,onChange:i=>t(i.target.value)})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:s.map(i=>o.jsxs("div",{className:"bg-white rounded-[2rem] border border-slate-100 p-8 shadow-sm hover:shadow-xl transition-all group flex flex-col justify-between",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-start mb-6",children:[o.jsx("div",{className:`px-4 py-1 rounded-full text-[9px] font-black uppercase tracking-[0.2em]
                                    ${i.category==="SOP"?"bg-emerald-50 text-emerald-600":i.category==="Video"?"bg-rose-50 text-rose-600":i.category==="Manual"?"bg-blue-50 text-blue-600":"bg-amber-50 text-amber-600"}
                                `,children:i.category}),o.jsx("div",{className:"w-10 h-10 rounded-xl bg-slate-50 flex items-center justify-center text-slate-300 group-hover:bg-indigo-50 group-hover:text-indigo-600 transition-colors",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})})]}),o.jsx("h3",{className:"text-lg font-black text-slate-800 uppercase tracking-tight mb-2 group-hover:text-indigo-600 transition-colors",children:i.title}),o.jsx("p",{className:"text-slate-500 text-xs font-medium leading-relaxed",children:i.description})]}),o.jsxs("a",{href:i.url,target:"_blank",rel:"noopener noreferrer",className:"mt-8 flex items-center justify-between px-6 py-3 bg-slate-50 hover:bg-indigo-600 hover:text-white rounded-xl transition-all text-[10px] font-black uppercase tracking-widest text-slate-500",children:["Open Resource",o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]},i.id))}),s.length===0&&o.jsx("div",{className:"py-20 text-center",children:o.jsx("p",{className:"text-slate-400 font-medium text-sm italic",children:"No resources found matching your search."})})]})},cb=({appScriptUrl:e,validationLists:t,onRefresh:n,showToast:r,isLocked:s})=>{const[i,l]=_.useState(""),[d,f]=_.useState(""),[u,p]=_.useState(!1),[m,h]=_.useState(!1),g=_.useRef(null),w=async x=>{const v=x==="truck"?i:d;if(!(!v.trim()||s)){p(!0);try{await fetch(e,{method:"POST",body:JSON.stringify({action:"manage_fleet",type:x,value:v.trim().toUpperCase()}),mode:"no-cors"}),r(`${x==="truck"?"Truck":"Trailer"} added`,"success"),x==="truck"?l(""):f(""),setTimeout(n,1e3)}finally{p(!1)}}},N=()=>{const x=`Truck,Trailer
ABC 123,T-100
XYZ 789,T-200`,v=new Blob([x],{type:"text/csv;charset=utf-8;"}),y=URL.createObjectURL(v),C=document.createElement("a");C.setAttribute("href",y),C.setAttribute("download","fleet_registry_sample.csv"),C.style.visibility="hidden",document.body.appendChild(C),C.click(),document.body.removeChild(C)},S=x=>{var C;const v=(C=x.target.files)==null?void 0:C[0];if(!v||s)return;const y=new FileReader;y.onload=async b=>{var k;const E=(k=b.target)==null?void 0:k.result;if(E){h(!0);try{const T=E.split(/\r?\n/),I=[],M=[];for(let L=1;L<T.length;L++){const R=T[L].trim();if(!R)continue;const[P,A]=R.split(",").map(F=>(F==null?void 0:F.trim().toUpperCase())||"");P&&I.push(P),A&&M.push(A)}if(I.length===0&&M.length===0){r("No data found","warning");return}await fetch(e,{method:"POST",body:JSON.stringify({action:"bulk_manage_fleet",trucks:I,trailers:M}),mode:"no-cors"}),r("Import complete","success"),setTimeout(n,1500)}finally{h(!1),g.current&&(g.current.value="")}}},y.readAsText(v)};return o.jsxs("div",{className:"max-w-6xl mx-auto space-y-12 py-4 px-4 font-sans",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 border-b border-slate-100 pb-8",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-black text-slate-800 uppercase tracking-tight",children:"Fleet Registry"}),o.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-[0.3em] mt-2",children:"Validated Asset Management"})]}),o.jsxs("div",{className:"flex flex-col sm:items-end gap-2 w-full sm:w-auto",children:[o.jsxs("div",{className:"flex flex-wrap gap-2 w-full sm:w-auto",children:[o.jsxs("button",{onClick:N,className:"flex-1 sm:flex-none px-6 py-3 bg-white border border-slate-200 text-slate-600 rounded-xl font-black text-[10px] uppercase tracking-widest transition-all hover:bg-slate-50 active:scale-95 flex items-center justify-center gap-2",children:[o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:o.jsx("path",{d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download Sample"]}),o.jsx("input",{type:"file",accept:".csv",className:"hidden",ref:g,onChange:S}),o.jsx("button",{onClick:()=>{var x;return(x=g.current)==null?void 0:x.click()},disabled:s||m,className:"flex-1 sm:flex-none px-6 py-3 bg-slate-900 text-white rounded-xl font-black text-[10px] uppercase tracking-widest transition-all active:scale-95 disabled:opacity-30 flex items-center justify-center gap-2",children:m?"Processing File...":"Upload Registry CSV"})]}),o.jsx("p",{className:"text-[9px] text-slate-400 font-bold uppercase",children:"Format: Truck,Trailer (No spaces)"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-10",children:[o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",placeholder:"New Truck Reg...",className:"flex-1 p-3 bg-white border border-slate-200 rounded-xl text-xs font-bold uppercase outline-none focus:ring-2 focus:ring-indigo-50",value:i,onChange:x=>l(x.target.value)}),o.jsx("button",{onClick:()=>w("truck"),disabled:u||!i.trim()||s,className:"px-5 py-3 bg-indigo-600 text-white rounded-xl font-bold text-[10px] uppercase tracking-widest disabled:opacity-30",children:"Add"})]}),o.jsxs("div",{className:"bg-slate-50/50 rounded-2xl border border-slate-100 overflow-hidden",children:[o.jsxs("div",{className:"p-4 bg-slate-100/50 border-b border-slate-200/50 flex justify-between",children:[o.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:"Truck List"}),o.jsxs("span",{className:"text-[10px] font-bold text-slate-300",children:[t.trucks.length," Units"]})]}),o.jsx("div",{className:"max-h-[300px] overflow-y-auto divide-y divide-slate-100",children:t.trucks.map((x,v)=>o.jsx("div",{className:"px-6 py-3 text-sm font-bold text-slate-500 hover:text-slate-900",children:x},v))})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",placeholder:"New Trailer ID...",className:"flex-1 p-3 bg-white border border-slate-200 rounded-xl text-xs font-bold uppercase outline-none focus:ring-2 focus:ring-emerald-50",value:d,onChange:x=>f(x.target.value)}),o.jsx("button",{onClick:()=>w("trailer"),disabled:u||!d.trim()||s,className:"px-5 py-3 bg-emerald-600 text-white rounded-xl font-bold text-[10px] uppercase tracking-widest disabled:opacity-30",children:"Add"})]}),o.jsxs("div",{className:"bg-slate-50/50 rounded-2xl border border-slate-100 overflow-hidden",children:[o.jsxs("div",{className:"p-4 bg-slate-100/50 border-b border-slate-200/50 flex justify-between",children:[o.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:"Trailer List"}),o.jsxs("span",{className:"text-[10px] font-bold text-slate-300",children:[t.trailers.length," Units"]})]}),o.jsx("div",{className:"max-h-[300px] overflow-y-auto divide-y divide-slate-100",children:t.trailers.map((x,v)=>o.jsx("div",{className:"px-6 py-3 text-sm font-bold text-slate-500 hover:text-slate-900",children:x},v))})]})]})]})]})},db=({data:e,settings:t})=>o.jsxs("div",{className:"max-w-[210mm] mx-auto text-sm leading-tight text-gray-900 font-sans p-8 bg-white min-h-[297mm]",children:[o.jsxs("div",{className:"flex flex-col items-center mb-6",children:[o.jsx("div",{className:"flex flex-col items-center justify-center gap-2 mb-6 w-full",children:t.companyLogo?o.jsx("img",{src:t.companyLogo,alt:"Company Logo",className:"h-28 max-w-sm object-contain"}):o.jsx("div",{className:"text-center py-4",children:o.jsx("h1",{className:"text-3xl font-serif font-bold text-gray-900 tracking-wide",children:t.companyName||"Company Name"})})}),o.jsxs("div",{className:"w-full border-2 border-black mt-2",children:[o.jsxs("div",{className:"grid grid-cols-3 divide-x-2 divide-black border-b-2 border-black",children:[o.jsx("div",{className:"p-1.5 pl-2 font-medium text-sm",children:"Doc. No. MNT-F-015"}),o.jsx("div",{className:"p-1.5 pl-2 font-medium text-sm",children:"Revision No.: 01"}),o.jsxs("div",{className:"p-1.5 pl-2 font-medium text-sm",children:["Date/Time: ",new Date(e.timestamp).toLocaleString()]})]}),o.jsx("div",{className:"p-2 text-center font-black text-xl uppercase tracking-wide bg-gray-50",children:"GENERAL VEHICLE CHECKLIST"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-3 mb-6 p-4 border border-gray-300 text-xs",children:[o.jsxs("div",{className:"grid grid-cols-[100px_1fr] gap-2 items-center",children:[o.jsx("span",{className:"font-bold uppercase text-gray-600",children:"Reg No:"}),o.jsx("span",{className:"font-mono font-bold text-base border-b border-gray-300",children:e.truckNo||"N/A"})]}),o.jsxs("div",{className:"grid grid-cols-[100px_1fr] gap-2 items-center",children:[o.jsx("span",{className:"font-bold uppercase text-gray-600",children:"Trailer/Unit:"}),o.jsx("span",{className:"font-mono font-bold text-base border-b border-gray-300",children:e.trailerNo||"N/A"})]}),o.jsxs("div",{className:"grid grid-cols-[100px_1fr] gap-2 items-center",children:[o.jsx("span",{className:"font-bold uppercase text-gray-600",children:"Driver Name:"}),o.jsx("span",{className:"font-medium border-b border-gray-300",children:e.driverName||"N/A"})]}),o.jsxs("div",{className:"grid grid-cols-[100px_1fr] gap-2 items-center",children:[o.jsx("span",{className:"font-bold uppercase text-gray-600",children:"Inspected By:"}),o.jsx("span",{className:"font-medium border-b border-gray-300",children:e.inspectedBy||"N/A"})]}),o.jsxs("div",{className:"grid grid-cols-[100px_1fr] gap-2 items-center",children:[o.jsx("span",{className:"font-bold uppercase text-gray-600",children:"Location:"}),o.jsx("span",{className:"font-medium border-b border-gray-300",children:e.location||"N/A"})]}),o.jsxs("div",{className:"grid grid-cols-[100px_1fr] gap-2 items-center",children:[o.jsx("span",{className:"font-bold uppercase text-gray-600",children:"Odometer:"}),o.jsxs("span",{className:"font-medium border-b border-gray-300",children:[e.odometer||"N/A"," km"]})]})]}),o.jsx("div",{className:"mb-6",children:o.jsx("div",{className:"grid grid-cols-2 gap-x-8 gap-y-0 border-t border-gray-300",children:dr.map((n,r)=>{const s=e[n.id];let i="text-gray-900",l="";return s==="Bad"&&(i="text-red-700 font-bold",l="bg-red-50"),s==="Needs Attention"&&(i="text-amber-700 font-bold",l="bg-amber-50"),s==="Nil"&&(i="text-gray-400 italic"),o.jsxs("div",{className:`flex justify-between items-center border-b border-gray-300 py-1.5 px-2 text-xs ${l} ${r%2===0?"pr-4 border-r border-gray-300":"pl-4"}`,children:[o.jsx("span",{className:"text-gray-800 font-medium",children:n.label}),o.jsx("span",{className:`uppercase tracking-tighter ${i}`,children:s})]},n.id)})})}),o.jsxs("div",{className:"grid grid-cols-2 gap-12 mt-8 border-t-2 border-black pt-6 break-inside-avoid",children:[o.jsxs("div",{className:"text-center",children:[e.driverSignature?o.jsx("img",{src:e.driverSignature,className:"h-12 mx-auto mb-1",alt:"Driver Sig"}):o.jsx("div",{className:"h-12"}),o.jsx("p",{className:"border-t border-gray-400 pt-1 font-bold uppercase text-[10px] tracking-widest text-gray-600",children:"Driver Signature"})]}),o.jsxs("div",{className:"text-center",children:[e.inspectorSignature?o.jsx("img",{src:e.inspectorSignature,className:"h-12 mx-auto mb-1",alt:"Inspector Sig"}):o.jsx("div",{className:"h-12"}),o.jsx("p",{className:"border-t border-gray-400 pt-1 font-bold uppercase text-[10px] tracking-widest text-gray-600",children:"Inspector Signature"})]})]})]}),ub=({data:e,settings:t})=>o.jsxs("div",{className:"max-w-[210mm] mx-auto text-sm leading-tight text-gray-900 font-sans p-8 bg-white min-h-[297mm]",children:[o.jsxs("div",{className:"border border-black mb-6",children:[o.jsxs("div",{className:"grid grid-cols-[120px_1fr_150px] divide-x divide-black border-b border-black",children:[o.jsx("div",{className:"p-2 flex items-center justify-center",children:t.companyLogo?o.jsx("img",{src:t.companyLogo,alt:"Logo",className:"w-20 object-contain"}):o.jsx("span",{className:"font-bold text-xs",children:t.companyName})}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("div",{className:"border-b border-black px-2 py-1 text-xs font-medium",children:"Doc No: MNT  F  002"}),o.jsx("div",{className:"flex-1 flex items-center justify-center p-2",children:o.jsx("h1",{className:"text-xl font-bold uppercase tracking-wider text-center",children:"PETROLEUM TANKER CHECKLIST"})})]}),o.jsxs("div",{className:"text-xs divide-y divide-black",children:[o.jsxs("div",{className:"grid grid-cols-[1fr_80px]",children:[o.jsx("span",{className:"p-1 pl-2 border-r border-black",children:"Initial Issue Date"}),o.jsx("span",{className:"p-1 text-center",children:"03/02/2017"})]}),o.jsxs("div",{className:"grid grid-cols-[1fr_80px]",children:[o.jsx("span",{className:"p-1 pl-2 border-r border-black",children:"Revision Date:"}),o.jsx("span",{className:"p-1 text-center",children:"01/02/2024"})]}),o.jsxs("div",{className:"grid grid-cols-[1fr_80px]",children:[o.jsx("span",{className:"p-1 pl-2 border-r border-black",children:"Revision No."}),o.jsx("span",{className:"p-1 text-center",children:"05"})]}),o.jsxs("div",{className:"grid grid-cols-[1fr_80px]",children:[o.jsx("span",{className:"p-1 pl-2 border-r border-black",children:"Next Revision:"}),o.jsx("span",{className:"p-1 text-center",children:"12/04/2026"})]})]})]}),o.jsx("div",{className:"bg-gray-50 p-4 text-xs font-mono border-b border-black",children:o.jsxs("div",{className:"grid grid-cols-2 gap-y-2 gap-x-8",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"TRUCK #:"})," ",o.jsx("span",{className:"font-bold",children:e.truckNo})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"TRAILER #:"})," ",o.jsx("span",{className:"font-bold",children:e.trailerNo})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"JOB CARD #:"})," ",o.jsx("span",{className:"font-bold",children:e.jobCard})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"DATE/TIME:"})," ",o.jsx("span",{className:"font-bold",children:new Date(e.timestamp).toLocaleString()})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"ODOMETER:"})," ",o.jsx("span",{className:"font-bold",children:e.odometer})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"LOCATION:"})," ",o.jsx("span",{className:"font-bold",children:e.location})]})]})}),o.jsx("div",{className:"p-2 text-[10px] text-center font-medium border-black bg-gray-100 italic",children:"NA = Not Applicable, NI = Not Inspected, Tick to indicate status under Good Order or Needs Attention. If Tick Critical (Bad), The Truck Must Not Leave The Garage Until The Problem Has Been Fixed."})]}),o.jsxs("div",{className:"border border-black text-xs",children:[o.jsxs("div",{className:"grid grid-cols-[30px_1fr_60px_70px_60px_1fr] bg-gray-300 border-b border-black font-bold text-center items-center py-2",children:[o.jsx("span",{children:"No."}),o.jsx("span",{className:"text-left pl-2",children:"ITEM DESCRIPTION"}),o.jsx("span",{children:"Good Order"}),o.jsx("span",{children:"Needs Attn"}),o.jsx("span",{children:"Critical"}),o.jsx("span",{children:"COMMENTS"})]}),Wo.map((n,r)=>{const s=e[n.id],i=s===de.GOOD,l=s===de.ATTENTION,d=s===de.BAD,f=n.label.split(". "),u=f[0]+".",p=f.slice(1).join(". ");return o.jsxs("div",{className:`grid grid-cols-[30px_1fr_60px_70px_60px_1fr] border-b border-gray-400 min-h-[30px] items-center ${r%2===0?"bg-white":"bg-gray-50"}`,children:[o.jsx("span",{className:"text-center font-medium",children:u}),o.jsx("span",{className:"pl-2 border-l border-gray-300 h-full flex items-center py-1",children:p}),o.jsx("span",{className:"border-l border-gray-300 h-full flex items-center justify-center font-bold text-green-600",children:i?"":""}),o.jsx("span",{className:"border-l border-gray-300 h-full flex items-center justify-center font-bold text-amber-600",children:l?"!":""}),o.jsx("span",{className:"border-l border-gray-300 h-full flex items-center justify-center font-bold text-red-600 bg-red-50",children:d?"X":""}),o.jsx("span",{className:"border-l border-gray-300 h-full flex items-center pl-2 italic text-gray-500 py-1",children:d?"CRITICAL FAULT":l?"Check required":""})]},n.id)})]}),o.jsxs("div",{className:"mt-6 border border-black p-2 min-h-[60px]",children:[o.jsx("span",{className:"font-bold underline",children:"Remarks:"})," ",e.remarks]}),o.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-8 text-xs",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between border-b border-gray-400 pb-1",children:[o.jsx("span",{children:"Inspected By:"})," ",o.jsx("span",{className:"font-bold",children:e.inspectedBy})]}),o.jsxs("div",{className:"flex justify-between border-b border-gray-400 pb-1 items-end",children:[o.jsx("span",{children:"Inspector Sign:"}),e.inspectorSignature&&o.jsx("img",{src:e.inspectorSignature,className:"h-8",alt:"Sig"})]}),o.jsxs("div",{className:"flex justify-between border-b border-gray-400 pb-1",children:[o.jsx("span",{children:"Date:"})," ",o.jsx("span",{children:new Date(e.timestamp).toLocaleDateString()})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between border-b border-gray-400 pb-1",children:[o.jsx("span",{children:"Driver Name:"})," ",o.jsx("span",{className:"font-bold",children:e.driverName})]}),o.jsxs("div",{className:"flex justify-between border-b border-gray-400 pb-1 items-end",children:[o.jsx("span",{children:"Driver Sign:"}),e.driverSignature&&o.jsx("img",{src:e.driverSignature,className:"h-8",alt:"Sig"})]}),o.jsxs("div",{className:"flex justify-between border-b border-gray-400 pb-1",children:[o.jsx("span",{children:"Date:"})," ",o.jsx("span",{children:new Date(e.timestamp).toLocaleDateString()})]})]})]})]}),fb=({data:e,settings:t})=>o.jsxs("div",{className:"max-w-[210mm] mx-auto text-sm leading-tight text-gray-900 font-sans p-8 bg-white min-h-[297mm]",children:[o.jsxs("div",{className:"border border-black mb-6",children:[o.jsxs("div",{className:"grid grid-cols-[120px_1fr_150px] divide-x divide-black border-b border-black",children:[o.jsx("div",{className:"p-2 flex items-center justify-center",children:t.companyLogo?o.jsx("img",{src:t.companyLogo,alt:"Logo",className:"w-20 object-contain"}):o.jsx("span",{className:"font-bold text-xs",children:t.companyName})}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("div",{className:"border-b border-black px-2 py-1 text-xs font-medium",children:"Doc No: MNT  F  002"}),o.jsx("div",{className:"flex-1 flex items-center justify-center p-2",children:o.jsx("h1",{className:"text-xl font-bold uppercase tracking-wider text-center",children:"PETROLEUM TANKER CHECKLIST"})})]}),o.jsxs("div",{className:"text-xs divide-y divide-black",children:[o.jsxs("div",{className:"grid grid-cols-[1fr_80px]",children:[o.jsx("span",{className:"p-1 pl-2 border-r border-black",children:"Initial Issue Date"}),o.jsx("span",{className:"p-1 text-center",children:"03/02/2017"})]}),o.jsxs("div",{className:"grid grid-cols-[1fr_80px]",children:[o.jsx("span",{className:"p-1 pl-2 border-r border-black",children:"Revision Date:"}),o.jsx("span",{className:"p-1 text-center",children:"15/03/2022"})]}),o.jsxs("div",{className:"grid grid-cols-[1fr_80px]",children:[o.jsx("span",{className:"p-1 pl-2 border-r border-black",children:"Revision No."}),o.jsx("span",{className:"p-1 text-center",children:"05"})]}),o.jsxs("div",{className:"grid grid-cols-[1fr_80px]",children:[o.jsx("span",{className:"p-1 pl-2 border-r border-black",children:"Next Review Date:"}),o.jsx("span",{className:"p-1 text-center",children:"15/04/2025"})]})]})]}),o.jsx("div",{className:"bg-gray-50 p-4 text-xs font-mono border-b border-black",children:o.jsxs("div",{className:"grid grid-cols-2 gap-y-2 gap-x-8",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"TRUCK #:"})," ",o.jsx("span",{className:"font-bold",children:e.truckNo})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"TRAILER #:"})," ",o.jsx("span",{className:"font-bold",children:e.trailerNo})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"JOB CARD #:"})," ",o.jsx("span",{className:"font-bold",children:e.jobCard})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"DATE/TIME:"})," ",o.jsx("span",{className:"font-bold",children:new Date(e.timestamp).toLocaleString()})]})]})}),o.jsxs("div",{className:"p-2 text-[10px] text-center font-bold border-black bg-gray-100",children:["C = Compliant, NC = Non-Compliant, NA = Not Applicable, NI = Not Inspected (Tick Accordingly)",o.jsx("br",{}),"Critical = Do Not Release, Non-Critical = Waiver Applicable"]})]}),o.jsxs("div",{className:"border border-black text-xs mb-8",children:[o.jsxs("div",{className:"grid grid-cols-[30px_1fr_30px_30px_30px_30px_1fr] bg-gray-300 border-b border-black font-bold text-center items-center py-2",children:[o.jsx("span",{children:"No."}),o.jsx("span",{className:"text-left pl-2",children:"ITEM DESCRIPTION"}),o.jsx("span",{children:"C"}),o.jsx("span",{children:"NC"}),o.jsx("span",{children:"NI"}),o.jsx("span",{children:"NA"}),o.jsx("span",{children:"COMMENTS"})]}),Jo.map((n,r)=>{const s=e[n.id],i=s===de.GOOD,l=s===de.BAD,d=s===de.NIL,f=s===de.ATTENTION,u=n.label.split(". "),p=u[0],m=u.slice(1).join(". ");let h=null;return n.id==="petro2_1"&&(h="PRIME MOVER"),n.id==="petro2_16"&&(h="TRAILER/TANKS"),n.id==="petro2_33"&&(h="DRIVER"),n.id==="petro2_38"&&(h="SAFETY & WARNING SIGNS"),n.id==="petro2_45"&&(h="LICENCE & MANDATORY DOCUMENTS"),o.jsxs(Zs.Fragment,{children:[h&&o.jsx("div",{className:"grid grid-cols-[1fr] bg-gray-200 border-b border-black font-bold px-2 py-1 text-center border-t-2 border-t-black",children:h}),o.jsxs("div",{className:`grid grid-cols-[30px_1fr_30px_30px_30px_30px_1fr] border-b border-gray-400 min-h-[30px] items-stretch ${r%2===0?"bg-white":"bg-gray-50"}`,children:[o.jsx("span",{className:"text-center font-medium py-1 border-r border-gray-300 flex items-center justify-center",children:p}),o.jsx("span",{className:"pl-2 border-r border-gray-300 flex items-center py-1",children:m}),o.jsx("span",{className:"border-r border-gray-300 flex items-center justify-center font-bold text-black",children:i?"":""}),o.jsx("span",{className:"border-r border-gray-300 flex items-center justify-center font-bold text-black",children:l?"":""}),o.jsx("span",{className:"border-r border-gray-300 flex items-center justify-center font-bold text-black",children:d?"":""}),o.jsx("span",{className:"border-r border-gray-300 flex items-center justify-center font-bold text-black",children:f?"":""}),o.jsx("span",{className:"flex items-center pl-2 italic text-gray-500 py-1",children:l?"NON-COMPLIANT":f?"N/A":""})]})]},n.id)})]}),o.jsxs("div",{className:"mt-6 border border-black p-2 min-h-[60px]",children:[o.jsx("span",{className:"font-bold underline",children:"Remarks:"})," ",e.remarks]}),o.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-8 text-xs",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between border-b border-gray-400 pb-1",children:[o.jsx("span",{children:"Inspected By:"})," ",o.jsx("span",{className:"font-bold",children:e.inspectedBy})]}),o.jsxs("div",{className:"flex justify-between border-b border-gray-400 pb-1 items-end",children:[o.jsx("span",{children:"Inspector Sign:"}),e.inspectorSignature&&o.jsx("img",{src:e.inspectorSignature,className:"h-8",alt:"Sig"})]}),o.jsxs("div",{className:"flex justify-between border-b border-gray-400 pb-1",children:[o.jsx("span",{children:"Date:"})," ",o.jsx("span",{children:new Date(e.timestamp).toLocaleDateString()})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between border-b border-gray-400 pb-1",children:[o.jsx("span",{children:"Driver Name:"})," ",o.jsx("span",{className:"font-bold",children:e.driverName})]}),o.jsxs("div",{className:"flex justify-between border-b border-gray-400 pb-1 items-end",children:[o.jsx("span",{children:"Driver Sign:"}),e.driverSignature&&o.jsx("img",{src:e.driverSignature,className:"h-8",alt:"Sig"})]}),o.jsxs("div",{className:"flex justify-between border-b border-gray-400 pb-1",children:[o.jsx("span",{children:"Date:"})," ",o.jsx("span",{children:new Date(e.timestamp).toLocaleDateString()})]})]})]})]}),pb=({data:e,settings:t})=>o.jsxs("div",{className:"max-w-[210mm] mx-auto text-sm leading-tight text-gray-900 font-sans p-8 bg-white min-h-[297mm]",children:[o.jsx("div",{className:"border-2 border-black mb-4",children:o.jsxs("div",{className:"grid grid-cols-[120px_1fr_150px] divide-x-2 divide-black border-b-2 border-black",children:[o.jsx("div",{className:"p-2 flex items-center justify-center",children:t.companyLogo?o.jsx("img",{src:t.companyLogo,alt:"Logo",className:"w-24 object-contain"}):o.jsx("span",{className:"font-bold text-xs",children:t.companyName})}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("div",{className:"border-b-2 border-black px-2 py-1 text-xs font-medium",children:"Doc No: MNT  F  013"}),o.jsx("div",{className:"flex-1 flex items-center justify-center p-2 bg-gray-50",children:o.jsx("h1",{className:"text-xl font-black uppercase tracking-wider text-center",children:"ACID TANKER CHECKLIST"})})]}),o.jsxs("div",{className:"text-xs divide-y divide-black",children:[o.jsxs("div",{className:"grid grid-cols-[1fr_80px]",children:[o.jsx("span",{className:"p-1 pl-2 border-r border-black font-semibold",children:"Initial Issue Date"}),o.jsx("span",{className:"p-1 text-center",children:"03/02/2017"})]}),o.jsxs("div",{className:"grid grid-cols-[1fr_80px]",children:[o.jsx("span",{className:"p-1 pl-2 border-r border-black font-semibold",children:"Revision Date:"}),o.jsx("span",{className:"p-1 text-center",children:"15/03/2022"})]}),o.jsxs("div",{className:"grid grid-cols-[1fr_80px]",children:[o.jsx("span",{className:"p-1 pl-2 border-r border-black font-semibold",children:"Revision No."}),o.jsx("span",{className:"p-1 text-center",children:"05"})]}),o.jsxs("div",{className:"grid grid-cols-[1fr_80px]",children:[o.jsx("span",{className:"p-1 pl-2 border-r border-black font-semibold",children:"Next Revision:"}),o.jsx("span",{className:"p-1 text-center",children:"15/03/2023"})]})]})]})}),o.jsxs("div",{className:"mb-4 text-xs font-mono",children:[o.jsxs("div",{className:"flex flex-wrap gap-x-8 gap-y-2 mb-2",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("span",{children:"Horse #:"})," ",o.jsx("span",{className:"font-bold border-b border-gray-400 min-w-[100px]",children:e.truckNo})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("span",{children:"Trailer #:"})," ",o.jsx("span",{className:"font-bold border-b border-gray-400 min-w-[100px]",children:e.trailerNo})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("span",{children:"Job Card #:"})," ",o.jsx("span",{className:"font-bold border-b border-gray-400 min-w-[100px]",children:e.jobCard})]})]}),o.jsxs("div",{className:"flex flex-wrap gap-x-8 gap-y-2",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("span",{children:"Location:"})," ",o.jsx("span",{className:"font-bold border-b border-gray-400 min-w-[150px]",children:e.location})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("span",{children:"Inspection Date/Time:"})," ",o.jsx("span",{className:"font-bold border-b border-gray-400 min-w-[150px]",children:new Date(e.timestamp).toLocaleString()})]})]})]}),o.jsxs("div",{className:"border-2 border-black text-xs",children:[o.jsxs("div",{className:"grid grid-cols-[40px_1fr_120px] bg-white border-b-2 border-black font-bold items-center",children:[o.jsx("span",{className:"text-center py-2 border-r border-black",children:"S/N"}),o.jsx("span",{className:"text-left pl-2 py-2 border-r border-black",children:"ITEM"}),o.jsx("span",{className:"pl-2 py-2",children:"COMMENT"})]}),["PPE","VEHICLE","SPILL_KIT","DOCUMENTATION"].map(n=>{let r="",s=[];return n==="PPE"?(r="A. Personal Protective Equipment (PPE)",s=vn.filter(i=>i.category.includes("Personal"))):n==="VEHICLE"?(r="B. Vehicle (Horse & Trailer)",s=vn.filter(i=>i.category.includes("Vehicle"))):n==="SPILL_KIT"?(r="C. Spill Kit",s=vn.filter(i=>i.category.includes("Spill"))):n==="DOCUMENTATION"&&(r="D. Documentation",s=vn.filter(i=>i.category.includes("Documentation"))),o.jsxs(Zs.Fragment,{children:[o.jsx("div",{className:"grid grid-cols-[1fr] border-b border-black bg-gray-100 font-bold px-2 py-1",children:r}),s.map((i,l)=>{const d=e[i.id],f=i.label.split(". "),u=f[0],p=f.slice(1).join(". ");let m="";return d===de.GOOD?m="text-green-700 font-bold":d===de.BAD?m="text-red-700 font-bold bg-red-50":d===de.ATTENTION&&(m="text-amber-700 font-bold bg-amber-50"),o.jsxs("div",{className:"grid grid-cols-[40px_1fr_120px] border-b border-black items-stretch",children:[o.jsx("span",{className:"text-center py-1 border-r border-black flex items-center justify-center font-semibold",children:u}),o.jsx("span",{className:"pl-2 py-1 border-r border-black flex items-center",children:p}),o.jsx("span",{className:`pl-2 py-1 flex items-center ${m}`,children:d||"-"})]},i.id)})]},n)})]}),o.jsxs("div",{className:"mt-4 text-xs space-y-4",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("span",{className:"font-semibold",children:"Remarks:"}),o.jsx("span",{className:"border-b border-black flex-1 border-dashed",children:e.remarks})]}),o.jsxs("div",{className:"flex gap-2 items-center",children:[o.jsx("span",{className:"font-semibold w-24",children:"Inspector:"}),o.jsx("span",{className:"border-b border-black flex-1 border-dashed",children:e.inspectedBy})]}),o.jsxs("div",{className:"flex gap-2 items-end",children:[o.jsx("span",{className:"font-semibold w-24",children:"Inspector Sig:"}),o.jsx("div",{className:"border-b border-black flex-1 border-dashed h-12",children:e.inspectorSignature&&o.jsx("img",{src:e.inspectorSignature,className:"h-full object-contain"})})]}),o.jsxs("div",{className:"flex gap-2 items-center",children:[o.jsx("span",{className:"font-semibold w-24",children:"Driver:"}),o.jsx("span",{className:"border-b border-black flex-1 border-dashed",children:e.driverName})]}),o.jsxs("div",{className:"flex gap-2 items-end",children:[o.jsx("span",{className:"font-semibold w-24",children:"Driver Sig:"}),o.jsx("div",{className:"border-b border-black flex-1 border-dashed h-12",children:e.driverSignature&&o.jsx("img",{src:e.driverSignature,className:"h-full object-contain"})})]})]}),o.jsxs("div",{className:"mt-6 text-xs",children:[o.jsx("p",{className:"font-bold mb-2",children:"Pictures of Damage/Broken/Disfigured etc.:"}),o.jsx("div",{className:"h-32 border border-black flex items-center justify-center bg-gray-50 mb-4",children:e.photoDamage?o.jsx("img",{src:e.photoDamage,className:"h-full object-contain"}):o.jsx("span",{className:"text-gray-400",children:"No damage photo"})}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-bold mb-1",children:"Front Picture:"}),o.jsx("div",{className:"h-32 border border-black flex items-center justify-center bg-gray-50",children:e.photoFront?o.jsx("img",{src:e.photoFront,className:"h-full object-contain"}):o.jsx("span",{className:"text-gray-400",children:"No photo"})})]}),o.jsxs("div",{children:[o.jsx("p",{className:"font-bold mb-1",children:"LS Picture:"}),o.jsx("div",{className:"h-32 border border-black flex items-center justify-center bg-gray-50",children:e.photoLS?o.jsx("img",{src:e.photoLS,className:"h-full object-contain"}):o.jsx("span",{className:"text-gray-400",children:"No photo"})})]}),o.jsxs("div",{children:[o.jsx("p",{className:"font-bold mb-1",children:"BS Picture:"}),o.jsx("div",{className:"h-32 border border-black flex items-center justify-center bg-gray-50",children:e.photoBack?o.jsx("img",{src:e.photoBack,className:"h-full object-contain"}):o.jsx("span",{className:"text-gray-400",children:"No photo"})})]}),o.jsxs("div",{children:[o.jsx("p",{className:"font-bold mb-1",children:"RS Picture:"}),o.jsx("div",{className:"h-32 border border-black flex items-center justify-center bg-gray-50",children:e.photoRS?o.jsx("img",{src:e.photoRS,className:"h-full object-contain"}):o.jsx("span",{className:"text-gray-400",children:"No photo"})})]})]})]})]}),mb=()=>{const{currentUser:e,setCurrentUser:t,handleLogin:n,handleLogout:r,sessionExpired:s,setSessionExpired:i}=ex(),{settings:l,setSettings:d,appScriptUrl:f,setAppScriptUrl:u,isSavingSettings:p,handleSaveSettings:m,fetchSystemSettings:h}=tx(),{subscription:g,history:w,refreshSubscription:N}=ix(f,e),[S,x]=_.useState("overview"),[v,y]=_.useState("dashboard"),[C,b]=_.useState(!1),[E,k]=_.useState(null),[T,I]=_.useState(!1),[M,L]=_.useState(!1),[R,P]=_.useState(!1),[A,F]=_.useState(null),[z,J]=_.useState(null),[j,H]=_.useState(!1),[q,Z]=_.useState(null),[$,se]=_.useState(!1),{historyList:re,isLoadingHistory:te,validationLists:oe,stats:O,fetchHistory:Ne}=sx(f,S,e);_.useEffect(()=>{e&&!e.needsSetup&&(x("overview"),y("dashboard"))},[e==null?void 0:e.username,e==null?void 0:e.needsSetup]);const Ye=_.useMemo(()=>{const W=(e==null?void 0:e.role)==="SuperAdmin",fe=g?g.status==="Expired"||g.daysRemaining<=0:!1,Ue=l.maintenanceMode===!0;return W?{isLocked:!1,reason:null}:Ue?{isLocked:!0,reason:"maintenance"}:fe?{isLocked:!0,reason:"license"}:{isLocked:!1,reason:null}},[g,l.maintenanceMode,e==null?void 0:e.role]),ve=Ye.isLocked;_.useEffect(()=>{window.isSubscriptionLocked=ve},[ve]);const le=(W,fe)=>{k({message:W,type:fe}),setTimeout(()=>k(null),4e3)};_.useEffect(()=>{s==="idle"?le("Session expired due to inactivity.","warning"):s==="max_duration"&&le("Session limit reached. Log in again.","info"),s&&i(null)},[s]);const{submissionStatus:In,setSubmissionStatus:rt,addToQueue:Wa}=ox(f,le,()=>Ne(!0)),si=W=>{var fe;if(W.startsWith("request:start_inspection")){if(ve){le("Action Restricted: System is in View-Only mode.","error");return}const Ue=W.split("|"),Ht=(fe=Ue[1])==null?void 0:fe.toLowerCase(),Rn=Ue[2],li=Ue[3],ai=Ue[4],xr=Ue[5];let Te="general";Ht==="petroleum"?Te="petroleum":Ht==="petroleum_v2"?Te="petroleum_v2":Ht==="acid"&&(Te="acid"),x(Te),ii(Te,{truckNo:Rn,trailerNo:li,remarks:`Requested by ${ai}: ${xr}`,requestId:Ue[0].split("-")[1]});return}x(W),y("dashboard")},ds=W=>{if(ve){le("Action Restricted: System is in View-Only mode.","error");return}const fe=`sc_draft_${W}`;localStorage.getItem(fe)?(Z(W),se(!0),H(!0)):ii()},{notifications:Ja,handleMarkNotificationRead:rh,handleDismissNotification:sh,handleClearAllNotifications:oh,handleGlobalAcknowledge:ih}=nx(f,e,le),[lh,Ka]=_.useState(!1),[An,ah]=_.useState(null),[ch,Ya]=_.useState(id),oi=(e==null?void 0:e.role)==="Admin"||(e==null?void 0:e.role)==="SuperAdmin",dh=(e==null?void 0:e.role)==="SuperAdmin",ii=(W,fe)=>{if(ve){le("RESTRICTED: View-Only mode active.","error");return}F(null),J(null),Ya({...id,timestamp:new Date().toISOString(),inspectedBy:(e==null?void 0:e.name)||"",...fe}),y("form")},uh=()=>{if(!q)return;const W=`sc_draft_${q}`,fe=localStorage.getItem(W);fe&&(Ya(JSON.parse(fe)),x(q),y("form")),H(!1)},fh=()=>{q&&(localStorage.removeItem(`sc_draft_${q}`),x(q),ii(),H(!1))},ph=W=>{localStorage.setItem(`sc_draft_${S}`,JSON.stringify(W)),y("dashboard")},mh=()=>y("dashboard"),hh=async W=>{if(ve){le("RESTRICTED: View-Only mode. Submission blocked.","error");return}if(!f){le("Server URL not configured","error");return}rt("submitting"),F(W),J(null);let fe="General",Ue=lm,Ht="General Vehicle Inspection",Rn=dr;S==="petroleum"?(fe="Petroleum",Ue=am,Ht="Petroleum Tanker Inspection",Rn=Wo):S==="petroleum_v2"?(fe="Petroleum_V2",Ue=cm,Ht="Petroleum Tanker Inspection V2",Rn=Jo):S==="acid"&&(fe="Acid",Ue=dm,Ht="Acid Tanker Inspection",Rn=vn);const li=Ue.map(Te=>W[Te]!==void 0?W[Te]:""),ai={title:Ht,timestamp:W.timestamp,truckNo:W.truckNo,trailerNo:W.trailerNo,jobCard:W.jobCard,location:W.location,odometer:W.odometer,inspectedBy:W.inspectedBy,driverName:W.driverName,remarks:W.remarks,rate:W.rate,signatures:{inspector:W.inspectorSignature,driver:W.driverSignature},photos:{front:W.photoFront,ls:W.photoLS,rs:W.photoRS,back:W.photoBack,damage:W.photoDamage},items:Rn.map(Te=>({label:Te.label,category:Te.category,status:W[Te.id]||"N/A"})),companyName:l.companyName,companyLogo:l.companyLogo},xr={action:"create",sheet:fe,headers:Ue,row:li,requestId:W.requestId||null,reportData:ai};if(!navigator.onLine){Wa(xr),localStorage.removeItem(`sc_draft_${S}`),rt("offline_saved"),setTimeout(()=>{rt("idle"),y("dashboard")},3500);return}try{await fetch(f,{method:"POST",body:JSON.stringify(xr),mode:"no-cors"}),rt("success"),localStorage.removeItem(`sc_draft_${S}`);try{const Te=await vS(W);J(Te)}catch{J("AI analysis skipped due to connectivity or processing error.")}Ne(!0)}catch(Te){console.error("Submission error",Te),Wa(xr),localStorage.removeItem(`sc_draft_${S}`),rt("offline_saved"),setTimeout(()=>{rt("idle"),y("dashboard")},3500)}},gh=async W=>{if(ve){le("RESTRICTED: View-Only mode. Requests disabled.","error");return}if(f)try{await fetch(f,{method:"POST",body:JSON.stringify({action:"request_inspection",requester:e==null?void 0:e.name,role:e==null?void 0:e.role,...W}),mode:"no-cors"}),le("Inspection Request submitted successfully","success")}catch{le("Failed to submit request","error")}},dn=W=>{ah(W),Ka(!0)},xh=W=>{const fe={...W,needsSetup:!1};t(fe),localStorage.setItem("safetyCheck_user",JSON.stringify(fe)),x("overview"),y("dashboard"),le("Identity verified. Welcome aboard!","success"),L(!0)},vh=async()=>{P(!0);try{await h(f,!0),le("System status updated.","info")}finally{P(!1)}},yh=S==="overview";return e?e&&e.needsSetup?o.jsx(_S,{user:e,appScriptUrl:f,onComplete:xh}):o.jsxs("div",{className:"min-h-screen bg-white font-sans text-gray-900 relative",children:[o.jsx(wS,{status:In,onClose:()=>{rt("idle"),y("dashboard")},onViewReport:()=>A&&dn(A),aiAnalysis:z}),E&&o.jsx(Ou,{message:E.message,type:E.type,onClose:()=>k(null)}),M&&o.jsx(kS,{onComplete:()=>L(!1)}),C&&o.jsx(NS,{user:e,settings:l,appScriptUrl:f,onClose:()=>b(!1),showToast:le,onUpdateSuccess:W=>t(W),onLogout:()=>{b(!1),r()}}),o.jsx(ES,{isOpen:T,onClose:()=>I(!1),onSubmit:gh,validationLists:oe,currentUserRole:e.role}),o.jsx(bS,{isOpen:j,onClose:()=>H(!1),onStartNew:fh,onResume:uh,hasDraft:$,moduleName:q||""}),o.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[o.jsxs("div",{className:"no-print",children:[l.maintenanceMode&&o.jsxs("div",{className:"bg-amber-600 px-4 py-3 flex flex-col sm:flex-row items-center justify-center gap-2 sm:gap-6 text-white shadow-lg relative z-[101]",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center animate-pulse",children:o.jsx("svg",{className:"w-5 h-5 text-amber-100",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),o.jsxs("div",{className:"text-center sm:text-left",children:[o.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.2em] mb-1",children:"System Maintenance Mode Active"}),o.jsx("p",{className:"text-[11px] font-medium text-amber-5 text-amber-50 leading-tight",children:l.maintenanceMessage||"Restricted view-only mode enabled."})]})]}),o.jsxs("button",{onClick:vh,disabled:R,className:"px-4 py-1.5 bg-white/10 hover:bg-white/20 border border-white/30 rounded-lg text-[9px] font-black uppercase tracking-widest transition-all flex items-center gap-2",children:[R?o.jsxs("svg",{className:"animate-spin h-3 w-3",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):null,R?"Checking...":"Check Status"]})]}),o.jsx(CS,{subscription:g,user:e,onManage:()=>x("maintenance")})]}),o.jsxs("header",{className:"bg-white border-b border-gray-100 sticky top-0 z-40 px-4 py-2 flex items-center justify-between h-14 no-print",children:[o.jsx("div",{className:"flex items-center gap-1 sm:gap-2",children:yh?o.jsx("div",{className:"w-10"}):o.jsxs("button",{onClick:()=>{x("overview"),y("dashboard")},title:"Back to Overview",className:"p-2 text-slate-900 hover:bg-slate-50 rounded-lg transition-all flex items-center group",children:[o.jsx("svg",{className:"w-5 h-5 transition-transform group-hover:-translate-x-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),o.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest ml-1 hidden sm:inline",children:"Back"})]})}),o.jsxs("button",{onClick:()=>{x("overview"),y("dashboard")},className:"flex flex-col items-center hover:opacity-70 transition-opacity",children:[o.jsx("h1",{className:"text-lg font-bold text-slate-900 tracking-tight leading-none uppercase",children:l.companyName||"SafetyCheck Pro"}),o.jsx("span",{className:"text-[7px] font-bold text-slate-400 tracking-[0.3em] mt-1 uppercase",children:"Fleet Portal"})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(SS,{id:"notification-bell",notifications:Ja,onMarkAsRead:W=>rh(W,si),onDismiss:sh,onClearAll:oh,onAcknowledge:ih,canAcknowledge:oi}),o.jsx("button",{onClick:()=>b(!0),className:`p-2 transition-colors ${C?"text-slate-900 bg-slate-50 rounded-full":"text-slate-400 hover:text-slate-600"}`,children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2.5",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})]})]}),ve&&o.jsxs("div",{className:"bg-amber-100 border-b border-amber-200 px-4 py-2 flex items-center justify-center gap-3 animate-pulse no-print",children:[o.jsx("svg",{className:"w-4 h-4 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),o.jsx("span",{className:"text-[10px] font-black text-amber-800 uppercase tracking-widest",children:Ye.reason==="maintenance"?"System in Maintenance Mode":"View-Only Mode - License Expired"})]}),o.jsx("main",{className:"flex-1 p-4 md:p-8 w-full max-w-7xl mx-auto no-print",children:v==="form"?o.jsx(ZS,{initialData:ch,activeModule:S,validationLists:oe,settings:l,onSaveDraft:ph,onExit:mh,onSubmit:hh,submissionStatus:In,onViewReport:dn}):o.jsxs("div",{className:"animate-fadeIn",children:[S==="overview"&&o.jsx(XS,{appScriptUrl:f,onNavigate:si,userRole:e.role,historyList:re,isLoading:te,onViewReport:dn,isMaintenanceActive:l.maintenanceMode,pendingAlertsCount:Ja.filter(W=>!W.read&&W.type==="critical").length,isLocked:ve}),S==="analytics"&&o.jsx(ob,{historyList:re,isLoading:te}),S==="fleet_wall"&&o.jsx(ib,{historyList:re,isLoading:te,onClose:()=>si("overview")}),S==="library"&&o.jsx(ab,{}),S==="settings"&&oi&&o.jsx(AS,{settings:l,setSettings:d,appScriptUrl:f,setAppScriptUrl:u,handleSaveSettings:m,isSavingSettings:p,showToast:le,user:e}),S==="maintenance"&&dh&&o.jsx(rb,{user:e,appScriptUrl:f,settings:l,onSettingsUpdate:W=>d(fe=>({...fe,...W})),showToast:le,onRefreshSubscription:N,subscription:g,history:w}),S==="general"&&o.jsx(MS,{userRole:e.role,stats:O,startNewInspection:()=>ds("general"),fetchHistory:Ne,isLoadingHistory:te,historyList:re,onViewReport:dn,onPrint:()=>{},isLocked:ve,lockReason:Ye.reason,maintenanceMessage:l.maintenanceMessage}),S==="petroleum"&&o.jsx(PS,{userRole:e.role,stats:O,startNewInspection:()=>ds("petroleum"),fetchHistory:Ne,isLoadingHistory:te,historyList:re,onViewReport:dn,onPrint:()=>{},isLocked:ve,lockReason:Ye.reason,maintenanceMessage:l.maintenanceMessage}),S==="petroleum_v2"&&o.jsx(jS,{userRole:e.role,stats:O,startNewInspection:()=>ds("petroleum_v2"),fetchHistory:Ne,isLoadingHistory:te,historyList:re,onViewReport:dn,onPrint:()=>{},isLocked:ve,lockReason:Ye.reason,maintenanceMessage:l.maintenanceMessage}),S==="acid"&&o.jsx(LS,{userRole:e.role,stats:O,startNewInspection:()=>ds("acid"),fetchHistory:Ne,isLoadingHistory:te,historyList:re,onViewReport:dn,onPrint:()=>{},isLocked:ve,lockReason:Ye.reason,maintenanceMessage:l.maintenanceMessage}),S==="users"&&oi&&o.jsx(DS,{currentUser:e,appScriptUrl:f,showToast:le,validationLists:oe,settings:l}),S==="support"&&o.jsx(nb,{appScriptUrl:f,currentUser:e,showToast:le,settings:l,validationLists:oe}),S==="track_requests"&&o.jsx(sb,{appScriptUrl:f,currentUser:e,showToast:le,onRequestNew:()=>I(!0)}),S==="registry"&&o.jsx(cb,{appScriptUrl:f,validationLists:oe,onRefresh:()=>Ne(!0),showToast:le,isLocked:ve})]})}),o.jsx("footer",{className:"mt-auto py-6 border-t border-slate-50 text-center no-print",children:o.jsx("span",{className:"text-[9px] font-bold text-slate-300 uppercase tracking-[0.2em]",children:"scbc@2026"})})]}),lh&&An&&o.jsx(yS,{onClose:()=>Ka(!1),onPrint:()=>window.print(),title:`Report_${An.id||"History"}`,children:S==="petroleum"?o.jsx(ub,{data:An,settings:l}):S==="petroleum_v2"?o.jsx(fb,{data:An,settings:l}):S==="acid"?o.jsx(pb,{data:An,settings:l}):o.jsx(db,{data:An,settings:l})})]}):o.jsxs(o.Fragment,{children:[o.jsx(TS,{}),E&&o.jsx(Ou,{message:E.message,type:E.type,onClose:()=>k(null)}),o.jsx(IS,{onLogin:n,appScriptUrl:f,setAppScriptUrl:u,settings:l})]})},$u=document.getElementById("root");$u&&im($u).render(o.jsx(mb,{}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("./sw.js").then(e=>{console.log("ServiceWorker registration successful with scope: ",e.scope)}).catch(e=>{console.log("ServiceWorker registration failed: ",e)})});
